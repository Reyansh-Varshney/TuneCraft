"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[347],{87400:(e,s,t)=>{t.d(s,{HomeSubfeedWithRedirect:()=>ue});var n=t(30758),o=t(97500),i=t.n(o),a=t(65809),r=t(83924),l=t(70397),c=t(60141),d=t(3877),h=t(29324),m=t(84599),u=t(60656),p=t(76667);const g="spotify:list:whats-new:podcasts";t(2557);var f=t(78717),x=t(30831),j=t(6602),w=t(70748),y=t(48410),v=t(83708),A=t(60940),C=t(73136),S=t(25669),N=t(96124),R=t(19151);const _="gOsj_0LXL9CTsq8Y5thr",I="AdZKbrgW2oozW1ALwJZE",P="nGiHauwUvGILHwpcXqIW";var L=t(86070);const E=({hasActiveFilter:e=!1})=>{const{followsPodcasts:s}=(()=>{const e=(0,N.f)(),[s,t]=(0,n.useState)(null);return(0,n.useEffect)((()=>{!async function(){try{const s=e.getContentsPrimaryFilterId(R.c.SHOW);if(!s)return void t(!1);const n=await e.getContents({offset:0,limit:1,filters:[s]});t(n.items.length>0)}catch(e){t(!1)}}()}),[e]),{followsPodcasts:s}})(),t=!e&&!0===s;return(0,L.jsxs)("div",{className:_,children:[t?(0,L.jsx)(A.i,{size:"xlarge",semanticColor:"textBase"}):(0,L.jsx)("img",{src:(0,S.bj)("images/podcasts-following-empty-state.png"),alt:"",className:I}),(0,L.jsxs)("div",{className:P,children:[(0,L.jsx)(f.E,{variant:"titleSmall",semanticColor:"textBase",as:"h2",children:e?(0,x.v)("No episodes available"):t?(0,x.v)("You're all caught up"):(0,x.v)("You haven't followed any podcasts yet.")}),(0,L.jsx)(f.E,{variant:"bodySmall",as:"p",children:e?(0,x.v)("Try adjusting your filters or follow more podcasts."):t?(0,x.v)("There are no more new releases from creators you follow."):(0,x.v)("Follow your favorites to stay up to date.")})]}),!t&&(0,L.jsx)(C.$,{size:"small",colorSet:"inverted",children:(0,x.v)("Browse podcasts")})]})};var b=t(84943),T=t(28432),F=t(40989),B=t(83249),H=t(26391),$=t(78510),M=t(5544),O=t(72432),k=t(42681),U=t(53091),W=t(88414),D=t(32783),Y=t(45109);const z=()=>{const e=(0,n.useRef)(null),s=(0,n.useRef)(null),t=(0,n.useRef)(null),[o,a]=(0,n.useState)(!1);(0,M.w)({onResize:({width:t})=>{const n=s.current?.getBoundingClientRect().width,o=e.current?.getBoundingClientRect().width;if(!n||!o)return;a(n+188+o+10>t)},refOrElement:t,observeOnMount:!0,observeOnly:"width"});const{contentsOptions:r,playlist:{metadata:l}}=(0,H.g)(),{filterPredicate:c}=(0,$.j)(),{usePlayContextItem:d}=(0,O.P)((0,W.A)(g,r),{featureIdentifier:"home",referrerIdentifier:"home"},{shuffle:!1,repeat:k.p.REPEAT_NONE}),h=(0,n.useCallback)(((e,s)=>"string"!=typeof r.filter?e:s===w.u.TITLE||s===w.u.SUBTITLE?(0,L.jsx)(y.M,{searchWords:[r.filter],textToHighlight:e}):e),[r.filter]),m=(0,n.useCallback)(((e,s)=>(0,U.xp)(e)?(0,L.jsx)(F.h,{index:s,children:(0,L.jsx)(j.b,{index:s,episode:e,contextUri:g,usePlayContextItem:d,showSeparator:0!==s,highlightText:h})},`${e.uri}/${s}`):null),[h,d]);return(0,L.jsxs)("section",{className:i()(Y.A.home,Y.A.homepage,Y.A.homepageFollowingFeed),"data-testid":"home-page",children:[(0,L.jsx)(v.q,{}),(0,L.jsxs)("div",{className:i()(Y.A.homepageContent,"contentSpacing"),children:[l.totalLength>0||null!==c?(0,L.jsxs)("div",{className:Y.A.homepageFollowingFeedHeader,ref:t,children:[(0,L.jsxs)("div",{className:i()(Y.A.homepageFollowingFeedTitleRow,{[Y.A.headerOnTwoLines]:o}),children:[(0,L.jsx)(f.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",ref:s,className:Y.A.title,children:(0,x.v)("Latest episodes")}),(0,L.jsx)(B.d,{sortOptions:[D.nw.PUBLISH_DATE,D.nw.SHOW_NAME],defaultSortField:D.nw.PUBLISH_DATE,filterPlaceholder:(0,x.v)("Filter in latest episodes"),sortBoxRef:e,className:Y.A.searchBar})]}),(0,L.jsx)(b.Q,{className:Y.A.filterChipsRow,filterPredicates:[D.YB.UNPLAYED,D.YB.AVAILABLE_OFFLINE,D.YB.IN_PROGRESS]})]}):null,l.totalLength>0?(0,L.jsx)(T.M,{renderItem:m}):(0,L.jsx)(E,{hasActiveFilter:null!==c})]})]})};var q=t(53189),G=t(10959),J=(t(77369),t(48237)),Q=t(62411),X=t(58090),Z=t(23764),K=t(85956),V=t(88176),ee=t(59161),se=t(35035),te=t(23291),ne=t(51697),oe=t(36478);const ie=(0,n.memo)((({cardCount:e})=>(0,L.jsx)("section",{children:(0,L.jsx)("div",{className:i()(Y.A.home,Y.A.homepage),children:(0,L.jsx)("div",{className:i()(Y.A.homepageContent,"contentSpacing"),children:(0,L.jsx)(u.f,{showAll:!0,cardCount:e,withTitle:!1})})})}))),ae=({sectionURIs:e})=>{const s=(0,a.NC)(ee.wWq),{data:t,error:o,loading:c,extensions:m}=(0,Z.$o)({uris:e,timeZone:(0,K.Ff)(),sp_t:(0,se.v8)("sp_t")??"",sectionItemsLimit:s??10},{gcTime:K.gO,staleTime:K.jl}),u=(0,h.getRequestIdForImpressions)(m),{spec:p}=(0,ne.$)(r.Y,{data:{identifier:"home/pinned",uri:"spotify:home:pinned",reason:u??""}}),g=(0,Q.d4)((e=>e.session.user)),f=(0,n.useCallback)((()=>{const s=new URL("https://open.spotify.com/home");s.searchParams.set("facet","pinned-by"),s.searchParams.set("hpuris",e.map((e=>e.replace("spotify:section:",""))).join(",")),s.searchParams.set("hpname",g?.display_name??g?.id??""),(0,oe.l)(s.toString()),(0,J.M8)(l.Ru.get("feedback.link-copied"))}),[e,g?.display_name,g?.id]);return c?(0,L.jsx)(ie,{cardCount:10}):null!==o||"HomeSectionCollection"!==t?.homeSections.__typename?(0,L.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")}):(0,L.jsx)(te.r,{spec:p,children:(0,L.jsxs)("section",{"data-testid":"home-pin-page",className:i()(Y.A.home,Y.A.homepageWithCarousels),children:[(0,L.jsx)("div",{className:i()(Y.A.homePinButton,"contentSpacing"),children:(0,L.jsx)(C.$,{iconLeading:X.C,onClick:f,size:"small",children:"Share your home"})}),(0,L.jsx)("div",{className:i()(Y.A.homepageContent,"contentSpacing"),children:t.homeSections.sections.map(((e,s)=>"HomeSection"!==e.__typename?null:(0,L.jsx)(V.Q,{section:e,index:s,greeting:null},`${s}-${e.uri}`)))})]})})};var re=t(26471),le=t(95489),ce=t(39690),de=t(91988);const he=(0,n.memo)((({cardCount:e})=>(0,L.jsxs)("div",{className:i()(Y.A.homepageContent,"contentSpacing"),children:[(0,L.jsx)(c.y,{withTitle:!1}),(0,L.jsx)(u.f,{showAll:!0,cardCount:e,withTitle:!1})]}))),me=()=>{const e=(0,q.f)(),{data:s,loading:t,error:n,extensions:o,isNavigationPending:a}=(0,G.Y)(),c=e.replace("-chip",""),{spec:u}=(0,ne.$)(r.Y,{data:{identifier:c?`home/${c}`:"",uri:`spotify:home:${c}`,reason:(0,h.getRequestIdForImpressions)(o)??""}}),g=s?.home;if(t||a)return(0,L.jsx)("section",{"data-testid":"home-subfeed-page",className:i()(Y.A.home,Y.A.homepageWithCarousels),children:(0,L.jsx)(he,{cardCount:50})});if(null!==n)return(0,L.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")});if("HomeResponsePayload"!==g?.__typename)return(0,L.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")});const f=g.sectionContainer.sections.items;return 0===f.length?(0,L.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")}):(f[0]&&"HomeShortsSectionData"!==f[0]?.data?.__typename&&(e=>s=>"HomeShortsSectionData"===s.data?.__typename||"spotify:section:0JQ5DAnM3wGh0gz1MXnu3N"===s.uri&&"podcasts-chip"===e||("spotify:section:0JQ5DAJvCyzyxqjq31tlEs"===s.uri||"spotify:section:0JQ5DAnM3wGh0gz1MXnucs"===s.uri)&&e===p.e)(e)(f[0])&&(g.sectionContainer.sections.items[0]={...f[0],data:{...f[0].data,__typename:"HomeShortsSectionData"}}),(0,L.jsx)(te.r,{spec:u,children:(0,L.jsx)(m.g,{container:g.sectionContainer,greeting:null,showDsaMessage:!1,enableFeedBaseline:!0})}))},ue=()=>{const e=(0,q.f)(),{shelfURIs:s}=(0,re.T)(),t=(0,le.k)();if((0,a.NC)(ee._Ie)){if("pinned-by"===e&&t){const e=t?.uris;return e.length?(0,L.jsx)(ae,{sectionURIs:e}):(0,L.jsx)(de.$,{to:"/"})}if("pinned"===e){const e=s;return e.length?(0,L.jsx)(ae,{sectionURIs:e}):(0,L.jsx)(de.$,{to:"/"})}}return"podcasts-following-chip"===e?(0,L.jsx)(ce.W,{uri:g,children:(0,L.jsx)(z,{})}):e?(0,L.jsx)(me,{}):(0,L.jsx)(de.$,{to:"/"})}},95489:(e,s,t)=>{t.d(s,{k:()=>o});t(77369);var n=t(85387);const o=()=>{const e=(0,n.zy)(),s=new URLSearchParams(e.search);if(!s.has("hpuris"))return null;const t=(s.get("hpuris")||"").split(",").map((e=>`spotify:section:${e}`));return{name:s.get("hpname")??"Shared",uris:t}}}}]);
//# sourceMappingURL=home-subfeed.js.map