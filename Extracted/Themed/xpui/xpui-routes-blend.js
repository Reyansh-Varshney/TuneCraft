"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[42],{10059:(t,e,n)=>{n.d(e,{f:()=>s});const i="music",o="0.1.0",a="default",r="14.11.0";function s(t){return new l(t)}class l{constructor(t){this._path=[{name:"desktop-blend-invitation"}],t?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=t.parentAbsoluteLocation)}inviteButtonFactory(){return new l.InviteButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}joinButtonFactory(){return new l.JoinButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[a,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[o,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}!function(t){t.InviteButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:n}){this._path=t.concat({name:"invite_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[a,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[o,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitCopyToClipboard(){return{actionName:"copy_to_clipboard",actionVersion:1,app:i,generatorVersion:r,interactionType:"hit",specificationMode:a,specificationVersion:o,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:i,generatorVersion:r,specificationVersion:o,specificationMode:a,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(l||(l={})),function(t){t.JoinButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:n}){this._path=t.concat({name:"join_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[a,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[o,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitCreatePlaylist(){return{actionName:"create_playlist",actionVersion:1,app:i,generatorVersion:r,interactionType:"hit",specificationMode:a,specificationVersion:o,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:i,generatorVersion:r,specificationVersion:o,specificationMode:a,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(l||(l={}))},14526:(t,e,n)=>{n.d(e,{A:()=>i});const i=()=>{const t=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(t)}`,null}},15015:(t,e,n)=>{n.d(e,{O:()=>p});var i=n(73136),o=n(78717),a=n(31136),r=n(332),s=n(24886),l=n(38503),c=n(86070);const d={[r.E.MEDIUM]:"titleMedium",[r.E.LARGE]:"titleMedium",[r.E.XLARGE]:"headlineMedium"},u={[r.E.LARGE]:"bodyMedium",[r.E.XLARGE]:"bodyMediumBold"},h={[r.E.LARGE]:"bodySmall",[r.E.XLARGE]:"bodySmall"},p=({title:t,subtitle:e,body:n,footnote:r,buttonText:p,callToActionClicked:b})=>{const m=(0,s.y)(),g=m&&d[m]||"titleSmall",x=m&&u[m]||"bodySmall",E=m&&h[m]||"marginal";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.E,{as:"h1",variant:g,semanticColor:"textBase",className:l.A.title,children:t}),(0,c.jsx)(o.E,{as:"h2",variant:x,semanticColor:"textSubdued",className:l.A.subtitle,children:e}),n,b&&(0,c.jsx)(i.$,{className:l.A.button,colorSet:"invertedLight",onClick:b,"data-testid":a.OL,children:p}),r&&(0,c.jsx)(o.E,{as:"p",variant:E,semanticColor:"textSubdued",className:l.A.note,children:r})]})}},31126:(t,e,n)=>{n.d(e,{B6:()=>s,OE:()=>r,YW:()=>a,pd:()=>o});var i=n(55827);let o=function(t){return t.PENDING_INVITATION="PENDING_INVITATION",t.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",t.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",t.MAX_MEMBERS="MAX_MEMBERS",t.ALREADY_JOINED="ALREADY_JOINED",t.DELETED="DELETED",t}({});const a=(t,e)=>t.build().withHost(i.t2).withPath(`/v3/view-invitation/${encodeURIComponent(e)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(t.locale).send(),r=(t,e)=>t.build().withHost(i.t2).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(e)}`).withEndpointIdentifier("join/{invitationId}").send(),s=t=>t.build().withHost(i.t2).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},31136:(t,e,n)=>{n.d(e,{OL:()=>s,VE:()=>i,ev:()=>a,rg:()=>r,xg:()=>o});const i="blend-deleted-container",o="blend-two-user-container",a="blend-multi-user-container",r="blend-full-container",s="blend-cta-button"},31337:(t,e,n)=>{n.d(e,{d:()=>_});var i=n(97500),o=n.n(i),a=n(70397),r=n(50375),s=n(19399),l=n(15015),c=n(31136);const d="gJmoZouW_m4rUBRFHmu7",u="r4j9hiYJ8q0SQpEsgvSh";var h=n(86070);const p=t=>(0,h.jsx)("div",{className:d,children:(0,h.jsx)("div",{className:u,children:(0,h.jsx)("svg",{width:t.iconSize,height:t.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var b=n(332),m=n(24886),g=n(38503);const x={name:"",username:"",image_url:null,hash:""},E={[b.E.MEDIUM]:164,[b.E.LARGE]:164,[b.E.XLARGE]:270},A=(t,e)=>(0,h.jsx)(r.e,{label:a.Ru.get("web-player.blend.invite.button-title"),images:[],width:t,userIconSize:"xxlarge",customPlaceholder:(0,h.jsx)(p,{iconSize:e}),piled:!0}),_=({invitation:t,callToActionClicked:e,breakpointEltRef:n})=>{const i=!!t.members?.length,d=i&&t.members?.[0]||t.recipient||x,u=i&&t.recipient||null,p=(0,m.y)(),b=p&&E[p]||128,_=Math.round(.475*b);return(0,h.jsxs)("div",{className:o()(g.A.container,g.A.TwoUsers),"data-testid":c.xg,ref:n,children:[(0,h.jsx)(s.Q,{children:a.Ru.get("blend.invite.page-title")}),(0,h.jsxs)("div",{className:g.A.facepile,children:[(0,h.jsx)(r.e,{label:d.name,images:[{url:d.image_url??"",width:b,height:b}],width:b,userIconSize:"xxlarge"}),u?(0,h.jsx)(r.e,{label:u.name,images:[{url:u.image_url??"",width:b,height:b}],width:b,userIconSize:"xxlarge",piled:!0}):A(b,_)]}),(0,h.jsx)(l.O,{title:t.title,subtitle:t.subtitle,footnote:t.footnote,buttonText:t.button_text,callToActionClicked:e})]})}},38503:(t,e,n)=>{n.d(e,{A:()=>i});const i={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}},53696:(t,e,n)=>{n.d(e,{G:()=>a});var i=n(332),o=n(53467);const a=()=>(0,o.x)({[i.E.SMALL]:536,[i.E.MEDIUM]:792,[i.E.LARGE]:1048,[i.E.XLARGE]:1688})},61048:(t,e,n)=>{n.d(e,{y:()=>u});var i=n(30758),o=n(48237),a=n(62411),r=n(70397),s=n(31126),l=n(83953),c=n(47394),d=n(36478);function u(t,e){const{user:n}=(0,a.d4)(l.Ht),{enqueueSnackbar:u}=(0,o.dh)(),h=(0,c.A)(),p=(0,i.useCallback)((async()=>{const t=await(0,s.B6)(h),e=t.body?.invite;if(!e)throw new Error("unable to generate invite link");return n?.display_name?r.Ru.get("blend.invite.body-with-name",n.display_name,t.body?.invite):r.Ru.get("blend.invite.body-without-name",t.body?.invite)}),[n?.display_name,h]);return async()=>{try{await(0,d.l)(p()),u(r.Ru.get("feedback.link-copied"))}catch{u(r.Ru.get("error.generic"))}if(t&&e){const n=t.inviteButtonFactory().hitCopyToClipboard();e.logInteraction(n)}}}},74248:(t,e,n)=>{n.r(e),n.d(e,{default:()=>_});var i=n(30758),o=n(62411),a=n(10059),r=n(70397),s=n(19399),l=n(31337),c=n(14526),d=n(31126),u=n(53696),h=n(61048),p=n(83953),b=n(24886),m=n(84409),g=n(98379),x=n(60804),E=n(86070);const A={page_type:d.pd.PENDING_INVITATION,get title(){return r.Ru.get("web-player.blend.group-invite.header")},get subtitle(){return r.Ru.get("web-player.blend.duo-invite.description")},get button_text(){return r.Ru.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},_=()=>{const{spec:t,logger:e}=(0,m.r)(a.f,{}),n=(0,h.y)(t,e),{ref:d,breakpoint:_}=(0,u.G)(),{user:v}=(0,o.d4)(p.Ht),y=v?.uri?(0,g.v)(v?.uri):"",f=(t=>({...A,members:[t],footnote:r.Ru.get("web-player.blend.group-invite.warning")}))({name:v?.display_name||"",username:y,image_url:(0,x.g)(v?.images)?.url||null,hash:""});return v?(0,E.jsxs)(i.Suspense,{fallback:null,children:[(0,E.jsx)(s.Q,{children:r.Ru.get("web-player.blend.invite.page-title")}),(0,E.jsx)(b.o.Provider,{value:_,children:(0,E.jsx)(l.d,{invitation:f,callToActionClicked:n,breakpointEltRef:d})})]}):(0,E.jsx)(c.A,{})}},87325:(t,e,n)=>{n.r(e),n.d(e,{default:()=>H});var i=n(30758),o=n(62411),a=n(85387),r=n(47760),s=n(10059),l=n(18831),c=n(70397),d=n(3877),u=n(90814),h=n(15015),p=n(31136),b=n(38503),m=n(86070);const g=({invitation:t,callToActionClicked:e,breakpointEltRef:n})=>(0,m.jsxs)("div",{className:b.A.container,"data-testid":p.rg,ref:n,children:[(0,m.jsx)(u.u,{size:"xxlarge"}),(0,m.jsx)(h.O,{title:t.title,subtitle:t.subtitle,buttonText:t.button_text,footnote:null,callToActionClicked:e})]});var x=n(19399),E=(n(77369),n(97500)),A=n.n(E),_=n(78717),v=n(50375),y=n(35054),f=n(93624),L=n(96579);const w="HKAYWYmxd5Ie8WSi0a4y",j="i52u_T3b50wraodIaORk",R="xakiNVMlUf6geF67FEgy",I="IRhTesoeIiwswlly0Dvg",N="LNJzE17iskXWmfKAzY4U",T="qzBr7X7cdLUhWdk0r8lL",C=({uri:t,imageUrl:e,name:n})=>(0,m.jsx)("li",{children:(0,m.jsx)(y.h,{menu:(0,m.jsx)(f.B,{uri:t}),children:(0,m.jsx)(L.N,{to:t,children:(0,m.jsxs)("div",{className:I,children:[(0,m.jsx)(v.e,{images:[{url:e,width:null,height:null}],label:n,width:32,userIconSize:"medium",className:N}),(0,m.jsx)(_.E,{variant:"bodySmallBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:n})]})})})}),M=({members:t,headingText:e,className:n})=>(0,m.jsxs)("div",{className:A()(w,n),children:[(0,m.jsx)("div",{children:(0,m.jsx)(_.E,{as:"h4",variant:"marginalBold",semanticColor:"textSubdued",className:j,children:e})}),(0,m.jsx)("ul",{className:R,children:t&&t.map((t=>(0,m.jsx)(C,{imageUrl:t.image_url||"",name:t.name,uri:(0,l.Qjr)(t.username).toURI()},t.username)))}),(0,m.jsx)("div",{className:T})]}),k=({invitation:t,callToActionClicked:e,breakpointEltRef:n})=>{const i=t.members||[],o=(0,m.jsx)("div",{className:b.A.userListContainer,"data-testid":p.ev,children:(0,m.jsx)(M,{className:b.A.userList,headingText:t.members_title,members:i})});return(0,m.jsxs)("div",{className:b.A.container,ref:n,children:[(0,m.jsx)(x.Q,{children:c.Ru.get("blend.join.title")}),(0,m.jsx)(h.O,{title:t.title,subtitle:t.subtitle,footnote:t.footnote,body:o,buttonText:t.button_text,callToActionClicked:e})]})};var D=n(31337),O=n(31126),V=n(53696),B=n(61048),S=n(30929),P=n(98756),Y=n(47394);var U=n(24886),G=n(2715),F=n(84409);const J=({invitationId:t})=>{const e=(0,P.g)(),{data:n,error:o,loading:a}=(0,G.Z)(O.YW,[t]),{spec:u,logger:x}=(0,F.r)(s.f,{}),E=(0,B.y)(u,x),A=function(t,e,n){const{enqueueSnackbar:i}=(0,S.d)(),o=(0,Y.A)(),a=(0,P.g)();return async()=>{try{const e=await(0,O.OE)(o,t),n=(0,l.o_h)(e?.body.playlist_uri).toURLPath(!0);if(!n)throw new Error("unable to join");a(n,{replace:!0})}catch{i(c.Ru.get("error.request-playlist-failure"))}if(e&&n){const t=e.joinButtonFactory().hitCreatePlaylist();n.logInteraction(t)}}}(t,u,x),{ref:_,breakpoint:v}=(0,V.G)();(0,i.useEffect)((()=>{if(n?.body?.page_type===O.pd.ALREADY_JOINED){const t=(0,l.o_h)(n?.body.playlist_uri)?.toURLPath(!0);t&&e(t,{replace:!0})}}),[n?.body?.page_type,n?.body?.playlist_uri,e]);const y=null===n||!n.body;if(y||a||o)return(0,m.jsx)(d.LoadingPage,{timeoutInMs:1e3,hasError:!!o||!a&&y,errorMessage:c.Ru.get("error.generic")});switch(n?.body.page_type){case O.pd.DELETED:return(0,m.jsx)(U.o.Provider,{value:v,children:(0,m.jsxs)("div",{className:b.A.container,ref:_,"data-testid":p.VE,children:[(0,m.jsx)(r.x,{size:"xxlarge"}),(0,m.jsx)(h.O,{title:n.body.title,subtitle:n.body.subtitle,buttonText:n.body.button_text,footnote:n.body.footnote,callToActionClicked:E})]})});case O.pd.ALREADY_JOINED:return(0,m.jsx)(d.LoadingPage,{hasError:!1,errorMessage:c.Ru.get("error.request-playlist-failure")});case O.pd.READY_TO_JOIN_EMPTY_BLEND:return(0,m.jsx)(U.o.Provider,{value:v,children:(0,m.jsx)(D.d,{invitation:n.body,breakpointEltRef:_,callToActionClicked:A})});case O.pd.READY_TO_JOIN_ALREADY_CREATED_BLEND:return(0,m.jsx)(U.o.Provider,{value:v,children:(0,m.jsx)(k,{invitation:n.body,callToActionClicked:A,breakpointEltRef:_})});case O.pd.MAX_MEMBERS:return(0,m.jsx)(U.o.Provider,{value:v,children:(0,m.jsx)(g,{invitation:n.body,callToActionClicked:E,breakpointEltRef:_})});case O.pd.PENDING_INVITATION:return(0,m.jsx)(U.o.Provider,{value:v,children:(0,m.jsx)(D.d,{invitation:n.body,callToActionClicked:E,breakpointEltRef:_})});default:return(0,m.jsx)(d.LoadingPage,{timeoutInMs:1e3,hasError:!0,errorMessage:c.Ru.get("error.generic")})}};var z=n(14526),X=n(83953);const q=({invitationId:t})=>{const{user:e}=(0,o.d4)(X.Ht);return e?(0,m.jsx)(i.Suspense,{fallback:null,children:(0,m.jsx)(J,{invitationId:t})}):(0,m.jsx)(z.A,{})},H=(0,i.memo)((()=>{const{invitationId:t=""}=(0,a.g)();return(0,m.jsx)(q,{invitationId:t})}))}}]);
//# sourceMappingURL=xpui-routes-blend.js.map