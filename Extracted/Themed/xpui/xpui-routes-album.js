"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5962],{5653:(e,r,a)=>{a.d(r,{c:()=>n});var t=a(30758),s=a(9952);function n(e){const[r,a]=(0,t.useState)((()=>!!e&&(0,s.u)(e)<=0));return(0,t.useEffect)((()=>{if(!e)return;const r=(0,s.u)(e);if(r<=0)return void a(!0);if(r>=36e5)return void a(!1);const t=setTimeout((()=>{a(!0)}),r);return()=>{clearTimeout(t)}}),[e]),r}},7035:(e,r,a)=>{a.r(r),a.d(r,{default:()=>t.A});var t=a(16789)},9952:(e,r,a)=>{function t(e){const r=new Date;return(e instanceof Date?e:new Date(e)).getTime()-r.getTime()}a.d(r,{u:()=>t})},13352:(e,r,a)=>{a.d(r,{u:()=>l});var t=a(30758),s=a(65809),n=a(86070);const i=({renderOldExperience:e=()=>null,renderNewExperience:r=()=>null,forceNewExperience:a,property:t})=>(0,s.NC)(t)||a?r():e(),l=({suspenseFallback:e=null,renderNewExperience:r,renderOldExperience:a,forceNewExperience:s=!1,property:l})=>(0,n.jsx)(t.Suspense,{fallback:e,children:(0,n.jsx)(i,{renderNewExperience:r,renderOldExperience:a,forceNewExperience:s,property:l})})},16789:(e,r,a)=>{a.d(r,{A:()=>br});a(77369);var t=a(30758),s=a(62411),n=a(85387),i=a(78717),l=a(25379),o=a(4644),c=a(70110),u=a(70397),d=a(55293),m=a(70796),h=a(48029),p=a(73136),g=a(3483),x=a(94685),j=a(80464),b=a(33088),y=a(86070);const v=({message:e,spec:r,logger:a,className:t})=>{const{onUpgradeClick:s,type:n}=(0,b.i)(r,a);return(0,j.V)()?null:(0,y.jsx)(m.v,{id:"catalogue-restricted-banner",className:t,variant:"tinted",leading:(0,y.jsx)(h.N,{}),title:e,trailing:(0,y.jsx)(p.$,{size:"small",onClick:s,iconOnly:"external"===n?g.H:x.h,"aria-label":u.Ru.get("upgrade.tooltip.title"),title:u.Ru.get("upgrade.tooltip.title")})})};var f=a(36473),k=a(35054),C=a(31016),S=a(52855),A=a(19399),E=a(49740),R=a(13335),w=a(19667),N=a(98210),U=a(4218),P=a(62272),I=a(86208),M=a(23752),D=a(68050),T=a(76421),B=a(29229),L=a(64010),F=a(25457),_=a(63450),z=a(24448),O=a(3877),V=a(83408),W=a(82092),Z=a(56321),K=a(8616),H=a(8594),q=a(25146),X=a(38506);const $=e=>{const{data:r}=(0,q.k7)(e.albumUri,q.vi);return r?(0,y.jsx)(X.B,{...e,prereleaseUri:r}):(0,y.jsx)(K.E,{backgroundColor:e.backgroundColor,children:(0,y.jsx)(H.S,{children:(0,y.jsx)("div",{style:{minBlockSize:"var(--encore-control-size-larger, 56px)"}})})})},G=(0,t.memo)((e=>e.prereleaseUri?(0,y.jsx)(X.B,{...e,prereleaseUri:e.prereleaseUri}):(0,y.jsx)($,{...e})));var J=a(87926),Y=a(38042),Q=a(34843),ee=a(89145),re=a(65720),ae=a(39055),te=a(13352),se=a(53038),ne=a(98268);const ie=()=>null;var le=a(36030),oe=a(94061),ce=a(33361),ue=a(38111),de=a(54596),me=a(45786),he=a(84825),pe=a(275),ge=a(96124),xe=a(19906),je=a(23291),be=a(84409),ye=a(33621),ve=a(19151);const fe={album:"m2grVeuHNwfGLVpaSBle",albumWindowedMessage:"G7OjWzvskF402kPsqa63",albumWindowedMessageHeader:"T7nBFbNoLnHw4DVupvk8",albumWindowedMessageDescription:"b5UUlVvADHdE3mY9J715",moreAlbumsByArtist:"GLKjAw6oM_egXztVxKKB",releasesDropdown:"MGZ4oJmGVPrWsx5cT5hN",tracklistTitle:"KhYRIsm6mKVoFuOmUb8C",footer:"DmrVJc9vWCbjU_DuRvfe",recommendations:"cqdUBAtScATHyBR8gmYF",leadingSlot:"yLmA5f7x65en2MdKbIhX",restrictedBanner:"F5J4ctyBbgSfS6qkFH5c"},ke=t.memo((function({uri:e,togglePlay:r,isPlaying:a,isActive:s,spec:n,logger:i,backgroundColor:l,name:o,artists:c,isPlayable:d,isSaved:m,sharingInfo:h,watchFeedEntityEntryPoint:p}){const g=(0,me.n)(),x=(0,ge.f)(),j=(0,t.useMemo)((()=>n.actionBarFactory()),[n]),[b,v]=(0,xe.A)(e,m),f=(0,le.P)(),k=(0,t.useCallback)((()=>{const t=(0,he.$I)({isPlaying:a,isActive:s,spec:j.playButtonFactory(),logger:i,uri:e});r({loggingParams:t})}),[a,s,r,j,i,e]),S=(0,ne.d$)(),{spec:A,logger:E}=(0,be.r)(J.e,{data:{uri:e}});(0,t.useEffect)((()=>{S&&E.logImpression(A.impression())}),[S,E,A]);const R=(0,t.useCallback)((async()=>{let r;const a=j.saveButtonFactory();b?r=a.hitDislike({itemToBeDisliked:e}):(r=a.hitLike({itemToBeLiked:e}),S&&E.logInteraction(A.hitFollow({itemToBeFollowed:e}))),i.logInteraction(r);try{await v(!b)}catch{}}),[e,b,v,j,i,S,E,A]),w=(0,ce.X)(),N=(0,de.j)();return(0,y.jsxs)(K.E,{backgroundColor:l,children:[f&&(0,y.jsx)(t.Suspense,{fallback:null,children:(0,y.jsx)(ie,{uri:e})}),(0,y.jsxs)(H.S,{children:[(0,y.jsx)(V.D,{onClick:k,disabled:!d,isPlaying:a,size:N,uri:e}),p&&(0,y.jsx)(je.r,{spec:j,children:(0,y.jsx)(ue.H,{entryPoint:p,watchFeedTitle:o,type:ve.c.ALBUM,entityUri:e})}),w&&(0,y.jsx)(je.r,{spec:j,children:(0,y.jsx)(oe.Y,{entityName:o,contextUri:e,size:N})}),(0,y.jsx)(ae.h,{uri:e,action:pe.no.SAVE_ALBUM,children:(0,y.jsx)(Y.M,{isAdded:b,onClick:R,disabled:!g&&!x?.getCapabilities().canModifyOffline,size:N,condensed:!0})}),(0,y.jsx)(Q.f,{uri:e,isFollowing:b,onClick:(r,a)=>(0,he.Qv)(a,j.downloadButtonFactory(),i,e),onFollow:R,size:N,condensed:!0}),(0,y.jsx)(re.b,{onShow:()=>(0,he.R2)(j,i),menu:(0,y.jsx)(C.h,{uri:e,artistUri:c?.[0]?.uri,sharingInfo:h}),children:(0,y.jsx)(ee.e,{label:u.Ru.get("more.label.context",o),size:N})}),(0,y.jsx)("div",{className:fe.leadingSlot,children:(0,y.jsx)(te.u,{property:ye.mA,renderNewExperience:()=>(0,y.jsx)(se.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})]})}));var Ce=a(59249),Se=a(18831),Ae=a(28718),Ee=a(86148);const Re=({releases:e})=>(0,y.jsx)(Ae.W,{children:e.map((e=>(0,y.jsx)(Ee.D,{role:"menuitem",to:(0,Se.o_h)(e.uri).toURLPath(!0),children:e.name},e.uri)))});var we=a(2897);const Ne=864e5,Ue=365.25*Ne;var Pe=a(11642),Ie=a(29405),Me=a(791),De=a(5653),Te=a(98630),Be=a(82758),Le=a(6287),Fe=a(49290),_e=a(92544),ze=a(90098),Oe=a(71259),Ve=a(23658),We=a(21309),Ze=a(68293),Ke=a(61315);const He=({merchId:e,spec:r,uri:a,url:s,images:n,description:i,merchName:l="",testId:o,index:c,merchVariant:u,variant:d})=>{const m=(0,Ze.s)(),h=(0,t.useMemo)((()=>r.merchCardFactory({identifier:e,uri:a,position:c})),[e,a,r,c]),p=()=>{window.open(s,"_blank");const e=h.hitNavigateToExternalUri({destination:s});m.logInteraction(e)},g=(0,Ke.n)(r.getAbsoluteLocation(),r);return(0,y.jsx)("div",{ref:g,children:(0,y.jsx)(ze.Z,{variant:d,delegateNavigation:!0,index:c,onClick:p,headerText:l,featureIdentifier:"playlist",requestId:u,uri:a,isPlayable:!1,renderCardImage:()=>(0,y.jsx)(Oe.M,{images:n}),renderSubHeaderContent:()=>(0,y.jsx)(Ve.c,{children:i?(0,y.jsx)(We.N,{source:i,onLinkClick:p}):l&&(0,y.jsxs)("span",{children:["Description: ",l]})}),testId:o})})},qe="V1660uk_uXXZAMEmV4D4",Xe="RbnoPhjDDAtbxN8gAiif",$e=({id:e,merchItems:r,merchVariant:a,uri:t})=>{const{spec:s}=(0,be.r)(Fe.k,{data:{identifier:e,uri:t}});return(0,y.jsx)(_e.$,{total:r.length,title:u.Ru.get("web-player.merch.title"),className:Xe,seeAllLabel:u.Ru.get("web-player.merch.seeAllUri"),children:r.map(((e,r)=>e.url&&e.nameV2?(0,y.jsx)(He,{index:r,url:e.url,uri:e.uri,merchName:e.nameV2,description:e.description||"",images:e.image?.sources||[],merchVariant:a,merchId:e.uri,spec:s},e.url):null))})};var Ge=a(63388),Je=a(39463);const Ye=Spicetify.GraphQL.Definitions["queryAlbumMerch"]=new Ge.l("queryAlbumMerch","query","3ef44ed6f17be67299538fe77faffab4075aeaf9e1085f10fc835592266711b5",null),Qe=({albumName:e,albumURI:r})=>{const{data:a}=(t={uri:r},s={gcTime:5*Je.i},(0,Je.I)(Ye,t,s));var t,s;const n=a?.albumUnion&&"merch"in a.albumUnion?a?.albumUnion?.merch?.items:[];return n&&n?.length>0?(0,y.jsx)("div",{className:"contentSpacing",children:(0,y.jsx)("div",{className:qe,children:(0,y.jsx)($e,{id:e,uri:r,merchItems:n,merchVariant:"Album page merch items"})})}):null};var er=a(61359),rr=a(69878),ar=a(56510),tr=a(11903),sr=a(83953),nr=a(96067),ir=a(332),lr=a(24886),or=a(37311),cr=a(56627),ur=a(84925),dr=a(72432),mr=a(24516),hr=a(86069),pr=a(55797);const gr=t.lazy((()=>a.e(1310).then(a.bind(a,51310))));function xr(e){switch(e){case Ie._.Single:return u.Ru.get("single");case Ie._.Ep:return u.Ru.get("ep");case Ie._.Compilation:return u.Ru.get("compilation");case Ie._.Audiobook:return u.Ru.get("card.tag.audiobook");case Ie._.Album:default:return u.Ru.get("album")}}const jr=({uri:e,album:r,prereleaseUri:a})=>{const m=(0,n.zy)(),{spec:h,logger:p,UBIFragment:g}=(0,be.r)(c.E,{data:{uri:e}}),x=(0,t.useMemo)((()=>h.trackListFactory()),[h]),j=(0,t.useMemo)((()=>h.moreByArtistShelfFactory()),[h]),b=(0,t.useMemo)((()=>h.upgradeButtonFactory()),[h]),O=r.moreAlbumsByArtist,K=parseInt(new URLSearchParams((0,n.zy)().search).get("index")||"0",10),{playUri:H,playOptions:q}=(0,ar.J)(e),{usePlayContextItem:X,togglePlay:$,isPlaying:J,isActive:Y}=(0,dr.P)({uri:H},{featureIdentifier:"album"},q),Q=(0,t.useCallback)(((e,r)=>{if(h){const e=h.headerFactory().artistNameFactory().hitUiNavigate({destination:r.creator.uri});p.logInteraction(e)}}),[p,h]),{isOpen:ee,openModal:re,closeModal:ae}=(0,Be.W)(),te=(0,t.useCallback)((()=>new URLSearchParams(m.search.slice(1)).get("highlight")||""),[m.search]),se=r.uri,ne=r.name,ie=r.albumType,le=r.release,oe=r.release?.precision,ce=r.nrTracks,ue=r.images,de=r.extractedColors?.colorRaw.hex,me=r.artists,he=r.isPlayable,pe=r.isCatalogueRestricted,ge=r.copyright.items,xe=r.courtesyLine,je=r.duration.durationMs,ye=r.duration.isEstimate,ve=te(),Se=(0,s.d4)(sr.Ht),Ae=Se.overrides?.locale??u.Ru.getLocaleForTranslation(),Ee=(0,rr.W)({uri:e,type:"locale"}),Pe=(0,mr.qc)({albumName:ne,albumType:ie,albumArtists:me.map((e=>e.name)).join(u.Ru.getSeparator()),shouldLocalize:Ee,i18n:u.Ru});(0,tr.z)(de||null);const Ie=function(e){return(0,t.useMemo)((()=>{if(!e?.isoString)return null;if(e.precision===we.by.Day){const r=new Date(e.isoString),a=(new Date).getTime()-r.getTime(),t=a%Ue;return t<3.5*Ne||t>312552e5?Math.round(a/Ue):null}return null}),[e])}(r.release),{isCompactMode:Fe}=(0,er.a)();(0,Z.q)(r.dynamicColors);const _e=(0,y.jsx)(C.h,{uri:r.uri,artistUri:r.artists?.[0]?.uri,sharingInfo:r.sharingInfo}),ze=(0,t.useMemo)((()=>r.preReleaseEndDateTime?.isoString?new Date(r.preReleaseEndDateTime.isoString):void 0),[r.preReleaseEndDateTime]),Oe=(0,De.c)(r.preReleaseEndDateTime?.isoString),Ve=!!ze&&!Oe,We=(0,lr.y)(),Ze=We===ir.E.SMALL||We===ir.E.XSMALL,Ke=(new Intl.DateTimeFormat).resolvedOptions().timeZone;return(0,y.jsxs)("section",{className:fe.album,"data-testid":"album-page",children:[(0,y.jsx)(A.Q,{children:Pe}),!ve&&(0,y.jsx)(Le.c,{artistOrShow:me.map((e=>e.name)).join(u.Ru.getSeparator()),title:ne,uri:e,entityType:Le.p.ALBUM}),null!==Ie?(0,y.jsx)(t.Suspense,{fallback:null,children:(0,y.jsx)(gr,{colorLight:r.extractedColors?.colorLight.hex,colorDark:r.extractedColors?.colorDark.hex,name:ne,years:Ie})}):null,(0,y.jsxs)(ur.d,{dynamicColors:r.dynamicColors,children:[(0,y.jsxs)(E.z,{backgroundColor:de,size:Ve?E.K.XLARGE:E.K.DEFAULT,children:[(0,y.jsxs)(N.h,{children:[(0,y.jsx)(V.D,{size:"medium",onClick:()=>$(),disabled:!he,isPlaying:J,uri:e}),(0,y.jsx)(k.h,{menu:_e,children:(0,y.jsx)(U.X,{text:ne,dragUri:e,dragLabel:ne})})]}),!Ze&&(0,y.jsx)(k.h,{menu:_e,children:(0,y.jsx)(R.K,{dragUri:se,images:ue,name:ne,placeholderType:"album",onClick:re,ariaLabel:u.Ru.get("web-player.album.open_coverart_modal")})}),(0,y.jsxs)(w.Y,{children:[(0,y.jsx)(_.B,{children:xr(ie)}),(0,y.jsx)(k.h,{menu:_e,children:(0,y.jsx)(z.mm,{dragUri:r.uri,dragLabel:r.name,scaleAtMinWidth:z.tw,children:ne})}),(0,y.jsxs)(P.X,{children:[(0,y.jsx)(I.j,{creators:me,onCreatorClick:Q}),(0,y.jsx)(L.J,{}),Ve?(0,y.jsx)(B.H,{releaseDate:r.preReleaseEndDateTime,timeZone:Ke}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(B.H,{releaseDate:le,timeZone:Ke}),(0,y.jsx)(L.J,{}),(0,y.jsxs)(D.r,{children:[(0,y.jsx)(M.G,{totalItems:ce,containsTracks:!0}),(0,y.jsx)(F.W,{}),(0,y.jsx)(T.r,{durationMs:je,isEstimate:ye})]})]})]}),Ve&&ze&&ne?(0,y.jsx)(S.G,{images:Ze?ue:[],imageTitle:ne,className:fe.Countdown,targetDate:ze}):null]})]}),Ve?(0,y.jsx)(G,{albumUri:se,albumName:ne,artistUri:me[0]?.uri,releaseDateISOString:r.preReleaseEndDateTime?.isoString,backgroundColor:de,prereleaseUri:a}):(0,y.jsx)(ke,{backgroundColor:de,uri:e,togglePlay:$,isPlaying:J,isActive:Y,spec:h,logger:p,sharingInfo:r.sharingInfo,name:r.name,artists:r.artists,isPlayable:r.isPlayable,isSaved:r.isSaved,watchFeedEntityEntryPoint:r.watchFeedEntityEntryPoint??void 0})]}),(0,y.jsxs)("div",{className:"contentSpacing",children:[pe&&(0,y.jsx)(v,{message:(0,Me.E)(ie),className:fe.restrictedBanner,spec:b,logger:p}),Ve&&(0,y.jsx)(i.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:fe.tracklistTitle,children:u.Ru.get("web-player.prerelease.album_tracklist_preview")}),(0,y.jsx)(g,{spec:x,children:(0,y.jsx)(Ce.F,{albumName:ne,nrTracks:(0,Me.YD)(r.discs)?r.discs.totalCount+ce:ce,discs:r.discs,albumUri:se,highlightUri:ve,scrollToIndex:K,usePlayContextItem:X,initalTracks:r.items,isCompactMode:Fe})}),(0,y.jsxs)("div",{className:fe.footer,children:[(0,y.jsxs)("div",{children:[le?.isoString&&(0,y.jsx)(i.E,{as:"p",variant:"bodySmall",children:(0,pr.rh)((0,pr.ad)(le.isoString),Ae,{year:"numeric",month:"long",day:"numeric"},(0,hr.ht)(oe))}),(0,y.jsx)(nr.Z,{copyrights:ge,courtesyLine:xe})]}),r.releases.items.length>0&&(0,y.jsx)(f.t,{menu:(0,y.jsx)(Re,{releases:r.releases.items}),children:(e,a,t)=>(0,y.jsxs)("button",{ref:t,className:fe.releasesDropdown,type:"button",onClick:a,children:[(0,y.jsx)(i.E,{variant:"bodySmall",children:u.Ru.get("album-page.more-releases",r.releases.items.length)}),e?(0,y.jsx)(l.J,{size:"small"}):(0,y.jsx)(o.y,{size:"small"})]})})]})]}),(0,y.jsx)(Qe,{albumName:ne,albumURI:se}),(0,y.jsx)(y.Fragment,{children:O?.length>0&&(0,y.jsx)("div",{className:"contentSpacing",children:(0,y.jsx)(g,{spec:j,children:(0,y.jsx)(W.p,{index:0,id:"more-albums",className:fe.moreAlbumsByArtist,title:u.Ru.get("album-page.more-by-artist",me?.[0]?.name),total:O.length,seeAllUri:`${me?.[0]?.uri.replace("artist","app:artist")}:discography`,seeAllLabel:u.Ru.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:O.map(((e,r)=>(0,y.jsx)(d.R,{index:r,artists:me,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})})}),(0,y.jsx)(Te.K,{title:Pe,isOpen:ee,onClose:ae,images:ue})]})},br=t.memo((function({albumUri:e,prereleaseUri:r}){const{loading:a,error:t,data:s,canLoadOffline:n}=(0,Pe.$)(e);if(a||!s||null!==t){const e=null!==t;return(0,y.jsx)(O.LoadingPage,{hasError:e,loadOffline:n,errorMessage:u.Ru.get("error.not_found.title.album")})}return(0,y.jsx)(cr.P,{surface:or.u.ALBUM,uris:[e],children:(0,y.jsx)(jr,{uri:e,album:s,prereleaseUri:r})})}))},25146:(e,r,a)=>{a.d(r,{Yb:()=>m,vi:()=>d,k7:()=>h});var t=a(30758),s=a(9302),n=(a(77369),a(87175),a(58679)),i=a(51822),l=a(19507),o=a(67627),c=a(88308);var u=a(1287);const d=e=>e.uri??null,m=e=>e.entity?.uri??null,h=(e,r)=>{const{data:a,status:d}=function(e,r,a){const u=(0,n.t)(),d=(0,i.jE)(),m=(0,t.useMemo)((()=>Array.isArray(e)?e:[e]),[e]),h=(0,t.useMemo)((()=>Array.isArray(r)?r:[r]),[r]),p=(0,c.lB)((()=>["use-metadata-extensions",m,h]),[m,h]),g=(0,t.useCallback)((()=>{d.invalidateQueries({queryKey:p})}),[d,p]);(0,t.useEffect)((()=>u.getEvents().addListener(o.C.EXPIRE,(e=>{h.includes(e.data.extensionKind)&&e.data.entityUris.some((e=>m.includes(e)))&&g()}))),[u,m,h,g]);const x=(0,t.useCallback)((a=>{const t=a.map((e=>e.extensions));let n;return n=(0,s.yQ)(r)&&"string"==typeof e?t?.at(0)?.[r]:(0,s.yQ)(r)&&"string"!=typeof e?t.map((e=>e[r])):(0,s.yQ)(r)||"string"!=typeof e?t:t.at(0),n}),[e,r]);return(0,l.I)({...a,queryKey:p,queryFn:()=>u.fetch(m,h),select:x})}(e,s.UH.PRERELEASE,{gcTime:36e5,staleTime:18e5}),m=(0,t.useMemo)((()=>a?r(a):null),[a,r]);switch(d){case"pending":case"error":return{status:d,data:null};case"success":return{status:d,data:m};default:return(0,u.k)(d),{status:"error",data:null}}}},25457:(e,r,a)=>{a.d(r,{W:()=>c});var t=a(97500),s=a.n(t),n=a(78717),i=a(70397),l=a(33535),o=a(86070);function c(){return(0,o.jsx)(n.E,{"data-separator":!0,variant:"bodySmall",semanticColor:"textSubdued",className:s()(l.A.separator,l.A.textSeparator),children:i.Ru.getSeparator()})}},28153:(e,r,a)=>{a.d(r,{w:()=>u});var t=a(30758),s=a(41919),n=a(70397),i=a(30929),l=a(48220),o=a(80357),c=a(84409);const u=({uri:e,isBook:r})=>{const{add:a,remove:u}=(0,o.p)("prerelease"),d=(0,l.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,i.d)(),{spec:h,logger:p}=(0,c.r)(s.k,{data:{uri:e}});return{isPreSaved:d,addPresave:(0,t.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await a(e),m(r?n.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):n.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[a,m,r,p,h,e]),removePresave:(0,t.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await u(e)}),[p,u,h,e])}}},36030:(e,r,a)=>{a.d(r,{P:()=>t});const t=()=>!1},38506:(e,r,a)=>{a.d(r,{B:()=>y});var t=a(41919),s=a(70397),n=a(8616),i=a(8594),l=a(89145),o=a(65720),c=a(50392),u=a(48788),d=a(30758),m=a(73136),h=a(97630),p=a(84409),g=a(86070);const x=({uri:e})=>{const r=(0,h.V)(e),{spec:a,logger:n}=(0,p.r)(t.k,{data:{uri:e||""}}),i=(0,d.useCallback)((()=>{e&&(n.logInteraction(a.actionBarFactory().preSaveButtonFactory().hitUiNavigate({destination:e})),r())}),[r,a,e,n]);return e?(0,g.jsx)(m.$,{onClick:i,children:s.Ru.get("web-player.prerelease.listen_now")}):null};var j=a(5653),b=a(54596);const y=({prereleaseUri:e,albumUri:r,albumName:a,artistUri:d,releaseDateISOString:m,backgroundColor:h})=>{const y=(0,j.c)(m),{spec:v,UBIFragment:f}=(0,p.r)(t.k,{data:{uri:e}}),k=(0,b.j)();return(0,g.jsx)(n.E,{backgroundColor:h,children:(0,g.jsxs)(i.S,{children:[y?(0,g.jsx)(x,{uri:r}):(0,g.jsx)(u.v,{uri:e}),(0,g.jsx)(f,{spec:v,children:(0,g.jsx)(o.b,{menu:(0,g.jsx)(c.P,{uri:e,artistUri:d}),children:(0,g.jsx)(l.e,{label:s.Ru.get("more.label.context",a),size:k})})})]})})}},39055:(e,r,a)=>{a.d(r,{h:()=>d});var t=a(30758),s=a(4880),n=a(63961),i=a(80464),l=a(93016),o=a(15679);var c=a(92404),u=a(86070);const d=({children:e,action:r,uri:a})=>{const d=(0,i.V)(),m=(0,o.N)(l.JD);let h;const p=()=>{const e={triggerId:n.d,triggerAction:{type:r}};s.h.set((r=>({...r,...e}))),m.storeAction(l.j8,{operation:c.tS.ADD,uris:[a]})};try{h=t.Children.only(e)}catch(r){return(0,u.jsx)(u.Fragment,{children:e})}return d?t.cloneElement(h,{onClick:p}):(0,u.jsx)(u.Fragment,{children:e})}},48788:(e,r,a)=>{a.d(r,{v:()=>m});var t=a(73136),s=a(62960),n=a(10700),i=a(39125),l=a(70397),o=a(39055),c=a(28153),u=a(275),d=a(86070);const m=({uri:e,isBook:r=!1})=>{const{isPreSaved:a,addPresave:m,removePresave:h}=(0,c.w)({uri:e,isBook:r});return a?(0,d.jsx)(s.n,{onClick:h,iconTrailing:n.k,children:l.Ru.get("web-player.prerelease.presaved")}):(0,d.jsx)(o.h,{uri:e,action:u.no.SAVE_PRERELEASE,children:(0,d.jsx)(t.$,{disabled:void 0===a,onClick:m,iconTrailing:i.P,children:l.Ru.get("web-player.prerelease.presave")})})}},50392:(e,r,a)=>{a.d(r,{P:()=>g});var t=a(30758),s=a(70397),n=a(28718),i=a(29277),l=a(79971),o=a(53021),c=a(45525),u=a(93083),d=a(80701),m=a(16986),h=a(19151),p=a(86070);const g=t.memo((function({uri:e,artistUri:r,canPin:a=d.oT.NO,isPinned:t=!1,canRemove:g=!1}){const{spec:x}=(0,m.o)(e);return(0,p.jsxs)(n.W,{children:[g&&(0,p.jsx)(u.p,{uri:e,removeLabel:s.Ru.get("contextmenu.remove-from-library")}),r&&(0,p.jsx)(l.z,{spec:x,divider:"after",uri:r,displayText:s.Ru.get("contextmenu.go-to-artist-radio")}),a!==d.oT.NO&&(0,p.jsx)(c.k,{uri:e,canPin:a,isPinned:t,type:h.c.PRE_RELEASE_ALBUM,spec:x}),(0,p.jsx)(i.m,{uri:e,spec:x,displayText:s.Ru.get("context-menu.copy-album-link")}),(0,p.jsx)(o.q,{spec:x,divider:"before",uri:e})]})}))},52855:(e,r,a)=>{a.d(r,{G:()=>A});var t=a(97500),s=a.n(t),n=a(70397),i=a(78717);const l="YNXLVjlRXPfM4xObTojA",o="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",u="gqidZhN1lgoZDfI_7E6w",d="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var h=a(86070);const p=({value:e,label:r,hasDivider:a=!1})=>(0,h.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,h.jsx)(i.E,{variant:"titleSmall",className:s()({[d]:a}),children:e}),(0,h.jsx)(i.E,{variant:"marginal",semanticColor:"textSubdued",children:r})]});var g=a(30758);const x=6e4,j=36e5,b=864e5;var y=a(9952),v=a(39418);const f={days:0,hours:0,minutes:0,seconds:0};function k(e){return e>0?function(e){const r=Math.abs(e);return{days:Math.floor(r/b),hours:Math.floor(r%b/j),minutes:Math.floor(r%j/x),seconds:Math.floor(r%x/1e3)}}(e):f}var C=a(73061),S=a(19151);const A=({targetDate:e,className:r,onComplete:a,images:t,imageTitle:i})=>{const{days:c,hours:d,minutes:x,seconds:j}=((e,r)=>{const a=(0,g.useRef)(r);a.current=r;const[t,s]=(0,g.useState)((()=>k((0,y.u)(e))));return(0,v.$)((r=>{const t=(0,y.u)(e),n=k(t);s(n),t<=0&&(r(),a.current?.())}),1e3),t})(e,a),b=void 0!==t&&t.length>0&&i,f=n.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:d,minutes:x,seconds:j});return(0,h.jsxs)("div",{className:s()(l,r,{[o]:b}),role:"timer","data-testid":"countdown",children:[(0,h.jsx)("span",{className:m,children:f}),b&&(0,h.jsx)(C.b,{images:t,type:S.c.ALBUM,shape:C.u.ROUNDED_CORNERS,className:u,title:i}),(0,h.jsx)(p,{value:c,label:n.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,h.jsx)(p,{value:d,label:n.Ru.get("web-player.prerelease.hours",d),hasDivider:!0}),(0,h.jsx)(p,{value:x,label:n.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,h.jsx)(p,{value:j,label:n.Ru.get("web-player.prerelease.seconds",j)})]})}},55598:(e,r,a)=>{a.r(r),a.d(r,{default:()=>g});var t=a(65809),s=a(18831),n=a(70397),i=a(30758),l=a(86070);const o=i.lazy((async()=>{const{LoadingPage:e}=await Promise.resolve().then(a.bind(a,3877));return{default:e}})),c=e=>(0,l.jsx)(i.Suspense,{fallback:null,children:(0,l.jsx)(o,{...e})});var u=a(16789),d=a(25146);const m=(0,i.lazy)((()=>a.e(8865).then(a.bind(a,23497)).then((e=>({default:e.AlbumPrerelease})))));var h=a(91988),p=a(59161);const g=({id:e})=>{const r=(0,t.NC)(p.p1X);if(!e)return(0,l.jsx)(c,{hasError:!0,errorMessage:n.Ru.get("error.not_found.title.album")});const a=(0,s.jsG)(e).toURI();return r===p.YRH.DISABLED?(0,l.jsx)(m,{uri:a},a):(0,l.jsx)(x,{prereleaseUri:a,property:r})};function x({prereleaseUri:e,property:r}){const{data:a,status:t}=(0,d.k7)(e,d.Yb);if("success"!==t)return(0,l.jsx)(c,{hasError:"error"===t,errorMessage:n.Ru.get("error.not_found.title.album")});if(!a)return(0,l.jsx)(c,{hasError:!0,errorMessage:n.Ru.get("error.not_found.title.album")});if(r===p.YRH.WITH_REDIRECT_TO_ALBUM_URI){const e=(0,s.Lce)(a).toURLPath(!0);return(0,l.jsx)(h.$,{to:e})}return(0,l.jsx)(u.A,{albumUri:a,prereleaseUri:e},a)}},58679:(e,r,a)=>{a.d(r,{t:()=>n});var t=a(15679),s=a(95758);function n(){return(0,t.N)(s.Z)}},63450:(e,r,a)=>{a.d(r,{B:()=>i});var t=a(78717),s=a(84195),n=a(86070);const i=({children:e})=>(0,n.jsx)(t.E,{variant:"bodySmall",className:s.A.pretitle,children:e})},68050:(e,r,a)=>{a.d(r,{r:()=>n});const t={container:"GI8QLntnaSCh2ONX_y2c"};var s=a(86070);function n({children:e}){return(0,s.jsx)("div",{className:t.container,children:e})}},76421:(e,r,a)=>{a.d(r,{r:()=>x});var t=a(58444),s=a(97471),n=a(97500),i=a.n(n),l=a(70397),o=a(2401);const c=36e5,u=864e5;var d=a(18298);const m="poz9gZKE7xqFwgk231J4";function h(e,r){return e-e%r}var p=a(86070);const g=({durationMs:e,className:r})=>{const a=e>u;let t;var s;t=a?u:h(s=e,s>36e6?c:s>18e6?18e5:s>36e5?9e5:s>18e5?3e5:6e4);const{hours:n,minutes:g}=(0,o.S)(t);if(0===n&&0===g)return null;let x=(0,d.j)({h:n,m:g,s:0});return x=a?l.Ru.get("time.over",x):l.Ru.get("time.estimated",x),(0,p.jsx)("span",{className:i()(m,r),children:x})};function x({durationMs:e,isEstimate:r}){return 0===e?null:(0,p.jsx)(t.q,{children:r?(0,p.jsx)(g,{durationMs:e}):(0,p.jsx)(s.d,{durationMs:e})})}},82758:(e,r,a)=>{a.d(r,{W:()=>s});var t=a(30758);const s=()=>{const[e,r]=(0,t.useState)(!1);return{isOpen:e,openModal:(0,t.useCallback)((()=>r(!0)),[]),closeModal:(0,t.useCallback)((()=>r(!1)),[])}}},86208:(e,r,a)=>{a.d(r,{j:()=>w});var t=a(30758),s=(a(22400),a(77369),a(97500)),n=a.n(s),i=a(78717),l=a(97351),o=a(18831),c=a(70397),u=a(50375),d=a(35054),m=a(97),h=a(93624),p=a(96579);var g=a(92797),x=a(332),j=a(24886),b=a(84195),y=a(86070);function v(e){return e?.displayName||e?.name||""}const f=e=>{let r=null;return(0,o.ecE)(e)&&(r=(0,y.jsx)(m.t,{uri:e})),(0,o.APS)(e)&&(r=(0,y.jsx)(h.B,{uri:e})),r},k=({creator:e,onClick:r,position:a=0})=>{const s=(0,t.useCallback)((t=>{r?.(t,{position:a,creator:e})}),[e,r,a]);return(0,g.s)(e)?(0,y.jsx)(d.h,{menu:f(e.uri),children:(0,y.jsx)(i.E,{variant:"bodySmallBold",children:(0,y.jsx)(p.N,{"data-testid":"creator-link",to:e.uri,onClick:s,children:v(e)})})}):(0,y.jsx)(i.E,{variant:"bodySmall",children:v(e)})},C=({creator:e,onClick:r,isSmallIcon:a})=>{const[t,s]=c.Ru.get("playlist.header.made-for","USER").split("USER");return(0,y.jsxs)("div",{className:n()(b.A.metaDataText,b.A.creatorWrapper,{[b.A.smallMadeForIcon]:a}),children:[(0,y.jsx)(l.D,{semanticColor:"textBrightAccent"}),(0,y.jsx)(i.E,{variant:"bodySmall",children:t}),(0,y.jsx)(k,{creator:e,onClick:r}),s&&(0,y.jsx)(i.E,{variant:"bodySmall",children:s})]})},S=({creator:e,onClick:r,isSmallIcon:a,prefix:t})=>(0,y.jsxs)("div",{className:n()(b.A.metaDataText,b.A.creatorWrapper),children:[e.images.length>0&&(0,y.jsx)(u.e,{label:v(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:a?20:24,userIconSize:a?"xsmall":"small"}),t&&(0,y.jsx)(i.E,{variant:"bodySmall",children:t}),(0,y.jsx)(k,{creator:e,onClick:r})]}),A=({creators:e,onPiledCreatorsClick:r,isSmallIcon:a})=>{const t=(0,y.jsx)("div",{className:b.A.piled,children:e.slice(0,3).map(((e,r)=>(0,y.jsx)(u.e,{label:v(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:a?20:24,userIconSize:a?"xsmall":"small",piled:r>0},e.uri)))});let s=c.Ru.get("playlist.header.creator-and-others",v(e[0]),e.length-1);return 2===e.length&&(s=c.Ru.get("playlist.header.creator-and-co-creator",v(e[0]),v(e[1]))),r?(0,y.jsxs)("button",{className:n()(b.A.metaDataText,b.A.creatorWrapper,b.A.creatorButton),onClick:r,children:[t,s]}):(0,y.jsxs)("div",{className:n()(b.A.metaDataText,b.A.creatorWrapper),children:[t,s]})},E=({creators:e,onCreatorClick:r})=>(0,y.jsx)(y.Fragment,{children:e.map(((e,a)=>(0,y.jsxs)(t.Fragment,{children:[0!==a&&(0,y.jsx)("span",{className:b.A.divider}),(0,y.jsx)(k,{creator:e,onClick:r,position:a})]},e.id)))}),R=({creators:e,onPiledCreatorsClick:r,onCreatorClick:a,isTunaApplied:t})=>{const s=(0,j.y)(),n=s===(x.E.SMALL||s===x.E.XSMALL);if(1===e.length&&e[0]){const r=e[0];return r.isMadeFor?(0,y.jsx)(C,{creator:r,onClick:a,isSmallIcon:n}):(0,y.jsx)(S,{creator:r,onClick:a,isSmallIcon:n,prefix:t?"":void 0})}return e.length>0&&e.every((e=>(0,o.APS)(e.uri)))?(0,y.jsx)(A,{creators:e,onPiledCreatorsClick:r,isSmallIcon:n}):(0,y.jsx)(E,{creators:e,onCreatorClick:a})};function w({creators:e,onCreatorClick:r,onPiledCreatorsClick:a,isTunaApplied:s}){return(0,y.jsx)(t.Suspense,{fallback:null,children:(0,y.jsx)(R,{creators:e,onPiledCreatorsClick:a,onCreatorClick:r,isTunaApplied:s})})}},93083:(e,r,a)=>{a.d(r,{p:()=>d});var t=a(30758),s=a(62411),n=a(10700),i=a(48729),l=a(86148),o=a(45786),c=a(96124),u=a(86070);const d=t.memo((function({uri:e,divider:r,removeLabel:a}){const d=(0,s.wA)(),m=!(0,o.n)(),h=(0,c.f)(),p=(0,t.useCallback)((async()=>{d((0,i.aw)(e,!0))}),[d,e]);return(0,u.jsx)(l.D,{role:"menuitem",divider:r,disabled:m&&!h?.getCapabilities().canModifyOffline,onClick:p,leadingIcon:(0,u.jsx)(n.k,{semanticColor:"textBrightAccent",size:"small"}),children:a})}))},96067:(e,r,a)=>{a.d(r,{Z:()=>i});a(77369);var t=a(31656);const s="rTMkDBDp47Eo12ZEQv4U";var n=a(86070);const i=({copyrights:e,courtesyLine:r})=>{const a=(e||[]).map(((e,r)=>{if(e.untyped)return(0,n.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},r);const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let s;return s="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,n.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:`${s} ${a}`},r)}));return r&&a.unshift((0,n.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:r},a.length)),(0,n.jsx)("div",{className:s,children:a})}},97471:(e,r,a)=>{a.d(r,{d:()=>c});var t=a(97500),s=a.n(t),n=a(2401),i=a(18298);const l="UyzJidwrGk3awngSGIwv";var o=a(86070);const c=({durationMs:e,className:r,displaySeconds:a})=>{const{hours:t,minutes:c,seconds:u}=(0,n.S)(e);return a=!1!==a&&!t&&u,(0,o.jsx)("span",{className:s()(l,r),children:(0,i.j)({h:t,m:c,s:a?u:0})})}},97630:(e,r,a)=>{a.d(r,{V:()=>i});var t=a(30758),s=a(18831),n=a(98756);function i(e){const r=(0,s.o_h)(e);let a="";return r&&(a=r.toURLPath(!0)),function(e){const r=(0,n.g)();return(0,t.useCallback)((()=>{""!==e&&r(e)}),[e,r])}(a)}},98630:(e,r,a)=>{a.d(r,{K:()=>x});var t=a(30758),s=a(35394),n=a(70397),i=a(57157),l=a(67240),o=a(60804);const c="bhvAemcPYUmxOdBe1mVi",u="hmgHdasWrZaA9tiXVw_u",d="RmbxUFLb4j9KmgftJyk1",m="boNCdFnbh9y0PBweIDUt",h="LfQtKa295FPgk8VuZRfD",p="Oytey9nANMtSDKSmZpJ6";var g=a(86070);const x=t.memo((function(e){const{images:r,title:a,isOpen:x,onClose:j}=e,b=(0,t.useMemo)((()=>(0,o.g)(r,{desiredSize:1e4})),[r]);return b?(0,g.jsx)(i.A,{className:c,isOpen:x,onRequestClose:j,animation:{modal:{base:m,afterOpen:h,beforeClose:p}},animated:!0,children:(0,g.jsxs)("div",{style:{"--image-width":`${b.width}px`,"--image-height":`${b.height}px`},className:u,children:[(0,g.jsx)(l._,{loading:"eager",alt:a,src:b.url,className:d}),(0,g.jsx)(s.H,{onClick:j,semanticColor:"textBase",children:n.Ru.get("web-player.cover-art-modal.close")})]})}):null}))}}]);
//# sourceMappingURL=xpui-routes-album.js.map