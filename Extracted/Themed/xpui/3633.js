"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3633],{43633:(e,a,t)=>{t.d(a,{DsaModal:()=>ie});var s=t(30758),i=t(62411),n=t(78717),d=t(78066),r=t(30920);function o(e){return{name:"AdDSAEvent",environments:["browser","device","desktop"],data:e}}var l=t(70397),c=t(48729),m=t(63181),u=t(67240),g=t(52613),h=t(9131);const v="vkMQw77rXE4cp8xsAdzl",E="emw6kR941D2wReukhCAJ";var N=t(86070);const x=({advertiser:e,legalEntityName:a})=>{const{item:t}=(0,m.L)()||{item:null},s=t&&(0,g.N)(t)?t?.images:void 0,i=(0,h.h)(s);return(0,N.jsxs)("div",{className:v,children:[i&&(0,N.jsx)(u._,{className:E,src:i,loading:"lazy"}),(0,N.jsx)(n.E,{variant:"bodyMediumBold","aria-label":e,children:e}),a&&(0,N.jsx)(n.E,{variant:"bodySmall",semanticColor:"textSubdued","aria-label":a,children:a})]})};t(77369),t(87175);var f=t(96683),T=t(28487);function b(e){var a,t,i,n,d,r=e.size?T.$Z[e.size]:e.iconSize,o=(0,T._C)([{size:16,svgContent:"<path d='M6.5.003a.75.75 0 0 0-.75.75V12.25c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V.753a.75.75 0 0 0-.75-.75zM7.25 11.5V1.503h1.5V11.5zM0 16h16v-1.5H0zm0-8.25A.75.75 0 0 1 .75 7h3a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75zm1.5.75v3H3v-3zm10.75-4.504a.75.75 0 0 0-.75.75v7.5c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75v-7.5a.75.75 0 0 0-.75-.75zm.75 7.5v-6h1.5v6z'/>"},{size:24,svgContent:"<path d='M9.25 3a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.5a1 1 0 0 1-1-1zm3.5 1h-1.5v12h1.5zM22 22H2v-2h20zM3 10a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h3.5a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1zm1 6v-4h1.5v4zm12.5-9a1 1 0 0 1 1-1H21a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-3.5a1 1 0 0 1-1-1zm3.5 9V8h-1.5v8z'/>"}],r||24),l=null!==(a=e.autoMirror)&&void 0!==a&&a;return s.createElement(T.In,Object.assign({},e,{autoMirror:l,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((n=e.title,d=e.titleId,n?"<title ".concat(d?'id="'.concat(d,'"'):"",">").concat(n,"</title>"):"")).concat((t=e.desc,i=e.descId,t?"<desc ".concat(i?'id="'.concat(i,'"'):"",">").concat(t,"</desc>"):"")).concat(o.svgContent)}}))}var I=t(492);const y="khENZvA4G9EjpLQiINss",R="Fu87PEr0tL6oDjmw_X2H",p=({title:e,showTitle:a,children:t})=>(0,N.jsxs)("section",{className:y,children:[a&&(0,N.jsx)(n.E,{className:R,variant:"bodyMediumBold",as:"h3","aria-label":e,children:e}),t]});var j=t(60329);const A="P9gpV_sgryfUERYOdfor",_=({text:e,icon:a})=>(0,N.jsxs)(j.K,{className:A,condensed:!0,children:[a,(0,N.jsx)(n.E,{variant:"bodyMedium","aria-label":e,as:"h4",children:e})]});let S=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.AGE=1]="AGE",e[e.GEO=2]="GEO",e[e.GENDER=3]="GENDER",e[e.INTEREST=4]="INTEREST",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});const w={fromJSON:e=>({targetingTypes:globalThis.Array.isArray(e?.targetingTypes)?e.targetingTypes.map((e=>function(e){switch(e){case 0:case"UNKNOWN":return S.UNKNOWN;case 1:case"AGE":return S.AGE;case 2:case"GEO":return S.GEO;case 3:case"GENDER":return S.GENDER;case 4:case"INTEREST":return S.INTEREST;default:return S.UNRECOGNIZED}}(e))):[],legalEntityName:G(e.legalEntityName)?globalThis.String(e.legalEntityName):"",showTailoredAdsSection:G(e.showTailoredAdsSection)?Boolean(e.showTailoredAdsSection):void 0}),toJSON(e){const a={};return e.targetingTypes?.length&&(a.targetingTypes=e.targetingTypes.map((e=>function(e){switch(e){case S.UNKNOWN:return"UNKNOWN";case S.AGE:return"AGE";case S.GEO:return"GEO";case S.GENDER:return"GENDER";case S.INTEREST:return"INTEREST";case S.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e)))),""!==e.legalEntityName&&(a.legalEntityName=e.legalEntityName),void 0!==e.showTailoredAdsSection&&(a.showTailoredAdsSection=e.showTailoredAdsSection),a},create:e=>w.fromPartial(e??{}),fromPartial(e){const a={targetingTypes:[],legalEntityName:"",showTailoredAdsSection:void 0};return a.targetingTypes=e.targetingTypes?.map((e=>e))||[],a.legalEntityName=e.legalEntityName??"",a.showTailoredAdsSection=e.showTailoredAdsSection??void 0,a}};const z={fromJSON:e=>({lineitemId:G(e.lineitemId)?globalThis.String(e.lineitemId):"",adId:G(e.adId)?globalThis.String(e.adId):""}),toJSON(e){const a={};return""!==e.lineitemId&&(a.lineitemId=e.lineitemId),""!==e.adId&&(a.adId=e.adId),a},create:e=>z.fromPartial(e??{}),fromPartial(e){const a={lineitemId:"",adId:""};return a.lineitemId=e.lineitemId??"",a.adId=e.adId??"",a}};function G(e){return null!=e}const O="FB2PxTNhkGbwFwYI2ufG",C="gZYgXNWbFSAAjLzGhOI9",M="eYxzC4s3Nw68RcbK7xzl",k="QrelMvam4WOTMVaO28Rl",B="_EaBFRLKy0nZJXkiRwlx",D="N77hKGzNc_lKQ5OG1EBN",U="JceC3xibcl3MHVULIK0b",V="Uk72m6OFBBdTZ3RJb0K_",L="IFqCps3krPbH25azco3F";const H=({activeTargetingTypes:e})=>{const a=[S.GEO,S.INTEREST].some((a=>e.includes(a)));if(!a)return null;const t=a&&e.some((e=>e===S.AGE||e===S.GENDER));return(0,N.jsx)(p,{title:l.Ru.get("ad-formats.dsa.modal.otherInfo"),showTitle:t,children:(0,N.jsx)(I.b,{className:L,condensedAll:!0,children:e.map((e=>{const a=function(e){switch(e){case S.GEO:return{icon:(0,N.jsx)(f.t,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.location")};case S.INTEREST:return{icon:(0,N.jsx)(b,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.interests")};default:return null}}(e);return a?(0,N.jsx)(_,{icon:a.icon,text:a.text},e):null}))})})};function K(e){var a,t,i,n,d,r=e.size?T.$Z[e.size]:e.iconSize,o=(0,T._C)([{size:16,svgContent:"<path d='M9.5 2.4c0 .74-.302 1.207-.75 1.434v1.49h4.5c.966 0 1.75.784 1.75 1.75v1.917c0 .74-.284 1.415-.75 1.92v3.839c0 .69-.56 1.25-1.25 1.25H3c-.69 0-1.25-.56-1.25-1.25v-3.839A2.82 2.82 0 0 1 1 8.991V7.074c0-.966.784-1.75 1.75-1.75h4.5v-1.49C6.802 3.607 6.5 3.14 6.5 2.4c0-.937.809-1.723 1.284-2.184A9 9 0 0 0 8 0q.087.09.216.216C8.691.677 9.5 1.463 9.5 2.4m-6.25 9.364V14.5h9.5v-2.736q-.283.06-.583.06h-.094a2.73 2.73 0 0 1-1.975-.84 2.82 2.82 0 0 1-2.098.93c-.832 0-1.58-.359-2.098-.93-.499.518-1.2.84-1.975.84h-.094q-.3 0-.583-.06m6.833-3.43a.75.75 0 0 1 .75.75c0 .685.556 1.24 1.24 1.24h.094c.736 0 1.333-.597 1.333-1.333V7.074a.25.25 0 0 0-.25-.25H2.75a.25.25 0 0 0-.25.25v1.917c0 .736.597 1.333 1.333 1.333h.094a1.24 1.24 0 0 0 1.24-1.24.75.75 0 0 1 .75-.75h.003a.75.75 0 0 1 .75.75 1.33 1.33 0 1 0 2.66 0 .75.75 0 0 1 .75-.75z'/>"},{size:24,svgContent:"<path d='M13 5.793c.598-.284 1-.868 1-1.793 0-1.17-1.079-2.154-1.711-2.73Q12.116 1.114 12 1c-.076.076-.175.166-.289.27C11.08 1.846 10 2.83 10 4c0 .925.402 1.509 1 1.793V7.9H5a3 3 0 0 0-2.993 2.8H2v2.4a4 4 0 0 0 1 2.646V21a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5.254c.622-.705 1-1.632 1-2.646v-2.4h-.007A3 3 0 0 0 19 7.9h-6zM5 9.9h14a1 1 0 0 1 1 1v2.2a2 2 0 1 1-4 0V13a1 1 0 0 0-2 0v.1a2 2 0 1 1-4 0V13a1 1 0 0 0-2 0v.1a2 2 0 1 1-4 0v-2.2a1 1 0 0 1 1-1m14 7.074V21H5v-4.026a4.01 4.01 0 0 0 4-1.228 4 4 0 0 0 3 1.354 4 4 0 0 0 3-1.354 3.99 3.99 0 0 0 4 1.228'/>"}],r||24),l=null!==(a=e.autoMirror)&&void 0!==a&&a;return s.createElement(T.In,Object.assign({},e,{autoMirror:l,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((n=e.title,d=e.titleId,n?"<title ".concat(d?'id="'.concat(d,'"'):"",">").concat(n,"</title>"):"")).concat((t=e.desc,i=e.descId,t?"<desc ".concat(i?'id="'.concat(i,'"'):"",">").concat(t,"</desc>"):"")).concat(o.svgContent)}}))}var F=t(91843),Z=t(21765),q=t(42805),P=t(19239),W=t(42010),J=t(61537),Y=t(30261);const Q=({activeTargetingTypes:e,item:a})=>{const t=(0,P.vh)(),{openURLWithSessionTransfer:s}=(0,Y.L)();return[S.AGE,S.GENDER].some((a=>e.includes(a)))?(0,N.jsxs)(p,{title:l.Ru.get("ad-formats.dsa.modal.profileInfo"),showTitle:!0,children:[(0,N.jsx)(I.b,{className:L,condensedAll:!0,style:{marginBlockEnd:(0,Z.po)("base")},children:e.map((e=>{const a=function(e){switch(e){case S.AGE:return{icon:(0,N.jsx)(K,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.age")};case S.GENDER:return{icon:(0,N.jsx)(F.v,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.gender")};default:return null}}(e);return a?(0,N.jsx)(_,{icon:a.icon,text:a.text},e):null}))}),(0,N.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued","aria-label":l.Ru.get("ad-formats.dsa.modal.adRelevancyAction"),children:l.Ru.get("ad-formats.dsa.modal.adRelevancyAction")}),(0,N.jsxs)(q.Y,{component:"button","aria-label":"Edit your Spotify profile, link",className:D,semanticColor:"textBrightAccent",onClick:()=>{s(J.vE),t.send(o({ad_id:a.adId,lineitem_id:a.metadata?.lineitem_id,creative_id:a.metadata?.creative_id,slot:a.slot,event:"event_clicked",reason:"edit_profile",surface:"ad_dsa_view"}))},standalone:!0,children:[(0,N.jsx)(n.E,{variant:"bodyMediumBold",as:"h2",children:l.Ru.get("ad-formats.dsa.modal.editProfile")}),(0,N.jsx)(W.p,{semanticColor:"textBrightAccent"})]})]}):null},X=({item:e})=>{const a=(0,P.vh)(),{openURLWithSessionTransfer:t}=(0,Y.L)();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("hr",{className:U}),(0,N.jsx)(n.E,{className:V,variant:"titleSmall","aria-label":l.Ru.get("ad-formats.dsa.modal.aboutTailoredAds"),as:"h2",children:l.Ru.get("ad-formats.dsa.modal.aboutTailoredAds")}),(0,N.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued","aria-label":l.Ru.get("ad-formats.dsa.modal.tailoredAds"),children:l.Ru.get("ad-formats.dsa.modal.tailoredAds")}),(0,N.jsxs)(q.Y,{component:"button","aria-label":"Visit your privacy settings, link",className:D,semanticColor:"textBrightAccent",onClick:()=>{t(`${J.k$}/#tailored-ads`),a.send(o({ad_id:e.adId,creative_id:e.metadata?.creative_id,event:"event_clicked",lineitem_id:e.metadata?.lineitem_id,reason:"change_preferences",request_id:e.requestId,slot:e.slot,surface:"ad_dsa_view"}))},standalone:!0,children:[(0,N.jsx)(n.E,{variant:"bodyMediumBold",as:"h2",children:l.Ru.get("ad-formats.dsa.modal.privacySetting")}),(0,N.jsx)(W.p,{semanticColor:"textBrightAccent"})]})]})};var $=t(19507),ee=t(99129);const ae=(e,a)=>["useDsaMetadata",a,e],te=(e,a)=>()=>(0,ee.ZY)(z.fromPartial({lineitemId:a,adId:e}));var se=t(57157);const ie=({item:e})=>{const a=(0,P.vh)(),t=(0,i.wA)(),{isOpen:m}=(0,i.d4)((e=>e.ui.dsaDialog)),{data:u,isLoading:g}=((e,a)=>{const{data:t,isLoading:s,isError:i}=(0,$.I)({queryKey:ae(e,a),queryFn:te(e,a),gcTime:6e4,staleTime:6e4,enabled:!!a&&!!e});return{data:t?w.fromJSON(t):null,isLoading:s,isError:i}})(e.adId,e.metadata?.lineitem_id);return(0,s.useEffect)((()=>{a.send(o({ad_id:e.adId,creative_id:e.metadata?.creative_id,event:"event_viewed",lineitem_id:e.metadata?.lineitem_id,reason:"ad_dsa_view",request_id:e.requestId,slot:e.slot,surface:"ad_dsa_view"}))}),[]),(0,N.jsxs)(se.A,{className:O,isOpen:m,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,contentLabel:l.Ru.get("ad-formats.dsa.aboutThisAd"),children:[(0,N.jsx)("div",{className:M,children:(0,N.jsx)(n.E,{"aria-label":l.Ru.get("ad-formats.dsa.aboutThisAd"),variant:"titleMedium",as:"h1",children:l.Ru.get("ad-formats.dsa.aboutThisAd")})}),(0,N.jsx)("hr",{className:U}),(0,N.jsx)("div",{className:C,children:g?(0,N.jsx)("div",{className:k,"data-testid":"loading-indicator",children:(0,N.jsx)(d.U,{size:"large"})}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x,{advertiser:e.metadata.advertiser,legalEntityName:u?.legalEntityName}),u?.targetingTypes.length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(n.E,{className:V,variant:"titleSmall",as:"h2","aria-label":l.Ru.get("ad-formats.dsa.modal.adBasedInfoExplanation"),children:l.Ru.get("ad-formats.dsa.modal.adBasedInfoExplanation")}),(0,N.jsx)(Q,{item:e,activeTargetingTypes:u?.targetingTypes}),(0,N.jsx)(H,{item:e,activeTargetingTypes:u?.targetingTypes})]}):(0,N.jsx)(n.E,{className:V,as:"h2","aria-label":l.Ru.get("ad-formats.dsa.modal.targeting.unknown"),tabIndex:0,children:l.Ru.get("ad-formats.dsa.modal.targeting.unknown")}),u?.showTailoredAdsSection&&(0,N.jsx)(X,{item:e})]})}),(0,N.jsx)("button",{"aria-label":l.Ru.get("close_button_action"),className:B,onClick:()=>{t((0,c.ft)())},children:(0,N.jsx)(r.M,{size:"medium",semanticColor:"textBase"})})]})}}}]);
//# sourceMappingURL=3633.js.map