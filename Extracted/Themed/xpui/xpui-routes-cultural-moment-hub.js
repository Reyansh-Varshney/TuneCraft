"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3838],{10735:(t,e,o)=>{o.d(e,{U:()=>T});var n=o(30758),a=o(78717),i=o(70397),r=o(90098),s=o(71259),l=o(23658),c=o(97500),u=o.n(c);const d="SlbzF58tYfJdBqTpDBZE",p="VFWaXWtN61bTc_4UOexe",h="C3sIZDdL9EfwMJcSgl8t";var m=o(86070);const g=({children:t,className:e})=>(0,m.jsx)("span",{className:u()(d,e),children:t}),b=t=>(0,m.jsx)("span",{className:u()(t.className,p,{[h]:t.noSeparator}),children:t.children});var x=o(1609),_=o(34720);const v="GSY8YnDV4YNR_W53fPhi",f="dQYtZdjVyebpK221a_JU",y=(0,n.memo)((function(t){const{src:e,description:o,...n}=t,i=(0,_.z)(e,"inherit","colorDark");return e?(0,m.jsx)("div",{className:v,style:{backgroundColor:i},"data-testid":"episode-fallback-image-container",children:(0,m.jsx)("div",{className:f,children:(0,m.jsx)(a.E,{as:"p",variant:"titleSmall",children:o})})}):(0,m.jsx)(x.L,{...n,size:"xxlarge"})}));var j=o(3257),A=o(82102),L=o(35054),w=o(76020),C=o(57399),N=o(24792),I=o(96579),k=o(87988),E=o(42394),S=o(28054),F=o(99893),D=o(94545),M=o(55797),V=o(60804);const P="Qb8_f8zfu_KeMGbDtEOO",T=({description:t,isExplicit:e,images:o,name:c,uri:u,durationMilliseconds:d,releaseDate:p,resume_point:h,showImages:x,sharingInfo:_,is19PlusOnly:v,isHero:f,onClick:T,onPlay:R,testId:z,index:H,requestId:B,color:O,episodeShow:U,variant:q,logCardImpressions:Z=!1,hasAssociatedVideo:W,role:Y})=>{let K;const Q=p?new Date(p):void 0,X=Q&&!isNaN(Q.getTime())&&!isNaN(d),G=(0,V.g)(x,{desiredSize:48}),J=(0,k.hD)(u,Q?.toISOString(),h?.resume_position_ms,h?.fully_played),$=U?.uri||"",{draggable:tt,onDragStart:et}=(0,S.P)({itemUris:[$],dragLabelText:U?.name}),ot=(0,n.useCallback)((()=>{T?.($)}),[T,$]),nt=(0,m.jsxs)(m.Fragment,{children:[e&&!v&&(0,m.jsx)(b,{className:P,noSeparator:!0,children:(0,m.jsx)(F.U,{})}),v&&(0,m.jsx)(b,{className:P,noSeparator:!0,children:(0,m.jsx)(D.q,{size:16})})]}),at=X&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(b,{children:(0,M.gD)(Q)}),(0,m.jsx)(b,{children:i.Ru.get("episode.length",Math.ceil(d/6e4))})]});return K=f?(0,m.jsx)(j.A,{index:H,onClick:T,headerText:c,featureIdentifier:"episode",uri:u,onPlay:R,isPlayable:!0,isDownloadable:!0,hasNewEpisodeIndicator:J,renderCardImage:()=>(0,m.jsx)(s.M,{isHero:!0,images:o,color:O,FallbackComponent:e=>(0,m.jsx)(y,{...e,description:t,src:G&&G.url})}),renderSubHeaderContent:()=>(0,m.jsx)(l.c,{isHero:!0,children:(0,m.jsxs)(g,{children:[nt,W&&(0,m.jsx)(b,{children:(0,m.jsx)(E.T,{separator:""})}),(0,m.jsx)(b,{children:(0,m.jsx)(A.t,{children:i.Ru.get("card.tag.episode")})}),at,U&&(0,m.jsx)(b,{children:(0,m.jsx)(N.Zp,{label:U?.name,showDelay:N.uF,children:(0,m.jsx)(a.E,{as:"span",children:(0,m.jsx)(L.h,{menu:(0,m.jsx)(C.H,{uri:$}),children:(0,m.jsx)(I.N,{draggable:tt,to:$,onDragStart:et,dir:"auto",onClick:ot,children:U?.name})})})})})]})}),testId:z,requestId:B,logCardImpressions:Z}):(0,m.jsx)(r.Z,{variant:q,index:H,onClick:T,headerText:c,featureIdentifier:"episode",uri:u,role:Y,isPlayable:!0,isDownloadable:!0,hasNewEpisodeIndicator:J,renderCardImage:()=>(0,m.jsx)(s.M,{images:o,color:O,FallbackComponent:e=>(0,m.jsx)(y,{...e,description:t,src:G&&G.url})}),renderSubHeaderContent:()=>(0,m.jsx)(l.c,{children:(0,m.jsxs)(g,{children:[nt,W&&(0,m.jsx)(E.T,{separator:""}),at]})}),testId:z,requestId:B,logCardImpressions:Z}),(0,m.jsx)(L.h,{menu:(0,m.jsx)(w.b,{uri:u,sharingInfo:_}),children:K})}},34720:(t,e,o)=>{o.d(e,{r:()=>c,z:()=>u});var n=o(30758),a=o(66590),i=o(39159),r=o(3424),s=o(254),l=o(19507);function c(t=null){const{request:e}=(0,n.useContext)(s.j),{data:o}=(0,l.I)({queryKey:["extracted-color",t],queryFn:()=>t?(0,r.j)(e,t).then((t=>{const e=t?.[0];return e?{colorDark:e.colorDark.toCSS(i.a.HEX),colorLight:e.colorLight.toCSS(i.a.HEX),colorRaw:e.colorRaw.toCSS(i.a.HEX)}:null})):null,gcTime:864e5,staleTime:216e5,enabled:!!t});return o??void 0}function u(t=null,e=a.l0o,o="colorRaw"){return c(t)?.[o]??e}},80835:(t,e,o)=>{o.r(e),o.d(e,{REDIRECT_BASE:()=>ot,default:()=>at});var n=o(30758),a=o(97500),i=o.n(a);const r="music",s="0.1.0",l="default",c="12.2.0";function u(t){return new d(t)}class d{constructor(t){this._path=[{name:"desktop-culturalmoments-hub",...t.data}],t?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=t.parentAbsoluteLocation)}shelvesFactory(){return new d.ShelvesEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}mobilePromptFactory(){return new d.MobilePromptEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[l,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}!function(t){t.ShelvesEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:o}){this._path=t.concat({name:"shelves"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[l,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}}(d||(d={})),function(t){t.MobilePromptEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:o}){this._path=t.concat({name:"mobile_prompt"}),e&&(this._parentAbsoluteLocation=e)}appleBadgeFactory(){return new t.MobilePromptEventFactory.AppleBadgeEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}googleBadgeFactory(){return new t.MobilePromptEventFactory.GoogleBadgeEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[l,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}impression(){return{app:r,generatorVersion:c,specificationVersion:s,specificationMode:l,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(d||(d={})),function(t){!function(t){t.AppleBadgeEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:o}){this._path=t.concat({name:"apple_badge"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[l,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitNavigateToWebviewUri({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"navigate_to_webview_uri",actionVersion:1,app:r,generatorVersion:c,interactionType:"hit",specificationMode:l,specificationVersion:s,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.MobilePromptEventFactory||(t.MobilePromptEventFactory={}))}(d||(d={})),function(t){!function(t){t.GoogleBadgeEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:o}){this._path=t.concat({name:"google_badge"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[l,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitNavigateToWebviewUri({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"navigate_to_webview_uri",actionVersion:1,app:r,generatorVersion:c,interactionType:"hit",specificationMode:l,specificationVersion:s,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.MobilePromptEventFactory||(t.MobilePromptEventFactory={}))}(d||(d={}));var p=o(70397),h=o(49742),m=o(19399),g=o(3877),b=(o(54687),o(66590)),x=o(49740),_=o(19667),v=o(98210),f=o(4218),y=o(24448),j=o(11903),A=o(86070);const L=({image:t,color:e=b.vyq,title:o})=>{const n=void 0===t?x.K.SMALL:x.K.DEFAULT,a=t?.custom?.sizes?.flatMap((t=>t.uri?[{url:t.uri,width:t.width,height:t.height}]:[]))??(t?.uri?[{url:t?.uri}]:[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(x.z,{backgroundImages:a,backgroundColor:e,size:n,children:[(0,A.jsx)(v.h,{children:o?(0,A.jsx)(f.X,{text:o}):null}),(0,A.jsx)(_.Y,{children:o?(0,A.jsx)(y.mm,{children:o}):null})]}),(0,A.jsx)(j.f,{color:e})]})};o(66016),o(86328),o(77369);var w=o(18831),C=o(82092),N=o(10735),I=o(95685);const k=t=>{if("number"==typeof t){return new Date(1e3*t).toISOString()}return null};const E=(t,e,o)=>{if(void 0===t.id)return null;const n=e.map(((t,e)=>function(t,e){const o=t.component?.id,n=t.id;if(void 0===o||void 0===n)return null;const a=t.events?.click?.data?.uri,i=t.images?.main?.uri,r=i?[{url:i}]:[];switch(o){case"culturalmoments:mediumEpisodeCard":case"culturalmoments:episodeCardActionsMedium":return void 0===a?null:(0,A.jsx)(N.U,{uri:a,name:t.text?.title??"",images:r,showImages:r,description:t.text?.description??t.text?.subtitle??"",durationMilliseconds:(s=t.custom?.duration,"number"==typeof s?s:0),releaseDate:k(t.custom?.releaseDate),resume_point:null,isExplicit:!1,is19PlusOnly:!1,sharingInfo:null,index:e},n);case"culturalmoments:playlistCard":case"culturalmoments:playlistCardActionsMedium":return void 0===a?null:(0,A.jsx)(I.B,{uri:a,name:t.text?.title??"",images:r,description:t.text?.description??"",authorName:t.text?.subtitle??"",index:e},n);default:return null}var s}(t,e))).flatMap((t=>t?[t]:[]));if(0===n.length)return null;const a=(0,w.o_h)(t.events?.click?.data?.uri??"")?.toURLPath(!0);return(0,A.jsx)(C.p,{title:t.text?.title??"",total:n.length,seeAllUri:a,index:o,id:t.id,seeAllLabel:t.text?.accessory,children:n},t.id)};var S=o(281),F=o(78717),D=o(81458),M=o(25669),V=o(96579);const P=["ar","az","bg","cs_CZ","da","de","ee","el","en","es","es_mx","fi","fp","fr","fr_ca","he","hu","id","it","ja","ko","lt","lv","ms","mt","nb","nl","pl","pt","pt_br","ro","ru","sk","sl","sv","th_TH","tr","vi_VN","zh_HANS","zh_HANT"],T=["af","ar","am","az","be","bg","bn","bs","ca","cr","cs_CZ","da","de","el","en","es","es_419","et","eu","fa","fi","fp","fr","fr_ca","gl","gu","he","hi","hr","hu","hy","id","is","it","ja","ka","kk","km","kn","ko","ky","lo","lt","lv","mk","ml","mn","mr","ms","my","nb","ne","nl","pa","pl","pt","pt_br","ro","ru","si","sk","sl","sq","sr","sv","sw","ta","te","th_TH","tr","ua","ur","uz","vi_VN","zh_HANS","zh_HANT","zh_hk","zu"],R=t=>`images/download-badges/google/${T.includes(t)?t:"int"}.svg`;var z=o(68293),H=o(61315);const B="MT6jAR25XYfoarcSqHDd",O="IYZA3J2VTMydirxq_bdg",U="t6RJK1eND2uPmFYOi32l";var q=function(t){return t.ANDROID="https://play.google.com/store/apps/details?id=com.spotify.music",t.IOS="https://apps.apple.com/app/spotify-music/id324684580",t}(q||{});const Z=({spec:t,model:e})=>{const o=p.Ru.getLocaleForTranslation(),n=(0,z.s)(),a=(0,H.n)(t.getAbsoluteLocation(),t),r=e.text?.title,s=e.text?.subtitle;if(void 0===r&&void 0===s)return null;const l=e=>{if(e===q.ANDROID){const o=t.googleBadgeFactory().hitNavigateToWebviewUri({destination:e});n.logInteraction(o)}else{const o=t.appleBadgeFactory().hitNavigateToWebviewUri({destination:e});n.logInteraction(o)}};return(0,A.jsxs)(S.a,{variant:"tinted",style:{width:600},ref:a,"data-testid":"unsupported-message",children:[(0,A.jsx)(F.E,{as:"p",variant:"bodyMediumBold",style:{marginBottom:D.v4},children:r}),(0,A.jsx)(F.E,{as:"p",variant:"bodySmall",style:{marginBottom:D.CD},children:s}),(0,A.jsxs)("div",{className:i()(U),children:[(0,A.jsx)(V.N,{to:q.IOS,target:"_blank",onClick:()=>l(q.IOS),children:(0,A.jsx)("img",{src:(0,M.bj)((c=o,`images/download-badges/apple/${P.includes(c)?c:"int"}.svg`)),alt:p.Ru.get("web-player.cultural-moments.unsupported.appleAppStoreAlt"),className:B})}),(0,A.jsx)(V.N,{to:q.ANDROID,target:"_blank",onClick:()=>l(q.ANDROID),children:(0,A.jsx)("img",{src:(0,M.bj)(R(o)),alt:p.Ru.get("web-player.cultural-moments.unsupported.googlePlayStoreAlt"),className:i()(B,O)})})]})]});var c},W=(t,e)=>{const o=(t=>{const e=Array();let o,n=Array();return t.forEach((t=>{"culturalmoments:sectionHeaderWithAction"===t.component?.id?(o&&0!==n.length&&e.push({heading:o,components:n}),o=t,n=Array()):o&&("culturalmoments:carousel"===t.component?.id||"glue2:carousel"===t.component?.id?t.children?.forEach((t=>{n.push(t)})):n.push(t))})),o&&0!==n.length&&e.push({heading:o,components:n}),e})(t),n=(t=>t.find((t=>"culturalmoments:unavailableBanner"===t.component?.id)))(t);return(0,A.jsxs)(A.Fragment,{children:[n?(0,A.jsx)(Z,{spec:e,model:n},n.component?.id):null,o.map(((t,e)=>E(t.heading,t.components,e)))]})};var Y=o(43891),K=o(55827);const Q=(t,e)=>{const o=new Intl.DateTimeFormat;return t.build().withHost(K.LG).withPath("/hub").withQueryParameters({id:e,userHasRiF:!1,clientTimezone:o.resolvedOptions().timeZone??""}).withoutMarket().withEndpointIdentifier("cultural-moment/hub").send()};var X=o(2715),G=o(84409);const J="gtqpWbwIV4PTEp8Q0ZW4",$="edYsLe1QCBdzPglEiROZ",tt=({uri:t,id:e})=>{const{data:o,error:a,loading:r}=(0,X.Z)(Q,[e]),{spec:s,UBIFragment:l}=(0,G.r)(u,{data:{identifier:t,uri:t}}),c=(0,n.useMemo)((()=>s.shelvesFactory()),[s]),d=(0,n.useMemo)((()=>s.mobilePromptFactory()),[s]),b=o?.body.hubViewData?.body,x=o?.body.hubViewData?.header;if(null===o||void 0===b||void 0===x||r||null!==a)return(0,A.jsx)(g.LoadingPage,{hasError:null!==a,errorMessage:p.Ru.get("error.generic")});const _=o.body.hubViewData?.title,v=x?.text?.title;return(0,A.jsxs)(l,{spec:s,children:[(0,A.jsx)(m.Q,{children:_??""}),v?(0,A.jsx)("div",{children:(0,A.jsx)(L,{title:x?.text?.title,image:x.images?.background})}):null,(0,A.jsx)(l,{spec:c,children:(0,A.jsxs)("div",{className:$,children:[v&&(0,A.jsx)(h.K,{}),(0,A.jsx)("div",{className:i()("contentSpacing",J),children:(0,A.jsx)(Y._,{children:b?W(b,d):null})})]})})]})};var et=o(80464);const ot="https://accounts.spotify.com/login",nt=()=>{const t=window.location.href;return window.location.href=`${ot}?continue=${encodeURIComponent(t)}`,null},at=t=>(0,et.V)()?(0,A.jsx)(nt,{}):(0,A.jsx)(tt,{...t})}}]);
//# sourceMappingURL=xpui-routes-cultural-moment-hub.js.map