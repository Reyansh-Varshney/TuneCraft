"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5522],{75522:(e,a,r)=>{r.d(a,{AdDebug:()=>S});r(77369),r(27582);var s=r(30758),i=r(96346),t=r(78717),o=r(40765),n=r(78723),l=r(40539),d=r(36544),c=r(73136),u=r(23436),h=(r(98273),r(77156)),m=r(87382),p=r(25085);const v=(0,m.h)();window.abba={get:async function(e,a){const r=new h.EW((0,p.X)()),s=(await r.getValues(h.kM.fromPartial({}))).pairs;let i={},t="";if(s.abbaOverrides?t=s.abbaOverrides:s.abbaoverrides&&(t=s.abbaoverrides),t)try{i=JSON.parse(t)}catch(e){console.error(`error parsing value=${t}, error=${e}`)}if(Object.prototype.hasOwnProperty.call(i,e))return console.warn(`Abba: Override for ${e} : ${i[e]}`),void setTimeout((()=>a(null,i[e])),0);v.post("sp://abba/v1/flags",{flags:[e]}).then((r=>{const{flags:s=[]}=r,i=s[0]&&s[0].featureName===e&&s[0].cell;a(null,i||null)})).catch((e=>{a(e)}))},getAll:function(e){console.warn("Abba:getAll should only be used by TA tests for logging purposes."),v.get("sp://abba/v1/all_flags").then((a=>{const{flags:r=[]}=a,s=r.reduce(((e,a)=>(e[a.featureName]=a.cell,e)),{});e(null,JSON.stringify(s,null,2))})).catch((a=>{e(a)}))},getRequestedFlagNames:function(e){v.get("sp://abba/v1/requested_flag_names").then((a=>{e(null,JSON.stringify(a.sort(),null,2))})).catch((a=>{e(a)}))}};var b=r(94096);const g=function(){const[e,a]=(0,s.useState)();return{adMocks:e,getAdMocks:(0,s.useCallback)((async()=>b.D.getMocksList().then((e=>{a(e.body.test_cases)}))),[])}},x="rh7v8PDNC0ke2OkkyRhk",j="Kh0jtEAjRK83Z5A_IZRx";var f=r(86070);const S=()=>{const e=e=>60*e,[a,r]=(0,s.useState)(e(20)),[h,m]=(0,s.useState)(""),[p,v]=(0,s.useState)(""),[S,k]=(0,s.useState)(""),[y,A]=(0,s.useState)((new Date).toISOString()),[E,C]=(0,s.useState)({message:"",status:"success"}),[w,T]=(0,s.useState)(!1),{adMocks:$,getAdMocks:M}=g(),N=({message:e,isError:a})=>{C({message:e,status:a?"error":"success"}),T(!0),setTimeout((()=>T(!1)),5e3)},L=(0,s.useCallback)((e=>{b.D.clearSlot(e).then((()=>{N({message:`${e} cleared`,isError:!1})}))}),[]),O=(0,s.useCallback)((e=>{r(e),b.D.increaseStreamTime(e).then((()=>{N({message:`${e} seconds of stream time added`,isError:!1})})).catch((e=>{N({message:`Error increasing stream time: ${e}`,isError:!0})}))}),[]),D=(0,s.useCallback)((e=>{const a=e.currentTarget.value;if(a){const[e,r]=a.split("|");b.D.overrideAdServerEndpoint("leaderboard",`https://admocker.spotify.com/mock/display?test_case=${e}&response_template=${r}&session_id=${y}`),N({message:`Leaderboard override set to ${e} with template ${r}`,isError:!1})}}),[y]);return(0,s.useEffect)((()=>{M().then((()=>{N({message:"Ad mocks fetched",isError:!1})})).catch((()=>{N({message:"Ad mocks fetch failed",isError:!0})}))}),[M]),(0,f.jsxs)("div",{className:x,children:[(0,f.jsx)(i.qb,{colorSet:"error"===E.status?"negative":"brightAccent",showSnackbar:w,children:E.message}),(0,f.jsx)(t.E,{as:"h1",variant:"headlineMedium",paddingBottom:"24px",children:"Ad Debug Tools"}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Increase Stream Time"}),(0,f.jsx)(o.g,{label:"Quick add stream time",children:(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(n.I,{mode:"action",layout:"single-line","aria-label":"Stream time presets",children:[(0,f.jsx)(l.v,{variant:"contrasting",onClick:()=>O(e(1)),children:"Add 1 min"}),(0,f.jsx)(l.v,{variant:"contrasting",onClick:()=>O(e(20)),children:"Add 20 mins"}),(0,f.jsx)(l.v,{variant:"contrasting",onClick:()=>O(e(40)),children:"Add 40 mins"}),(0,f.jsx)(l.v,{variant:"contrasting",onClick:()=>O(e(60)),children:"Add 1 hour"})]})})}),(0,f.jsxs)(o.g,{label:"Custom stream time in seconds",children:[(0,f.jsx)("div",{className:j,children:(0,f.jsx)(d.Z,{onChange:e=>r(e.currentTarget.value),placeholder:"seconds",value:a,type:"number",min:0})}),(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(c.$,{size:"small",onClick:()=>O(a),children:["Add ",a," seconds (~ ",(B=a,Math.round(Number(B)/60))," minutes)"]})})]}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Fetch ad from Ad Mocker"}),(0,f.jsxs)(o.g,{label:"Fetch an Ad JSON from admocker, and either inject directly into pod, or override ad server enpoint for that mock.",children:[(0,f.jsxs)("div",{className:j,children:[(0,f.jsx)(t.E,{as:"label",htmlFor:"adMockerSessionId",variant:"bodyMedium",children:"Session ID"}),(0,f.jsx)(d.Z,{name:"adMockerSessionId",type:"text",value:y,onChange:e=>A(String(e.currentTarget.value))})]}),(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(u.F,{value:S,onChange:e=>{k(e.currentTarget.value)},children:[(0,f.jsx)("option",{disabled:!0,value:"",children:"Choose a mock"}),$?.map((e=>(0,f.jsxs)("option",{value:e.name,children:[e.name," (",e.group,")"]},e.name)))]})}),(0,f.jsx)(c.$,{size:"small",onClick:()=>{b.D.fetchAdAndEnqueue(S,y).then((()=>{N({message:`${S} inserted`,isError:!1})})).catch((e=>{N({message:`Error inserting ${S}: ${e}`,isError:!0})}))},children:"Insert ad directly (best for stream)"}),(0,f.jsx)(c.$,{size:"small",onClick:()=>{b.D.fetchAdAndOverrideEndpoint(S,y).then((()=>{N({message:`${S} overridden `,isError:!1})})).catch((e=>{N({message:`Error overriding ${S}: ${e}`,isError:!0})}))},children:"Override Slot Endpoint (slot auto-detected from JSON)"})]}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Override Country"}),(0,f.jsxs)(o.g,{label:"Calls testingClient.requestOverride with country key",children:[(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(u.F,{value:p,onChange:e=>{v(e.currentTarget.value)},children:[(0,f.jsx)("option",{disabled:!0,value:"",children:"Choose a country"}),(0,f.jsx)("option",{value:"AU",children:"Australia"}),(0,f.jsx)("option",{value:"BR",children:"Brasil"}),(0,f.jsx)("option",{value:"JP",children:"Japan"}),(0,f.jsx)("option",{value:"SE",children:"Sweden"}),(0,f.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,f.jsx)("option",{value:"US",children:"USA"}),(0,f.jsx)("option",{value:"NZ",children:"New Zealand"}),(0,f.jsx)("option",{value:"",children:"Clear"})]})}),(0,f.jsx)(c.$,{size:"small",onClick:()=>{b.D.overrideCountry(p).then((e=>{0===e.status?N({message:`${p} override successful`,isError:!1}):N({message:`Error overriding country: ${e.status}`,isError:!0})}))},children:"OVERRIDE COUNTRY"})]}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Clear Slot"}),(0,f.jsxs)(o.g,{label:"Calls slotsClient.clearAllAds for the selected slot",children:[(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(u.F,{value:h,onChange:e=>{m(e.currentTarget.value)},children:[(0,f.jsx)("option",{disabled:!0,value:"",children:"Choose a slot"}),(0,f.jsx)("option",{value:"billboard",children:"billboard"}),(0,f.jsx)("option",{value:"embedded-npv",children:"embedded-npv"}),(0,f.jsx)("option",{value:"hpto",children:"hpto"}),(0,f.jsx)("option",{value:"leaderboard",children:"leaderboard"}),(0,f.jsx)("option",{value:"sponsored-playlist",children:"sponsored playlist"}),(0,f.jsx)("option",{value:"stream",children:"stream"})]})}),(0,f.jsx)(c.$,{size:"small",onClick:()=>{""!==h?L(h):N({message:"Please select a slot",isError:!0})},children:"CLEAR SLOT"})]}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Trigger Stream Slot"}),(0,f.jsx)(o.g,{label:"Calls slotsClient.createSlot, adds 20 mins, puts targeting in focus",children:(0,f.jsx)(c.$,{size:"small",onClick:()=>{b.D.queueVideoAd().then((e=>{const a=e[0];a.error?N({message:`Error queuing video ad: ${a?.error}`,isError:!0}):N({message:"Video queued in stream slot",isError:!1})}))},children:"Queue Video Ad"})}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Override Leaderboard"}),(0,f.jsx)(o.g,{label:"Calls overrideAdServerEndpoint for leaderboard ads",children:(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(u.F,{onChange:D,defaultValue:"",children:[(0,f.jsx)("option",{disabled:!0,value:"",children:"Select override type"}),(0,f.jsx)("option",{value:"html-ttd-verizon-leaderboard|leaderboard-sax-template",children:"HTML TTD Verizon Leaderboard (SAX Template)"}),(0,f.jsx)("option",{value:"html-yahoo-mufasa-leaderboard|leaderboard-sax-template",children:"HTML Yahoo Mufasa Leaderboard (SAX Template)"}),(0,f.jsx)("option",{value:"html-yahoo-bundle-01-leaderboard|leaderboard-sax-template",children:"HTML Yahoo Bundle 01 Leaderboard (SAX Template)"}),(0,f.jsx)("option",{value:"html-yahoo-bundle-02-leaderboard|leaderboard-sax-template",children:"HTML Yahoo Bundle 02 Leaderboard (SAX Template)"}),(0,f.jsx)("option",{value:"html-adfrom-more-leaderboard|leaderboard-sax-template",children:"HTML Adfrom More Leaderboard (SAX Template)"}),(0,f.jsx)("option",{value:"html-adfrom-missing-permissions-leaderboard|leaderboard-sax-template",children:"HTML Adfrom Missing Permissions Leaderboard (SAX Template)"}),(0,f.jsx)("option",{value:"valid-leaderboard|leaderboard-v1",children:"Valid Leaderboard"}),(0,f.jsx)("option",{value:"valid-leaderboard-click-ad-page|leaderboard-v1",children:"Valid Leaderboard Click Ad Page"}),(0,f.jsx)("option",{value:"valid-leaderboard-click-playlist|leaderboard-v1",children:"Valid Leaderboard Click Playlist"})]})})})]});var B}},96346:(e,a,r)=>{r.d(a,{qb:()=>g});var s=r(30341),i=r(38934),t=r(30758),o=r(43580),n=r(28838),l=r(78717),d=r(79717),c=r(68130),u=r(21765),h=r(97202),m=r(51584),p=r(14776),v=m.Ay.div.withConfig({displayName:"Container",componentId:"sc-eij2zk-0"})(["",""],(function(e){var a=e.$colorSet,r=e.$isVisible;return(0,p.AH)([""," padding-block:",";padding-inline:",";overflow-wrap:break-word;text-align:center;position:fixed;overflow-x:hidden;text-overflow:ellipsis;z-index:",";bottom:48px;.docs-story{position:absolute;}@media (max-width:","){inset-inline:8px;}@media (min-width:","){margin-inline:auto;inset-inline:0;width:max-content;}",""],(0,c.Lw)({maxWidth:"384px",colorSet:a}),(0,u.po)("tighter","12px"),(0,u.po)("looser-2","32px"),h.Bd,d.eA,d.Dg,r?(0,p.AH)(["transition:opacity var(--productive-enter);visibility:visible;opacity:1;"]):(0,p.AH)(["transition:opacity var(--productive-exit),visibility 0s var(--productive-exit-duration);visibility:hidden;opacity:0;"]))})),b=["onExited","colorSet","showSnackbar","className","children"],g=t.forwardRef((function(e,a){var r=e.onExited,d=e.colorSet,c=void 0===d?"base":d,u=e.showSnackbar,h=e.className,m=e.children,p=(0,i.A)(e,b),g=(0,t.useState)(!1),x=(0,s.A)(g,2),j=x[0],f=x[1];return void 0===u&&console.warn('Warning: If you are not conditionally rendering Snackbar within an aria-live region (wrapping element with role="status") the component will be inaccessible on Windows operating systems. Please use the showSnackbar prop to conditionally render Snackbar. For guidance on how to implement this, refer to our Snackbar Accessibility documentation: https://encore-web.spotify.net/?path=/docs/components-snackbar--accessibility'),(0,t.useEffect)((function(){if(void 0===u){f(!0);var e=setTimeout((function(){f(!1),r&&r()}),5e3);return function(){return clearTimeout(e)}}u?f(!0):(f(!1),r&&r())}),[u,r]),t.createElement("div",{role:"status"},t.createElement(v,Object.assign({ref:a,className:(0,n.Ju)(c,h),$colorSet:c,$isVisible:j,"data-encore-id":o.j.Snackbar},p),t.createElement(l.E,{variant:"bodySmall",semanticColor:"textBase"},m)))}))}}]);
//# sourceMappingURL=5522.js.map