"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[777],{19672:(e,t,a)=>{a.d(t,{g:()=>s.g});var s=a(19043)},39866:(e,t,a)=>{a.d(t,{F:()=>i});var s=a(30758),n=a(186);function i(e,t){const a=(0,s.useRef)(t),i=(0,n.p)();a.current=t,(0,s.useEffect)((()=>i.getEvents().addListener(e,(e=>{a.current(e)}))),[e,i])}},73677:(e,t,a)=>{a.d(t,{n:()=>l});var s=a(30758),n=a(45028),i=a(186),r=a(39866);function l(){const e=(0,i.p)(),[t,a]=(0,s.useState)(-1);(0,s.useEffect)((()=>{let t=!0;return(async()=>{const s=await e.getVolume();t&&a(s)})(),()=>{t=!1}}),[e]),(0,r.F)(n._.VOLUME,(e=>a(e.data.volume)));return{volume:t,setVolume:(0,s.useCallback)((t=>{a(t),e.setVolume(t)}),[e])}}},94075:(e,t,a)=>{a.d(t,{u:()=>r});var s=a(30758),n=a(31657),i=a(86070);const r=({pageId:e,uri:t,children:a})=>{const r=(0,n.u)(),l=(0,n.H)();return(0,s.useEffect)((()=>{r?.reportPageView({pageId:e,navigationalRoot:l??void 0,entityUri:t})}),[e,l,r,t]),(0,i.jsx)(i.Fragment,{children:a})}},94253:(e,t,a)=>{a.d(t,{R:()=>n,Z:()=>s});const s="desktop-home-watch-feed",n="desktop-watch-feed"},99511:(e,t,a)=>{a.d(t,{WatchFeedViewContainer:()=>$a});var s=a(65809),n=a(11120),i=a(94075),r=a(30758),l=a(72519),o=a(86070);const c=(0,r.createContext)(null);function u(){const e=(0,r.useContext)(c);if(null===e)throw new Error("Trying to use 'StandalonePlaybackContext' without 'StandalonePlaybackProvider'!");return e}const d=({children:e,overridePlatformId:t,reportPreview:a=!1})=>{const s=(0,r.useMemo)((()=>({videoPlayerContainer:".playbackContainerWatchFeed",audioPlayerContainer:".playbackContainerWatchFeed"})),[]),n=(0,l.d)(s,void 0,void 0,void 0,t,a);return(0,o.jsx)(c.Provider,{value:n,children:e})};var m=a(97500),h=a.n(m),v=a(52427),f=a(67735),x=a(78717),p=a(35394),g=a(30920),j=a(78888),y=a(70397),b=a(38042),N=a(16892),w=a(19405),E=a(24792),C=(a(66016),a(4666)),k=a(20757);const I=e=>{const t=(0,C.z)(),a=(0,k.w)().queued.find((t=>t.uri===e)),s=!!a,n=a?.uid;return{toggleInQueue:(0,r.useCallback)((()=>{s?t.removeFromQueue([{uri:e,uid:n??null}],!0):t.addToQueue([{uri:e,uid:null}])}),[n,s,t,e]),isInQueue:s}},S=r.memo((function({uri:e,className:t,onClick:a=()=>{},size:s=b.t.xs,placement:n}){const{isInQueue:i,toggleInQueue:l}=I(e),c=(0,r.useCallback)((()=>{l(),a()}),[l,a]),u=i?y.Ru.get("contextmenu.remove-from-queue"):y.Ru.get("contextmenu.add-to-queue");return(0,o.jsx)(E.Zp,{label:u,placement:n,children:(0,o.jsx)(p.H,{semanticColor:i?"textBrightAccent":"textSubdued",iconOnly:i?N.Q:w.V,"aria-label":u,onClick:c,"data-testid":"add-button",size:s,className:t})})}));var P=a(89145),R=a(33799),M=a(65720),F=a(53169),L=a(19672),T=a(6512),A=a(30929),U=a(49461),_=a(19092),O=a(1520);const D="IQsUjbPtrVLyyA5iu3zQ",B=({iconSize:e="small",toggleMute:t,isMuted:a,className:s,labelPlacement:n})=>a?(0,o.jsx)(E.Zp,{label:y.Ru.get("playback-control.unmute"),placement:n,children:(0,o.jsx)(p.H,{condensedAll:!0,onClick:t,"aria-label":y.Ru.get("playback-control.unmute"),className:s,children:(0,o.jsx)(U.X,{size:e})})}):(0,o.jsx)(E.Zp,{label:y.Ru.get("playback-control.mute"),placement:n,children:(0,o.jsxs)(p.H,{condensedAll:!0,onClick:t,"aria-label":y.Ru.get("playback-control.mute"),className:s,children:[(0,o.jsx)(_.C,{size:e}),(0,o.jsx)(O.J,{animated:!0,white:!0,className:D})]})});a(77369);var W=a(8143),z=a(8335),V=a(66590),Q=a(35054),J=a(58239);const q="JXh51ebDftiwM49U49IA",H="IId345zLSrSuzIWtN4Sd",Y="EMcF5GoJ2mLzcp0t365T",G="V795GKOEZNiChr8dJcD4",K="pGPb4TiSkhPdYEt8h2Av",X="FWBI05WNSb4HR8goMhai",Z="BWyVJ8XXZ0jRGpFaA9iW",$="gWworaJ45IDWOdwjrZKh",ee=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useLayoutEffect)((()=>{setTimeout((()=>t(!0)),200)}),[]),(0,o.jsxs)("div",{className:h()(q,{[H]:e}),children:[(0,o.jsx)("div",{className:h()(G,K)}),(0,o.jsx)("div",{className:h()(G,X)}),(0,o.jsx)("div",{className:h()(G,Z)}),(0,o.jsx)("div",{className:h()(G,X)}),(0,o.jsx)("div",{className:Y}),(0,o.jsx)("div",{className:h()(G,$)}),(0,o.jsx)("div",{className:h()(G,Z)}),(0,o.jsx)("div",{className:h()(G,K)}),(0,o.jsx)("div",{className:h()(G,X)})]})};var te=a(94253),ae=a(67240),se=a(11930),ne=a(74846);const ie="YHeDUF3aquXRxYmKOs1A",re="Ul_Er3t8veggCi1APkwp",le="fhmiZPVDhaOYIlNd7Myq",oe="sJnarE2UKqyhLo0LFNqy",ce="bPMdcQr8gSb4AgWfkolx",ue="cjZ23zZucJkKFMIrGZa4",de="iQnF1gu0Mg2rGsKVHIFn",me="qgczwXDFdF_gy4gRs3LN",he="rCxYvbE1hq2_VEMOM6M_";const ve=({parentEl:e,item:t,prefersReducedMotion:a})=>{const[s,n]=(0,r.useState)({shouldRender:!0,hasError:!1}),i=!a&&(0,J.Eg)(t?.canvas?.fileId,t?.canvas?.uri)&&!s.hasError;(0,r.useEffect)((()=>{n({shouldRender:!0,hasError:!1})}),[t?.uri]);const l=(0,r.useCallback)((e=>{e&&n({shouldRender:!1,hasError:!0})}),[]);return(0,W.createPortal)((0,o.jsx)(o.Fragment,{children:i&&(0,o.jsx)(Q.h,{menu:(0,o.jsx)(F.P,{uri:t.uri}),children:(0,o.jsx)("div",{className:re,children:(0,o.jsx)(J.Gg,{fileId:t.canvas?.fileId,canvasUrl:t.canvas?.url,canvasUri:t.canvas?.uri,className:le,overridePlatformId:te.R,playerContainerClass:"canvasContainerWatchFeed",onError:l,playbackType:J.RT.Loop})})})}),e)},fe=(0,r.memo)((function({item:e,itemPosition:t,isActive:a,onItemPositionInView:s,carouselEl:n,itemElByPositionRef:i,prefersReducedMotion:l}){const c=function(e,t){return e.canvas?.thumbnail?.sources&&!t?e.canvas.thumbnail.sources.sort(((e,t)=>(t.width??0)-(e.width??0)))[0]?.url:e.coverArt?.sources.sort(((e,t)=>(t.width??0)-(e.width??0)))[0]?.url}(e,l),u=null===e.canvas||l,[d,m]=(0,r.useState)(null),{ref:v,inView:f}=(0,z.Wx)({threshold:u?1:.6,root:n});(0,r.useEffect)((()=>{f&&s(t)}),[f,s,t]);const x=(0,r.useCallback)((e=>{i.current.set(t,e)}),[i,t]),p=(0,se.S)([v,m,x]);return c?(0,o.jsx)(Q.h,{menu:(0,o.jsx)(F.P,{uri:e.uri}),children:(0,o.jsxs)("div",{ref:p,className:oe,children:[u&&a&&!l&&(0,o.jsx)(ee,{}),(0,o.jsx)("div",{className:h()(me,{[he]:a,[ue]:u}),style:{"--background-color":e.coverArt?.extractedColors?.colorDark.hex??V.l0o},children:(0,o.jsx)("div",{className:ce,children:(0,o.jsx)(ae._,{className:de,loading:"lazy",src:c,radius:12,width:"100%"})})}),a&&d&&(0,o.jsx)(ve,{parentEl:d,item:e,prefersReducedMotion:l})]})}):null})),xe=({items:e,currentItemPosition:t,onItemPositionInView:a,itemElByPositionRef:s,onScroll:n,setScrollingState:i,prefersReducedMotion:l})=>{const[c,u]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if((0,ne.n)())return()=>{};const e=()=>i(!0),t=()=>i(!1);return c?.addEventListener("scroll",e,{once:!0}),c?.addEventListener("scrollend",t),()=>{c?.removeEventListener("scroll",e),c?.removeEventListener("scrollend",t)}}),[c,i,t]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:ie,tabIndex:-1,ref:u,onScroll:n,onKeyDown:e=>{e.preventDefault()},children:e.map(((e,n)=>(0,o.jsx)(fe,{item:e,isActive:n===t,carouselEl:c,itemPosition:n,onItemPositionInView:a,itemElByPositionRef:s,prefersReducedMotion:l},e.uri)))})})};var pe=a(68832),ge=a(40539),je=a(50375),ye=a(97),be=a(96579),Ne=a(64224),we=a(19906),Ee=a(68293);const Ce="g47sxYAVvWCq_6T4Ba5L",ke=({artistUri:e,initialLibraryState:t,spec:a})=>{const[s,n]=(0,we.A)(e,t),i=(0,Ee.s)(),l=(0,r.useCallback)((async()=>{let t;t=s?a.followButtonFactory().hitUnfollow({itemToBeUnfollowed:e}):a.followButtonFactory().hitFollow({itemToBeFollowed:e}),i.logInteraction(t);try{await n(!s)}catch{}}),[s,n,e,a,i]),c=s?y.Ru.get("unfollow"):y.Ru.get("follow");return(0,o.jsx)(Ne.W,{className:Ce,isFollowing:s,onClick:l,buttonText:c})};var Ie=a(8397);const Se=200,Pe="ease-in-out";var Re=function(e){return e[e.UP=-1]="UP",e[e.NONE=0]="NONE",e[e.DOWN=1]="DOWN",e}(Re||{});const Me=e=>{if(!e)return Re.NONE;const{previous:t,current:a}=e;return void 0===t||void 0===a?Re.NONE:Math.sign(a.position-t.position)},Fe=(e,t,a)=>{if(!e.animate)return void(e.style.opacity="1");const s=Me(a);e.animate({opacity:[0,1],transform:[`translateY(${50*s}%)`,"translateY(0%)"]},{duration:Se,easing:Pe,fill:"forwards",delay:100})},Le=(e,t,a,s)=>{if(!e.animate)return void a();const n=Me(s);e.animate({opacity:[1,0],transform:["translateY(0%)",`translateY(${-1*n*50}%)`]},{duration:Se,easing:Pe,delay:100}).addEventListener("finish",a,{once:!0})},Te=e=>{e.animate?e.animate({opacity:[0,1]},{duration:Se,easing:Pe,fill:"forwards"}):e.style.opacity="1"},Ae=(e,t,a)=>{if(!e.animate)return void a();e.animate({opacity:[1,0]},{duration:Se,easing:Pe}).addEventListener("finish",a,{once:!0})},Ue=({hideEnteringElements:e,animateEnteringElements:t,animateExitingElements:a,animateFlippedElements:s})=>{e(),a(),s(),t()},_e="dkbQiFBHMdijQeINl_ij",Oe="aiSwqZguOk1P52s9o9xP",De="bl3iefJaRs18m1sL93Eh",Be="zrFS4My93WidFfSAb0u6",We="mENWYVW_PAl8OWp2Ut6e",ze="dErRUxXewpEkZd52uLTh",Ve="q2y15bQqkJDcBixyP5oa",Qe=({mainArtist:e,hashtags:t,spec:a,logger:s,position:n,itemUri:i})=>{const{open:l}=(0,Ie.P)(),c=(0,r.useCallback)((e=>{const t=a.hashtagButtonFactory({uri:e}).hitUiNavigate({destination:e});s.logInteraction(t),l(e,"discovery")}),[s,l,a]),u=(0,r.useCallback)((()=>{const t=a.artistNameFactory().hitUiNavigate({destination:e.uri});s.logInteraction(t)}),[s,e.uri,a]);return(0,o.jsx)(pe.ZI,{flipKey:`wf-${i}-footer`,handleEnterUpdateDelete:Ue,decisionData:{position:n},children:(0,o.jsxs)("div",{className:_e,children:[(0,o.jsx)(Q.h,{renderInline:!0,menu:(0,o.jsx)(ye.t,{uri:e.uri,isInLibrary:e.saved}),children:(0,o.jsxs)("div",{className:Oe,children:[(0,o.jsx)("div",{className:ze,children:(0,o.jsx)(pe.lf,{flipId:`wf-artist-avatar-${i}`,translate:!1,opacity:!1,scale:!1,onAppear:Te,onExit:Ae,children:(0,o.jsx)("div",{className:ze,children:(0,o.jsx)(je.e,{label:e.name,images:e.avatar?.sources||[],width:32,userIconSize:"small"})})},`wf-artist-avatar-${i}`)}),(0,o.jsxs)("div",{className:De,children:[(0,o.jsx)(pe.lf,{flipId:"wf-artist-name",translate:!0,children:(0,o.jsx)("div",{className:ze,children:(0,o.jsx)(pe.lf,{flipId:e.name,translate:!1,opacity:!1,scale:!1,onAppear:Te,onExit:Ae,children:(0,o.jsx)("div",{className:ze,children:(0,o.jsx)(x.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,o.jsx)(be.N,{to:e.uri,onClick:u,children:e.name})})})},e.name)})}),e.listeners&&(0,o.jsx)(pe.lf,{flipId:"wf-listeners",translate:!0,children:(0,o.jsx)("div",{className:ze,children:(0,o.jsx)(x.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Ve,children:y.Ru.formatNumber(e.listeners,{notation:"compact",maximumFractionDigits:0})})})})]}),(0,o.jsx)(pe.lf,{flipId:"wf-follow-button",translate:!0,children:(0,o.jsx)("div",{className:ze,children:(0,o.jsx)(ke,{artistUri:e.uri,initialLibraryState:e.saved,spec:a})})})]})}),t.length>0&&(0,o.jsx)("div",{className:Be,children:t.map(((e,t)=>(0,o.jsx)(pe.lf,{flipId:t,translate:!0,children:(0,o.jsx)("div",{className:ze,children:(0,o.jsx)(ge.v,{onClick:()=>c(e.uri),children:(0,o.jsx)("span",{className:We,children:e.title})},t)})},t)))})]})})};var Je=a(84657),qe=a(31016),He=a(84962),Ye=a(46882),Ge=a(82694);const Ke="edeYmiJw2Fd9EFB2SQZo",Xe="cpE_cN95GCusnLJ3Mssy",Ze=()=>{const{progressMs:e,durationMs:t,animate:a}=function(){const e=u(),t=(0,r.useRef)(Date.now()),a=(0,r.useRef)(0),[s,n]=(0,r.useState)(0),[i,l]=(0,r.useState)(3e4),[o,c]=(0,r.useState)(!1),d=(0,Ge.g)();return e.on(Ye.Pv.PROGRESS,(e=>{const s=Date.now();s-t.current>=500&&(n(e.data.position),t.current=s,e.data.position>a.current?c(!0):c(!1),a.current=e.data.position)})),e.on(Ye.Pv.BEFORE_TRACK_LOAD,(()=>{n(0),c(!1)})),e.on(Ye.Pv.DURATION_CHANGED,(e=>{l(e.data.duration)})),e.on(Ye.Pv.TRACK_ENDED,(()=>{n(i)})),{progressMs:s,durationMs:i,animate:o&&"visible"===d}}();return(0,o.jsx)(He.z,{className:h()(Ke,{[Xe]:a}),semanticColor:"essentialBase",value:100*e/t,dir:"ltr"})};var $e=a(99893),et=a(332),tt=a(85370);const at="BKbRtjcDGVGtwX86D6Q4",st="KGX7QwiP6RRFs1T_cS0N",nt="Tc6LggefgOUzLZRNg1Bb",it="Cypiobiw1yGi5E9N48gJ",rt="E0LdRRiYvrkUdZCmAXqQ",lt="yJJKqce9DPVQnrFseKKU",ot="kJqlixofqKau1v1r3YSE",ct="_bMlIQGXEMMBRZOVM71Z",ut="omghgDzOcUFl6oOXYNHX",dt="TaaunKIj990MWZKrBWHW",mt=({item:e,handleTitleClick:t,widthBreakpoint:a,position:s})=>{const n=function(e){return e?.coverArt?.sources.sort(((e,t)=>(e.width??0)-(t.width??0)))[0]?.url}(e),i=e.canvas&&n,{badges:r}=(0,tt.b)({contentRating:e.contentRating??void 0});return(0,o.jsx)(pe.ZI,{flipKey:`wf-${e.uri}-itemInfo`,handleEnterUpdateDelete:Ue,decisionData:{position:s},children:(0,o.jsxs)("div",{className:rt,children:[(0,o.jsx)(Q.h,{renderInline:!0,menu:(0,o.jsx)(F.P,{uri:e.uri,albumUri:e.album?.uri,artists:e.artists}),children:(0,o.jsx)(pe.lf,{flipId:`wf-title-${e.uri}`,translate:!0,onAppear:Fe,onExit:Le,children:(0,o.jsx)("div",{className:dt,children:(0,o.jsx)(x.E,{variant:a===et.E.LARGE?"titleSmall":"titleMedium",className:lt,semanticColor:"textBase",children:(0,o.jsx)(be.N,{to:e.uri,onClick:t,className:ot,children:e.title})})})},`wf-title-${e.uri}`)}),(0,o.jsx)(pe.lf,{flipId:`wf-artist-${e.artists.at(0)?.uri}`,translate:!0,children:(0,o.jsxs)("div",{className:st,children:[r.explicit&&(0,o.jsx)($e.U,{className:nt}),e.artists.map(((e,t)=>(0,o.jsx)(Q.h,{renderInline:!0,menu:e?.uri?(0,o.jsx)(ye.t,{uri:e?.uri}):null,children:(0,o.jsxs)("div",{className:h()(dt,at),children:[t>0?y.Ru.getSeparator():null,(0,o.jsx)(be.N,{to:e.uri,children:(0,o.jsx)(x.E,{variant:"bodyMedium",className:it,children:e.name})})]})},t)))]})},`wf-artist-${e.artists.at(0)?.uri}`),(0,o.jsxs)("div",{className:ut,children:[i&&(0,o.jsx)(Q.h,{renderInline:!0,menu:e.album?.uri?(0,o.jsx)(qe.h,{uri:e.album?.uri}):null,children:(0,o.jsx)(pe.lf,{flipId:`wf-coverart-${e.uri}`,translate:!1,opacity:!1,scale:!1,onAppear:Te,onExit:Ae,children:(0,o.jsx)("div",{className:dt,children:(0,o.jsx)(Je._,{src:n,className:ct})})},`wf-coverart-${e.uri}`)}),(0,o.jsx)(Ze,{})]})]})})};var ht=a(35147);const vt="YKRW27BSGgfw1jw43dpT",ft=()=>(0,o.jsxs)("div",{className:ie,tabIndex:0,children:[(0,o.jsx)("div",{className:oe,children:(0,o.jsx)("div",{className:me})}),(0,o.jsx)("div",{className:oe,children:(0,o.jsx)("div",{className:me,children:(0,o.jsx)("div",{className:vt,ref:e=>{e?.scrollIntoView({block:"center",inline:"nearest"})}})})}),(0,o.jsx)("div",{className:oe,children:(0,o.jsx)("div",{className:me,children:(0,o.jsx)("div",{className:vt})})})]}),xt="DJxOEatMU2PHk0cCYWoX",pt="FP_XXx0FMQPJEu3WzfpM",gt="JYvxp3Y58xF59FA7Mnaf",jt="WLr9Q6nJ_Hv35r7pNEa3",yt="uwkK6FkoyBrxvGSYBbhw",bt="AkStH5UDLsXzudcPz_J_",Nt="YmJS4xMTXdNQLvbP2VAt",wt="Qtx4b7Wc1c7NEX49CMeH",Et="SliTY9e8oKOiypDQdhlw",Ct="OGPXh73aLJDzhfFAdPvM",kt="d9bbNw4YiAXpQpjrSgBJ",It="ji0qx5PBc5_4aMgNLGrp",St="BLIxyum1wPNrFibaQ9wr",Pt="NazSI1w8xaruwFqTP3sS",Rt="ZRarvpz5og3ifOVHzGOv",Mt="RQaEu8T4LvqfvRmirqJy",Ft="jskTw7aMQHNyh13AZI6R",Lt="hK5DaTfJaFpo2BJuoy5k",Tt=({hide:e})=>(0,o.jsxs)("div",{className:h()(jt,gt,{[yt]:e}),children:[(0,o.jsxs)("div",{className:Lt,children:[(0,o.jsx)("div",{className:bt,children:(0,o.jsx)(ht.Y,{as:"div",variant:"bodySmall",charCount:8,isLoading:!0})}),(0,o.jsxs)("div",{className:rt,children:[(0,o.jsx)(ht.Y,{as:"div",variant:"titleMedium",charCount:10,isLoading:!0}),(0,o.jsx)(ht.Y,{as:"div",variant:"bodyMedium",charCount:15,isLoading:!0}),(0,o.jsx)(ht.Y,{as:"div",variant:"bodySmall",charCount:20,isLoading:!0})]}),(0,o.jsxs)("div",{className:_e,children:[(0,o.jsx)(ht.Y,{as:"div",variant:"titleSmall",charCount:10}),(0,o.jsx)(ht.Y,{as:"div",variant:"bodySmall",charCount:15})]})]}),(0,o.jsx)("div",{className:Rt,children:(0,o.jsx)(ft,{})}),(0,o.jsx)("div",{className:It})]});var At=a(27689),Ut=a(73136),_t=a(18055),Ot=a(73857),Dt=a(25379),Bt=a(4644),Wt=a(61046),zt=a(14006),Vt=a(92713);const Qt="dcZW_YRCwhi9TTJMPxzX",Jt="JSNVglrzXyqMjvBqTdjS",qt="HfPg2vA6Xn7iwiUnz1e9",Ht="f7MX2BXkHu1edOXcPYc6",Yt="GMCJTC2SwK0uAZrugIfm",Gt=({children:e})=>(0,o.jsx)("div",{className:Qt,children:e}),Kt=({children:e})=>{const[t,a]=(0,Vt.x)("watch-feed.dismissed-shortcut-onboarding",!1),s=(0,zt.W)();if((0,r.useEffect)((()=>{const e=e=>{"?"===e.key&&a(!t)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[t,a]),t)return(0,o.jsx)(o.Fragment,{children:e});const n=(0,o.jsxs)(Ot.A,{colorSet:"announcement",popoverTitle:y.Ru.get("web-player.watch-feed.view.shortcuts.title"),children:[(0,o.jsx)(x.E,{as:"p",variant:"bodyMedium",paddingBottom:"tighter-2",children:y.Ru.get("web-player.watch-feed.view.shortcuts.description")}),(0,o.jsxs)("div",{className:Ht,children:[(0,o.jsxs)("div",{className:Yt,children:[(0,o.jsx)(x.E,{variant:"bodySmall",children:y.Ru.get("web-player.watch-feed.view.shortcuts.previous")}),(0,o.jsx)(Gt,{children:(0,o.jsx)(Dt.J,{size:"small"})})]}),(0,o.jsxs)("div",{className:Yt,children:[(0,o.jsx)(x.E,{variant:"bodySmall",children:y.Ru.get("web-player.watch-feed.view.shortcuts.next")}),(0,o.jsx)(Gt,{children:(0,o.jsx)(Bt.y,{size:"small"})})]}),(0,o.jsxs)("div",{className:Yt,children:[(0,o.jsx)(x.E,{variant:"bodySmall",children:y.Ru.get("web-player.watch-feed.view.shortcuts.add-to-library")}),(0,o.jsx)(Gt,{children:(0,o.jsx)(Bt.y,{size:"small",className:Jt})})]}),(0,o.jsxs)("div",{className:Yt,children:[(0,o.jsx)(x.E,{variant:"bodySmall",children:y.Ru.get("web-player.watch-feed.view.shortcuts.add-to-queue")}),(0,o.jsx)(Gt,{children:(0,o.jsx)(Bt.y,{size:"small",className:qt})})]}),(0,o.jsxs)("div",{className:Yt,children:[(0,o.jsx)(x.E,{variant:"bodySmall",children:y.Ru.get("web-player.watch-feed.view.shortcuts.mute-unmute")}),(0,o.jsx)(Gt,{children:(0,o.jsx)(x.E,{variant:"marginal",children:(0,o.jsx)("kbd",{children:"M"})})})]})]})]});return(0,o.jsx)(Wt.W,{overlay:n,onHide:()=>{a(!0)},placement:s?Wt.W.topLeft:Wt.W.leftTop,children:e})},Xt="bsYqS4l_sJOvBGGeudDj",Zt="XIKBfnA7TQOV1T8LLiAS",$t="kT3dFHdVmU0vyeE71IDE",ea=({hasNext:e,hasInteracted:t,moveDown:a,isRTL:s,widthBreakpoint:n})=>{const i=y.Ru.get("web-player.watch-feed.view.next-button"),l=s?"right":"left",c=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{t&&c.current?.focus({preventScroll:!0})}),[t]);const u=(0,r.useRef)(!1),d=(0,r.useCallback)((()=>{u.current=!0,a()}),[a]),m=(0,r.useCallback)((()=>{u.current||a()}),[a]),h=(0,r.useCallback)((()=>{setTimeout((()=>{u.current=!1}),10)}),[]);return t||!e?(0,o.jsx)(E.Zp,{label:i,placement:l,children:(0,o.jsx)(p.H,{className:Xt,"aria-label":i,label:i,disabled:!e,iconOnly:At.r,onMouseDown:d,onClick:m,onMouseUp:h,onMouseLeave:h,ref:c,size:n===et.E.SMALL?"small":"medium"})}):(0,o.jsx)("div",{className:Zt,children:(0,o.jsx)(Kt,{children:(0,o.jsx)(Ut.$,{className:$t,colorSet:"invertedLight",iconTrailing:_t.R,onMouseDown:d,onClick:m,onMouseUp:h,onMouseLeave:h,size:n===et.E.SMALL?"small":"medium",children:y.Ru.get("web-player.watch-feed.view.next-button")})})})};var ta=a(87338);const aa="fCykqEza3WtgKmxjL0C1",sa=({hasPrevious:e,moveUp:t,isRTL:a,widthBreakpoint:s})=>{const n=y.Ru.get("web-player.watch-feed.view.previous-button"),i=a?"right":"left",l=(0,r.useRef)(!1),c=(0,r.useCallback)((()=>{l.current=!0,t()}),[t]),u=(0,r.useCallback)((()=>{l.current||t()}),[t]),d=(0,r.useCallback)((()=>{setTimeout((()=>{l.current=!1}),10)}),[]);return e?(0,o.jsx)(E.Zp,{label:n,placement:i,children:(0,o.jsx)(p.H,{className:aa,"aria-label":n,label:n,iconOnly:ta.o,onMouseDown:c,onClick:u,onMouseUp:d,onMouseLeave:d,size:s===et.E.SMALL?"small":"medium"})}):null};var na=a(94684),ia=a(58220),ra=a(47129),la=a(68651),oa=a(98756),ca=a(12912);const ua=({uri:e,moveUp:t,moveDown:a,toggleMute:s})=>{const n=(0,la.i)(e),i=(0,oa.g)(),{isDesktop:l}=(0,ca.V)(),[o,c]=(0,we.A)(n),{toggleInQueue:u}=I(e),d=(0,r.useCallback)((()=>{c(!o)}),[o,c]),m=(0,r.useCallback)((()=>{u()}),[u]),h=(0,r.useCallback)((()=>{i(-1)}),[i]),v=(0,r.useCallback)((()=>{i(1)}),[i]);return(0,ra.N)((0,na.p)(ia.r.GO_BACKWARDS),h,{condition:l}),(0,ra.N)((0,na.p)(ia.r.GO_FORWARDS),v,{condition:l}),(0,ra.N)((0,na.p)(ia.r.WF_ADD_TO_LIBRARY),d),(0,ra.N)((0,na.p)(ia.r.WF_ADD_TO_QUEUE),m),(0,ra.N)((0,na.p)(ia.r.WF_MUTE_UNMUTE),s),(0,ra.N)((0,na.p)(ia.r.WF_GO_TO_PREVIOUS),t),(0,ra.N)((0,na.p)(ia.r.WF_GO_TO_NEXT),a),null};var da=a(33244),ma=a(73677),ha=a(44348);function va({playbackContainerClass:e,onError:t=()=>{}}){const a=u(),[s,n]=(0,r.useState)(!1),i=(0,Ge.g)(),{volume:l}=(0,ma.n)(),o=(0,r.useRef)(l),c=(0,da.J)(t);(0,r.useLayoutEffect)((()=>{l>=0&&(a.setVolume(l),o.current=l),0===l&&n(!0)}),[a,l]),(0,r.useEffect)((()=>(a.on(Ye.Pv.TRACK_LOADED,(()=>{const t=document.getElementsByClassName(e),a=t[0]?.querySelector("video");a&&(a.loop=!0,a.muted=!1,a.autoplay=!0)})),a.on(Ye.Pv.ERROR,(e=>{e.data.error&&c(e.data.error),c(new Error("PreviewPlayback error"))})),a.on(Ye.Pv.MUTED_CHANGED,(({data:e})=>{n(e.muted),e.muted||a.setVolume(o.current||.7)})),()=>{a.removeListener(Ye.Pv.TRACK_LOADED),a.removeListener(Ye.Pv.ERROR),a.removeListener(Ye.Pv.VOLUME_CHANGED)})),[c,a,e]);const d=(0,r.useCallback)((async()=>{const e=await a.getCurrentState(),t=e.playbackState.playing,s=e.track?.uri;"hidden"===i&&t?a.pause():"visible"!==i||t||s&&a.resume()}),[i,a]);(0,r.useEffect)((()=>{d()}),[d]);const m=(0,r.useCallback)((e=>{const t=function(e){const t=e?.preview;return e?.uri&&t?.url?(0,Ye.KT)({uri:e.uri,format:"MP3",url:t.url,logData:{featureUUID:"e57a3dcbd5174b20a9bfa81db99ec7d2",featureIdentifier:"WatchFeedPreview",playbackId:(0,ha.E)()}}):null}(e);t&&a.playTracks([t],{paused:!1})}),[a]),h=(0,r.useCallback)((async()=>{a.setMuted(!s),a.setVolume(s?o.current:0)}),[s,a]),v=(0,r.useCallback)((()=>a.getCurrentState()),[a]);return{playPreview:m,toggleMute:h,isMuted:s,getCurrentState:v}}var fa=a(85387),xa=a(720),pa=a(72664);var ga=a(42774);var ja=a(56334),ya=a(28838),ba=a(68091),Na=a(40185),wa=a(9131);function Ea(e){return(0,wa.h)(e||void 0,{desiredLabel:"large",desiredSize:600})}function Ca(e){const t=e?.extractedColors?.colorDark;if(t&&!t.isFallback)return t.hex}var ka=a(24369),Ia=a(53467),Sa=a(74810),Pa=a(39159),Ra=a(39737),Ma=a(61315),Fa=a(84409);const La="playbackContainerWatchFeed";const Ta=({watchFeedContent:e,feedUri:t,resumeOnClose:a})=>{const{close:s}=(0,Ie.P)(),n=(0,zt.W)(),[i,l]=(0,r.useState)(!1),c=(0,T.B)(),u=(0,r.useRef)(!1),d=(0,r.useRef)(new Map),m=(0,Sa.j)(),[N,w]=(0,r.useState)(a),[C,k]=(0,r.useState)(!1),{closeSnackbar:I}=(0,A.d)(),{spec:U,logger:_}=(0,Fa.r)(j.r,{data:{uri:t}}),O=(0,r.useCallback)((e=>{e&&I(),k(e)}),[I]),{content:{title:D,items:W},error:z,fetchNextPage:V,isFetching:Q,hasNextPage:J}=e,[q,H]=(0,r.useState)(0),Y=W[q]||null,[G,K]=(0,r.useState)(!Y),[X,Z]=(0,r.useState)(!1);(0,r.useEffect)((()=>{Y?(Z(!0),setTimeout((()=>{K(!1)}),400)):(Z(!1),K(!0))}),[Y]);const $=(0,r.useMemo)((()=>U.trackTitleFactory({uri:Y?.uri})),[U,Y]),ee=(0,Ma.n)($?.getAbsoluteLocation(),$);!function({currentItemUri:e,resumeOnClose:t}){const{close:a,updateLocationState:s}=(0,Ie.P)(),n=(0,fa.zy)(),i=(0,r.useRef)();(0,r.useEffect)((()=>{i.current?n.pathname!==i.current?a({resumePlayback:t,forceClose:!0}):e&&e!==n.state?.watchFeed?.lastSeenItemUri&&s({isOpen:!0,resumeOnClose:t,lastSeenItemUri:e}):i.current=n.pathname}),[a,n,t,e,s])}({currentItemUri:Y?.uri,resumeOnClose:N}),function(e){const t=(0,xa.XB)(),{close:a}=(0,Ie.P)(),s=(0,r.useRef)();(0,r.useEffect)((()=>{s.current?t!==s.current&&t!==pa.Z.NowPlayingView&&a({resumePlayback:e}):s.current=t}),[a,e,t])}(N),function(e){const{close:t}=(0,Ie.P)();(0,r.useEffect)((()=>{const a=a=>{"Escape"===a.key&&(a.target instanceof HTMLElement&&a.target.closest(`#${ga.v}`)||t({resumePlayback:e}))};return document.addEventListener("keyup",a),()=>{document.removeEventListener("keyup",a)}}),[e,t])}(a);const te=e=>{const t=U.closeButtonFactory().hitUiHide();_.logInteraction(t),s({resumePlayback:e})},ae=(0,r.useCallback)((e=>{l(!0),u.current=!0,H((t=>{const a=t+e;return a in W?(setTimeout((()=>{d.current.get(a)?.scrollIntoView({block:"center",inline:"nearest",behavior:m?"instant":"smooth"})})),a):t}))}),[W,m]),{playPreview:se,toggleMute:ne,isMuted:ie,getCurrentState:re}=va({playbackContainerClass:La}),le=(0,r.useCallback)((async()=>{const{playbackState:e}=await re(),t=U.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:W[q]?.uri,positionMs:e.position??-1,totalContentMs:e.duration??-1});_.logInteraction(t),ae(-1)}),[ae,W,_,q,U,re]);(0,r.useLayoutEffect)((()=>{H(0),d.current.get(0)?.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})}),[t]),(0,r.useLayoutEffect)((()=>{0!==q&&l(!0)}),[q]);const oe=(0,r.useCallback)((async()=>{const{playbackState:e}=await re(),t=U.nextButtonFactory().hitSkipToNext({itemToBeSkipped:W[q]?.uri,positionMs:e.position??-1,totalContentMs:e.duration??-1});_.logInteraction(t),ae(1)}),[ae,W,_,q,U,re]),ce=(0,v.YQ)((0,r.useCallback)((()=>{u.current=!1}),[]),100,{leading:!1,trailing:!0}),ue=(0,r.useCallback)((e=>{u.current||H(e)}),[]),de=(0,r.useCallback)((()=>{if(ie){const e=U.muteButtonFactory().hitUnmutePlayback();_.logInteraction(e)}else{const e=U.muteButtonFactory().hitMutePlayback();_.logInteraction(e)}ne()}),[ie,_,U,ne]),me=(0,r.useCallback)((()=>{const e=U.shareButtonFactory().hitShare({entityToBeShared:Y?.uri,shareId:Y?.sharingInfo?.shareId||""});_.logInteraction(e)}),[Y,_,U]),he=(0,r.useCallback)((()=>{if(!Y)return;const e=U.addToQueueFactory().hitAddItemToQueue({itemToAddToQueue:Y?.uri});_.logInteraction(e)}),[Y,_,U]),ve=(0,r.useCallback)((()=>{const e=U.trackTitleFactory({uri:Y?.uri}).hitUiNavigate({destination:Y?.uri});_.logInteraction(e),w(!1)}),[Y,U,_]);(0,r.useEffect)((()=>{!z&&Y&&J&&function(e,t,a){return e>=t-5&&!(t>50)&&!a}(q,W.length,Q)&&V()}),[z,Y,q,Q,W,V,J]),(0,r.useEffect)((()=>{Y&&se(Y)}),[Y,se]),(0,r.useEffect)((()=>{H(0)}),[t]);const fe=Boolean(W[q-1]),pe=Boolean(W[q+1]),ge=(0,r.useRef)(null),{dynamicColors:je,dynamicColorsCssVariables:ye}=function(e,t){const a=Ea(e?.coverArt?.sources),s=Ea(t?.coverArt?.sources),{data:n}=(0,Na.g)(a?[a]:[],{placeholderData:ja.rX});(0,Na.g)(s?[s]:[]);let i=null;if(n){const e=(0,ya.r6)((0,ba.c)(n,"higherContrast"));i=(0,ba.I)(e)}return{dynamicColorsCssVariables:i,dynamicColors:n}}(Y,W.at(q+1)),{breakpoint:be}=(0,Ia.x)({[et.E.SMALL]:0,[et.E.MEDIUM]:778,[et.E.LARGE]:1102},ge),Ne=(0,Ra.o)((e=>(e?.restrictions?.disallowAddToQueueReasons||[]).length>0));if(z)return null;const we=Y?.artists[0],Ee={backgroundColor:je?.higherContrast.backgroundBase.toCSS(Pa.a.RGBA)??(Ca(Y?.coverArt)||f.PQ2)},Ce=n?"right":"left";return(0,o.jsx)(ka.s,{focusTrapOptions:{allowOutsideClick:!0},children:(0,o.jsx)("div",{className:xt,onClick:()=>te(a),role:"presentation",children:(0,o.jsxs)("div",{style:Ee,className:pt,onClick:e=>{e.stopPropagation()},role:"presentation",tabIndex:-1,children:[Y&&(0,o.jsxs)("div",{className:gt,ref:ge,children:[(0,o.jsxs)("div",{className:Lt,ref:ee,children:[(0,o.jsx)("div",{children:(0,o.jsx)(x.E,{className:bt,semanticColor:"textBase",children:D})}),(0,o.jsx)(mt,{item:Y,handleTitleClick:ve,widthBreakpoint:be,position:q}),(0,o.jsx)(Qe,{mainArtist:we,hashtags:Y.hashtags,spec:U,logger:_,position:q,itemUri:Y.uri})]}),(0,o.jsxs)("div",{className:Rt,children:[(0,o.jsx)(xe,{items:W,currentItemPosition:q,onItemPositionInView:ue,itemElByPositionRef:d,onScroll:ce,setScrollingState:O,prefersReducedMotion:m}),(0,o.jsx)("div",{className:h()(Mt,{[Ft]:C}),ref:c})]}),(0,o.jsxs)("div",{className:It,children:[(0,o.jsxs)("div",{className:Nt,children:[(0,o.jsx)("div",{className:wt,children:(0,o.jsx)(B,{toggleMute:de,isMuted:ie,labelPlacement:Ce,iconSize:be===et.E.SMALL?"small":"medium"})}),(0,o.jsx)(E.Zp,{label:y.Ru.get("close"),placement:"bottom",children:(0,o.jsx)(p.H,{onClick:()=>te(a),"aria-label":y.Ru.get("close"),condensedAll:!0,children:(0,o.jsx)(g.M,{size:be===et.E.SMALL?"small":"medium"})})})]}),(0,o.jsxs)("div",{className:Et,style:{...ye},children:[(0,o.jsx)(M.b,{renderInline:!0,placement:Ce,menu:(0,o.jsx)(F.P,{uri:Y.uri,albumUri:Y.album?.uri,artists:Y.artists,sharingInfo:Y.sharingInfo,menuBoundary:ge?.current||void 0}),children:(0,o.jsx)(P.e,{size:be===et.E.SMALL?P.M.sm:P.M.md,label:y.Ru.get("more.label.context",Y.title),placement:Ce,className:Ct})}),(0,o.jsx)(R.w,{ariaLabel:y.Ru.get("context-menu.copy-track-link"),uri:Y.uri,placement:Ce,sharingInfo:null,size:be===et.E.SMALL?"small":"medium",onClick:me}),!Ne&&(0,o.jsx)(S,{uri:Y.uri,size:be===et.E.SMALL?"small":"medium",placement:Ce,onClick:he,className:kt}),(0,o.jsx)(L.g,{uri:Y.uri,size:be===et.E.SMALL?b.t.sm:b.t.md,labelPlacement:Ce,menuPlacement:Ce,className:St})]}),(0,o.jsxs)("div",{className:Pt,children:[(0,o.jsx)(sa,{hasPrevious:fe,moveUp:le,isRTL:n,widthBreakpoint:be}),(0,o.jsx)(ea,{hasNext:pe,hasInteracted:i,moveDown:oe,isRTL:n,widthBreakpoint:be}),(0,o.jsx)("div",{className:La}),(0,o.jsx)(ua,{moveUp:le,moveDown:oe,toggleMute:ne,uri:Y.uri})]})]})]}),G&&(0,o.jsx)(Tt,{hide:X})]})})})};a(2557),a(86328),a(98273);var Aa=a(15069),Ua=a(62411),_a=a(63388);a(39463);const Oa=Spicetify.GraphQL.Definitions["watchFeedView"]=new _a.l("watchFeedView","query","2822f94f6c03e8a5ac632553e81eb4e2d4ce713cceb83fa892119d3e1e54c7cc",null);const Da=e=>{const t=function(e=[]){return e.find((e=>!!e.fileId))||null}(e.previews?.audioPreviews?.items);return{uri:e.uri,preview:t,title:e.name,album:e.albumOfTrack,artists:(a=e.artists.items,a.map((e=>({uri:e.uri,verified:e.profile.verified||!1,name:e.profile.name,avatar:e.visuals.avatarImage,saved:e.saved,listeners:e.stats.monthlyListeners})))),canvas:e.canvas,coverArt:e.albumOfTrack?.coverArt||null,sharingInfo:e.sharingInfo,hashtags:e.discoveryFeedHashtags,contentRating:e.contentRating?.label||null};var a};var Ba=a(91107),Wa=a(35035),za=a(254),Va=a(74351);function Qa(e){if("TrackResponseWrapper"===e.content.__typename&&"Track"===e.content.data.__typename){const t=e.content.data;return Da(t)}return null}const Ja={offset:0,previousItems:[]};const qa=({discoveryFeedUri:e,firstItemUri:t,resumeOnClose:a})=>{const s=function(e){const{discoveryFeedUri:t,firstItemUri:a}=e,s=(0,Ua.d4)(Ba.JJ),{request:n}=(0,r.useContext)(za.j),{data:i,error:l,isFetching:o,hasNextPage:c,fetchNextPage:u}=(0,Aa.q)({queryKey:["watch-feed","view",t,a],queryFn:({pageParam:e})=>(0,Va.c)(n,Oa,{sp_t:(0,Wa.v8)("sp_t")??"",country:s,discoveryFeedUri:t,uri:"spotify:section:0JQ5DABRtFWApcy61XJEvU",firstItemUri:e.offset?"":a??"",offset:e.offset,limit:40,previousItems:e.previousItems}),gcTime:18e5,staleTime:3e5,initialPageParam:Ja,getNextPageParam:(e,t)=>{const a=t.reduce(((e,t)=>("HomeSectionCollection"===t?.data?.homeSections.__typename&&t.data.homeSections.sections.forEach((t=>{"HomeSection"===t.__typename&&"HomeWatchFeedSectionData"===t.data?.__typename&&(e.offset=t.sectionItems.pagingInfo.nextOffset??0,e.previousItems=e.previousItems.concat(t.sectionItems.items.map((e=>Qa(e)?.uri??null)).filter((e=>null!==e))))})),e)),{...Ja});if(0!==a.offset)return a}});return{content:(0,r.useMemo)((()=>i?.pages?i.pages.reduce(((e,t)=>{const a=t?.data?.homeSections;if("HomeSectionCollection"===a?.__typename){let t=e.title;return a.sections.forEach((a=>{"HomeSection"===a.__typename&&"HomeWatchFeedSectionData"===a.data?.__typename&&(t=a.data.title?.transformedLabel||null,a.sectionItems.items.forEach((t=>{const a=Qa(t);a&&e.items.push(a)})))})),{items:e.items,title:t}}return e}),{items:[],title:null}):{items:[],title:null}),[i]),error:l,isFetching:o,hasNextPage:c,fetchNextPage:u}}({discoveryFeedUri:e,firstItemUri:t});return(0,o.jsx)(Ta,{watchFeedContent:s,resumeOnClose:a,feedUri:e})},Ha=Spicetify.GraphQL.Definitions["watchFeedEntity"]=new _a.l("watchFeedEntity","query","0cd628607f49e90f79630db7aba4dde43e0683c3a09d775883030b9584dfe2d3",null);var Ya=a(59161);const Ga=({entityFeedUri:e,resumeOnClose:t,watchFeedTitle:a})=>{const n=((e,t)=>{const{request:a}=(0,r.useContext)(za.j),n=(0,s.NC)(Ya.ggJ,{loadingValue:!1}),{data:i,error:l,isFetching:o,fetchNextPage:c,hasNextPage:u}=(0,Aa.q)({queryKey:["watch-feed","view",e],queryFn:({pageParam:t})=>(0,Va.c)(a,Ha,{uri:e,limit:25,offset:t}),initialPageParam:0,enabled:n,getNextPageParam:e=>e?.data?.getWatchFeedForEntity.pagingInfo.nextOffset,staleTime:3e5,gcTime:18e5});return{content:(0,r.useMemo)((()=>{if(!i?.pages)return{items:[],title:null};const e=i.pages.reduce(((e,t)=>{const a=[];return t?.data?.getWatchFeedForEntity.items.forEach((e=>{"TrackResponseWrapper"===e.__typename&&"Track"===e.data.__typename&&a.push(Da(e.data))})),e.concat(a)}),[]);return{title:t,items:e}}),[i,t]),error:l,isFetching:o,hasNextPage:u,fetchNextPage:c}})(e,a);return(0,o.jsx)(Ta,{watchFeedContent:n,resumeOnClose:t,feedUri:e})};var Ka=a(29423),Xa=a(1287);const Za=({state:e})=>{const{feedUri:t,firstItemUri:a,resumeOnClose:s,type:n,title:i}=e;if(!n)return null;switch(n){case"discovery":return(0,o.jsx)(qa,{discoveryFeedUri:t,firstItemUri:a,resumeOnClose:s});case"entity":return(0,o.jsx)(Ga,{entityFeedUri:t,resumeOnClose:s,watchFeedTitle:i??""});default:(0,Xa.k)(n)}return null},$a=()=>{const e=(0,Ka.S)(),t=(0,s.NC)(Ya.$m6,{loadingValue:!1});return e.isOpen?(0,o.jsx)(i.u,{pageId:n.$h.WATCHFEED,uri:e.feedUri,children:(0,o.jsx)(d,{overridePlatformId:te.R,reportPreview:t,children:(0,o.jsx)(Za,{state:e})})}):null}}}]);
//# sourceMappingURL=dwp-watch-feed-view-container.js.map