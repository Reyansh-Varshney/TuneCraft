"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6457],{7463:(e,t,r)=>{r.d(t,{y:()=>n});var i=r(30758),a=r(12665);function n(){const e=(0,a.A)(),[t,r]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,i.useCallback)((t=>e.setIsEnabled(t)),[e])]}},10204:(e,t,r)=>{r.d(t,{YourLibraryX:()=>Vo});r(2557),r(77369);var i=r(30758),a=r(97500),n=r.n(a),l=r(96131),s=r(62411),o=r(52427),c=r(88308),d=r(65809),u=r(76509),p=r(25669),y=r(35054),m=r(28718),g=r(80979),x=r(24148),b=r(70397),h=r(86148),f=r(97081),v=r(68293),C=r(86070);const P=({position:e,divider:t,onCreateCallback:r=()=>{},spec:a})=>{const{createPlaylist:n}=(0,f.A)(),l=(0,v.s)(),s=(0,i.useCallback)((()=>{const t=a.createButtonFactory().hitCreatePlaylist(),i=l.logInteraction(t);n(i.interactionId,e),r()}),[a,l,n,e,r]);return(0,C.jsx)(h.D,{role:"menuitem",divider:t,onClick:s,leadingIcon:(0,C.jsx)(x.u,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.create-playlist")})},S=i.memo((function(e){return(0,C.jsx)(P,{...e})}));var w=r(80701),T=r(16986);const I=i.memo((function({folderUri:e,onCreateCallback:t}){const r=e?{after:{uri:e}}:{before:"start"},{spec:i}=(0,T.o)(e??w.gv);return(0,C.jsxs)(m.W,{children:[(0,C.jsx)(S,{position:r,onCreateCallback:t,spec:i}),(0,C.jsx)(g.j,{position:r,onCreateCallback:t,spec:i})]})}));var j=r(36195),A=r(95638),R=r(49145),D=r(6651),O=r(65397),E=r(35511);r(87175);let L=function(e){return e.URGENT="urgent",e.CONTEXTUAL="contextual",e.DEFAULT="default",e}({});class N{itemsRecord={[L.URGENT]:new Set,[L.CONTEXTUAL]:new Set,[L.DEFAULT]:new Set};visibleItem=null;static PRIORITIES=[L.URGENT,L.CONTEXTUAL,L.DEFAULT];static NO_CHANGE={keyToShow:null,keyToHide:null};getNextItem(){let e=null;return N.PRIORITIES.some((t=>{const r=this.itemsRecord[t];return e=Array.from(r).at(-1)??null,e})),e}updateVisibility(e,t,r){const i=this.visibleItem;"add"===r?this.itemsRecord[t].add(e):this.itemsRecord[t].delete(e);const a=this.getNextItem();return this.visibleItem=a,i===a?N.NO_CHANGE:{keyToShow:a,keyToHide:i}}}var k=r(45663);let F=function(e){return e.VISIBILITY_GRANTED="visibilityGranted",e.VISIBILITY_DENIED="visibilityDenied",e}({});class B extends k.V{}const U=(0,i.createContext)({notifyShowInterest:()=>{throw new Error("notifyShowInterest must be used within a VisibilityOrchestratorProvider")},notifyHideInterest:()=>{throw new Error("notifyHideInterest must be used within a VisibilityOrchestratorProvider")},events:new B}),M=({children:e})=>{const t=(0,i.useMemo)((()=>new N),[]),r=(0,i.useRef)(new B),a=(0,i.useCallback)(((e,t)=>{t&&r.current.emitSync(F.VISIBILITY_DENIED,{key:t}),e&&r.current.emitSync(F.VISIBILITY_GRANTED,{key:e})}),[]),n=(0,i.useCallback)(((e,r=L.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"add");a(i,n)}),[t,a]),l=(0,i.useCallback)(((e,r=L.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"remove");a(i,n)}),[t,a]),s=(0,i.useMemo)((()=>({events:r.current,notifyShowInterest:n,notifyHideInterest:l})),[n,l]);return(0,C.jsx)(U.Provider,{value:s,children:e})};class _{events=new k.V;addRefiners(){throw new Error("Method not implemented.")}removeRefiners(){throw new Error("Method not implemented.")}getEvents(){return this.events}updateSelectedRefinersOrder(e){throw new Error("Method not implemented.")}}const V=(0,i.createContext)(null),H=({children:e})=>{const t=(0,i.useMemo)((()=>new _),[]);return(0,C.jsx)(V.Provider,{value:t,children:e})},z=()=>null,Y=()=>null,K=()=>null,G={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},W=(0,i.createContext)(G);class X{focusElement=()=>{};getFocusElement=()=>null;registerFocusElement=()=>()=>{}}const Z=({children:e})=>{const t=(0,i.useMemo)((()=>new X),[]);return(0,C.jsx)(W.Provider,{value:t,children:e})};var q=r(70850),Q=r(78717),J=r(59133),$=r(80464),ee=r(91107),te=r(61537);const re="rqGyIqd3Igk05BEB2ZC6",ie="WycFx_Gl2tUXbUJpZiD8",ae=()=>{const[e,t]=(0,i.useState)(!1),r=(0,$.V)(),a=(0,s.d4)(ee.JJ);(0,i.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[]);const n=(0,s.d4)(ee.mo);return r&&e?(0,C.jsx)(J.t5,{language:b.Ru.getLocaleForSmartling(),market:a.toLowerCase(),children:(0,C.jsxs)("div",{className:re,"data-testid":"left-sidebar-legal-links",children:[(0,C.jsx)(J.JM,{}),(0,C.jsx)("a",{draggable:!1,href:te.Bl,target:"_blank",rel:"noopener",className:ie,children:(0,C.jsx)(Q.E,{variant:"marginal",children:b.Ru.get("cookies")})}),n&&(0,C.jsx)("a",{draggable:!1,href:te.Vd,target:"_blank",rel:"noopener",className:ie,children:(0,C.jsx)(Q.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null},ne="YNnobzGm5w3XKBniKdW9",le=(0,i.memo)((function({isAnonymous:e}){return(0,C.jsx)("div",{className:ne,"data-testid":"left-sidebar-footer",children:e&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ae,{}),(0,C.jsx)(q.X,{})]})})}));var se=r(56727),oe=r(69365),ce=r(35394),de=r(93359),ue=r(24792),pe=r(64350),ye=r(45518),me=r(84409);const ge="lvJXjYO7YXxGKHcgx5pe",xe="yYGZUqSKJttCw_Z2JvPL",be="wkyebhrfwyJPCfDhQgbp",he=()=>{const{isCollapsed:e}=(0,pe.Q)(),t=(0,v.s)(),r=(0,s.wA)(),{spec:a}=(0,me.r)(de.V,{}),n=b.Ru.get("web-player.your-library-x.dsa-message",b.Ru.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{r(ye.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())}),[r,t,a]);return(0,C.jsx)("div",{className:ge,children:e?(0,C.jsx)(ue.Zp,{label:(0,C.jsx)(Q.E,{children:n}),placement:"right",showDelay:0,children:(0,C.jsx)("div",{className:xe,children:(0,C.jsx)(oe.p,{"aria-label":n})})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{children:(0,C.jsx)(oe.p,{size:"small"})}),(0,C.jsx)(Q.E,{as:"p",semanticColor:"textSubdued",children:b.Ru.get("web-player.your-library-x.dsa-message",(0,C.jsx)(ce.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:l,className:be,children:(0,C.jsx)(Q.E,{variant:"bodyMedium",children:b.Ru.get("web-player.your-library-x.dsa-message-link")})}))})]})})},fe="AhNLpx0iVnlj4SuL_Gaw",ve="JyZRugeRBHbUtS5ABOQ8",Ce=({className:e})=>(0,C.jsx)("section",{className:n()(fe,e),children:(0,C.jsxs)("div",{className:ve,children:[(0,C.jsx)(Q.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,C.jsx)(Q.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var Pe=r(60777),Se=r(76246);const we={getTitle:()=>b.Ru.get("action-trigger.create-playlist"),getDescription:()=>b.Ru.get("action-trigger.login-playlist")},Te=({children:e,renderInline:t})=>(0,C.jsx)(Pe.y,{id:Se.x9,options:{...we,renderInline:t},children:e});var Ie=r(73136),je=r(7998);const Ae="CfruGiDGW_FH4l65GMpb",Re="fIgbQ9qpINdyy__tkaHi",De="wv308QWnPnkI8n0GdqYO",Oe=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:s}=e;return(0,C.jsxs)("section",{className:n()(Ae,s),children:[(0,C.jsxs)("div",{className:Re,children:[(0,C.jsx)(Q.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,C.jsx)(Q.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,C.jsx)("div",{className:De,children:i&&(a||l)&&(0,C.jsx)(Ie.$,{className:De,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:je.v,size:"small",children:i})})]})})),Ee=({className:e})=>{const{createPlaylist:t}=(0,f.A)(),r=(0,i.useCallback)((()=>{t()}),[t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Te,{renderInline:!1,children:(0,C.jsx)(Oe,{onClick:r,linkTitle:b.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:b.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:b.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e})}),(0,C.jsx)(Oe,{linkTo:"/genre/podcasts-web",linkTitle:b.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:b.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:b.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},Le="NOXrKH_1anB9lsOlyv5g",Ne="FIARvjbv_YZKwz7yxNHw",ke="Fqrv8StT3DnEAfntIKCg",Fe="JydI9ZzWnssPC899sOGP",Be=({query:e,className:t})=>(0,C.jsxs)("div",{className:n()(Le,t),"data-testid":"no-search-results-view",children:[(0,C.jsx)(Q.E,{as:"h1",variant:"bodyMediumBold",className:Ne,children:b.Ru.get("web-player.your-library-x.empty-results-title-short",(0,C.jsx)("span",{className:ke,children:(0,C.jsx)("span",{className:Fe,children:e})}))}),(0,C.jsx)(Q.E,{as:"h2",variant:"bodySmall",children:b.Ru.get("web-player.your-library-x.empty-results-text-short")})]});var Ue=r(37899);const Me="vhOeYrTmSoea5vemsMpv",_e="pCKhe1uJhYBUC4YVmz9B",Ve=({onClick:e})=>(0,C.jsxs)("div",{className:Me,children:[(0,C.jsx)("div",{className:"icon",children:(0,C.jsx)(Ue.b,{size:"xlarge",semanticColor:"textBase"})}),(0,C.jsxs)("div",{className:_e,children:[(0,C.jsx)(Q.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.error-title")}),(0,C.jsx)(Q.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.error-body")})]}),(0,C.jsx)("div",{children:(0,C.jsx)(Ie.$,{onClick:e,colorSet:"invertedLight",size:"small",children:b.Ru.get("web-player.your-library-x.error-button")})})]}),He=(0,i.createContext)(null);var ze=r(92713);const Ye=({children:e})=>{const t=function(){const[e,t]=(0,ze.x)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,C.jsx)(He.Provider,{value:t,children:e})};var Ke=r(90898),Ge=r(32765);let We=function(e){return e[e.SELECTED_CHIP=0]="SELECTED_CHIP",e[e.REFINERS_PICKER_BUTTON=1]="REFINERS_PICKER_BUTTON",e}({});var Xe=r(40539),Ze=r(26427),qe=r(24639),Qe=r(96124);const Je="a2XwshgvydvJO9If_GzQ",$e="aVLBGREPTnbTFhkSdUMV",et="ViXEX4SVVU_NA7zcS9kd",tt="pQvrkwXAqZnbSqJiiQuo",rt="mA1QNQx6oUXgQ8kMID2S",it={marginBlockEnd:0,willChange:"transform, opacity"},at=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:s=j.Vp,className:o,innerRef:c,index:d=0,spec:u,chipContainerClassName:p,...y})=>{const m=(0,v.s)(),g=(0,Qe.f)(),x=y.selected,b=e?g.getFilterLabel(e):"",h=(0,i.useCallback)((()=>{!e||x&&t?(a(),x&&t&&e?m.logInteraction(u.filterChipFactory({identifier:b,position:d}).hitClearFilter()):m.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),x?m.logInteraction(u.filterChipFactory({identifier:b,position:d}).hitClearFilter()):m.logInteraction(u.filterChipFactory({identifier:b,position:d}).hitFilter()))}),[e,b,x,t,a,l,d,m,u]),f=(0,i.useCallback)((()=>{r||h()}),[r,h]),{className:P,dropPosition:S,...w}=(0,qe.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:s},onLongDragOver:h});return(0,C.jsx)(Ke.nh,{className:p,onAction:f,textValue:y["aria-label"],children:(0,C.jsx)(Ze.A,{children:(0,C.jsx)(Xe.v,{...y,"aria-label":y["aria-label"],...w,...S===j.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(o,P,{[$e]:S===j.Nz.ON,[rt]:r}),selectedColorSet:S===j.Nz.ON?"invertedDark":"invertedLight",secondary:x&&!t,style:it,ref:c,tabIndex:-1,role:"presentation",as:"div"})})})};var nt=r(47170);const lt={marginBlockEnd:0,willChange:"transform, opacity"},st=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:s=j.Vp,className:o,innerRef:c,index:d=0,spec:u,...p})=>{const y=(0,v.s)(),m=(0,Qe.f)(),g=p.selected,x=e?m.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||g&&t?(a(),g&&t&&e?y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):y.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),g?y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):y.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,g,t,a,l,d,y,u]),h=(0,i.useCallback)((()=>{r||b()}),[r,b]),{className:f,dropPosition:P,...S}=(0,qe.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:s},onLongDragOver:b});return(0,C.jsx)(Ke.nh,{onAction:h,textValue:p["aria-label"],children:(0,C.jsx)(Ze.A,{children:(0,C.jsx)(nt.m,{...p,"aria-label":p["aria-label"],...S,...P===j.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(o,f,{[$e]:P===j.Nz.ON,[rt]:r}),style:lt,ref:c,tabIndex:-1,role:"presentation",as:"div"})})})};var ot=r(72983);const ct=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS,ot.fl.ALBUMS,ot.fl.ARTISTS,ot.fl.AUTHORS,ot.fl.PLAYLISTS_V2,ot.fl.SHOWS,ot.fl.AUDIOBOOKS,ot.fl.EPISODES,ot.fl.FOLDERS],dt=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS,ot.fl.ALBUMS,ot.fl.EPISODES,ot.fl.PLAYLISTS_V2,ot.fl.FOLDERS],ut=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS,ot.fl.ALBUMS,ot.fl.EPISODES,ot.fl.PLAYLISTS_V2,ot.fl.FOLDERS];function pt(e){return{type:"contentType",id:e.id,name:e.name}}function yt(e){return e.id.startsWith("spotify:concept:")?{type:"tag",id:e.id,name:e.name,count:0}:pt(e)}var mt=r(93441);const gt="f5yairu2OwqKcOecHnkA",xt="Pdw_sPQYAnkCFPFIs6Vd",bt=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:a,className:l,spec:s,inFolderView:o}){const c=!(t||e),{availableRefiners:d,activeRefiners:u,allContentTypeRefiners:p}=(({availableFilters:e,activeFilters:t,inFolderView:r})=>{const i=e?.map(pt);return{availableRefiners:i,activeRefiners:t?.map(yt)??[],allContentTypeRefiners:i}})({availableFilters:e,activeFilters:t,inFolderView:o}),{registerFocusElement:y}={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},m=c?p:[...u??[],...d??[]],g=(0,i.useRef)(null),x=(0,i.useCallback)((()=>{(0,mt.MS)(g.current,g.current?.nextElementSibling instanceof HTMLElement?g.current?.nextElementSibling:null),a()}),[a]),h=!1;return m&&0!==m?.length?(0,C.jsx)(Ge.FN,{noFocusManagement:!0,dragToScrollOptions:{isDisabled:!1},className:l,role:"presentation",children:(0,C.jsxs)(Ke.qF,{className:gt,orientation:"horizontal","aria-label":b.Ru.get("web-player.your-library-x.filter_options"),children:[!!t?.length&&(0,C.jsx)(st,{resetFilterIds:x,toggleFilterId:r,allowedDropTargetMimeTypes:ct,"aria-label":b.Ru.get("web-player.your-library-x.clear_filters"),innerRef:g,spec:s}),m.map(((e,t)=>{const i=u?.includes(e),l=0===t,o=m[0],d=t>0&&o&&u?.includes(o),p=(0,C.jsx)(at,{innerRef:i&&y?y(We.SELECTED_CHIP):void 0,filterId:e.id,isPrimaryFilter:l,isPlaceholder:c,resetFilterIds:a,toggleFilterId:r,selected:i,spec:s,index:t,"aria-label":e.name,chipContainerClassName:n()({[xt]:d&&i}),children:e.name},e.id);return p})),h]})}):null}));var ht=r(18831);const ft="",vt=(0,i.createContext)({openedFolderUri:ft,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),Ct=({children:e})=>{const{setFilter:t}=(0,i.useContext)(E.g),[r,a]=(0,ze.x)("opened-folder-uri",ft),n=(0,i.useRef)([r??ft]),l=(0,i.useRef)("PUSH"),s=(0,i.useCallback)((e=>{a(e),t(ft)}),[a,t]),o=(0,i.useCallback)((e=>{n.current.push(e),l.current="PUSH",s(n.current.at(-1))}),[s]),c=(0,i.useCallback)((()=>{n.current.pop();const e=n.current.at(-1);return l.current="POP",s(e),e}),[s]),d=(0,i.useCallback)((()=>{n.current=[ft],s(ft)}),[s]),u=(0,i.useMemo)((()=>({openedFolderUri:(0,ht.fpb)(r)?r:ft,pushFolder:o,popFolder:c,resetFolder:d,change:l.current})),[r,c,o,d]);return(0,C.jsx)(vt.Provider,{value:u,children:e})};var Pt=r(38274),St=r(86274),wt=r(48729),Tt=r(31016),It=r(19017),jt=r(48410),At=r(85799),Rt=r(26484),Dt=r(48773),Ot=r(70678),Et=r(62076),Lt=r(19151),Nt=r(1287);const kt=(e,t,r)=>t?(e=>{switch(e){case"album":default:return b.Ru.get("web-player.your-library-x.type-album");case"ep":return b.Ru.get("ep");case"single":return b.Ru.get("single");case"compilation":return b.Ru.get("compilation")}})(t):((e,t)=>{switch(e){case Lt.c.ALBUM:return b.Ru.get("web-player.your-library-x.type-album");case Lt.c.ARTIST:return b.Ru.get("web-player.your-library-x.type-artist");case Lt.c.AUTHOR:return b.Ru.get("web-player.your-library-x.type-author");case Lt.c.FOLDER:return b.Ru.get("web-player.your-library-x.type-folder");case Lt.c.AUDIOBOOK:return b.Ru.get("web-player.your-library-x.type-audiobook");case Lt.c.YOUR_EPISODES:case Lt.c.LOCAL_FILES:case Lt.c.LIKED_SONGS:case Lt.c.PLAYLIST:return t?(0,Et.v)():b.Ru.get("web-player.your-library-x.type-playlist");case Lt.c.SHOW:return b.Ru.get("web-player.your-library-x.type-show");case Lt.c.PRE_RELEASE_ALBUM:return b.Ru.get("web-player.your-library-x.type-prerelease-album");case Lt.c.PRE_RELEASE_BOOK:return b.Ru.get("web-player.your-library-x.type-prerelease-audiobook");case Lt.c.CONCERT:return"Event";default:return(0,Nt.d)(e)}})(e,r),Ft=e=>e.type===Lt.c.ALBUM&&"album"!==e.albumType,Bt=e=>{switch(e){case Lt.c.YOUR_EPISODES:case Lt.c.LIKED_SONGS:case Lt.c.LOCAL_FILES:return Lt.c.PLAYLIST;default:return e}},Ut=({shouldShowType:e,type:t,subtitle:r,specialType:i,isTunaApplied:a})=>(0,C.jsxs)(C.Fragment,{children:[e&&kt(t,i,a),!!r&&e&&" • ",r]});var Mt=r(27614);const _t="fYWNdY4zhj4OX_T2Xtg6",Vt="BRX6aJUAuAsvHKD_fpbo",Ht="ZZsPF3Sn4h7m0_5Clhk0",zt="IZq_xBKdh88HLD4QY90X",Yt="PUipCs3_0Qott0Sru3pB",Kt="XAOxFVWnd185_vZ5zPGu",Gt="YsCa3XbOXEm79LH0B7do",Wt="eC25_w41L83mXDCqdm_A",Xt="VyDwqqtx0153zD8a3TED",Zt="rOgsguaurlHVlgCTY0P7",qt="zS8ATyQNwnAiEoPrCcIo",Qt="Zwr4MoUVImDin82vBn4y",Jt="Xw1OibA6EkrU4F47EMw9",$t="lb8li6m8Zei4tr0zNKxX",er="aK6vld0FgHGxjz6IiHyS",tr="_EFIA9HjgZxxgTSZzQcg",rr="JUPaw8kZF94Coth4G88s",ir="main-yourLibraryX-listItem",ar="BfALkuQy0UjTI70U9QlQ",nr="IeIwiYLvr7PD_4aZAxGE",lr="qBiMgWp7EVg3k1YU8DQ0",sr="c1PJ2LHU0EnzyA0jDc1j",or=({iconSize:e="small"})=>(0,C.jsx)("span",{className:Yt,children:(0,C.jsx)(Mt.C,{size:e,semanticColor:"textBrightAccent",className:zt})}),cr=({children:e,title:t,subtitleSlot:r,isPlaying:i})=>(0,C.jsx)(ue.Zp,{label:(0,C.jsxs)("div",{className:qt,children:[(0,C.jsxs)("div",{children:[t,r]}),i&&(0,C.jsx)(or,{})]}),placement:"right",showDelay:0,children:e});var dr=r(10622),ur=r(59902),pr=r(89988);const yr=({leading:e,subtitle:t,uri:r})=>{const i=`listrow-subtitle-${r}`;return(0,C.jsx)("div",{className:pr.A.subtitle,children:(0,C.jsxs)(dr.j,{className:pr.A.link,id:i,dir:"auto",children:[(0,C.jsx)("span",{className:pr.A.subtitleLeadingWrapper,children:e}),(0,C.jsx)("span",{className:pr.A.subtitleText,children:t})]})})},mr=({leading:e,subtitle:t,uri:r})=>{const i=`card-subtitle-${r}`;return(0,C.jsx)("div",{className:pr.A.subtitle,children:(0,C.jsxs)(ur.j,{lineClamp:1,className:pr.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,C.jsx)("span",{className:pr.A.subtitleLeadingWrapper,children:e}),t]})})};var gr=r(79898),xr=r(31162),br=r(98756),hr=r(69878),fr=r(42099);const vr=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function Cr(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{const t="Backspace"===e.key,r=" "===e.key,i=e.metaKey||e.ctrlKey,s=e.target instanceof HTMLElement&&e.target?.matches("input, textarea, [contenteditable]"),o=e.isComposing||229===e.keyCode,c=(d=e.key,vr.has(d)&&!t);var d;const u=r&&!n.current,p=t&&!n.current;if(i||s||o||c||u||p)return;(t&&n.current||r)&&(e.preventDefault(),e.stopPropagation()),a((r=>t?r.slice(0,-1):r+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const Pr=(0,i.createContext)({setTypeaheadResult:({uid:e,str:t})=>{if(e||t)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),Sr=({children:e,containerRef:t,findMatchingTypeaheadUid:r,isEnabled:a=!0})=>{const[n,l]=(0,i.useState)({uid:null,str:""}),s=(0,i.useMemo)((()=>({typeaheadResult:n,setTypeaheadResult:l})),[n,l]),o=Cr(t,a),c=(0,i.useRef)(o);c.current=o;const d=(0,i.useRef)(r);return d.current=r,(0,i.useEffect)((()=>{o&&a?d.current(o).then((e=>{o===c.current&&l({uid:e,str:o})})):l({uid:null,str:""})}),[a,o,l]),(0,C.jsx)(Pr.Provider,{value:s,children:e})};var wr=r(4015);const Tr={state:{referrer:"your_library",preventMoveFocus:!0}};function Ir(e,t,r,a,n){const{filter:l}=(0,i.useContext)(E.g),{isActive:s}=(0,fr.l_)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(Pr);return t===e?r:null}(e),c=!!o,d=(0,hr.W)({uri:e,type:"link"})?(0,wr.hF)(t):t,u=(0,i.useRef)(null),p=(0,br.g)(),y=(0,i.useCallback)((e=>{e.preventDefault(),n?n():d&&p(d,Tr)}),[n,p,d]);(0,i.useLayoutEffect)((()=>{c&&u.current?.closest('[role="row"], [role="listitem"]')?.querySelector("button")?.focus({preventScroll:!0})}),[c]);const m=a?`${a} • ${r}`:r;return{isActive:s,onClick:y,contents:l||o?(0,C.jsx)("span",{ref:u,children:(0,C.jsx)(jt.M,{autoEscape:!0,searchWords:[l.trim(),...o?.split(" ")??""],textToHighlight:m})}):m}}const jr=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:a,to:l=(0,ht.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,contents:c}=Ir(t,l,r,i,s),d=`listrow-title-${e}`;return(0,C.jsx)(y.h,{menu:a,children:(0,C.jsx)(gr.d,{id:d,lineClamp:1,className:n()(pr.A.link,pr.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",dir:"auto",children:c})})},Ar=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:a,to:l=(0,ht.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,onClick:c,contents:d}=Ir(t,l,r,i,s);return(0,C.jsx)(y.h,{menu:a,children:(0,C.jsx)(xr.Z,{lineClamp:1,className:n()(pr.A.link,pr.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",href:l,onClick:c,role:"gridcell",dir:"auto",children:d})})},Rr=[ot.fl.ALBUMS,ot.fl.ARTISTS,ot.fl.AUTHORS,ot.fl.PLAYLISTS_V2,ot.fl.SHOWS,ot.fl.FOLDERS,ot.fl.PSEUDO_PLAYLISTS],Dr=[ot.fl.PLAYLISTS_V2,ot.fl.FOLDERS];var Or=r(26045);const Er=({isConfirmationForPlaylist:e,onConfirm:t,onClose:r})=>{const i=e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,C.jsx)(Or.T,{"aria-label":i,titleText:i,descriptionText:e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:t,onClose:r,confirmText:b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:e?b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:b.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};var Lr=r(80357);function Nr({onApplyDrop:e,spec:t,isDropTargetPinned:r}){const a=(0,Qe.f)(),{contains:n}=(0,Lr.p)("ylpin"),[l,s]=(0,i.useState)(null),o=(0,i.useCallback)((async(t,i)=>{if(r)return void e(t,i);const{[ot.fl.PLAYLISTS_V2]:a=[],[ot.fl.FOLDERS]:l=[]}=t,o=[...a,...l];if(!!o.length&&(await n(...o)).some(Boolean)){if(o.length>1)throw new Error("Reordering multiple pinned items at once is not supported");s({dropData:t,dropPosition:i})}else e(t,i)}),[r,n,e]),c=(0,v.s)();return{applyDropWithUnpinConfirmation:o,unpinConfirmationDialog:l?(0,C.jsx)(Er,{isConfirmationForPlaylist:!l.dropData[ot.fl.FOLDERS]?.length,onClose:()=>s(null),onConfirm:async()=>{const{[ot.fl.PLAYLISTS_V2]:r=[],[ot.fl.FOLDERS]:i=[]}=l.dropData;await a.unpin([...r,...i][0]),t?.dragUnpinItem&&c.logInteraction(t.dragUnpinItem({itemToUnpin:[...r,...i][0]})),e(l.dropData,l.dropPosition),s(null)}}):null}}function kr(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(D.O_);return{dropOriginIsYLX:e===w.gv,entityIsInFolder:t>0}}var Fr=r(84670);function Br(){const e=(0,Fr.g)(),{dropOriginIsYLX:t}=kr();return(0,i.useCallback)((async(r,i)=>{if(!r[0])return;const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}var Ur=r(27889);function Mr({dropTargetUri:e,spec:t,isDropTargetPinned:r}){const a=(0,Fr.g)(),n=(0,Qe.f)(),l=(0,v.s)(),s=Br(),o=(0,i.useCallback)((async(i,o)=>{const{[ot.fl.PLAYLISTS_V2]:c=[],[ot.fl.FOLDERS]:[d]=[]}=i,u=o===j.Nz.BEFORE?{before:{uri:e}}:{after:{uri:e}};if(r){const e=i[Object.keys(i)[0]][0];if((0,ht.tbX)(e)||(0,ht.fpb)(e)){const t=_r((await a.getContents()).items,e);-1===t?await a.add([e],{before:"start"}):t>0&&((0,ht.tbX)(e)?await a.move({uri:e},{before:"start"}):await a.moveFolder({uri:e},{before:"start"}))}else if(!(0,ht.Z0m)(e)){const[t]=await n.contains(e);t||await n.add({uris:[e]})}await n.pin(e,u),l.logInteraction(t.dragPinItem({itemToPin:e}))}else d?await a.moveFolder({uri:d},u):c.length&&await s(c,u);l.logInteraction(t.dragSort())}),[e,r,n,l,t,a,s]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=Nr(r?{onApplyDrop:o,spec:t,isDropTargetPinned:r}:{onApplyDrop:o});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[ot.fl.PLAYLISTS_V2]:r=[],[ot.fl.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");d(e,t)}),[d]),unpinConfirmationDialog:c}}function _r(e,t,r=0){for(const i of e)if((0,Ur.Af)(i)||(0,Ur.sA)(i)){if((0,ht.B2u)(i.uri,t))return r;if((0,Ur.sA)(i)){const e=_r(i.items,t,r+1);if(-1!==e)return e}}return-1}var Vr=r(28054),Hr=r(76146);const zr={state:{referrer:"your_library",preventMoveFocus:!0}};function Yr({uri:e,to:t=(0,ht.o_h)(e)?.toURLPath(!0)||"",type:r,handleNavigate:a,dragLabel:n,isPinned:l,canReorder:s,allowedDropTargetDropOnMimeTypes:o=[],onDropTargetDropOn:c,onLongDragOver:d,openDeleteDialog:u,togglePlay:p,triggerPlay:y,isItemInGrid:m,playInsteadOfNavigating:g=!1,isPlaying:x,spec:b,folderDepth:h}){const f=(0,hr.W)({uri:e,type:"link"})?(0,wr.hF)(t):t,C=(0,br.g)(),P=(0,Hr._)((t=>{const r=(0,ht.o_h)(t.pathname,{parseUnknown:!0})?.toURI();return!!r&&(0,ht.B2u)(e,r)})),S=(0,Hr.M)(),T=(0,i.useCallback)((()=>{C(f,zr)}),[C,f]),I=(0,v.s)(),A=(0,i.useRef)(0),R=(0,i.useRef)(null),D=(0,i.useCallback)((({target:e})=>e instanceof HTMLElement&&!R.current?.contains(e)),[]),O=(0,i.useCallback)((t=>{if(D(t))return;if(t.preventDefault(),t.currentTarget.scrollIntoView({block:"nearest"}),g){if(A.current>Date.now())return;return A.current=Date.now()+300,void(x||(p?.(),I.logInteraction(b.yourLibraryItemFactory().hitPlay({itemToBePlayed:e}))))}const r=S();a?a():f&&C(f,{...zr,replace:f===r.pathname}),I.logInteraction(b.yourLibraryItemFactory().hitUiNavigate({destination:e}))}),[D,g,S,a,f,I,b,e,x,p,C]),E=(0,i.useCallback)((t=>{g||D(t)||y&&(I.logInteraction(b.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:e})),y?.())}),[g,D,y,I,b,e]),L=(0,i.useCallback)((()=>{I.logInteraction(b.yourLibraryItemFactory().secondaryHitUiReveal())}),[I,b]),{draggable:N,onDragStart:k}=(0,Vr.P)({itemUris:[e],itemMimeTypes:[(0,ot.j3)(r)],dragLabelText:n,sectionId:h??0,dropOriginUri:w.gv});let F=[];l?F=Rr:s&&(F=Dr);const B={[j.Nz.ON]:o,[j.Nz.BEFORE]:F,[j.Nz.AFTER]:F},{handleDropBeforeOrAfterRootlistItem:U,unpinConfirmationDialog:M}=Mr({dropTargetUri:e,spec:b,isDropTargetPinned:l}),_=(0,i.useCallback)(((e,t)=>{t===j.Nz.ON?c?.(e,t):t!==j.Nz.BEFORE&&t!==j.Nz.AFTER||U(e,t)}),[c,U]),{dropPosition:V,className:H,...z}=(0,qe.A)({uri:e,allowedMimeTypesByDropPosition:B,onDrop:_,onLongDragOver:d??T,reorderDirection:m?"horizontal":"vertical"});return{onClick:O,onDoubleClick:E,draggable:N&&!!n,onDragStart:k,onKeyDown:(0,i.useCallback)((t=>{t.repeat||D(t)||("Backspace"!==t.key&&"Delete"!==t.key||!u||u(),"Enter"===t.key&&t.shiftKey&&p&&(t.preventDefault(),p()),"Enter"===t.key&&I.logInteraction(b.yourLibraryItemFactory().keyStrokeUiNavigate({destination:e})))}),[D,I,u,b,p,e]),unpinConfirmationDialog:M,dropPosition:V,dropTargetClassName:H,logRightClick:L,isViewActive:P,itemRef:R,...z}}var Kr=r(59771);const Gr=i.createContext(!1),Wr=({children:e,isCompact:t})=>(0,C.jsx)(Gr.Provider,{value:t,children:e}),Xr=()=>(0,i.useContext)(Gr),Zr={card:"wJTUKAyYI219kJtclJLa",compactCard:"q0_cpEyu_8EC7he96qT_",placeholderIcon:"L8ET6xwMh_wMEqCpmunH",cardImageContainer:"D_1eJKOJ3wTCKO93GX06",playButtonContainer:"_7kcfiJ2UNEh3CDR9Wau",small:"N8wAJha8ApfxgOfqv4UM",playButtonContainerVisible:"iJMxV9zMXSfrjJPyB3Fw"},qr=({uri:e,to:t=(0,ht.o_h)(e)?.toURLPath(!0)||"",handleNavigate:r,dragLabel:a,name:l,namePrefix:s,subtitle:o,cover:c,type:d,specialType:u,downloadButton:p,canReorder:m,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:x,onLongDragOver:b,menu:h,leading:f,openDeleteDialog:v,togglePlay:P,triggerPlay:S,isPinned:w,shouldShowType:T,playbackUri:I,isPlaying:A,isActive:R,playInsteadOfNavigating:D,spec:O,index:E,animateClassName:L="",animateState:N,preReleaseIcon:k,lockedIcon:F,isTunaApplied:B})=>{const{onClick:U,onDoubleClick:M,draggable:_,onDragStart:V,onKeyDown:H,dropPosition:z,dropTargetClassName:Y,unpinConfirmationDialog:K,logRightClick:G,isViewActive:W,itemRef:X,...Z}=Yr({uri:e,to:t,handleNavigate:r,dragLabel:a,isPinned:w,canReorder:m,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:x,openDeleteDialog:v,onLongDragOver:b,togglePlay:P,triggerPlay:S,isItemInGrid:!0,isPlaying:A,spec:O,playInsteadOfNavigating:D}),q=(0,C.jsx)(Ar,{uri:e,title:l,titlePrefix:s,menu:h,handleNavigate:r,playbackUri:I}),Q=(0,C.jsx)(mr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Kr.g,{pinned:w}),F,k,p,(0,C.jsx)(Ot.b,{className:Zr.icon,isTunaApplied:B})]}),subtitle:(0,C.jsx)(Ut,{shouldShowType:T,type:d,subtitle:o,specialType:u,isTunaApplied:B}),uri:e}),J=(0,i.useRef)(null),$=Xr();let ee=(0,C.jsx)(y.h,{menu:h,onShow:G,children:(0,C.jsx)(Dt.E,{uri:e,trigger:Dt.l.OnMouseDown,children:(0,C.jsx)(At.Z,{id:e,title:q,subtitle:Q,media:c,size:"sm",leading:f,className:n()(Zr.card,{[L]:N}),variant:W?"tinted":void 0,onClick:U,onDoubleClick:M,padding:"tighter",...Z})})});return $&&(ee=(0,C.jsx)(cr,{title:q,subtitleSlot:Q,uri:e,isPlaying:A,parentRef:J,children:(0,C.jsx)("div",{children:(0,C.jsx)(y.h,{menu:h,onShow:G,children:(0,C.jsx)(Dt.E,{uri:e,trigger:Dt.l.OnMouseDown,children:(0,C.jsx)(At.Z,{id:e,title:void 0,media:c,size:"sm",className:n()(Zr.card,Zr.compactCard,{[L]:N}),variant:W?"tinted":void 0,onClick:U,onDoubleClick:M,padding:"tighter-2",ref:J,...Z})})})})})),(0,C.jsxs)(C.Fragment,{children:[K,(0,C.jsx)(Rt.W,{draggable:_,onDragStart:V,onKeyDown:H,className:n()(Y,{[Je]:z===j.Nz.ON,[et]:z===j.Nz.BEFORE,[tt]:z===j.Nz.AFTER}),...Z,innerRef:X,"aria-selected":R,"aria-posinset":E,children:ee})]})};var Qr=r(71259),Jr=r(70847);const $r=({name:e,uri:t,togglePlay:r,spec:a,isActive:l,isPlaying:s,size:o})=>{const c=(0,v.s)(),d=(0,i.useCallback)((()=>{l?s?c.logInteraction(a.yourLibraryItemFactory().doubleHitPause({itemToBePaused:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:t})),r()}),[l,s,c,a,r,t]);return(0,C.jsx)("div",{className:n()(Zr.playButtonContainer,{[Zr.playButtonContainerVisible]:s,[Zr.small]:"small"===o}),role:"gridcell",children:(0,C.jsx)(Jr.R,{isPlaying:s,onClick:d,ariaPlayLabel:b.Ru.get("playlist.a11y.play",e),ariaPauseLabel:b.Ru.get("playlist.a11y.pause",e),size:o})})};var ei=r(84825);const ti=({name:e,uri:t,togglePlay:r,spec:a,isActive:n,isPlaying:l,size:s})=>{const o=(0,v.s)(),c=(0,i.useCallback)((()=>{const e=(0,ei.$I)({spec:a,logger:o,uri:t,isActive:n,isPlaying:l});r({loggingParams:e})}),[n,l,o,a,r,t]);return(0,C.jsx)(Jr.R,{isPlaying:l,onClick:c,ariaPlayLabel:b.Ru.get("playlist.a11y.play",e),ariaPauseLabel:b.Ru.get("playlist.a11y.pause",e),size:s,version:Jr.H.transparent})};var ri=r(73061),ii=r(99244),ai=r(73048),ni=r(5544),li=r(69091);const si=(0,i.memo)((function({title:e,type:t,images:r,isCircular:i,color:a,animateState:l,animateClassName:s="",isPlaying:o,isActive:c,togglePlay:d,spec:u,uri:p,overlayElement:y}){const m=(0,li._)(),{isCollapsed:g}=(0,pe.Q)(),x=d&&!g;return(0,C.jsxs)("div",{className:n()({[pr.A.imageContainer]:x||!!y}),children:[(0,C.jsx)(ri.b,{fadeIn:!0,images:m(r,48),shape:i?ri.u.CIRCLE:ri.u.ROUNDED_CORNERS,size:ii.Qe.SIZE_48,iconSize:"medium",type:t,title:e,className:n()(pr.A.entityImage,{[s]:l}),color:a,loadingMode:"eager"}),x&&(0,C.jsx)("div",{className:n()(ar,{[nr]:i,[lr]:!i}),children:(0,C.jsx)(ti,{spec:u.yourLibraryItemFactory().playButtonFactory(),name:e,uri:p,togglePlay:d,isPlaying:o,isActive:c,size:"medium"})}),y]})})),oi=(0,i.memo)((function({title:e,type:t,uri:r,images:a,isCircular:n,togglePlay:l,color:s,spec:o,isActive:c,isPlaying:d,overlayElement:u}){const p=Xr(),y=(0,li._)(),[m,g]=(0,i.useState)("medium"),x=(0,i.useRef)(null);return(0,ni.w)({onResize:({width:e})=>{g(e<90?"small":"medium")},refOrElement:x}),(0,C.jsx)("div",{className:Zr.cardImageContainer,ref:x,children:(0,C.jsxs)(Qr.M,{images:y(a,250),FallbackComponent:e=>(0,C.jsx)(ai.s,{semanticColor:"textSubdued",type:t,size:"xxlarge",className:Zr.placeholderIcon,...e}),isCircular:n,color:s,loadingMode:"eager",children:[l&&!p&&(0,C.jsx)($r,{name:e,uri:r,togglePlay:l,spec:o,isActive:c,isPlaying:d,size:m}),u]})})}));var ci=r(39653);const di="_ymJNIfklFmogab9uWY1",ui=({folderDepth:e=0})=>(0,C.jsx)("div",{className:di,style:{"--ylx-folder-depth":e}}),pi=e=>{const{RowVariantComponent:t,uri:r,to:a=(0,ht.o_h)(r)?.toURLPath(!0)||"",handleNavigate:l,folderDepth:s,className:o,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:y,onLongDragOver:m,style:g,openDeleteDialog:x,togglePlay:b,triggerPlay:h,isPlaying:f,isActive:v,type:P,menu:S,name:w,namePrefix:T,subtitle:I,downloadButton:A,expandFolderButton:R,cover:D,alt:O,addedAt:E,lastPlayedAt:L,shouldShowType:N,playbackUri:k,playInsteadOfNavigating:F,spec:B,nrValidItems:U,index:M,lockedIcon:_,onKeyDown:V,preReleaseIcon:H,specialType:z,isTunaApplied:Y,...K}=e,{onClick:G,onDoubleClick:W,onDragStart:X,onKeyDown:Z,dropPosition:q,dropTargetClassName:Q,draggable:J,unpinConfirmationDialog:$,logRightClick:ee,isViewActive:te,itemRef:re,...ie}=Yr({uri:r,to:a,type:P,handleNavigate:l,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:y,onLongDragOver:m,openDeleteDialog:x,togglePlay:b,triggerPlay:h,isPlaying:f,playInsteadOfNavigating:F,spec:B,folderDepth:s,isItemInGrid:!1}),ae=(0,i.useCallback)((e=>{Z(e),V?.(e)}),[Z,V]);return(0,C.jsxs)(C.Fragment,{children:[$,q===j.Nz.BEFORE&&(0,C.jsx)(ui,{folderDepth:s}),(0,C.jsx)(ci.$,{"aria-setsize":U,rowIndex:M,style:{"--ylx-folder-depth":s,...g},draggable:J,onDragStart:X,onDoubleClick:W,className:n()(o,Q,ir,{[Je]:q===j.Nz.ON}),...K,...ie,onKeyDown:ae,innerRef:re,"aria-selected":v,children:(0,C.jsx)(t,{...e,to:a,isActive:v,isViewActive:te,onClick:G,logRightClick:ee,playInsteadOfNavigating:F,parentRef:re})}),q===j.Nz.AFTER&&(0,C.jsx)(ui,{folderDepth:s})]})};var yi=r(90814);const mi=()=>(0,C.jsx)(yi.u,{semanticColor:"textSubdued",title:b.Ru.get("mwp.header.content.unavailable"),className:pr.A.icon,size:"xsmall"});var gi=r(72432);function xi(e){const{uri:t,artists:r,isPremiumOnly:a}=e,{filter:n}=(0,i.useContext)(E.g),{isPlaying:l,isActive:o}=(0,fr.l_)(t),c=(0,s.wA)(),d=(0,i.useCallback)((()=>{c((0,wt.aw)(t))}),[c,t]),{togglePlay:u,triggerPlay:p}=(0,gi.P)({uri:t},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:l,isActive:o,openDeleteDialog:d,togglePlay:a?void 0:u,triggerPlay:a?void 0:p,menu:(0,C.jsx)(Tt.h,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(jt.M,{searchWords:[n.trim()],textToHighlight:r.at(0)?.name??""}),downloadButton:(0,C.jsx)(It.M,{uri:t,size:"xsmall",className:pr.A.icon,as:"span"})}}const bi=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,albumType:u,addedAt:p,lastPlayedAt:y,color:m,isPremiumOnly:g}=e,{isPlaying:x,isActive:b,openDeleteDialog:h,togglePlay:f,triggerPlay:v,menu:P,subtitleText:S,downloadButton:w}=xi(e),T=(0,C.jsx)(si,{title:o,type:d,images:s,color:m,uri:l,isPlaying:x,isActive:b,spec:i,togglePlay:f}),I=g?(0,C.jsx)(mi,{}):void 0;return(0,C.jsx)(pi,{RowVariantComponent:r,uri:l,cover:T,name:o,subtitle:S,downloadButton:w,alt:o,type:d,specialType:u,dragLabel:o,menu:P,togglePlay:f,triggerPlay:v,openDeleteDialog:h,addedAt:p,lastPlayedAt:y,isPinned:c,isPlaying:x,isActive:b,shouldShowType:t,spec:i,nrValidItems:a,index:n,lockedIcon:I})},hi=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,albumType:c,color:d,isPremiumOnly:u}=e,{togglePlay:p,triggerPlay:y,menu:m,subtitleText:g,downloadButton:x,openDeleteDialog:b,isPlaying:h,isActive:f}=xi(e),v=(0,C.jsx)(oi,{title:l,type:o,images:n,uri:a,togglePlay:p,color:d,spec:r,isActive:f,isPlaying:h}),P=u?(0,C.jsx)(mi,{}):void 0;return(0,C.jsx)(qr,{uri:a,name:l,subtitle:g,menu:m,dragLabel:l,cover:v,downloadButton:x,type:o,specialType:c,togglePlay:p,triggerPlay:y,isPinned:s,shouldShowType:t,openDeleteDialog:b,isPlaying:h,isActive:f,spec:r,index:i,lockedIcon:P})};var fi=r(97);function vi(e){const{uri:t}=e,r=(0,s.wA)(),{togglePlay:a,triggerPlay:n}=(0,gi.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:l,isActive:o}=(0,fr.l_)(t);return{togglePlay:a,triggerPlay:n,isPlaying:l,isActive:o,openDeleteDialog:(0,i.useCallback)((()=>{r((0,wt.aw)(t))}),[r,t]),menu:(0,C.jsx)(fi.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Ci=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:y}=e,{togglePlay:m,triggerPlay:g,isPlaying:x,isActive:b,openDeleteDialog:h,menu:f}=vi(e),v=(0,C.jsx)(si,{title:o,type:c,images:s,isCircular:!0,color:y,uri:l,isPlaying:x,isActive:b,spec:i,togglePlay:m});return(0,C.jsx)(pi,{RowVariantComponent:r,uri:l,cover:v,name:o,type:c,alt:o,dragLabel:o,menu:f,togglePlay:m,triggerPlay:g,openDeleteDialog:h,addedAt:d,lastPlayedAt:u,isPlaying:x,isActive:b,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Pi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,openDeleteDialog:y,isPlaying:m,isActive:g}=vi(e),x=(0,C.jsx)(oi,{title:l,type:s,images:n,uri:a,togglePlay:d,isCircular:!0,color:c,spec:r,isActive:g,isPlaying:m});return(0,C.jsx)(qr,{uri:a,name:l,menu:p,dragLabel:l,cover:x,type:s,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,openDeleteDialog:y,isPlaying:m,isActive:g,spec:r,index:i})};var Si=r(99280),wi=r(59161),Ti=r(88426);function Ii(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(E.g),n=(0,Ti.T)(),l=(0,s.wA)(),o=!!e.consumptionCapExplanation,c=(0,d.NC)(wi.HJU),{togglePlay:u,triggerPlay:p}=(0,gi.P)({uri:t},{featureIdentifier:"audiobook",referrerIdentifier:"your_library"}),y=(0,i.useCallback)((()=>{e.consumptionCapExplanation&&l((0,wt._3)())}),[l,e.consumptionCapExplanation]),m=(0,i.useCallback)((async()=>{n.getAccessInfo(e.uri).then((e=>{e?.isConsumptionCapped&&l((0,wt._3)())}))}),[e.uri,n,l]);let g,x;c&&(o?(g=y,x=y):e.isCappedWithoutExplanation?(x=m,g=m):e.isPlayable&&(g=p,x=u));const{isPlaying:b,isActive:h}=(0,fr.l_)(t);return{isPlaying:b,isActive:h,openDeleteDialog:(0,i.useCallback)((()=>{l((0,wt.aw)(t))}),[l,t]),menu:(0,C.jsx)(Si.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(jt.M,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,C.jsx)(It.M,{uri:t,size:"xsmall",className:pr.A.icon,as:"span"}),togglePlay:x,triggerPlay:g}}const ji=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,pinned:d,addedAt:u,lastPlayedAt:p,color:y}=e,{isPlaying:m,isActive:g,openDeleteDialog:x,menu:b,subtitleText:h,downloadButton:f,togglePlay:v,triggerPlay:P}=Ii(e),S=(0,C.jsx)(si,{title:o,type:c,images:s,color:y,uri:l,isPlaying:m,isActive:g,spec:i,togglePlay:v}),w=e.isLocked?(0,C.jsx)(mi,{}):void 0;return(0,C.jsx)(pi,{RowVariantComponent:r,uri:l,cover:S,name:o,subtitle:h,alt:o,dragLabel:o,menu:b,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPlaying:m,isActive:g,isPinned:d,shouldShowType:t,type:c,spec:i,nrValidItems:a,lockedIcon:w,index:n,downloadButton:f,togglePlay:v,triggerPlay:P})},Ai=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p,isPlaying:y,isActive:m,downloadButton:g,togglePlay:x,triggerPlay:b}=Ii(e),h=(0,C.jsx)(oi,{title:l,type:s,images:n,uri:a,color:c,spec:r,isActive:m,isPlaying:y,togglePlay:x});return(0,C.jsx)(qr,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:h,isPinned:o,shouldShowType:t,type:s,openDeleteDialog:p,isPlaying:y,isActive:m,spec:r,index:i,downloadButton:g,triggerPlay:b,togglePlay:x})};var Ri=r(56420);function Di(e){const{uri:t}=e,r=(0,s.wA)();return{openDeleteDialog:(0,i.useCallback)((()=>{r((0,wt.aw)(t))}),[r,t]),menu:(0,C.jsx)(Ri.L,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Oi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:y}=e,{openDeleteDialog:m,menu:g}=Di(e),x=(0,C.jsx)(si,{title:o,type:c,images:s,isCircular:!0,color:y,uri:l,isPlaying:!1,isActive:!1,spec:i});return(0,C.jsx)(pi,{RowVariantComponent:r,uri:l,cover:x,name:o,type:c,alt:o,dragLabel:o,menu:g,openDeleteDialog:m,addedAt:d,lastPlayedAt:u,isPlaying:!1,isActive:!1,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Ei=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{menu:d,openDeleteDialog:u}=Di(e),p=(0,C.jsx)(oi,{title:l,type:s,images:n,uri:a,isCircular:!0,color:c,spec:r,isPlaying:!1,isActive:!1});return(0,C.jsx)(qr,{uri:a,name:l,menu:d,dragLabel:l,cover:p,type:s,isPinned:o,shouldShowType:t,openDeleteDialog:u,isPlaying:!1,isActive:!1,spec:r,index:i})};var Li=r(24452);function Ni(e,t){const{uri:r,cityName:a,locationName:n}=e,{filter:l}=(0,i.useContext)(E.g),s=(0,C.jsx)(Li.u,{uri:r,canPin:e.canPin,isPinned:e.pinned}),o=e.startTime?(0,C.jsxs)("div",{className:pr.A.eventDateOverlay,children:[(0,C.jsx)(Q.E,{variant:t?"bodySmall":"marginal",children:b.Ru.formatDate(new Date(e.startTime),{month:"short"})}),(0,C.jsx)(Q.E,{variant:t?"titleSmall":"bodyMediumBold",children:b.Ru.formatDate(new Date(e.startTime),{day:"numeric"})}),t&&(0,C.jsx)(Q.E,{variant:"bodySmall",children:b.Ru.formatDate(new Date(e.startTime),{year:"numeric"})})]}):null,c=b.Ru.get("web-player.your-library-x.event-item.subtitle",{locationName:n,cityName:a});return{menu:s,subtitleText:(0,C.jsx)(jt.M,{searchWords:[l.trim()],textToHighlight:c}),imageOverlay:o}}const ki=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:y}=e,{menu:m,subtitleText:g,imageOverlay:x}=Ni(e,!1),b=(0,C.jsx)(si,{title:o,type:d,images:s,color:y,uri:l,isPlaying:!1,isActive:!1,spec:i,overlayElement:x});return(0,C.jsx)(pi,{RowVariantComponent:r,uri:l,cover:b,name:o,subtitle:g,alt:o,type:d,dragLabel:o,menu:m,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Fi=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,imageOverlay:p}=Ni(e,!0),y=(0,C.jsx)(oi,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1,overlayElement:p});return(0,C.jsx)(qr,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:y,type:o,isPinned:s,shouldShowType:t,isPlaying:!1,isActive:!1,spec:r,index:i})};var Bi=r(4644),Ui=r(93315),Mi=r(155),_i=r(36371);const Vi=({uri:e,divider:t,onDeleteCallback:r})=>{const a=(0,s.wA)(),n=(0,i.useCallback)((()=>{a((0,wt.OB)(e,r))}),[a,r,e]);return(0,C.jsx)(h.D,{role:"menuitem",divider:t,onClick:n,leadingIcon:(0,C.jsx)(Ui.P,{semanticColor:"textSubdued",size:"small"}),shortcut:(0,Mi.e)(_i._.DELETE),children:b.Ru.get("contextmenu.delete")})},Hi=i.memo((function(e){return(0,C.jsx)(Vi,{...e})}));var zi=r(45525),Yi=r(43258),Ki=r(77424);const Gi=({uri:e,spec:t})=>{const{togglePlay:r,isPlaying:a,isActive:n}=(0,gi.P)({uri:e},{featureIdentifier:"folder"}),l=(0,v.s)(),s=(0,i.useCallback)((()=>{r(),t&&l&&(a?l.logInteraction(t.playButtonFactory({uri:e}).hitPause({itemToBePaused:e})):n?l.logInteraction(t.playButtonFactory({uri:e}).hitResume({itemToBeResumed:e})):l.logInteraction(t.playButtonFactory({uri:e}).hitPlay({itemToBePlayed:e})))}),[n,a,l,t,r,e]);return(0,C.jsx)(h.D,{role:"menuitem",onClick:s,leadingIcon:a?(0,C.jsx)(Yi._,{semanticColor:"textSubdued",size:"small"}):(0,C.jsx)(Ki.A,{semanticColor:"textSubdued",size:"small"}),children:a?b.Ru.get("pause"):b.Ru.get("play")})},Wi=i.memo((function(e){return(0,C.jsx)(Gi,{...e})}));var Xi=r(99974);const Zi=({uri:e,name:t,divider:r,spec:a,handleRename:n})=>{const l=(0,v.s)(),o=(0,s.wA)(),c=(0,i.useCallback)((()=>{a&&l.logInteraction(a.editButtonFactory({uri:e}).hitUiReveal()),o((0,wt.O2)(t,n))}),[o,l,t,n,a,e]);return(0,C.jsx)(h.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,C.jsx)(Xi.G,{semanticColor:"textSubdued",size:"small"}),children:b.Ru.get("contextmenu.rename")})},qi=i.memo((function(e){return(0,C.jsx)(Zi,{...e})}));var Qi=r(62643);const Ji=i.memo((function({reference:e,name:t="",onRename:r,onCreateCallback:i=()=>{},onDeleteCallback:a,canPin:n=w.oT.NO,isPinned:l=!1,isPlayable:s=!0}){const{spec:o}=(0,T.o)(e.uri),c=s;return(0,C.jsxs)(m.W,{children:[(0,C.jsx)(qi,{spec:o,uri:e.uri,name:t,handleRename:r}),(0,C.jsx)(Hi,{uri:e.uri,divider:"after",onDeleteCallback:a}),(n!==w.oT.NO||l)&&(0,C.jsx)(zi.k,{uri:e.uri,canPin:n,isPinned:l,type:Lt.c.FOLDER,spec:o}),(0,C.jsx)(S,{position:{after:e},onCreateCallback:i,spec:o}),(0,C.jsx)(g.j,{position:{after:e},onCreateCallback:i,spec:o}),(0,C.jsx)(Qi.y,{uriToBeAdded:e.uri,isInLibrary:!0,spec:o}),c&&(0,C.jsx)(Wi,{uri:e.uri,spec:o})]})}));function $i(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,f.A)(),n=(0,v.s)(),l=(0,Fr.g)(),s=Br(),o=(0,i.useCallback)((r=>{if(!t)return;const{[ot.fl.PLAYLISTS_V2]:i=[],[ot.fl.FOLDERS]:a=[]}=r,o={after:{uri:t}};i.length&&(s(i,o),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},o),n.logInteraction(e.dragSort()))}),[s,n,l,e,t]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=Nr({onApplyDrop:o});return{unpinConfirmationDialog:c,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[ot.fl.TRACKS]:l=[],[ot.fl.LOCAL_TRACKS]:s=[],[ot.fl.ALBUMS]:o=[],[ot.fl.EPISODES]:c=[],[ot.fl.PLAYLISTS_V2]:u=[],[ot.fl.FOLDERS]:p=[]}=i,y={after:{uri:t}};u.length||p.length?d(i,j.Nz.ON):o.length?(r(o[0],y),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||s.length||c.length)&&(a([...l,...s,...c],y),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,d,r,n,e,a])}}var ea=r(62026),ta=r(92404),ra=r(95892),ia=r(38706),aa=r(55814),na=r(34731),la=r(58856);const sa=({uri:e})=>{const[t,r]=(0,i.useState)(!1),a=(0,ea.x)(),n=(0,i.useCallback)((()=>{r(!0),setTimeout((()=>{r(!1)}),500)}),[]);return(0,ra.l)(ta.UV.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&t.data.uris[0]&&e===a.getDefaultCurationContextUri(t.data.uris[0])&&n()})),(0,aa.e)(ia.Lj.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===t.data.uri&&n()})),(0,na.b)(la.tD.OPERATION_COMPLETE,(t=>{"remove"!==t.data.operation&&"end"!==t.data.position?.after&&t.data.position.after?.uri===e&&(0,ht.fpb)(e)&&n()})),{animateState:t,animateClassName:pr.A.pulse}};var oa=r(12912),ca=r(34169),da=r(56859);function ua(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:o}=e,{isPlaying:c,isActive:d}=(0,fr.l_)(r),{pushFolder:u}=(0,i.useContext)(vt),p=(0,s.wA)(),{togglePlay:y,triggerPlay:m}=(0,gi.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),{isDesktop:g}=(0,oa.V)(),x=g&&!e.isEmpty,{handleDropOnFolder:h,unpinConfirmationDialog:f}=$i(t,r),{renameFolder:v}=(0,ca.Z)(),P=h,S=[l>0||!n?b.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?b.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(da.P).join(b.Ru.getSeparator()),w=(0,i.useCallback)(((t="")=>{v(e,t)}),[e,v]),T=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,wt.OB)(r))}),[p,r]),togglePlay:x?y:void 0,triggerPlay:x?m:void 0,menu:(0,C.jsx)(Ji,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:o,onRename:w,isPlayable:!e.isEmpty}),subtitleText:S,onDropTargetDropOn:P,handleNavigate:T,dropOnFolderUnpinConfirmationDialog:f,isPlaying:c,isActive:d}}const pa=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:a,index:l})=>{const{uri:s,folderDepth:o,name:c,type:d,isFlattened:u,pinned:p,canReorder:y}=e,{openDeleteDialog:m,togglePlay:g,triggerPlay:x,menu:h,subtitleText:f,onDropTargetDropOn:P,handleNavigate:S,dropOnFolderUnpinConfirmationDialog:w,isPlaying:T,isActive:I}=ua(e,r),[j,A]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(He);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(s),R=(0,v.s)(),D=(0,i.useCallback)((()=>{A(!0),R.logInteraction(r.yourLibraryItemFactory().dragUiReveal())}),[R,A,r]),O=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),E=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),A(!j),j?R.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):R.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[A,j,R,r]),L=!u&&(0,C.jsx)(ce.H,{"aria-label":j?b.Ru.get("web-player.your-library-x.collapse-folder"):b.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:Bi.y,size:"small",condensedAll:!0,onClick:E,onDoubleClick:O,tabIndex:-1,className:n()(Yt,Kt,{[rr]:!j})}),{animateState:N,animateClassName:k}=sa({uri:s}),F=(0,C.jsx)(si,{title:c,type:d,animateState:N,animateClassName:k,uri:s,isPlaying:T,isActive:I,spec:r,togglePlay:g});return(0,C.jsxs)(C.Fragment,{children:[w,(0,C.jsx)(pi,{RowVariantComponent:t,uri:s,to:`/folder/${(0,ht.o_h)(s)?.id??""}`,handleNavigate:S,folderDepth:o,cover:F,name:c,subtitle:f,alt:c,dragLabel:c,menu:h,canReorder:y,allowedDropTargetDropOnMimeTypes:ut,onDropTargetDropOn:P,onLongDragOver:D,togglePlay:g,triggerPlay:x,openDeleteDialog:m,addedAt:e.addedAt,lastPlayedAt:e.lastPlayedAt,isPinned:p,shouldShowType:!1,type:d,isPlaying:T,isActive:I,expandFolderButton:L,spec:r,nrValidItems:a,index:l})]})},ya=({libraryItem:e,spec:t,index:r})=>{const{uri:i,name:a,type:n,pinned:l,canReorder:s}=e,{togglePlay:o,triggerPlay:c,menu:d,subtitleText:u,onDropTargetDropOn:p,handleNavigate:y,openDeleteDialog:m,isPlaying:g,isActive:x}=ua(e,t),{animateState:b,animateClassName:h}=sa({uri:i}),f=(0,C.jsx)(oi,{title:a,type:n,uri:i,togglePlay:o,spec:t,isActive:x,isPlaying:g});return(0,C.jsx)(qr,{uri:i,to:`/folder/${(0,ht.o_h)(i)?.id??""}`,handleNavigate:y,cover:f,name:a,subtitle:u,menu:d,dragLabel:a,canReorder:s,allowedDropTargetDropOnMimeTypes:ut,onLongDragOver:y,onDropTargetDropOn:p,togglePlay:o,triggerPlay:c,isPinned:l,shouldShowType:!1,type:n,openDeleteDialog:m,isPlaying:g,isActive:x,spec:t,index:r,animateState:b,animateClassName:h})};var ma=r(31383);const ga=i.memo((function({uri:e,canPin:t,isPinned:r,downloadUri:i}){const{spec:a}=(0,T.o)(e);return(0,C.jsxs)(m.W,{children:[i?(0,C.jsx)(ma.dw,{spec:a,uri:i}):null,t!==w.oT.NO&&(0,C.jsx)(zi.k,{uri:e,canPin:t,isPinned:r,type:Lt.c.PLAYLIST,spec:a})]})}));var xa=r(83953);const ba=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS];function ha(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,s.d4)(xa.Ht),n=(0,ht.fHB)(a?.id).toURI(),l=n,o=n,{togglePlay:c,triggerPlay:d}=(0,gi.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),u=(0,Qe.f)(),{isPlaying:p,isActive:y}=(0,fr.l_)(l),m=(0,i.useCallback)((e=>{const{[ot.fl.TRACKS]:t=[],[ot.fl.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];i?.length&&u?.add({uris:i})}),[u]);return{isPlaying:p,isActive:y,togglePlay:c,triggerPlay:d,menu:(0,C.jsx)(ga,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:o}),downloadButton:(0,C.jsx)(It.M,{uri:o,size:"xsmall",className:pr.A.icon,as:"span"}),subtitleText:(0,C.jsx)(C.Fragment,{children:b.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:m,playbackUri:l,uri:r,...sa({uri:r})}}const fa=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{images:l,name:s,type:o,pinned:c,addedAt:d,lastPlayedAt:u,color:p}=e,{isPlaying:y,isActive:m,togglePlay:g,triggerPlay:x,menu:b,subtitleText:h,onDropTargetDropOn:f,playbackUri:v,uri:P,downloadButton:S,animateState:w,animateClassName:T}=ha(e),I=(0,C.jsx)(si,{title:s,type:o,images:l,color:p,animateState:w,animateClassName:T,uri:P,isPlaying:y,isActive:m,spec:i,togglePlay:g});return(0,C.jsx)(pi,{RowVariantComponent:r,uri:P,cover:I,name:s,subtitle:h,alt:s,dragLabel:s,menu:b,allowedDropTargetDropOnMimeTypes:ba,onDropTargetDropOn:f,togglePlay:g,triggerPlay:x,addedAt:d,lastPlayedAt:u,isPlaying:y,isActive:m,isPinned:c,shouldShowType:t,type:o,playbackUri:v,downloadButton:S,spec:i,nrValidItems:a,index:n})},va=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{images:a,name:n,type:l,pinned:s,color:o}=e,{togglePlay:c,triggerPlay:d,menu:u,subtitleText:p,onDropTargetDropOn:y,playbackUri:m,uri:g,downloadButton:x,isPlaying:b,isActive:h,animateState:f,animateClassName:v}=ha(e),P=(0,C.jsx)(oi,{title:n,type:l,images:a,uri:m,togglePlay:c,color:o,spec:r,isActive:h,isPlaying:b});return(0,C.jsx)(qr,{uri:g,name:n,subtitle:p,menu:u,dragLabel:n,allowedDropTargetDropOnMimeTypes:ba,onDropTargetDropOn:y,cover:P,togglePlay:c,triggerPlay:d,isPinned:s,shouldShowType:t,type:l,playbackUri:m,downloadButton:x,isPlaying:b,isActive:h,spec:r,index:i,animateState:f,animateClassName:v})};var Ca=r(36057),Pa=r(75398),Sa=r(95509),wa=r(92410);function Ta(e){const{numberOfFiles:t}=e,r=wa.bV,i=(0,Sa.Iu)().uri,{isPlaying:a,isActive:n}=(0,fr.l_)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,C.jsx)(ga,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,C.jsx)(Ca.F,{size:"xsmall",className:pr.A.icon,semanticColor:"textBrightAccent"}),subtitleText:b.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Ia=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{name:l,addedAt:s,lastPlayedAt:o,type:c,pinned:d}=e,{playbackUri:u,uri:p,isPlaying:y,menu:m,subtitleText:g,downloadButton:x,isActive:b}=Ta(e),h=(0,C.jsx)("div",{className:Gt,children:(0,C.jsx)(Pa.e,{iconSize:24,title:l})});return(0,C.jsx)(pi,{RowVariantComponent:r,uri:p,name:l,subtitle:g,alt:l,dragLabel:l,menu:m,addedAt:s,lastPlayedAt:o,isPinned:d,isPlaying:y,isActive:b,shouldShowType:t,playbackUri:u,downloadButton:x,cover:h,type:c,spec:i,nrValidItems:a,index:n})},ja=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{name:a,images:n,type:l,pinned:s}=e,{playbackUri:o,uri:c,menu:d,downloadButton:u,subtitleText:p,isPlaying:y,isActive:m}=Ta(e),g=(0,C.jsx)("div",{className:Zr.cardImageContainer,children:(0,C.jsx)(Qr.M,{images:n,FallbackComponent:e=>(0,C.jsx)(Pa.e,{size:"xxlarge",className:Zr.placeholderIcon,...e})})});return(0,C.jsx)(qr,{uri:c,name:a,subtitle:p,menu:d,cover:g,type:l,playbackUri:o,downloadButton:u,isPinned:s,shouldShowType:t,isPlaying:y,isActive:m,spec:r,index:i})};var Aa=r(81458),Ra=r(22865);const Da=({index:e,type:t})=>{const r=Xr();return(0,C.jsx)(Ra.T,{columnIndex:0,children:(0,C.jsx)(At.Z,{className:n()(Zr.card,{[Zr.compactCard]:r}),media:(0,C.jsx)(Qr.M,{images:[],FallbackComponent:()=>(0,C.jsx)(ai.s,{type:t,size:"xxlarge",className:Zr.placeholderIcon,semanticColor:"textSubdued"}),isCircular:t===Lt.c.ARTIST}),variant:"naked",id:e,title:"",padding:r?Aa.vw:Aa.CJ})})};var Oa=r(55319),Ea=r(52537),La=r(31726),Na=r(29277),ka=r(81521),Fa=r(5221),Ba=r(53721),Ua=r(85241),Ma=r(58093),_a=r(89261),Va=r(88789),Ha=r(23885),za=r(10326),Ya=r(20627),Ka=r(94902),Ga=r(88350),Wa=r(95332),Xa=r(51393),Za=r(18051);const qa=i.memo((function({reference:e,isPublished:t,canPin:r=w.oT.NO,isPinned:i=!1,useDialogForUnfollow:a=!1,isInLibrary:n}){const{uri:l}=e,s=(0,Xa.J)(l),o=!!s?.permissions?.isPrivate,c=(0,Za.v)(l)??s?.isPublished??t,{spec:d}=(0,T.o)(l),u=s?.hasSpotifyAudiobooks,p=(0,Ga.D)(s);return s&&(0,C.jsxs)(m.W,{children:[!u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(La.K,{spec:d,uris:[l]}),(0,C.jsx)(Wa._,{uri:l,spec:d})]}),!o&&(0,C.jsx)(Ha._,{spec:d,divider:s.isOwnedBySelf?"after":"both",uri:l,isPublished:c}),s.isOwnedBySelf&&(0,C.jsx)(Fa.T,{spec:d,uri:l,name:s.name,description:s.description,image:s.images[0]}),!s.isOwnedBySelf&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(za.P,{spec:d,uri:l}),(0,C.jsx)(Ea.ET,{uri:l,useDialog:a,initialState:n})]}),s.isOwnedBySelf&&(0,C.jsx)(ka.u,{spec:d,uri:l}),!u&&!p&&(0,C.jsx)(ma.dw,{spec:d,uri:l}),(0,C.jsx)(S,{position:{after:e},divider:"before",spec:d}),(0,C.jsx)(g.j,{position:{after:e},spec:d}),s.permissions?.canAdministratePermissions&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Va.U,{spec:d,divider:"before",uri:l,isPrivate:o}),!u&&(0,C.jsx)(Ua.n,{uri:l,spec:d})]}),s.permissions?.canCancelMembership&&(0,C.jsx)(Ma._,{spec:d,divider:"before",uri:l}),(0,C.jsx)(Ba.w,{spec:d,uri:l}),(0,C.jsx)(Qi.y,{uriToBeAdded:l,isInLibrary:!0,spec:d}),!u&&(0,C.jsx)(Ya.o,{spec:d,uris:[l],isPlaylist:!0}),(r!==w.oT.NO||i)&&(0,C.jsx)(zi.k,{uri:l,canPin:r,isPinned:i,type:Lt.c.PLAYLIST,spec:d}),(s.isOwnedBySelf||!o)&&(0,C.jsxs)(Ka.h,{divider:"before",children:[(0,C.jsx)(Na.m,{spec:d,uri:l,displayText:b.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:o}),(0,C.jsx)(_a.x,{spec:d,uri:l,type:Lt.c.PLAYLIST})]})]})})),Qa=i.memo((function({reference:e,canPin:t=w.oT.NO,isPinned:r=!1}){const{uri:i}=e,{spec:a}=(0,T.o)(i);return(0,C.jsxs)(m.W,{children:[(0,C.jsx)(S,{position:{after:e},divider:"before",spec:a}),(0,C.jsx)(g.j,{position:{after:e},spec:a}),t!==w.oT.NO&&(0,C.jsx)(zi.k,{uri:i,canPin:t,isPinned:r,type:Lt.c.PLAYLIST,spec:a})]})}));var Ja=r(92154),$a=r(67358);function en(e,t){const{uri:r,isLoading:a,owner:n,pinned:l,canView:o,isOwnedBySelf:c}=e,d=(0,$a.m)(),{filter:u}=(0,i.useContext)(E.g),p=[ot.fl.TRACKS,ot.fl.LOCAL_TRACKS,ot.fl.ALBUMS,ot.fl.EPISODES],y=[ot.fl.AUDIOBOOKS];(0,i.useEffect)((()=>{a&&d.resync(r)}),[d,r,a]);const g=(0,Ja.y)({uri:r,isOwnedBySelf:c}),{togglePlay:x,triggerPlay:h}=(0,gi.P)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:f,isActive:P}=(0,fr.l_)(r),S=(0,s.wA)(),w=(0,v.s)();let T,I=[];const j=(0,i.useCallback)((async e=>{const{[ot.fl.TRACKS]:i=[],[ot.fl.LOCAL_TRACKS]:a=[],[ot.fl.ALBUMS]:n=[],[ot.fl.EPISODES]:l=[],[ot.fl.AUDIOBOOKS]:s=[]}=e,o=[...i,...a,...n,...l,...s];S((0,Oa.io)(r,o)),w.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:o.at(0)??"",playlist:r}))}),[S,w,t,r]);e.canAddTo&&(I=e.isEmpty?[...y,...p]:e.isBooklist?y:p,T=j);const A=(0,i.useCallback)((()=>{S((0,wt.O)(r))}),[S,r]),R=(0,St.c0)(r),D=a&&!e.name;let O;O=R?(0,C.jsx)(Qa,{reference:e,canPin:e.canPin,isPinned:l}):D?(0,C.jsx)(m.W,{children:(0,C.jsx)(Ea.ET,{uri:r,initialState:!0})}):(0,C.jsx)(qa,{reference:e,canPin:e.canPin,isPinned:l,useDialogForUnfollow:!0,isInLibrary:!0});const L=(0,C.jsx)(It.M,{uri:r,size:"xsmall",className:pr.A.icon,as:"span"}),N=(0,St.c0)(r)?b.Ru.get("ylx.clicktoplay"):o?(n.uri,(0,C.jsx)(jt.M,{searchWords:[u.trim()],textToHighlight:n.name})):b.Ru.get("web-player.your-library-x.playlist-unavailable"),k=!!(0,St.c0)(r)||!e.isBooklist&&!e.isEmpty;return{openDeleteDialog:A,togglePlay:k?x:void 0,triggerPlay:k?h:void 0,isPlaying:f,isActive:P,menu:O,downloadButton:L,subtitleText:N,allowedDropTargetDropOnMimeTypes:I,onDropTargetDropOn:T,isTunaApplied:g,...sa({uri:r})}}const tn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,folderDepth:o,name:c,type:d,pinned:u,addedAt:p,lastPlayedAt:y,color:m,canReorder:g,namePrefix:x}=e,{openDeleteDialog:b,togglePlay:h,triggerPlay:f,isPlaying:v,isActive:P,menu:S,downloadButton:w,subtitleText:T,allowedDropTargetDropOnMimeTypes:I,onDropTargetDropOn:j,animateState:A,animateClassName:R,isTunaApplied:D}=en(e,i),O=(0,C.jsx)(si,{title:c,type:d,images:s,color:m,animateState:A,animateClassName:R,uri:l,isPlaying:v,isActive:P,togglePlay:h,spec:i});return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(pi,{RowVariantComponent:r,uri:l,folderDepth:o,cover:O,name:c,namePrefix:x,subtitle:T,alt:c,dragLabel:c,menu:S,canReorder:g,allowedDropTargetDropOnMimeTypes:I,onDropTargetDropOn:j,togglePlay:h,triggerPlay:f,openDeleteDialog:b,addedAt:p,lastPlayedAt:y,isPlaying:v,isActive:P,isPinned:u,shouldShowType:t,type:d,downloadButton:w,spec:i,playInsteadOfNavigating:(0,St.c0)(l),nrValidItems:a,index:n,isTunaApplied:D})})},rn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c,canReorder:d,namePrefix:u}=e,{togglePlay:p,triggerPlay:y,menu:m,downloadButton:g,subtitleText:x,onDropTargetDropOn:b,allowedDropTargetDropOnMimeTypes:h,openDeleteDialog:f,isPlaying:v,isActive:P,animateState:S,animateClassName:w,isTunaApplied:T}=en(e,r),I=(0,C.jsx)(oi,{title:l,type:s,images:n,uri:a,togglePlay:p,color:c,spec:r,isActive:P,isPlaying:v});return(0,C.jsx)(qr,{uri:a,name:l,namePrefix:u,subtitle:x,menu:m,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:h,onDropTargetDropOn:b,cover:I,togglePlay:p,triggerPlay:y,isPinned:o,shouldShowType:t,type:s,downloadButton:g,openDeleteDialog:f,isPlaying:v,isActive:P,spec:r,playInsteadOfNavigating:(0,St.c0)(a),index:i,animateState:S,animateClassName:w,isTunaApplied:T})};var an=r(13109),nn=r(50392),ln=r(53021),sn=r(93083);const on=i.memo((function({uri:e,canPin:t=w.oT.NO,isPinned:r=!1,canRemove:i=!1}){const{spec:a}=(0,T.o)(e);return(0,C.jsxs)(m.W,{children:[i&&(0,C.jsx)(sn.p,{uri:e,removeLabel:b.Ru.get("contextmenu.remove-from-library")}),t!==w.oT.NO&&(0,C.jsx)(zi.k,{uri:e,canPin:t,isPinned:r,type:Lt.c.PRE_RELEASE_BOOK,spec:a}),(0,C.jsx)(Na.m,{uri:e,spec:a,displayText:b.Ru.get("context-menu.copy-book-link")}),(0,C.jsx)(ln.q,{spec:a,divider:"before",uri:e})]})}));function cn(e){const{uri:t,canPin:r,pinned:a,type:n}=e,{filter:l}=(0,i.useContext)(E.g),o=(0,s.wA)(),c=(0,i.useCallback)((()=>{o((0,wt.aw)(t,!0))}),[o,t]);let d,u="";if(n===Lt.c.PRE_RELEASE_ALBUM){const i=e.artists?.at(0);u=i?.name??"",d=(0,C.jsx)(nn.P,{uri:t,artistUri:i?.uri,canPin:r,isPinned:a,canRemove:!0})}else u=e.authorName,d=(0,C.jsx)(on,{uri:t,canPin:r,isPinned:a,canRemove:!0});return{openDeleteDialog:c,menu:d,subtitleText:(0,C.jsx)(jt.M,{searchWords:[l.trim()],textToHighlight:u})}}const dn=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:y}=e,{openDeleteDialog:m,menu:g,subtitleText:x}=cn(e),b=(0,C.jsx)(si,{title:o,type:d,images:s,color:y,uri:l,isPlaying:!1,isActive:!1,spec:i,togglePlay:void 0});return(0,C.jsx)(pi,{RowVariantComponent:r,uri:l,cover:b,name:o,subtitle:x,alt:o,type:d,dragLabel:o,menu:g,openDeleteDialog:m,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n,preReleaseIcon:(0,C.jsx)(an.t,{size:"xsmall",className:pr.A.icon})})},un=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p}=cn(e),y=(0,C.jsx)(oi,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,C.jsx)(qr,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:y,type:o,isPinned:s,shouldShowType:t,openDeleteDialog:p,isPlaying:!1,isActive:!1,spec:r,index:i,preReleaseIcon:(0,C.jsx)(an.t,{size:"xsmall",className:pr.A.icon})})};var pn=r(57399);function yn(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(E.g),n=(0,s.wA)(),{togglePlay:l,triggerPlay:o}=(0,gi.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:c,isActive:d}=(0,fr.l_)(t);return{isPlaying:c,isActive:d,openDeleteDialog:(0,i.useCallback)((()=>{n((0,wt.aw)(t))}),[n,t]),togglePlay:l,triggerPlay:o,menu:(0,C.jsx)(pn.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,C.jsx)(It.M,{uri:t,size:"xsmall",className:pr.A.icon,as:"span"}),subtitleText:(0,C.jsx)(jt.M,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const mn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:y}=e,{isPlaying:m,isActive:g,openDeleteDialog:x,togglePlay:b,triggerPlay:h,menu:f,downloadButton:v,subtitleText:P}=yn(e),S=(0,C.jsx)(si,{title:o,type:c,images:s,color:y,uri:l,isPlaying:m,isActive:g,spec:i,togglePlay:b});return(0,C.jsx)(pi,{RowVariantComponent:r,uri:l,cover:S,name:o,subtitle:P,alt:o,dragLabel:o,menu:f,togglePlay:b,triggerPlay:h,openDeleteDialog:x,addedAt:d,lastPlayedAt:u,isPlaying:m,isActive:g,isPinned:p,shouldShowType:t,type:c,downloadButton:v,spec:i,nrValidItems:a,index:n})},gn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,downloadButton:y,subtitleText:m,openDeleteDialog:g,isPlaying:x,isActive:b}=yn(e),h=(0,C.jsx)(oi,{title:l,type:s,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:b,isPlaying:x});return(0,C.jsx)(qr,{uri:a,name:l,subtitle:m,menu:p,dragLabel:l,cover:h,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,type:s,downloadButton:y,openDeleteDialog:g,isPlaying:x,isActive:b,spec:r,index:i})},xn=[ot.fl.EPISODES];function bn(e){const{numberOfDownloadedEpisodes:t,uri:r}=e,a=r,n=w.Xn,{togglePlay:l,triggerPlay:s}=(0,gi.P)({uri:a},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:o,isActive:c}=(0,fr.l_)(a),d=(0,Qe.f)(),u=(0,i.useCallback)((e=>{const{[ot.fl.EPISODES]:t=[]}=e;t?.length&&d?.add({uris:t})}),[d]);return{isPlaying:o,isActive:c,togglePlay:l,triggerPlay:s,menu:(0,C.jsx)(ga,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,C.jsx)(Ca.F,{size:"xsmall",className:pr.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:b.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:u,playbackUri:a,uri:n,...sa({uri:n})}}const hn=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:i,index:a})=>{const{images:n,name:l,type:s,pinned:o,lastPlayedAt:c,addedAt:d,color:u}=e,{isPlaying:p,isActive:y,togglePlay:m,triggerPlay:g,menu:x,downloadButton:b,subtitleText:h,onDropTargetDropOn:f,playbackUri:v,uri:P,animateState:S,animateClassName:w}=bn(e),T=(0,C.jsx)(si,{title:l,type:s,images:n,color:u,animateState:S,animateClassName:w,uri:P,isPlaying:p,isActive:y,spec:r,togglePlay:m});return(0,C.jsx)(pi,{RowVariantComponent:t,uri:P,cover:T,name:l,subtitle:h,alt:l,dragLabel:l,menu:x,allowedDropTargetDropOnMimeTypes:xn,onDropTargetDropOn:f,togglePlay:m,triggerPlay:g,addedAt:d,lastPlayedAt:c,isPlaying:p,isActive:y,isPinned:o,shouldShowType:!1,type:s,downloadButton:b,playbackUri:v,spec:r,nrValidItems:i,index:a})},fn=({libraryItem:e,spec:t,index:r})=>{const{images:i,name:a,type:n,pinned:l,color:s}=e,{togglePlay:o,triggerPlay:c,menu:d,downloadButton:u,subtitleText:p,onDropTargetDropOn:y,playbackUri:m,uri:g,isPlaying:x,isActive:b,animateState:h,animateClassName:f}=bn(e),v=(0,C.jsx)(oi,{title:a,type:n,images:i,uri:g,togglePlay:o,color:s,spec:t,isActive:b,isPlaying:x});return(0,C.jsx)(qr,{uri:g,name:a,subtitle:p,menu:d,dragLabel:a,allowedDropTargetDropOnMimeTypes:xn,onDropTargetDropOn:y,cover:v,togglePlay:o,triggerPlay:c,playbackUri:m,downloadButton:u,isPinned:l,shouldShowType:!1,type:n,isPlaying:x,isActive:b,spec:t,index:r,animateState:h,animateClassName:f})},vn=(e,t,r,a)=>{const n=(0,d.NC)(wi.Gry,{loadingValue:!1});(0,i.useEffect)((()=>{if(!n)return()=>{};const i=e.current,l=i?.parentNode?.querySelector(".os-scrollbar-vertical .os-scrollbar-handle"),s=a.current.rowHeight,o=a.current.numColumns??1;if(!l||!i||!s)return()=>{};const c=t(0,r-1,{cachedOnly:!0}),d=()=>{const e=Math.floor(o*(i.scrollTop-i.offsetTop)/s),t=c.at(e),r=t?.groupLabel;r&&!t.pinned?l.setAttribute("data-group-by",(e=>{const[t,r=""]=e.split(":");if("D"===t){const e=parseInt(r.substring(0,4),10),t=parseInt(r.substring(4,6),10),i=parseInt(r.substring(6,8),10),a=new Date(e,t-1,i);return b.Ru.formatDate(a,{month:"short",year:"numeric"})}return r})(r)):l.removeAttribute("data-group-by")};return d(),i.addEventListener("scroll",d),()=>{i.removeEventListener("scroll",d)}}))};var Cn=r(77399),Pn=r(66893),Sn=r(18199),wn=r(98707);const Tn=(0,r(87666).g)(Lt.c),In=(0,i.memo)((function({item:e,primaryFilter:t,spec:r,index:i}){const a={shouldShowType:!(0,St.c0)(e.uri)&&(Bt(e.type)!==t||Ft(e)),spec:r,index:i},n=(0,d.NC)(wi.lDH);switch(e.type){case Lt.c.FOLDER:return(0,C.jsx)(ya,{libraryItem:e,...a});case Lt.c.ALBUM:return(0,C.jsx)(hi,{libraryItem:e,...a});case Lt.c.ARTIST:return(0,C.jsx)(Pi,{libraryItem:e,...a});case Lt.c.AUDIOBOOK:return(0,C.jsx)(Ai,{libraryItem:e,...a});case Lt.c.AUTHOR:return(0,C.jsx)(Ei,{libraryItem:e,...a});case Lt.c.SHOW:return(0,C.jsx)(gn,{libraryItem:e,...a});case Lt.c.PLAYLIST:return(0,C.jsx)(rn,{libraryItem:e,...a});case Lt.c.LIKED_SONGS:return(0,C.jsx)(va,{libraryItem:e,...a});case Lt.c.YOUR_EPISODES:return(0,C.jsx)(fn,{libraryItem:e,...a});case Lt.c.LOCAL_FILES:return(0,C.jsx)(ja,{libraryItem:e,...a});case Lt.c.PRE_RELEASE_ALBUM:return n?(0,C.jsx)(un,{libraryItem:e,...a}):null;case Lt.c.PRE_RELEASE_BOOK:return(0,C.jsx)(un,{libraryItem:e,...a});case Lt.c.CONCERT:return(0,C.jsx)(Fi,{libraryItem:e,...a});default:(0,Nt.d)(e)}})),jn=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const{itemsView:l}=(0,Cn.t)(),s=l===Cn.X.GRID_COMPACT,o=(0,Sn.s1)((e=>e?Sn.yV.YLX_COMPACT:Sn.yV.YLX)(s)),c=(0,i.useRef)({});vn(t,e,a,c);const d=(0,i.useCallback)((e=>(0,C.jsx)(Da,{index:e,type:Tn(r)?r:void 0},e)),[r]),u=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>{const a=t+i;return e?(0,C.jsx)(In,{item:e,spec:n,primaryFilter:r,index:a},`${e.uri}-${a}`):d(`${a}`)}))),[e,r,d,n]),p=(0,i.useCallback)(((e,t)=>{c.current={numColumns:e,rowHeight:t}}),[]);return(0,C.jsx)(Pn.x,{config:o,children:(0,C.jsx)(Wr,{isCompact:s,children:(0,C.jsx)(Pt.R,{firstInteractiveIsWrapper:!0,"aria-label":b.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(a/(c.current.numColumns??1)),"aria-colcount":c.current.numColumns,children:(0,C.jsx)(wn.F,{renderItems:u,nrItems:a,estimatedItemMaxHeight:250,scrollNodeRef:t,onGridResize:p})})})})};var An=r(20746),Rn=r(33692),Dn=r(31673),On=r(98033);const En="bDHk5k9wfICYjDSC27zp",Ln="oaVwShR89gQxLH2tco5G",Nn="JBkqeL9U_4_hqstj_oa8",kn="bRRTUCB99PsPsPVYchRh",Fn="Gj4v3278oIywygaUyBbt",Bn="WHTLfjA4oq5AQak5E8CQ",Un="WJFlv_VJkA5oNs0XJMsQ",Mn=({isCollapsed:e,toggleCollapsedState:t,dropTargetClassName:r,folderUri:i,...a})=>(0,C.jsx)("div",{className:n()(En,e&&Bn,!e&&kn),...a,children:(0,C.jsxs)("button",{type:"button","aria-label":e?b.Ru.get("web-player.your-library-x.open-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:t,className:n()(Ln,r),children:[(0,C.jsx)("span",{className:Fn,children:e?(0,C.jsx)(An.M,{}):(0,C.jsx)(Rn.C,{size:"small"})}),e&&(0,C.jsx)("span",{className:Un,children:(0,C.jsx)(Dn.t,{})}),i||e?(0,C.jsx)(On.s,{children:(0,C.jsx)(Q.E,{as:"h1",children:b.Ru.get("web-player.your-library-x.your-library")})}):(0,C.jsx)(Q.E,{variant:"bodyMediumBold",semanticColor:"textBase",className:Nn,as:"h1",children:b.Ru.get("web-player.your-library-x.your-library")})]})});var _n=r(3669),Vn=r(90153);const Hn=e=>{switch(e){case pe.h.EXPANDED:return"expanded";case pe.h.COLLAPSED:return"collapsed";case pe.h.DEFAULT:case pe.h.FULLSCREEN:return"default";default:throw(0,Nt.k)(e)}},zn=()=>{const{leftSidebarState:e,setLeftSidebarState:t}=(0,se.ae)(),{isCollapsed:r,lastUncollapsedYLXSidebarMode:a,isFullscreen:n}=(0,pe.Q)(),l=(0,Vn.l)(),s=(0,v.s)();return{toggleCollapseYLX:(0,i.useCallback)((i=>{let o=e,c=Hn(a),d=Hn(a);r?(d=Hn(pe.h.COLLAPSED),o=a===pe.h.EXPANDED?se.ZS.EXPANDED:se.ZS.DEFAULT):n?(c=Hn(pe.h.DEFAULT),o=se.ZS.DEFAULT,l(_n.z.CLOSED)):(c=Hn(pe.h.COLLAPSED),o=se.ZS.COLLAPSED),i&&s.logInteraction(i.hitToggleState({stateBeforeToggle:d,stateAfterToggle:c})),t(o)}),[e,a,r,n,l,t,s])}},Yn=({folderUri:e,dropTargetClassName:t,spec:r})=>{const{isCollapsed:a}=(0,pe.Q)(),{toggleCollapseYLX:n}=zn(),l=(0,i.useCallback)((()=>{n(r)}),[r,n]);return(0,C.jsx)(ue.Zp,{label:a?b.Ru.get("web-player.your-library-x.open-your-library"):b.Ru.get("web-player.your-library-x.collapse-your-library"),placement:a?"right":void 0,children:(0,C.jsx)(Mn,{isCollapsed:a,toggleCollapsedState:l,dropTargetClassName:t,folderUri:e})})};var Kn=r(27936),Gn=r(94685);const Wn="main-yourLibraryX-header",Xn="QO1vC7wN5xiIjBOHGElf",Zn="BZh0f1vbOmruyp4_t9wy",qn="X4hWBYwbK0FnYvzkp6Z4",Qn="main-yourLibraryX-headerContent",Jn="iYP0xuQiJCgi7gx1jUPJ",$n="main-yourLibraryX-collapseButton",el="vfEPEr1LrAdUPPSbDeaP",tl="main-yourLibraryX-button",rl="af749NDLYTDK_8LinKWD",il="jqyvmzPqG7urWWv1OS2n",al="nGWhztVvLY1BInXjcWYa",nl="oZT8iKL42zhLAm_zE5F5",ll="MdDY8fQ_j94mQZy7ZVXf",sl="uNReR011bI8ML42Pgveg",ol="to0_0MpjAqlGQOLgLQqF",cl="FiNQIM_XU1XJGa8pmqix",dl=({dropTargetClassName:e,spec:t})=>{const{setLeftSidebarState:r}=(0,se.ae)(),{isExpanded:i}=(0,pe.Q)(),a=(0,v.s)();return(0,C.jsx)(ue.Zp,{label:i?b.Ru.get("web-player.your-library-x.show-less"):b.Ru.get("web-player.your-library-x.show-more"),children:(0,C.jsx)(ce.H,{className:n()(tl,al,e),iconOnly:i?Kn.G:Gn.h,"aria-label":i?b.Ru.get("web-player.your-library-x.reduce-your-library"):b.Ru.get("web-player.your-library-x.enlarge-your-library"),onClick:()=>{r(i?se.ZS.DEFAULT:se.ZS.EXPANDED),a.logInteraction(t.hitToggleState({stateBeforeToggle:i?"expanded":"default",stateAfterToggle:i?"default":"expanded"}))},size:"small"})})};var ul=r(27498);const pl=({handleNavigateBack:e,isCollapsed:t,isFullscreen:r,parentFolderUri:i,spec:a})=>{const{handleDropBeforeOrAfterRootlistItem:l}=Mr({dropTargetUri:i,spec:a}),{dropPosition:s,className:o,...c}=(0,qe.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:ct},onDrop:async e=>{l(e,j.Nz.BEFORE)},onLongDragOver:e});return(0,C.jsx)(ue.Zp,{label:b.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,C.jsx)(ce.H,{className:n()(tl,rl,o,{[$e]:s===j.Nz.ON,[ol]:!t&&!r}),"aria-label":b.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:e,iconOnly:ul.g,size:"small",...c})})};var yl=r(43289),ml=r(65720);const gl=({folderMenu:e,folderName:t,dropTargetClassName:r})=>(0,C.jsx)(ml.b,{menu:e,children:(0,C.jsx)("span",{className:il,children:(0,C.jsx)(ue.Zp,{label:b.Ru.get("more.label.context",t),children:(0,C.jsx)(ce.H,{className:n()(tl,al,r),iconOnly:yl.x,"aria-haspopup":"menu","aria-label":b.Ru.get("more.label.context",t),size:"small"})})})});var xl=r(83498),bl=r(96573),hl=r(30831),fl=r(78993);const vl=({dropTargetClassName:e,spec:t})=>{const r=(0,fl.S)(),i=(0,Vn.l)(),{setLeftSidebarState:a}=(0,se.ae)(),l=(0,v.s)();return(0,C.jsx)(ue.Zp,{label:r===_n.z.LIBRARY?b.Ru.get("web-player.your-library-x.minimize-your-library-fullscreen"):b.Ru.get("web-player.your-library-x.expand-your-library-fullscreen"),children:(0,C.jsx)(ce.H,{className:n()(tl,al,e),iconOnly:r===_n.z.LIBRARY?xl.b:bl.L,"aria-label":(0,hl.v)("fullscreen library"),onClick:()=>{r===_n.z.LIBRARY?(i(_n.z.CLOSED),a(se.ZS.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:"fullscreen",stateAfterToggle:"default"}))):(i(_n.z.LIBRARY),a(se.ZS.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:"default",stateAfterToggle:"fullscreen"})))},size:"small"})})};var Cl=r(70870),Pl=r(10686);const Sl=e=>{const{createPlaylistFromAlbum:t,createPlaylistFromTracks:r,createPlaylistFromPlaylist:a}=(0,f.A)();return(0,qe.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:[ot.fl.TRACKS,ot.fl.EPISODES,ot.fl.ALBUMS,ot.fl.PLAYLISTS_V2,ot.fl.AUDIOBOOKS]},onDrop:(0,i.useCallback)((i=>{const{[ot.fl.TRACKS]:n=[],[ot.fl.LOCAL_TRACKS]:l=[],[ot.fl.EPISODES]:s=[],[ot.fl.AUDIOBOOKS]:o=[],[ot.fl.ALBUMS]:c=[],[ot.fl.PLAYLISTS_V2]:d=[]}=i,u=e?{after:{uri:e}}:{before:"start"},p=[...n,...l,...s];o.length>0?r(o,u):p.length?r(p,u):c[0]?t(c[0],u):d[0]&&a(d[0],u)}),[t,a,r,e])})},wl="AIlmv6h8bR5NY5R0VceT",Tl="gPxvvwdrTY6FbTx3mvl1",Il="Di4Z5tg2m68SN66AxRgI",jl="l5V7KOO1aHJ4R7jYTQuV",Al=({iconOnly:e=!1,folderUri:t})=>{const{className:r,dropPosition:i,...a}=Sl();return(0,C.jsx)(ml.b,{menu:(0,C.jsx)(Pl.r,{folderUri:t}),children:(t,l,s)=>(0,C.jsx)(ue.Zp,{label:b.Ru.get("web-player.global-nav-bar.create-button.tooltip"),children:(0,C.jsxs)("button",{type:"button",ref:s,onClick:l,className:n()(wl,r,{[Il]:t,[jl]:e,[$e]:i===j.Nz.ON}),"aria-label":b.Ru.get("web-player.global-nav-bar.create-button.label"),...a,children:[(0,C.jsx)(Cl.u,{className:Tl,size:"small"}),!e&&(0,C.jsx)(Q.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.global-nav-bar.create-button.label")})]})})})};var Rl=r(36473),Dl=r(66990);const Ol=()=>null,El=()=>null,Ll=function({folderUri:e,spec:t}){const{createPlaylist:r}=(0,f.A)(),{createFolder:i}=(0,ca.Z)(),a=(0,v.s)(),n=(0,$.V)(),l=e?{after:{uri:e}}:{before:"start"};return(0,C.jsxs)(m.W,{children:[(0,C.jsx)(h.D,{onClick:()=>{const e=a.logInteraction(t.createPlaylistOptionFactory().hitCreatePlaylist());r(e.interactionId,l)},role:"menuitem",leadingIcon:(0,C.jsx)(x.u,{size:"small"}),children:b.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!n&&(0,C.jsx)(h.D,{onClick:()=>{i(b.Ru.get("web-player.your-library-x.default_folder_name"),l),a.logInteraction(t.createFolderOptionFactory().hitCreateFolder())},role:"menuitem",leadingIcon:(0,C.jsx)(Dl.h,{size:"small"}),children:b.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")}),(0,C.jsx)(Ol,{}),(0,C.jsx)(El,{})]})},Nl=({className:e="",folderUri:t,tooltipPlacement:r,spec:i})=>{const a=b.Ru.get("web-player.your-library-x.create.button-label"),l=(0,v.s)(),{className:s,dropPosition:o,...c}=Sl(t);return(0,C.jsx)(Rl.t,{renderInline:!0,menu:(0,C.jsx)(Ll,{folderUri:t,spec:i.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(t,d,u)=>(0,C.jsx)(ue.Zp,{label:a,placement:r,children:(0,C.jsx)(ce.H,{ref:u,iconOnly:Cl.u,className:n()(e,s,{[$e]:o===j.Nz.ON}),"aria-label":a,onClick:e=>{d(e),l.logInteraction(i.hitUiReveal())},size:"small",...c})})})},kl=(0,i.forwardRef)((function({folderUri:e,folderName:t,folderMenu:r,onRename:a,spec:l,className:o,isCollapsed:c,isFullscreen:d},u){const{isActive:p}=(0,fr.l_)(e??"not-a-folder"),m=(0,s.wA)(),g=(0,v.s)(),x=(0,i.useCallback)((()=>{m((0,wt.O2)(t,a)),g.logInteraction(l.hitRenameFolder({uri:e}))}),[m,t,e,g,a,l]);return(0,C.jsx)(ue.Zp,{label:t,showDelay:ue.uF,children:(0,C.jsx)("div",{className:n()(ll,o,{[cl]:!c&&!d}),children:(0,C.jsx)(y.h,{menu:r,children:(0,C.jsx)(ce.H,{"aria-label":t,onClick:x,size:"small",condensed:!0,className:n()(tl),ref:u,children:(0,C.jsx)(Q.E,{variant:"bodyMediumBold",semanticColor:p?"textBrightAccent":void 0,className:sl,as:"h2",children:t})})})})})}));var Fl=r(84962),Bl=r(43524),Ul=r(95208);const Ml="fJrnaZd0QWm65978IgD2",_l="yCpl0fAaEYj7E8F_Oabw",Vl=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=Bl.I.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,Ul.b)(r,a),e}();return e?(0,C.jsxs)("div",{className:Ml,children:[(0,C.jsxs)("div",{className:_l,children:[(0,C.jsx)(Q.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.download-progress-title")}),(0,C.jsx)(Q.E,{variant:"bodySmallBold",semanticColor:"textBase",children:b.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,C.jsx)(Fl.z,{value:t})]}):null};var Hl=r(332),zl=r(53467);const Yl=({parentDropTargetClassName:e,isLibraryCompletelyEmpty:t,folderUri:r,folderName:a,spec:l,openedFolderIsPlayable:s})=>{const{canExpand:o,canCollapse:u}=(0,se.ae)(),{isDefault:p,isCollapsed:y,isExpanded:m,isFullscreen:g}=(0,pe.Q)(),{renameFolder:x}=(0,ca.Z)(),{popFolder:h}=(0,i.useContext)(vt),f=(0,i.useCallback)(((e="")=>{r&&x({uri:r},e)}),[r,x]),v=(0,i.useCallback)((()=>{h()}),[h]),P=r?(0,C.jsx)(Ji,{reference:{uri:r},name:a,onRename:f,onDeleteCallback:v,isPlayable:s}):null,{dropOriginIsYLX:S}=kr(),w=!y&&r&&void 0!==a,T=(0,i.useRef)(null),I=(0,i.useRef)(null),j=(0,i.useRef)(null),A=(0,i.useRef)(null);!function(e,t,r,...a){const n=(0,c.U0)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[a]);(0,i.useLayoutEffect)(n,[n]),(0,ni.w)({refOrElement:r,observeOnly:"width",onResize:n})}(A,(0,i.useMemo)((()=>({get current(){return j.current?.firstElementChild instanceof HTMLElement?j.current?.firstElementChild:null}})),[]),T,a,w);const{breakpoint:R}=(0,zl.x)({[Hl.E.SMALL]:0,[Hl.E.MEDIUM]:300},T),D=(0,d.NC)(wi.s_6,{loadingValue:wi.G2o.NONE}),O=D===wi.G2o.YOUR_LIBRARY,E=!y||t&&y,L=D===wi.G2o.GLOBAL_NAV,N=(0,d.NC)(wi.OB1);return(0,C.jsxs)("header",{className:n()(Wn,{[nl]:y}),ref:T,children:[!y&&(0,C.jsx)(Vl,{}),(0,C.jsxs)("div",{className:n()(Qn,{[Jn]:y}),children:[(0,C.jsxs)("div",{className:n()($n,{[Jn]:y}),ref:I,children:[u&&!g?(0,C.jsx)(Yn,{folderUri:r,dropTargetClassName:e,spec:l.toggleCollapsedModeButtonFactory()}):(0,C.jsx)(Q.E,{variant:"bodyMediumBold",semanticColor:"textBase",className:el,as:"h1",children:b.Ru.get("web-player.your-library-x.your-library")}),r&&(0,C.jsx)(pl,{handleNavigateBack:v,parentFolderUri:r,spec:l.folderBackButtonFactory(),isCollapsed:y,isFullscreen:g}),w&&(0,C.jsx)(kl,{folderUri:r,folderName:a,folderMenu:P,onRename:f,spec:l.folderTitleFactory(),isCollapsed:y,isFullscreen:g,className:S?e:void 0,ref:j},r)]}),(0,C.jsxs)("div",{className:n()(Zn,Xn,{[qn]:L}),children:[!O&&E&&(0,C.jsx)("span",{ref:A,children:(0,C.jsx)(Nl,{className:n()(tl,al),folderUri:r,tooltipPlacement:y?"right":void 0,spec:l.createMenuButtonFactory()})}),O&&(0,C.jsx)(Al,{iconOnly:y||R===Hl.E.SMALL,folderUri:r}),r&&!y&&(0,C.jsx)(gl,{folderName:a,folderMenu:P,dropTargetClassName:e}),(p&&o||m)&&(0,C.jsx)(dl,{dropTargetClassName:e,spec:l.toggleExpandedModeButtonFactory()}),!N||y||t?null:(0,C.jsx)(vl,{dropTargetClassName:e,spec:l.toggleFullscreenModeButtonFactory()})]})]})]})};var Kl=r(82811);const Gl=({isScrolled:e})=>(0,C.jsxs)(ci.$,{rowIndex:0,className:n()(Qt,er,{[Jt]:e}),children:[(0,C.jsx)(Ra.T,{columnIndex:1,children:(0,C.jsx)(Q.E,{variant:"bodySmall",semanticColor:"textSubdued",role:"columnheader",children:b.Ru.get("web-player.your-library-x.expanded-list-header.title")})}),(0,C.jsx)(Ra.T,{columnIndex:2,children:(0,C.jsx)(Q.E,{variant:"bodySmall",semanticColor:"textSubdued",role:"columnheader","aria-colindex":2,children:b.Ru.get("web-player.your-library-x.expanded-list-header.date-added")})}),(0,C.jsx)(Ra.T,{columnIndex:3,children:(0,C.jsx)(Q.E,{variant:"bodySmall",semanticColor:"textSubdued",role:"columnheader","aria-colindex":3,children:b.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})})]});var Wl=r(70796),Xl=r(42682);const Zl=({date:e})=>(0,C.jsx)(Q.E,{variant:"bodySmall",semanticColor:"textSubdued",className:$t,children:e&&b.Ru.formatRelativeDate(new Date(e),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}),ql=(0,i.memo)((e=>{const t=e.handleNavigate,r=(0,C.jsx)(jr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,C.jsx)(or,{})),a=(0,C.jsx)(yr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Kr.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon,(0,C.jsx)(Ot.b,{className:zt,isTunaApplied:e.isTunaApplied})]}),subtitle:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Ut,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType,isTunaApplied:e.isTunaApplied})}),uri:e.uri}),n=e.logRightClick;return(0,C.jsx)(y.h,{menu:e.menu,onShow:n,children:(0,C.jsx)(Dt.E,{uri:e.uri,trigger:Dt.l.OnMouseDown,children:(0,C.jsx)(Ra.T,{columnIndex:0,children:(0,C.jsx)(Wl.v,{className:_t,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:Aa.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})})})})),Ql=e=>{const t=e.handleNavigate,r=(0,C.jsx)(jr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,C.jsx)(yr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Kr.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,C.jsx)(Ut,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType,isTunaApplied:e.isTunaApplied}),uri:e.uri}),a=e.logRightClick;return(0,C.jsx)(cr,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,C.jsxs)(Ra.T,{columnIndex:0,children:[(0,C.jsx)(y.h,{menu:e.menu,onShow:a,children:(0,C.jsx)(Dt.E,{uri:e.uri,trigger:Dt.l.OnMouseDown,children:(0,C.jsx)(Wl.v,{className:n()(_t,Ht),media:e.cover,id:e.uri,padding:Aa.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,C.jsxs)("span",{className:sr,children:[r," ",i]})]})})},Jl=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,C.jsx)(y.h,{menu:e.menu,onShow:r,children:(0,C.jsxs)("div",{className:Qt,ref:t,children:[(0,C.jsx)(ql,{...e,parentRef:t}),(0,C.jsx)(Ra.T,{columnIndex:1,children:(0,C.jsx)(Zl,{date:e.addedAt})}),(0,C.jsx)(Ra.T,{columnIndex:2,children:(0,C.jsx)(Zl,{date:e.lastPlayedAt})})]})})},$l=e=>{const t=e.handleNavigate,r=(0,C.jsxs)("div",{className:tr,children:[(0,C.jsx)(jr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Xl.v,{children:"•"}),(0,C.jsx)(Xl.v,{lineClamp:1,children:kt(e.type,e.specialType,e.isTunaApplied)})]}),(!e.shouldShowType&&e.type===Lt.c.ALBUM||(0,St.c0)(e.uri))&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Xl.v,{children:"•"}),(0,C.jsx)(yr,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,C.jsx)(Kr.g,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,C.jsx)(or,{iconSize:"xsmall"}):(0,C.jsxs)(C.Fragment,{children:[e.downloadButton&&(0,C.jsx)("div",{className:Yt,children:e.downloadButton}),e.preReleaseIcon&&(0,C.jsx)("div",{className:Yt,children:e.preReleaseIcon}),e.lockedIcon&&(0,C.jsx)("div",{className:Yt,children:e.lockedIcon})]})),l=e.logRightClick;return(0,C.jsx)(y.h,{menu:e.menu,onShow:l,children:(0,C.jsx)(Dt.E,{uri:e.uri,trigger:Dt.l.OnMouseDown,children:(0,C.jsx)(Ra.T,{columnIndex:0,children:(0,C.jsx)(Wl.v,{className:n()(_t,Vt),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${Aa.vw} ${Aa.v4}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})})},es=e=>{const t=e.logRightClick;return(0,C.jsx)(y.h,{menu:e.menu,onShow:t,children:(0,C.jsxs)("div",{className:Qt,children:[(0,C.jsx)($l,{...e}),(0,C.jsx)(Ra.T,{columnIndex:1,children:(0,C.jsx)(Zl,{date:e.addedAt})}),(0,C.jsx)(Ra.T,{columnIndex:2,children:(0,C.jsx)(Zl,{date:e.lastPlayedAt})})]})})},ts=({height:e,isCompact:t,primaryFilter:r})=>(0,C.jsx)(ci.$,{rowIndex:0,className:n()({[Wt]:!t,[Zt]:t,[Xt]:r===Lt.c.ARTIST}),style:{height:e}}),rs=()=>{const{itemsView:e}=(0,Cn.t)(),{isCollapsed:t}=(0,pe.Q)();return e===Cn.X.LIST_DEFAULT||t?64:32};var is=r(44332);const as="main-yourLibraryX-libraryContainer",ns="AJ_AzxWnimxNHc4ye3vk",ls="main-yourLibraryX-libraryFilter",ss="kCQHErMb02f7Yn3pfZzx",os="main-yourLibraryX-libraryItemContainer",cs="main-yourLibraryX-libraryRootlist",ds="sikBfynL1Y6I25nVpbAg",us="tJkB7sTWv8E3FTSUbYpV",ps="qOtD4rsRpIMhQLCjJ4K3",ys="oEDH8yMQOKQNoX7LWjwt",ms="RHRitk6QC3rvuG24RAdj",gs="main-yourLibraryX-filterArea",xs=(0,i.memo)((function({item:e,primaryFilter:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n,ylxIsCompact:l}){const s={shouldShowType:!(0,St.c0)(e.uri)&&(Bt(e.type)!==t||Ft(e)&&!l),RowVariantComponent:r,spec:i,nrValidItems:a,index:n},o=(0,d.NC)(wi.lDH);switch(e.type){case Lt.c.FOLDER:return(0,C.jsx)(pa,{libraryItem:e,...s});case Lt.c.ALBUM:return(0,C.jsx)(bi,{libraryItem:e,...s});case Lt.c.ARTIST:return(0,C.jsx)(Ci,{libraryItem:e,...s});case Lt.c.AUDIOBOOK:return(0,C.jsx)(ji,{libraryItem:e,...s});case Lt.c.AUTHOR:return(0,C.jsx)(Oi,{libraryItem:e,...s});case Lt.c.SHOW:return(0,C.jsx)(mn,{libraryItem:e,...s});case Lt.c.PLAYLIST:return(0,C.jsx)(tn,{libraryItem:e,...s});case Lt.c.LIKED_SONGS:return(0,C.jsx)(fa,{libraryItem:e,...s});case Lt.c.YOUR_EPISODES:return(0,C.jsx)(hn,{libraryItem:e,...s});case Lt.c.LOCAL_FILES:return(0,C.jsx)(Ia,{libraryItem:e,...s});case Lt.c.PRE_RELEASE_ALBUM:return o?(0,C.jsx)(dn,{libraryItem:e,...s}):null;case Lt.c.PRE_RELEASE_BOOK:return(0,C.jsx)(dn,{libraryItem:e,...s});case Lt.c.CONCERT:return(0,C.jsx)(ki,{libraryItem:e,...s});default:(0,Nt.d)(e)}})),bs=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:l,isScrolled:s,isExpandedList:o,hasItems:c})=>{const{isCollapsed:d,isExpanded:u,isFullscreen:p}=(0,pe.Q)(),{itemsView:y}=(0,Cn.t)(),m=rs(),g=y===Cn.X.LIST_COMPACT,x=((e,t,r,i)=>e?Ql:t||r?i?es:Jl:i?$l:ql)(d,u,p,g),h=(0,i.useMemo)((()=>({current:{rowHeight:m}})),[m]);vn(t,e,a,h);const f=(0,i.useCallback)(((e,t)=>(0,C.jsx)(ts,{height:e,isCompact:g,primaryFilter:r},t)),[g,r]),v=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>{const n=t+i;return e?(0,C.jsx)(xs,{item:e,spec:l,RowVariantComponent:x,primaryFilter:r,nrValidItems:a,index:n,ylxIsCompact:g},`${e.uri}-${n}`):f(`${m}px`,`${n}`)}))),[e,l,x,r,a,g,f,m]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(Kl.f,{"aria-label":b.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":a,"aria-colcount":o?3:1,children:[o&&c&&(0,C.jsx)(Gl,{isScrolled:s}),(0,C.jsx)("div",{className:n()({[us]:o}),children:(0,C.jsx)(is.L,{renderRows:v,nrRows:a,rowHeight:m,scrollNodeRef:t,renderPlaceholder:f})})]})})};r(66016);var hs=r(60940),fs=r(18055),vs=r(18572),Cs=r(54542),Ps=r(59023),Ss=r(7585),ws=r(13226),Ts=r(62813);const Is=e=>e?.parentElement?.querySelector("ul"),js=()=>[{itemsViewState:Cn.X.LIST_COMPACT,icon:Ps.d,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact-list"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact")},{itemsViewState:Cn.X.LIST_DEFAULT,icon:Ss.N,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default-list"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default")},{itemsViewState:Cn.X.GRID_COMPACT,icon:ws.E,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact-grid"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.compact")},{itemsViewState:Cn.X.GRID_DEFAULT,icon:Ts.D,fullName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default-grid"),displayName:b.Ru.get("web-player.your-library-x.sort-and-view-picker.default")}];var As=r(24223),Rs=r(98165);const Ds=(e,t,r)=>{const i=t.closest('li[role="presentation"]'),a=e.parentElement?.querySelectorAll('ul[role="menu"]');if(r===Rs.O.UP){const r=a?.[a.length-1],n=e.previousElementSibling,l=i?.previousElementSibling,s=!!l?.querySelector(As.kX);if(t instanceof HTMLUListElement||!s){if(n&&n instanceof HTMLUListElement)return n;if(r&&r instanceof HTMLUListElement)return r}}else{const t=i?.nextElementSibling;if(!t){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:a?.[0]}}};var Os=r(14006);const Es="znVZUymLCaOkuN62U7Sf",Ls="GcUIvOQcXYErEX919frz",Ns=({selectedView:e,onViewSelect:t})=>{const r=(0,i.useRef)(null),a=(0,Os.W)(),n=(0,i.useCallback)((e=>{const r=js().find((t=>t.fullName===e));r&&t(r)}),[t]);return(0,i.useLayoutEffect)((()=>{const t=js().findIndex((t=>t.itemsViewState===e.itemsViewState));r.current?.style.setProperty("--view-menu-selected-offset",(a?-100*t:100*t)+"%")}),[e,a]),(0,C.jsxs)(m.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:Ds,getInitialFocusElement:Is,children:[(0,C.jsx)(Cs.y,{children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),(0,C.jsx)("div",{className:Es,ref:r,children:js().map((t=>{const r=t.itemsViewState===e.itemsViewState;return(0,C.jsx)(ue.Zp,{label:t.fullName,children:(0,C.jsx)(h.D,{role:"menuitemradio","aria-checked":r,onClick:()=>n(t.fullName),"aria-label":t.fullName,className:Ls,autoClose:!1,CheckedIcon:null,children:t.icon({size:"small"})})},t.fullName)}))})]})},ks="UsP6uSRooAI9fdTmoQ7C",Fs="ktFXPl3NAYBjLv6hsC6Y",Bs=({selectedSort:e,selectedView:t,onSortSelect:r,onViewSelect:a,sortOptions:n,sortDirection:l,canChangeSortDirection:s,id:o})=>{const c=(0,i.useRef)(null);let d;return d=s&&null!==l?"forward"===l?fs.R:vs.U:hs.i,(0,C.jsxs)("div",{id:o,className:ks,ref:c,children:[(0,C.jsxs)(m.W,{"aria-label":b.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:Ds,getInitialFocusElement:Is,children:[(0,C.jsx)(Cs.y,{children:b.Ru.get("web-player.your-library-x.sort_by")}),n.map((({key:t,value:i},a)=>(0,C.jsx)(h.D,{role:"menuitemradio","aria-checked":t===e.key,onClick:()=>r(t,a),divider:a===n.length-1?"after":void 0,autoClose:!1,CheckedIcon:d,children:i},t)))]}),(0,C.jsx)(Ns,{onViewSelect:a,selectedView:t})]})},Us=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r,sortDirection:a,canChangeSortDirection:n,headerSpec:l})=>{const s=(0,Qe.f)(),o=(0,i.useMemo)((()=>l.sortbyViewasMenuButtonFactory()),[l]),c=(0,v.s)(),d=(0,i.useCallback)((()=>{c.logInteraction(o.hitUiReveal())}),[c,o]),u=e.find((e=>e.id===t))??e?.at(0),p={key:u?.id??"",value:u?.name??""},y=(0,i.useCallback)(((e,t)=>{r(e);const i=s.getSortOrderLabel(e);c.logInteraction(o.sortOptionFactory({identifier:i,position:t}).hitSort())}),[s,c,r,o]),{itemsView:m,setItemsView:g}=(0,Cn.t)(),x=(0,i.useMemo)((()=>{return e=m,js().find((t=>t.itemsViewState===e))??js()[0];var e}),[m]),h=(0,i.useCallback)((e=>{let t="",r=0;e.itemsViewState===Cn.X.LIST_DEFAULT?(g(Cn.X.LIST_DEFAULT),t="list-default"):e.itemsViewState===Cn.X.LIST_COMPACT&&(g(Cn.X.LIST_COMPACT),t="list-compact",r=2),e.itemsViewState===Cn.X.GRID_DEFAULT?(g(Cn.X.GRID_DEFAULT),t="grid-default",r=3):e.itemsViewState===Cn.X.GRID_COMPACT&&(g(Cn.X.GRID_COMPACT),t="grid-compact",r=4),c.logInteraction(o.viewAsOptionFactory({identifier:t,position:r}).hitUiElementToggle())}),[c,g,o]);return(0,C.jsx)(ml.b,{menu:(0,C.jsx)(Bs,{selectedSort:p,selectedView:{itemsViewState:x.itemsViewState},sortDirection:a,canChangeSortDirection:n,sortOptions:e.map((({id:e,name:t})=>({key:e,value:t}))),onSortSelect:y,onViewSelect:h,id:"sort-and-view-picker"}),placement:"bottom-end",children:(e,t,r)=>(0,C.jsx)(ce.H,{"aria-label":b.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",p.value,x.fullName),onClick:e=>{d(),t(e)},onKeyDown:e=>{"ArrowDown"===e.key&&(d(),t(e))},size:"small",iconTrailing:x.icon,role:"combobox","aria-haspopup":"true","aria-controls":"sort-and-view-picker","aria-expanded":e,condensed:!0,children:(0,C.jsx)(Q.E,{variant:"bodySmall",className:Fs,"data-sortbox-label":!0,ref:r,children:p.value})})})};var Ms=r(71761);const _s=(0,i.createContext)(null),Vs=({children:e})=>{const t=(0,i.useRef)(null);return(0,C.jsx)(_s.Provider,{value:t,children:e})},Hs=()=>{const e=(0,i.useContext)(_s);if(!e)throw new Error("useTextFilterFocusContext must be used within a TextFilterFocusProvider");return{registerFocusFunction:(0,i.useCallback)((t=>{e.current=t}),[e]),getFocusFunction:(0,i.useCallback)((()=>e.current),[e])}};const zs=({clearOnEscapeInElementRef:e,primaryFilter:t,spec:r,alwaysExpanded:a=!1})=>{const n=(0,Qe.f)(),l=(0,v.s)(),{registerFocusFunction:s}=Hs(),o=function(e){switch(e){case Lt.c.ALBUM:return b.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case Lt.c.ARTIST:return b.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case Lt.c.AUTHOR:return b.Ru.get("web-player.your-library-x.text-filter.authors-placeholder");case Lt.c.PLAYLIST:return b.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case Lt.c.SHOW:return b.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case Lt.c.AUDIOBOOK:return b.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return b.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case Lt.c.CONCERT:return b.Ru.get("web-player.your-library-x.text-filter.events-placeholder");case void 0:return b.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,Nt.k)(e)}}(t),c=(0,i.useCallback)((()=>(l.logInteraction(r.searchButtonFactory().hitUiReveal()),!0)),[l,r]),d=(0,i.useCallback)((()=>(l.logInteraction(r.textFilterFactory().keyStrokeClearFilter()),!0)),[l,r]),u=(0,i.useCallback)((e=>{s(e)}),[s]);return(0,C.jsx)(Ms.S,{placeholder:o,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:n?.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:c,onClear:d,useExpandCallback:u,alwaysExpanded:a,ariaLabel:b.Ru.get("web-player.your-library-x.text-filter.additional-aria-label")})},Ys=({dropTargetClassName:e,openedFolderUri:t,containerRef:r,primaryFilter:a,availableSortOrders:l,selectedSortOrderId:s,setSelectedSortOrderId:o,sortDirection:c,canChangeSortDirection:d,headerSpec:u,isFullscreen:p})=>{const y=(0,i.useMemo)((()=>u.searchBarFactory()),[u]),{breakpoint:m}=(0,zl.x)({[Hl.E.SMALL]:0,[Hl.E.MEDIUM]:800},r);return(0,C.jsxs)("div",{className:n()(ls,e),children:[(0,C.jsx)(zs,{clearOnEscapeInElementRef:r,primaryFilter:a,spec:y,alwaysExpanded:m===Hl.E.MEDIUM&&p},t),(0,C.jsx)(Us,{sortOrders:l??[],activeSortOrderId:s,setActiveSortOrderId:o,sortDirection:c,canChangeSortDirection:d,headerSpec:u})]})},Ks="jbHcRaGeGYcVbgrKEFO6",Gs="co8sjPCwsez4FPCzyjYg",Ws=({resetError:e})=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:Gs,children:(0,C.jsx)(Q.E,{variant:"titleSmall",semanticColor:"textBase",children:b.Ru.get("error.generic")})}),(0,C.jsx)(Ie.$,{colorSet:"invertedLight",size:"medium",onClick:e,children:b.Ru.get("error.reload")})]}),Xs=({resetError:e})=>{const{isCollapsed:t}=(0,pe.Q)();return(0,C.jsxs)("div",{className:Ks,children:[(0,C.jsx)(Ue.b,{size:"xlarge",semanticColor:"textBase"}),t?(0,C.jsx)(On.s,{children:(0,C.jsx)(Ws,{resetError:e})}):(0,C.jsx)(Ws,{resetError:e})]})};var Zs=r(11126),qs=r(70146);const Qs=()=>((0,Zs.x)(),(0,qs.w)(),null),Js=()=>(0,fl.S)()===_n.z.LIBRARY?(0,C.jsx)(Qs,{}):null;var $s=r(45786);var eo=r(11801);var to=r(71939);function ro(){const[e,t]=(0,i.useState)(null);if((0,ra.l)(ta.UV.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===e?.reason)return null;switch(e.reason){case ta.uL.TOO_MANY_PINS:return(0,C.jsx)(to.x,{animated:!0,headingMessage:b.Ru.get("web-player.your-library-x.pin-error.title"),message:b.Ru.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:b.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case ta.uL.NO_PIN_IN_FOLDER:return(0,C.jsx)(to.x,{animated:!0,headingMessage:b.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:b.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:b.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,Nt.k)(e),null}}var io=r(2049);const ao=io.g1P(io.YjP(),io.YOg(io.YjP())).catch({});var no=r(65152),lo=r(99980);const so=(0,i.createContext)(null),oo=({children:e})=>{const[t]=(0,i.useState)((()=>(0,no.y)((()=>null))));return(0,C.jsx)(so.Provider,{value:t,children:e})},co=()=>{const e=(0,i.useContext)(so);if(!e)throw new Error("useHeaderStateStore must be used within a HeaderStateProvider");return e};function uo(e){const t=co();return(0,lo.P)(t,e)}const po=[],yo=()=>uo((e=>e?.selectedFilters))??po;var mo=r(94684),go=r(58220),xo=r(47129);function bo(e){const t=(0,Qe.f)(),r=t.getCapabilities().canReverseSort,a=(0,d.NC)(wi.LMk),n=r&&a,[l,s]=function(){const e=(0,Qe.f)().getCustomSortOrderId(),[t,r]=(0,ze.x)("ylx-sort-order-and-direction-by-filter-id",{}),[a]=(0,ze.x)("ylx-active-sort-order-by-filter-id",{});return(0,i.useEffect)((()=>{if(0===Object.keys(t).length&&Object.keys(a).length>0){const t={};for(const r of Object.keys(a)){const i=a[r];t[r]={sortOrderId:i,sortDirection:i!==e?"forward":null}}r(t)}}),[t,a,r,e]),[t,r]}(),o=(e=>{const{openedFolderUri:t}=(0,i.useContext)(vt),r=(0,Qe.f)().getContentsPrimaryFilterId(Lt.c.PLAYLIST);return`${t&&r?r:e}`})(e),{sortOrderId:c,sortDirection:u}=l[o]||{sortOrderId:void 0,sortDirection:null},p=(0,i.useCallback)((e=>{const r=t.getCustomSortOrderId()===e;let i=null;n&&(i=r?null:e!==c||r?"forward":"forward"===u?"reverse":"forward"),s({...l,[o]:{sortOrderId:e,sortDirection:i}})}),[n,t,o,c,l,s,u]);return{selectedSortOrderId:c,setSelectedSortOrderId:p,sortDirection:n?u:null,canChangeSortDirection:n}}var ho=r(11940),fo=r(19803),vo=r(38529),Co=r(12665),Po=r(97406);var So=r(10917),wo=r(89884);const To={[ta.Ir.ALBUMS]:Lt.c.ALBUM,[ta.Ir.ARTISTS]:Lt.c.ARTIST,[ta.Ir.AUTHORS]:Lt.c.AUTHOR,[ta.Ir.BOOKS]:Lt.c.AUDIOBOOK,[ta.Ir.EPISODES]:Lt.c.EPISODE,[ta.Ir.SHOWS]:Lt.c.SHOW,[ta.Ir.TRACKS]:Lt.c.TRACK,[ta.Ir.EVENTS]:Lt.c.CONCERT};function Io(e,t,r){const a=(0,i.useCallback)((({data:{list:t}})=>{jo(e,To[t])&&r()}),[e,r]);(0,ra.l)(ta.UV.UPDATE,a),(0,ra.l)(ta.UV.UPDATE_PIN,r);const n=(0,i.useCallback)((()=>{jo(e,Lt.c.PLAYLIST)&&r()}),[e,r]);(0,na.L)(n),function(e){((e,t,r,a,n)=>{const l=(0,Po.x)(),s=(0,i.useRef)(r),o=(0,i.useRef)(),c=(0,i.useRef)();o.current=a,c.current=n,(0,i.useEffect)((()=>{const r={ident:e,isPrefix:t,onMessage:e=>s.current(e),onSubscribe:async e=>await(o.current?.(e)),onCancel:async e=>await(c.current?.(e))},i=l.subscribe(r);return()=>{i.cancel()}}),[e,t,l])})("hm://collection/ylpin/",!0,e)}(r),function(e){const t=(0,Co.A)(),r=t.getEvents();(0,i.useEffect)((()=>r.addListener(vo.T.UPDATE,e)),[t,r,e])}(r),function(e){const t=(0,fo.l)().getEvents();(0,i.useEffect)((()=>{const r=({data:{set:t}})=>{"prerelease"===t&&e()};return t.addListener(ho.ar.ADDED,r),t.addListener(ho.ar.REMOVED,r),()=>{t.removeListener(ho.ar.ADDED,r),t.removeListener(ho.ar.REMOVED,r)}}),[e,t])}(r),function(e,t){const r=(0,Qe.f)(),a=(0,So.j)();(0,i.useEffect)((()=>e===r.getRecentsSortOrderId()?a.getEvents().addListener(wo.m5.UPDATE,(()=>{t()})):()=>{}),[t,r,e,a])}(t,r)}function jo(e,t){switch(e){case Lt.c.ALBUM:case Lt.c.ARTIST:case Lt.c.AUDIOBOOK:case Lt.c.SHOW:case Lt.c.AUTHOR:return e===t;case Lt.c.PLAYLIST:switch(t){case Lt.c.TRACK:case Lt.c.PLAYLIST:case Lt.c.EPISODE:return!0;default:return!1}default:return!0}}var Ao=r(22246),Ro=r(99842),Do=r(42214),Oo=r(56403),Eo=r(87108),Lo=r(42752);const No="Vf3ww2_My5QuwUnbpzhu";var ko=r(96346);const Fo=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(Pr);return e?(0,C.jsx)(ko.qb,{className:No,children:e}):null};var Bo=r(61315),Uo=r(51697);const Mo={items:[],totalLength:0},_o=()=>{const{isAnonymous:e}=(0,s.d4)((e=>e.session)),{filter:t}=(0,i.useContext)(E.g),[r,a]=(()=>{const e=co();return[uo((e=>e)),e.setState]})(),m=yo(),g=yo().map((e=>e.id)),x=m.length>0,{refinersPickedByUserRef:b,selectedRefinerIds:h,resetRefinerIds:f,resetAndToggleRootRefiner:P,toggleRefinerId:S}=function(e){const{openedFolderUri:t=ft,change:r,resetFolder:a}=(0,i.useContext)(vt),n=(0,i.useRef)(t),[l,s]=(0,ze.x)("ylx-active-filter-ids",ao),o=(0,i.useRef)(!0),d=(0,c.U0)(((r,i=!0)=>{const a=new Set(e);a.has(r)?a.delete(r):a.add(r),o.current=i,s({...l,[t]:Array.from(a)})}),[e,s,t]),u=(0,i.useCallback)((()=>s({...l,[t]:[]})),[t,l,s]),p=(0,i.useCallback)((e=>{t&&a(),s({...l,[ft]:e?[e]:[]})}),[t,a,l,s]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==ft&&"PUSH"===r&&s({...l,[t]:l[n.current]??[]}),n.current=t}),[r,t,l,s]),{refinersPickedByUserRef:o,selectedRefinerIds:l[t],resetRefinerIds:u,resetAndToggleRootRefiner:p,toggleRefinerId:d}}(g),{selectedSortOrderId:T,setSelectedSortOrderId:A,sortDirection:L,canChangeSortDirection:N}=bo(h?.at(0)),k=(0,i.useRef)(null),F=(0,i.useRef)(null),B=(0,i.useRef)(null),{expandedFolders:U}=function(){const e=(0,i.useContext)(He);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}(),{openedFolderUri:M,resetFolder:_}=(0,i.useContext)(vt),V=(0,Ro.p)(),H=(0,Eo.P)(),G=(0,Qe.f)(),W=!1,[X,Z]=(0,i.useState)(!1),{setLeftSidebarState:q}=(0,se.ae)(),{isCollapsed:Q,isExpanded:J,isFullscreen:$}=(0,pe.Q)();(e=>{const t=(0,Qe.f)(),{isCollapsed:r}=(0,pe.Q)(),{toggleCollapseYLX:a}=zn(),{getFocusFunction:n}=Hs(),l=(0,Os.W)(),s=(0,i.useCallback)((()=>{a()}),[a]),o=(0,i.useCallback)((()=>{e(null),r&&a()}),[r,e,a]),c=(0,i.useCallback)((()=>{if(e(null),r)a(),requestAnimationFrame((()=>{const e=n();e?.()}));else{const e=n();e?.()}}),[e,r,a,n]),d=(0,i.useCallback)((i=>()=>{e(t.getContentsPrimaryFilterId(i)),r&&a()}),[r,t,e,a]),u=d(Lt.c.PLAYLIST),p=d(Lt.c.SHOW),y=d(Lt.c.ARTIST),m=d(Lt.c.ALBUM),g=d(Lt.c.AUDIOBOOK);(0,xo.N)(l?(0,mo.p)(go.r.TOGGLE_NPV_SIDEBAR):(0,mo.p)(go.r.TOGGLE_LEFT_SIDEBAR),s),(0,xo.N)((0,mo.p)(go.r.GO_TO_LIBRARY),o),(0,xo.N)((0,mo.p)(go.r.GO_TO_PLAYLISTS),u),(0,xo.N)((0,mo.p)(go.r.GO_TO_PODCASTS),p),(0,xo.N)((0,mo.p)(go.r.GO_TO_ARTISTS),y),(0,xo.N)((0,mo.p)(go.r.GO_TO_ALBUMS),m),(0,xo.N)((0,mo.p)(go.r.GO_TO_AUDIOBOOKS),g),(0,xo.N)((0,mo.p)(go.r.FOCUS_YLX_TEXT_FILTER),c)})(P);const{itemsView:ee,isGridView:te}=(0,Cn.t)(),{spec:re,UBIFragment:ie}=(0,Uo.$)(u.j,{data:{identifier:"yourlibraryx"}});let ae;ae=Q?"collapsed":ee===Cn.X.GRID_COMPACT?J?"expanded_compact_grid":"compact_grid":ee===Cn.X.GRID_DEFAULT?J?"expanded_default_grid":"default_grid":ee===Cn.X.LIST_COMPACT?J?"expanded_compact_list":"compact_list":J?"expanded_default_list":"default_list";const ne=(0,i.useMemo)((()=>re.sidebarFactory({uri:M??ft,identifier:ae})),[re,M,ae]),le=(0,Bo.n)(ne.getAbsoluteLocation(),ne),oe=(0,i.useMemo)((()=>ne.headerFactory()),[ne]),ce=(0,i.useMemo)((()=>oe.filtersFactory()),[oe]),de=(0,i.useMemo)((()=>ne.listFactory()),[ne]);!function(e=[],t=[],r){const a=(0,$s.n)(),n=(0,Qe.f)().getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const s=(0,i.useRef)(t);s.current=t;const o=(0,i.useRef)(r);o.current=r;const d=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=s.current.includes(n),t=l.current.includes(n),r=s.current.length>1,i=!a&&!r&&!e&&t,c=a&&e&&d.current;(i||c)&&(i&&(d.current=!0),o.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,c.Ij)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&d.current||(d.current=!1),u.current=t)}),[n,t])}(r?.availableFilters?.map((e=>e.id)),g,S);const{setDraggingIsInProgress:ue}=(0,i.useContext)(D.O_);(0,O.g)(k);const{dropTargetResult:{dropPosition:ye,className:me,...ge},unpinConfirmationDialog:xe}=(({sidebarSpec:e,openedFolderUri:t,isCollapsed:r,reorderAllowed:a})=>{const n=(0,i.useMemo)((()=>e.listFactory()),[e]),l=(0,Qe.f)(),s=(0,Fr.g)(),{setLeftSidebarState:o}=(0,se.ae)(),{handleDropOnFolder:c,unpinConfirmationDialog:d}=$i(n,t),u=Br(),p=(0,v.s)(),{dropOriginIsYLX:y,entityIsInFolder:m}=kr(),g=t?dt:ct,x=m&&!a?[ot.fl.PLAYLISTS_V2,ot.fl.FOLDERS]:[];return{dropTargetResult:(0,qe.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:y?x:g},onDrop:(0,i.useCallback)((async e=>{if(t)c(e);else{const{[ot.fl.TRACKS]:t=[],[ot.fl.LOCAL_TRACKS]:r=[],[ot.fl.ALBUMS]:i,[ot.fl.ARTISTS]:a,[ot.fl.AUTHORS]:o,[ot.fl.EPISODES]:c,[ot.fl.SHOWS]:d,[ot.fl.PLAYLISTS_V2]:m=[],[ot.fl.FOLDERS]:g,[ot.fl.AUDIOBOOKS]:x}=e,b=[...t,...r];b.length&&(l?.add({uris:b}),p.logInteraction(n.dragCreatePlaylist())),i?.length&&(l?.add({uris:i}),p.logInteraction(n.dragLike({itemToBeLiked:i.at(0)??""}))),a?.length&&(l?.add({uris:a}),p.logInteraction(n.dragLike({itemToBeLiked:a.at(0)??""}))),o?.length&&(l?.add({uris:o}),p.logInteraction(n.dragLike({itemToBeLiked:o.at(0)??""}))),c?.length&&(l?.add({uris:c}),p.logInteraction(n.dragLike({itemToBeLiked:c.at(0)??""}))),d?.length&&(l?.add({uris:d}),p.logInteraction(n.dragLike({itemToBeLiked:d.at(0)??""}))),x?.length&&(l?.add({uris:x}),p.logInteraction(n.dragLike({itemToBeLiked:x.at(0)??""}))),m.length&&(u(m,{before:"start"}),y?p.logInteraction(n.dragSort()):p.logInteraction(n.dragLike({itemToBeLiked:m.at(0)??""}))),g?.length&&(s.moveFolder({uri:g[0]},{before:"start"}),p.logInteraction(n.dragSort()))}}),[t,c,l,p,n,u,y,s]),onLongDragOver:(0,i.useCallback)((()=>{r&&o(se.ZS.DEFAULT)}),[r,o])}),unpinConfirmationDialog:d}})({sidebarSpec:ne,openedFolderUri:M,isCollapsed:Q,reorderAllowed:r?.reorderAllowed}),be=(0,d.NC)(wi.lDH),fe=(0,i.useMemo)((()=>({filters:h,sortOrder:T,sortDirection:L,textFilter:t,includeLocalFiles:H,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:be,expandedFolders:U,filtersPickedByUser:b.current,folderUri:M})),[h,T,L,t,H,be,U,b,M]),ve=(0,i.useCallback)((async(e,t)=>{try{const r=await G.getContents({offset:e,limit:t,...fe}),{offset:i,limit:n,items:s,...o}=r;return Z(!1),{fetchedId:fe.folderUri,onCacheSuccess:()=>{a((e=>(0,l.j)(o,e)?e:o))},...r}}catch(e){return e instanceof w.c_?(f(),Mo):e instanceof w.IU?(A(void 0),Mo):e instanceof w.db?(_(),Mo):((0,Lo.UD)(e),Z(!0),Mo)}}),[G,fe,f,A,_,a]),Pe=!1===r?.hasUnfilteredItems,Se=r?.hasTextFilter&&0===r.totalLength&&""!==t,{setFilter:we}=(0,i.useContext)(E.g);(0,i.useEffect)((()=>{Se&&Q&&we("")}),[Se,Q,we]);const Te=0===r?.totalLength&&x&&!r.passedFolderUri&&!r.hasTextFilter;(0,c.Ij)((()=>{const e=m.at(-1);Te&&e&&S(e.id,!1)}),[Te,m]);const Ie=G?.getCapabilities().canFetchAllItems,je=(0,i.useCallback)((e=>!Q&&!te||(!e||(e.type!==Lt.c.PLAYLIST&&e.type!==Lt.c.FOLDER||(void 0===e.folderDepth||0===e.folderDepth)))),[Q,te]),{fetchedId:Ae,getItems:Re,nrValidItems:De,invalidateCache:Oe,hasItems:Le}=(0,Oo.E)({nrItems:50,fetch:ve,limit:50,cacheAllOnInvalidation:Ie,cacheAllLimit:5e4,itemIsValidPredicate:je}),Ne=(0,o.YQ)(Oe,200,{leading:!0,trailing:!0,maxWait:1e3});Io(r?.primaryFilter,r?.selectedSortOrder.id,Ne);const ke=!M&&!Ae||M===Ae;((e,t="")=>{const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return i?.addEventListener("scroll",n),()=>{i?.removeEventListener("scroll",n)}}),[e,t])})(k,Ae);const Fe=(0,i.useCallback)((()=>{Oe(),Z(!1)}),[Oe]),Ue=(0,Do.y)(k),Me=!!r?.openedFolderName,_e=(0,d.NC)(wi._p8,{loadingValue:!1})&&Ie,Ye=function(e,t,r){const{isGridView:a}=(0,Cn.t)(),n=rs();return(0,i.useCallback)((async i=>{let l=n,s=1;if(a){const t=e.current?.querySelector('li[role="row"]');l=t?.getBoundingClientRect().height??0,t?.parentElement&&(s=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const o=r(0,5e4,{cachedOnly:!0}),c=o.find((e=>e?.name&&(0,eo.u)(i,e.name))),d=c?o.indexOf(c):-1;return-1!==d&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(d/s)*l,l),c?.uri??null}),[e,t,n,r,a])}(B,k,Re),Ke=X?(0,C.jsx)(Ve,{onClick:Fe}):null;let Ge;(0,i.useEffect)((()=>{X&&Q&&q(se.ZS.DEFAULT)}),[X,Q,q]),(Pe&&!Q||e)&&(Ge=Me?(0,C.jsx)(Ce,{className:me}):(0,C.jsx)(Ee,{className:me}));const We=Se?(0,C.jsx)(Be,{query:t,className:me}):null,Xe=!Q&&!Ge&&(0,C.jsx)(Ys,{dropTargetClassName:me,containerRef:F,headerSpec:oe,primaryFilter:r?.primaryFilter,availableSortOrders:r?.availableSortOrders,selectedSortOrderId:T,setSelectedSortOrderId:A,sortDirection:L,canChangeSortDirection:N,openedFolderUri:M,isFullscreen:$}),Ze=X&&!r,$e=J||$,et=!J&&!$,tt=$e&&!te&&!Ke&&!Ge,{cheetaraOnboardingIsActive:rt,setCheetaraOnboardingIsActive:it,cheetaraOnboardingDismissed:at,setCheetaraOnboardingDismissed:nt,handleCloseCheetaraOnboarding:lt}={cheetaraOnboardingIsActive:!1,setCheetaraOnboardingIsActive:()=>{},cheetaraOnboardingDismissed:!1,setCheetaraOnboardingDismissed:()=>{},handleCloseCheetaraOnboarding:()=>{},cheetaraTooltipVisible:!1,setCheetaraTooltipVisible:()=>{}},st=!Q&&W,ut=(0,Ao.d)();return(0,C.jsx)(Sr,{containerRef:F,findMatchingTypeaheadUid:Ye,isEnabled:_e,children:(0,C.jsxs)(ie,{spec:re,children:[rt&&(0,C.jsx)(K,{onClose:lt}),(0,C.jsx)(y.h,{menu:(0,C.jsx)(I,{folderUri:M}),children:(0,C.jsxs)("div",{className:n()(as,"YourLibraryX",{[Je]:ye===j.Nz.ON,[ds]:Q,[ys]:rt}),style:{"--placeholder-image":`url(${(0,p.bj)("images/ylx-row-placeholder.webp",{},{enableBrotliCDNExperiment:ut})})`,"--placeholder-artist-image":`url(${(0,p.bj)("images/ylx-artist-row-placeholder.webp",{},{enableBrotliCDNExperiment:ut})})`,"--placeholder-compact-image":`url(${(0,p.bj)("images/ylx-compact-row-placeholder.webp",{},{enableBrotliCDNExperiment:ut})})`},ref:e=>{F.current=e,le(e)},...ge,tabIndex:-1,onDragStart:()=>ue(!0),onDragEnd:()=>ue(!1),children:[xe,(0,C.jsxs)("div",{className:n()({[ms]:Ue&&!tt}),children:[(0,C.jsx)(Yl,{parentDropTargetClassName:me,isLibraryCompletelyEmpty:Pe,folderUri:r?.passedFolderUri,folderName:r?.openedFolderName,spec:oe.titleRowFactory(),openedFolderIsPlayable:r?.openedFolderIsPlayable}),!V&&(0,C.jsx)(ie,{spec:oe,children:(0,C.jsx)(he,{})}),!Q&&!Ze&&(0,C.jsxs)("div",{className:n()(gs,ns),children:[false,(0,C.jsx)(bt,{selectedFilters:m,availableFilters:r?.availableFilters,toggleFilterId:S,resetFilterIds:f,className:n()({[ps]:!ke}),scrollNodeRef:k,spec:ce,inFolderView:!!r?.passedFolderUri},Ae),$e&&Xe]}),st&&$e&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(Y,{ylxIsExpanded:J,setCheetaraOnboardingIsActive:it,onHide:()=>nt(!0)})})]}),(0,C.jsx)(R.a,{className:os,scrollNodeRef:k,children:(0,C.jsxs)("div",{className:n()(cs,{[ps]:!X&&!ke,[ds]:Q}),children:[st&&et&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(Y,{ylxIsExpanded:J,setCheetaraOnboardingIsActive:it,onHide:()=>nt(!0)})}),et&&(0,C.jsx)("div",{className:ss,children:Xe}),!Q&&r?.tagPlaylist&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(z,{playlist:r.tagPlaylist})}),Ke||Ge||We,(0,C.jsx)("div",{ref:B,children:te?(0,C.jsx)(jn,{getItems:Re,scrollNodeRef:k,primaryFilter:r?.primaryFilter,nrValidItems:De,spec:de}):(0,C.jsx)(bs,{getItems:Re,scrollNodeRef:k,primaryFilter:r?.primaryFilter,nrValidItems:De,spec:de,isScrolled:Ue,isExpandedList:tt,hasItems:Le})})]})}),ro(),(0,C.jsx)(Fo,{})]})})]})})},Vo=()=>{const{isAnonymous:e}=(0,s.d4)((e=>e.session));(0,s.d4)((e=>e.ui.editRefinersModal));return(0,C.jsx)(A.s,{onError:e=>{(0,Lo.Jy)(e,"YourLibraryX")},Fallback:Xs,children:(0,C.jsx)(oo,{children:(0,C.jsx)(E.s,{uri:w.gv,children:(0,C.jsx)(Ye,{children:(0,C.jsxs)(Ct,{children:[(0,C.jsx)(H,{children:(0,C.jsx)(Z,{children:(0,C.jsx)(Vs,{children:(0,C.jsxs)(M,{children:[(0,C.jsx)(_o,{}),false,(0,C.jsx)(Js,{})]})})})}),(0,C.jsx)(le,{isAnonymous:e})]})})})})})}},10917:(e,t,r)=>{r.d(t,{j:()=>n});var i=r(89884),a=r(15679);function n(){return(0,a.N)(i.X6)}},24452:(e,t,r)=>{r.d(t,{u:()=>f});var i=r(30758),a=r(27932),n=r(15273),l=r(65809),s=r(70397),o=r(28718),c=r(86148),d=r(29277),u=r(53021),p=r(45525),y=r(94902),m=r(59161),g=r(80701),x=r(16986),b=r(19151),h=r(86070);const f=i.memo((function({uri:e,onClickNotInterested:t,onClickReport:r,canPin:i=g.oT.NO,isPinned:f=!1}){const{spec:v}=(0,x.o)(e),C=(0,l.NC)(m.ihJ);return(0,h.jsxs)(o.W,{children:[!!t&&(0,h.jsx)(c.D,{role:"menuitem",leadingIcon:(0,h.jsx)(n.P,{semanticColor:"textSubdued",size:"small"}),onClick:t,children:s.Ru.get("concerts.not_interested.title")}),i!==g.oT.NO&&C&&(0,h.jsx)(p.k,{uri:e,canPin:i,isPinned:f,type:b.c.CONCERT,spec:v}),(0,h.jsx)(y.h,{children:(0,h.jsx)(d.m,{spec:v,uri:e,displayText:s.Ru.get("context-menu.copy-concert-link")})}),!!r&&(0,h.jsx)(c.D,{role:"menuitem",leadingIcon:(0,h.jsx)(a.W,{semanticColor:"textSubdued",size:"small"}),onClick:r,children:s.Ru.get("concerts.flag_issue.title")}),(0,h.jsx)(u.q,{spec:v,uri:e})]})}))},38274:(e,t,r)=>{r.d(t,{R:()=>y});var i=r(30758),a=r(98165),n=r(93441);function l(e,t,r=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,n.fk)(e))return;const i=e.querySelector('[tabindex="0"]');t===a.O.UP&&(0,n.MS)(i,s(e,i,a.O.UP,r)),t===a.O.DOWN&&(0,n.MS)(i,s(e,i,a.O.DOWN,r)),t===a.O.RIGHT&&(0,n.MS)(i,o(i,a.O.RIGHT,r)),t===a.O.LEFT&&(0,n.MS)(i,o(i,a.O.LEFT,r)),t===a.O.HOME&&(0,n.MS)(i,c(a.O.HOME,r)??i),t===a.O.END&&(0,n.MS)(i,c(a.O.END,r)??i)}function s(e,t,r,i=!1){const l=t.closest('li[role="row"]');if(!l)return t;let s=l;const c=Array.from(e.querySelectorAll('li[role="row"]')),d=Array.from(l.querySelectorAll(n.nu)),u=c.indexOf(l);if(u<0)return t;const p=(i&&t!==d[0]||!i&&t!==l)&&!(t instanceof HTMLLIElement);if(r===a.O.UP){if(document.activeElement===e){s=c[c.length-1];return(i?s?.querySelector(n.nu):s)??t}if(p)return o(t,a.O.LEFT,i);let r=u-1;if(-1===r)return t;s=c[r],r-=1}else if(r===a.O.DOWN){if(document.activeElement===e){s=c[0];return(i?s?.querySelector(n.nu):s)??t}if(p)return o(t,a.O.RIGHT,i);let r=u+1;if(r===c.length)return t;s=c[r],r+=1}return(i?s?.querySelector(n.nu):s)??t}function o(e,t,r=!1){const i=e.closest('li[role="row"]');if(!i)return e;let l=e;const s=Array.from(i.querySelectorAll(n.nu)),o=s.indexOf(e);let c=0;if(t===a.O.RIGHT&&o-1!==s.length)c=o+1;else{if(t===a.O.LEFT&&-1===o)return i;if(t===a.O.LEFT&&0!==o)c=o-1;else if(t===a.O.LEFT&&0===o){return(r?i.querySelector(n.nu):i)??i}}return l=s.at(c),l??e}function c(e,t=!1){const{currentFocus:r,listEl:i}=function(){const e=document.activeElement,t=e?.closest("ul");return((0,a.I)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===r||null===i)return null;const l=r.closest('li[role="row"]');if(!l)return r;const s=Array.from(i.querySelectorAll('li[role="row"]')),o=Array.from(l.querySelectorAll(n.nu));if(s.indexOf(l)<0)return r;const c=t&&r===o[0]||!t&&r===l;if(e===a.O.HOME){if(c){return(t?s[0]?.querySelector(n.nu):s[0])??r}return(t?o[1]:o[0])??r}if(e===a.O.END){if(c){return(t?s[s.length-1]?.querySelector(n.nu):s[s.length-1])??r}return o[o.length-1]??r}return r}var d=r(94728),u=r(45978),p=r(86070);const y=(0,i.forwardRef)((({onKeyDown:e,children:t,firstInteractiveIsWrapper:r=!1,...s},o)=>{const c=(0,u.N)(o);(0,d.R)(c);const y=(0,i.useCallback)((t=>{c.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Home"!==t.key&&"End"!==t.key||t.preventDefault(),"ArrowUp"!==t.key&&"ArrowDown"!==t.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===t.key&&l(c.current,a.O.UP,r),"ArrowDown"===t.key&&l(c.current,a.O.DOWN,r),"ArrowRight"===t.key&&l(c.current,a.O.RIGHT,r),"ArrowLeft"===t.key&&l(c.current,a.O.LEFT,r),"Home"===t.key&&l(c.current,a.O.HOME,r),"End"===t.key&&l(c.current,a.O.END,r),e?.(t))}),[r,c,e]),m=(0,i.useCallback)((e=>{if(!c.current)return;const t=e.target,r=c.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==r&&(0,n.MS)(r,t,{preventScroll:!0})}),[c]);return(0,p.jsx)("ul",{role:"treegrid",ref:c,onKeyDown:y,onFocus:m,tabIndex:0,...s,children:t})}))},50392:(e,t,r)=>{r.d(t,{P:()=>g});var i=r(30758),a=r(70397),n=r(28718),l=r(29277),s=r(79971),o=r(53021),c=r(45525),d=r(93083),u=r(80701),p=r(16986),y=r(19151),m=r(86070);const g=i.memo((function({uri:e,artistUri:t,canPin:r=u.oT.NO,isPinned:i=!1,canRemove:g=!1}){const{spec:x}=(0,p.o)(e);return(0,m.jsxs)(n.W,{children:[g&&(0,m.jsx)(d.p,{uri:e,removeLabel:a.Ru.get("contextmenu.remove-from-library")}),t&&(0,m.jsx)(s.z,{spec:x,divider:"after",uri:t,displayText:a.Ru.get("contextmenu.go-to-artist-radio")}),r!==u.oT.NO&&(0,m.jsx)(c.k,{uri:e,canPin:r,isPinned:i,type:y.c.PRE_RELEASE_ALBUM,spec:x}),(0,m.jsx)(l.m,{uri:e,spec:x,displayText:a.Ru.get("context-menu.copy-album-link")}),(0,m.jsx)(o.q,{spec:x,divider:"before",uri:e})]})}))},70850:(e,t,r)=>{r.d(t,{X:()=>u,A:()=>V});var i=r(30758),a=r(62960),n=r(79657),l=r(70397),s=r(41240),o=r(61201);const c="KsnGjjEeMb2miriJrkjW";var d=r(86070);const u=()=>{const e=l.Ru.getLocaleForTranslation(),t=o.IB[e]??o.IB.en,r=(0,s.ZZ)(),u=(0,i.useCallback)((()=>{r({type:"OPEN"})}),[r]);return(0,d.jsx)("div",{className:c,children:(0,d.jsx)(a.n,{iconLeading:n.d,size:"small",onClick:u,"data-testid":"language-selection-button",children:t.displayName})})};r(77369);var p=r(8143),y=r(78717),m=r(81458),g=r(18831),x=r(69878),b=r(96586),h=r(19151),f=r(4015),v=r(57940);const C="ZpqHX3kvsJIsR1QIc4kf",P=({children:e,locale:t,onClick:r,type:i="button"})=>{const a=t===b.Xn,n=(0,v.vf)(window.location.pathname),s=(0,g.o_h)(window.location.pathname),o=(0,x.W)({type:"route",uri:n?h.c.HOME:s?.toURI()}),c={className:C,id:t,onClick:e=>(e=>{if("button"===i){e.preventDefault();const t=new URL(window.location.href);window.location.href.includes("locale")&&t.searchParams.delete("locale"),window.location.href=t.href}r(t)})(e),"data-testid":`language-option-${t}`};if("link"===i){const r=(0,f.ll)(window.location.pathname,!a),i=(0,f.hF)(r,(0,l.a7)(t).baseName),n=o?i:window.location.pathname,s=(e=>e.endsWith("/")?e.slice(0,-1):e)(`${window.location.origin}${n}`);return(0,d.jsx)("a",{href:s,...c,children:e})}return(0,d.jsx)("button",{...c,children:e})},S="eYLSfS4EKfwsdTsItWkY",w=({style:e,children:t})=>(0,d.jsx)("div",{className:S,style:e,children:t});var T=r(97500),I=r.n(T);const j="KPuW9eE4auKgVgMtPZoH",A="zCedVxWmwaJhPIGzJixP",R="qzuG9AHNXHQrOGF06r9A",D="ZgjCz5A7qOyprtvcLK8y",O="BSwvSvqHiQUVuim4Eidv",E="TpluDuF12UKv3IIq_VDu",L=({onClose:e,children:t})=>{const r=(0,i.useRef)(null),{isOpen:a}=(0,s.iL)();return(0,d.jsx)("div",{"data-testid":"language-selection-modal",className:I()(j,{[A]:a}),onClick:t=>{t.target===r.current&&e()},role:"presentation",ref:r,children:t})},N=({ariaDescribedBy:e,ariaLabelledBy:t,children:r})=>{const{isOpen:i}=(0,s.iL)();return(0,d.jsx)("div",{className:R,role:"dialog",hidden:!i,"aria-modal":!0,"aria-labelledby":t,"aria-describedby":e,children:r})};var k=r(30920);const F=({onClose:e})=>(0,d.jsx)("button",{"data-testid":"close-button",className:E,onClick:()=>{e()},children:(0,d.jsx)(k.M,{size:"small","aria-label":l.Ru.get("close")})});var B=r(11750),U=r(24369),M=r(5544),_=r(35035);const V=({languageSelectionModalRef:e})=>{const t=(0,i.useRef)(null),[r,a]=(0,i.useState)("0"),n=(0,s.ZZ)(),c=(0,i.useCallback)((()=>{n({type:"CLOSE"})}),[n]),{isOpen:u}=(0,s.iL)(),g=(0,i.useCallback)((()=>{a(`${t.current?.getBoundingClientRect().height}px`)}),[a]),x=e=>{var t;(0,_.n0)({name:"sp_locale",value:e,domain:(t="open.spotify.com",t.substring(t.indexOf("."))),days:365}),c()};if((0,B.m)(c),(0,M.w)({refOrElement:t,observeOnly:"height",onResize:g}),(0,i.useEffect)((()=>{g()}),[g]),!e.current)return null;const b="language-selection-title",h="language-selection-subtitle",f={"--header-height":r};return(0,p.createPortal)((0,d.jsx)(U.s,{active:u,children:(0,d.jsx)("div",{children:(0,d.jsx)(L,{onClose:c,children:(0,d.jsxs)(N,{ariaLabelledBy:b,ariaDescribedBy:h,children:[(0,d.jsxs)("div",{className:D,ref:t,children:[(0,d.jsxs)("div",{className:O,children:[(0,d.jsx)(y.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",id:b,paddingBottom:m.v4,children:l.Ru.get("i18n.language-selection.title")}),(0,d.jsx)(y.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",id:h,paddingBottom:m.CD,children:l.Ru.get("i18n.language-selection.subtitle")})]}),(0,d.jsx)(F,{onClose:c})]}),(0,d.jsx)(w,{style:{...f},children:o.Np.map((e=>{const t=(0,l.a7)(e).baseName,r=(0,v.p)({urlLocale:t,type:"locale"});return(0,d.jsxs)(P,{onClick:x,locale:e,type:r?"link":"button",children:[(0,d.jsx)(y.E,{semanticColor:"textBase",children:o.IB[e].displayName}),(0,d.jsx)(y.E,{children:o.IB[e].displayNameEn})]},e)}))})]})})})}),e.current)}},75398:(e,t,r)=>{r.d(t,{e:()=>l});var i=r(62936);const a="k270skPbT7JOaSidSA2a";var n=r(86070);const l=({iconSize:e=64,...t})=>(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i.E,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},87108:(e,t,r)=>{r.d(t,{P:()=>a});var i=r(7463);function a(){return(0,i.y)()[0]}},93083:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(30758),a=r(62411),n=r(10700),l=r(48729),s=r(86148),o=r(45786),c=r(96124),d=r(86070);const u=i.memo((function({uri:e,divider:t,removeLabel:r}){const u=(0,a.wA)(),p=!(0,o.n)(),y=(0,c.f)(),m=(0,i.useCallback)((async()=>{u((0,l.aw)(e,!0))}),[u,e]);return(0,d.jsx)(s.D,{role:"menuitem",divider:t,disabled:p&&!y?.getCapabilities().canModifyOffline,onClick:m,leadingIcon:(0,d.jsx)(n.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})}))},97406:(e,t,r)=>{r.d(t,{x:()=>n});var i=r(33389),a=r(15679);function n(){return(0,a.N)(i.b)}}}]);
//# sourceMappingURL=xpui-routes-your-library-x.js.map