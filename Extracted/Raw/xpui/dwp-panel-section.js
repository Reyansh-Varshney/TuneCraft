"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[319],{9326:(e,t,i)=>{i.d(t,{p:()=>h});var a=i(30758),n=i(78717),s=i(35394),r=i(30920),o=i(70397),l=i(30929),c=i(27260),d=i(49507),u=i(92713);const m="pIxPdfuNasUDLbEDmuK_",g="T5TwrUTf23N311rgrEAc",p="BTwQUS5iBiiOBgdda2Zi",v="lu2OTpzgQ6hv6AYWXMNQ";var x=i(86070);const h=({localStorageKey:e,onDismiss:t})=>{const[i,h]=(0,u.x)(e,!1),{logStartJam:b}=(0,d.O)(),{enqueueSnackbar:y}=(0,l.d)(),j=(0,a.useCallback)((()=>{h(!0),t&&t(),y(o.Ru.get("web-player.social-connect.promotion.how-to-start-a-jam-reminder"),{autoHideDuration:5e3})}),[y,t,h]);return i?(0,x.jsx)(x.Fragment,{}):(0,x.jsxs)("div",{className:m,children:[(0,x.jsxs)("div",{className:g,children:[(0,x.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:o.Ru.get("web-player.social-connect.invitation-modal.subtitle")}),(0,x.jsx)(s.H,{iconOnly:r.M,className:p,"aria-label":o.Ru.get("close"),onClick:j,size:"small"})]}),(0,x.jsx)("div",{className:v,children:(0,x.jsx)(c.$,{onClick:b})})]})}},16774:(e,t,i)=>{i.d(t,{$:()=>r,e:()=>s});var a=i(332),n=i(24886);const s={SMALL:"small",LARGE:"large"},r=()=>(0,n.y)()===a.E.SMALL?"small":"large"},17108:(e,t,i)=>{i.d(t,{O:()=>s,j:()=>n});var a=i(30758);let n=function(e){return e[e.Errored=0]="Errored",e}({});const s=(0,a.createContext)({state:null,capturePlaybackError:()=>{}})},21277:(e,t,i)=>{i.d(t,{PanelSection:()=>Ip});var a=i(30758),n=i(94079),s=i(65809),r=i(95638),o=i(97500),l=i.n(o),c=i(37899),d=i(78717),u=i(73136),m=i(70397),g=i(22820),p=i(26345),v=i(50092),x=i(72664),h=i(332),b=i(24886),y=i(53467);const j="SQ6xQvjezZStR5TeLeYw",f="fo9sDhj4KY0nG1mrCpQD",C="clUHz65kwwLdH5uxSEAZ",S="SFeeoewtt4Zm7uNlUBT2",k="iGYJkXrJ1iJ593G1s2VL";var N=i(86070);const w=({children:e,className:t,isLoading:i=!1,...n})=>{const s=(0,a.useRef)(null),{breakpoint:r}=(0,y.c)({[h.E.SMALL]:0,[h.E.MEDIUM]:448,[h.E.LARGE]:780},s);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(v.a,{panel:x.Z.Birdhouse,className:l()(f,t),...n}),(0,N.jsx)(p.w,{className:C,ref:s,children:(0,N.jsx)(b.o.Provider,{value:r,children:i?(0,N.jsx)("div",{className:k,children:(0,N.jsx)(g.m,{})}):e})})]})};let R=function(e){return e.Overview="overview",e.Error="error",e.DiscoverLossless="discoverLossless",e}({}),E=function(e){return e.OnError="onError",e.Continue="continue",e.OnboardLossless="onboardLossless",e}({});const L={[R.Overview]:{[E.OnError]:R.Error,[E.OnboardLossless]:R.DiscoverLossless},[R.DiscoverLossless]:{[E.Continue]:R.Overview},[R.Error]:{}},I=(0,a.createContext)({currentView:R.Overview,viewTransitions:L,setCurrentView:()=>{},toPreviousView:()=>{},viewOptions:null}),A=({children:e})=>{const[t,i]=(0,a.useState)((()=>[{view:R.Overview,options:{}}])),n=(0,a.useCallback)(((e,t)=>{e===R.Overview?i([{view:e,options:t??{}}]):i((i=>[...i,{view:e,options:t??{}}]))}),[]),s=(0,a.useCallback)((()=>{i((e=>e.slice(0,-1)))}),[]);if(0===t.length)throw new Error("Birdhouse view state stack should never be empty");const{view:r,options:o}=t.at(-1),l=(0,a.useMemo)((()=>({currentView:r,viewOptions:o,setCurrentView:n,toPreviousView:s,viewTransitions:L})),[r,n,s,o]);return(0,N.jsx)(I.Provider,{value:l,children:e})},T="EqLKhgGIINyN_LINFjl1",_="OyIY0v1_h3UWgLlxyPHL",D=({resetError:e})=>{const{setCurrentView:t}=(0,a.useContext)(I);return(0,N.jsx)(w,{children:(0,N.jsxs)("div",{className:T,children:[(0,N.jsx)(c.b,{size:"xlarge",semanticColor:"textBase"}),(0,N.jsx)("div",{className:_,children:(0,N.jsx)(d.E,{variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("error.generic")})}),(0,N.jsx)(u.$,{colorSet:"invertedLight",size:"medium",onClick:()=>{e?.(),t(R.Overview)},children:m.Ru.get("error.reload")})]})})},O=({resetError:e})=>(0,N.jsx)(D,{resetError:e});var B=i(48717),U=i(12912),F=i(12295),P=i(48061),M=i(68745),H=i(69937),V=i(57230),Y=i(86246);const z=()=>{const{isDesktop:e}=(0,U.V)(),t=(0,P.b)(),i=(0,F.lS)(t),{isPlayingRemotely:n,remoteDeviceName:s,isConnected:r}=(0,H.v)((e=>{const t=(0,M.V)(e);return{isPlayingRemotely:t.isPlayingRemotely,remoteDeviceName:t.remoteDevice?.name,isConnected:t.connectionStatus===V.zP.CONNECTED}}),Y.a),o=(0,a.useMemo)((()=>e?m.Ru.get("web-player.connect.device-picker.this-computer"):m.Ru.get("web-player.connect.device-picker.this-web-browser")),[e]),l=(0,a.useMemo)((()=>{if(t)return e?m.Ru.get("web-player.connect.device-picker.from-this-computer",{device_name:t.name}):m.Ru.get("web-player.connect.device-picker.from-this-web-browser",{device_name:t.name})}),[e,t]);if(s&&n&&r)return{deviceName:s,playingFrom:s};if(t?.transportType===F.Yg.AIRPLAY||t?.transportType===F.Yg.BLUETOOTH&&t?.terminalType===F.FI.SPEAKERS)return{deviceName:t?.name,playingFrom:o,formattedDeviceName:l};if(i){if(t?.transportType===F.Yg.BUILT_IN||t?.transportType===F.Yg.USB||t?.transportType===F.Yg.UNKNOWN&&t?.terminalType===F.FI.HEADPHONES)return{deviceName:m.Ru.get("web-player.connect.device-picker.wired-connection"),playingFrom:o};if(t?.name&&t?.terminalType===F.FI.HEADPHONES)return{deviceName:t?.name,playingFrom:o,formattedDeviceName:l}}return{deviceName:o,playingFrom:o}},q=()=>{const{deviceName:e}=z();return(0,N.jsx)(d.E,{variant:"bodyMediumBold",semanticColor:"textSubdued",children:e})};var G=i(720),Q=i(56572);const Z=()=>null;var W=i(36030),K=i(70796),J=i(35394),X=i(39896);const $="PYLIWbzDyJA6Mbh2EQQg",ee="GkHvzcvpGO5jTMSKlWkc",te="r3oTh3jKov0cW3m5qF1N",ie=({title:e,subtitle:t,buttonLabel:i,onClick:n,dismissButtonLabel:s,onDismissClick:r,focusTransferKey:o=null})=>{const l=(0,a.useRef)(null);return(0,X.X)(o,l),(0,N.jsx)(K.v,{variant:"naked",size:"lg",id:"getStarted",title:e,subtitle:t,padding:"16px",className:$,footer:(0,N.jsxs)("div",{className:ee,children:[(0,N.jsx)(u.$,{size:"small",onClick:n,ref:l,colorSet:"inverted",children:(0,N.jsx)(d.E,{variant:"bodySmallBold",children:i})}),s&&r&&(0,N.jsx)(J.H,{className:te,size:"small",onClick:r,children:(0,N.jsx)(d.E,{variant:"bodySmallBold",children:s})})]})})};var ae=i(281),ne=(i(77369),i(79898)),se=i(68452),re=i(79343);var oe=i(73525),le=i(58533);const ce=()=>{const e=(0,le.A)(),{currentDevice:t}=(0,oe.l)(),i=((e,t)=>{switch(e){case re.Yn.LOSSLESS_24:return{title:m.Ru.get("web-player.pigeon.audio-quality.lossless"),titleFull:m.Ru.get("web-player.pigeon.audio-quality.lossless-24.label"),bitrateLabel:m.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate"),bitrateDetails:[m.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-1"),m.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-2")]};case re.Yn.LOSSLESS:return{title:m.Ru.get("web-player.pigeon.audio-quality.lossless"),titleFull:m.Ru.get("web-player.pigeon.audio-quality.lossless-16.label"),bitrateLabel:m.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate"),bitrateDetails:[m.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate-details-1"),m.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate-details-2")]};case re.Yn.VERY_HIGH:return{title:m.Ru.get("web-player.pigeon.audio-quality.very-high.label"),bitrateLabel:m.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate"),bitrateDetails:[t?m.Ru.get("web-player.pigeon.audio-quality.very-high.up-to-bitrate-details.subtitle"):m.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate-details.subtitle")]};case re.Yn.HIGH:return{title:m.Ru.get("web-player.pigeon.audio-quality.high.label"),bitrateLabel:m.Ru.get("web-player.pigeon.audio-quality.high.bitrate"),bitrateDetails:[t?m.Ru.get("web-player.pigeon.audio-quality.high.up-to-bitrate-details.subtitle"):m.Ru.get("web-player.pigeon.audio-quality.high.bitrate-details.subtitle")]};case re.Yn.NORMAL:return{title:m.Ru.get("web-player.pigeon.audio-quality.normal.label"),bitrateLabel:m.Ru.get("web-player.pigeon.audio-quality.normal.bitrate"),bitrateDetails:[t?m.Ru.get("web-player.pigeon.audio-quality.normal.up-to-bitrate-details.subtitle"):m.Ru.get("web-player.pigeon.audio-quality.normal.bitrate-details.subtitle")]};case re.Yn.LOW:return{title:m.Ru.get("web-player.pigeon.audio-quality.low.label"),bitrateLabel:m.Ru.get("web-player.pigeon.audio-quality.low.bitrate"),bitrateDetails:[t?m.Ru.get("web-player.pigeon.audio-quality.low.up-to-bitrate-details.subtitle"):m.Ru.get("web-player.pigeon.audio-quality.low.bitrate-details.subtitle")]};case re.Yn.UNKNOWN:default:return{title:m.Ru.get("web-player.pigeon.audio-quality.automatic.label"),bitrateLabel:null}}})(e,(0,se.r)(t));return(0,N.jsx)(K.v,{id:"qualityV2",pretitle:m.Ru.get("web-player.pigeon.audio-quality.file-quality"),title:(0,N.jsx)(ne.d,{lineClamp:2,variant:"titleSmall",semanticColor:"textBrightAccent",children:i.titleFull||i.title}),subtitle:i.bitrateDetails?.map(((e,t)=>(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textBrightAccent",children:e},`bitrate-details-${t}`)))})};var de=i(96579),ue=i(21309);const me="UPAv6TbmqM79jDLYgiad",ge="Py_klMzkGfwftBCPSlvk",pe=({card:{id:e,title:t,text:i}})=>(0,N.jsx)(K.v,{id:e,className:me,variant:"naked",leading:(0,N.jsx)(c.b,{size:"small",semanticColor:"textSubdued",className:ge}),title:(0,N.jsx)(ne.d,{variant:"bodyMedium",semanticColor:"textBase",children:t}),subtitle:"string"==typeof i?(0,N.jsx)(ue.y,{LinkComponent:de.N,source:i,splitter:/\|/g,semanticColor:"textSubdued",variant:"mesto"}):i});i(86328);var ve=i(42805);let xe=function(e){return e.bitrateLevel="bitrateLevel",e.targetBitrateLevel="targetBitrateLevel",e.targetBitrateAvailable="targetBitrateAvailable",e.strategy="strategy",e.isLocal="isLocal",e.autoAdjust="autoAdjust",e.deviceSupported="deviceSupported",e}({}),he=function(e){return e.Bluetooth_Degrades_Lossless="Bluetooth_Degrades_Lossless",e.Default_To_Very_High="Default_To_Very_High",e.Need_To_Redownload="Need_To_Redownload",e.Auto_Adjust_Disabled="Auto_Adjust_Disabled",e.Poor_Bandwidth_Interferes="Poor_Bandwidth_Interferes",e.Lossless_Unavailable="Lossless_Unavailable",e.Playing_Cached_Track="Playing_Cached_Track",e}({}),be=function(e){return e[e.Internet=0]="Internet",e[e.Spotify_Connect=1]="Spotify_Connect",e[e.Downloads=2]="Downloads",e}({}),ye=function(e){return e.Good="good",e.Poor="poor",e.Unknown="unknown",e.Unavailable="unavailable",e}({});const je=[{criteria:{online:!0,autoAdjust:!1,trackLosslessAvailable:!0},result:he.Auto_Adjust_Disabled},{criteria:{online:!0,streamingLossless:!1,targetingLossless:!0,deviceCompatible:!0,internetBandwidth:ye.Poor,trackLosslessAvailable:!0},result:he.Poor_Bandwidth_Interferes},{criteria:{online:!0,autoAdjust:!0,streamingLossless:!1,targetingLossless:!0,deviceCompatible:!0,internetBandwidth:ye.Poor,trackLosslessAvailable:!0},result:he.Default_To_Very_High},{criteria:{online:!0,streamingLossless:!1,bitrateStrategy:[re.ZT.OFFLINED_FILE],trackLosslessAvailable:!0,isSetDownloadQualityLossless:!0},result:he.Need_To_Redownload},{criteria:{online:!0,targetingLossless:!0,trackLosslessAvailable:!1},result:he.Lossless_Unavailable},{criteria:{targetingLossless:!1,streamingLossless:!0,bitrateStrategy:[re.ZT.OFFLINED_FILE,re.ZT.CACHED_FILE]},result:he.Playing_Cached_Track},{criteria:{isPlayingViaBluetooth:!0},result:he.Bluetooth_Degrades_Lossless}];const fe=[{criteria:{bitrateLevel:[re.Yn.LOSSLESS],strategy:[re.ZT.BEST_MATCHING,re.ZT.BACKEND_ADVISED,re.ZT.CACHED_FILE],deviceSupported:!0,autoAdjust:!0},result:ye.Good},{criteria:{bitrateLevel:[re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],targetBitrateLevel:[re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],strategy:[re.ZT.BEST_MATCHING,re.ZT.CACHED_FILE],deviceSupported:!0,autoAdjust:!0},result:ye.Good},{criteria:{bitrateLevel:[re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],targetBitrateLevel:[re.Yn.LOSSLESS],strategy:[re.ZT.BEST_MATCHING,re.ZT.BACKEND_ADVISED,re.ZT.CACHED_FILE],targetBitrateAvailable:!0,deviceSupported:!0,autoAdjust:!0},result:ye.Poor},{criteria:{bitrateLevel:[re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],targetBitrateLevel:[re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],strategy:[re.ZT.BACKEND_ADVISED],deviceSupported:!0,autoAdjust:!0},result:ye.Poor},{criteria:{bitrateLevel:[re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],targetBitrateLevel:[re.Yn.LOSSLESS],targetBitrateAvailable:!1,deviceSupported:!0,autoAdjust:!0},result:ye.Unavailable},{criteria:{autoAdjust:!1},result:ye.Unknown},{criteria:{deviceSupported:!1},result:ye.Unknown}],Ce=[{criteria:{bitrateLevel:[re.Yn.LOSSLESS,re.Yn.LOSSLESS_24],deviceSupported:!0},result:!0},{criteria:{bitrateLevel:[re.Yn.UNKNOWN,re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],strategy:[re.ZT.BEST_MATCHING,re.ZT.BACKEND_ADVISED,re.ZT.CACHED_FILE],targetBitrateLevel:[re.Yn.LOSSLESS,re.Yn.LOSSLESS_24],targetBitrateAvailable:!0,deviceSupported:!0},result:!0},{criteria:{bitrateLevel:[re.Yn.UNKNOWN,re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],strategy:[re.ZT.OFFLINED_FILE],targetBitrateLevel:[re.Yn.LOSSLESS,re.Yn.LOSSLESS_24],targetBitrateAvailable:!0,deviceSupported:!0},result:!1},{criteria:{strategy:[re.ZT.BEST_MATCHING,re.ZT.BACKEND_ADVISED,re.ZT.CACHED_FILE],targetBitrateAvailable:!0,deviceSupported:!0},result:!1},{criteria:{deviceSupported:!1},result:!0},{criteria:{bitrateLevel:[re.Yn.UNKNOWN,re.Yn.LOW,re.Yn.NORMAL,re.Yn.HIGH,re.Yn.VERY_HIGH],targetBitrateLevel:[re.Yn.LOSSLESS,re.Yn.LOSSLESS_24],targetBitrateAvailable:!1,deviceSupported:!0},result:!0},{criteria:{targetBitrateLevel:[re.Yn.LOSSLESS,re.Yn.LOSSLESS_24]},result:!0}],Se=(e,t)=>{for(const[i,a]of Object.entries(t.criteria))if(i===xe.bitrateLevel){if(!a.includes(e[xe.bitrateLevel]))return!1}else if(i===xe.targetBitrateLevel){if(!a.includes(e[xe.targetBitrateLevel]))return!1}else if(i===xe.strategy){if(!a.includes(e[xe.strategy]))return!1}else{if(!a===e[i])return!1}return!0},ke=e=>[re.Yn.LOSSLESS,re.Yn.LOSSLESS_24].includes(e);var Ne=i(26822),we=i(72165),Re=i(63475),Ee=i(45786),Le=i(39737);const Ie={losslessStatus:re.p4.NONE,bitrateLevel:re.Yn.UNKNOWN,targetBitrateLevel:re.Yn.UNKNOWN,targetBitrateAvailable:!1,strategy:re.ZT.UNKNOWN};function Ae(){const{losslessStatus:e,bitrateLevel:t,targetBitrateLevel:i,targetBitrateAvailable:n,strategy:s}=(0,Le.o)((e=>({...Ie,...e?.playbackQuality??null})),Y.a),r=(0,we.t)(),[{data:o}]=(0,Re.K)(r.quality.downloadAudioQuality),[{data:l}]=(0,Re.K)(r.quality.autoAdjustQuality),c=(0,P.b)(),d=(0,H.v)((e=>e.activeDevice)),u=(0,a.useMemo)((()=>null!==d&&d.losslessSupport?d.losslessSupport:{fullySupported:!1,deviceSupported:!1,userEligible:!1}),[d]).deviceSupported,m=d?.isLocal||!1;let g;g=m?s===re.ZT.CACHED_FILE||s===re.ZT.OFFLINED_FILE?be.Downloads:be.Internet:be.Spotify_Connect;const p={bitrateLevel:t,targetBitrateLevel:i,targetBitrateAvailable:n,strategy:s,isLocal:m,deviceSupported:u,autoAdjust:!!l},v=(e=>{for(const t of Ce)if(Se(e,t))return t.result;return!(!ke(e[xe.bitrateLevel])&&!ke(e[xe.targetBitrateLevel]))})(p),x=(e=>{for(const t of fe)if(Se(e,t))return t.result;return e[xe.strategy]===re.ZT.BACKEND_ADVISED?ye.Poor:ye.Good})(p),h=(0,Ee.n)(),b=ke(i)&&n,y=function({online:e,streamingLossless:t,targetingLossless:i,strategy:a,trackLosslessAvailable:n,autoAdjust:s,internetBandwidth:r,isLocal:o,isPlayingViaBluetooth:l,isSetDownloadQualityLossless:c}){const d=[];for(const u of je){const{criteria:m,result:g}=u;void 0!==m.online&&m.online!==e||void 0!==m.autoAdjust&&m.autoAdjust!==s||void 0!==m.streamingLossless&&m.streamingLossless!==t||void 0!==m.targetingLossless&&m.targetingLossless!==i||void 0!==m.bitrateStrategy&&!1===o||(void 0===m.bitrateStrategy||void 0!==a&&m.bitrateStrategy.includes(a))&&(void 0!==m.internetBandwidth&&m.internetBandwidth!==r||void 0!==m.trackLosslessAvailable&&m.trackLosslessAvailable!==n||void 0!==m.isSetDownloadQualityLossless&&m.isSetDownloadQualityLossless!==c||void 0!==m.isPlayingViaBluetooth&&m.isPlayingViaBluetooth!==l||d.push(g))}return d}({online:h,streamingLossless:ke(t),targetingLossless:ke(i),strategy:s,trackLosslessAvailable:b,autoAdjust:l,internetBandwidth:x,isLocal:m,isPlayingViaBluetooth:c?.transportType===F.Yg.BLUETOOTH&&m,isSetDownloadQualityLossless:o===Ne.a1.LOSSLESS});return{losslessStatus:e,bitrateLevel:t,flags:y,internetBandwidth:x,playingVia:{channelIsLossless:v,channel:g},losslessCompatibleDevice:u}}var Te=i(85387),_e=i(42129),De=i(98756);const Oe=(e=_e.a.AUDIO_QUALITY_STEAMING)=>{const t=(0,De.g)(),i=(0,Te.zy)();return(0,a.useCallback)((()=>{t(`/preferences?highlight=${e}`,{replace:"/preferences"===i.pathname})}),[e,t,i])};let Be=function(e){return e.INFO="INFO",e.ERROR="ERROR",e}({});const Ue={[he.Playing_Cached_Track]:()=>({type:"info",title:m.Ru.get("web-player.pigeon.help-cards.listen-offline.title"),message:m.Ru.get("web-player.pigeon.help-cards.listen-offline.body")}),[he.Bluetooth_Degrades_Lossless]:()=>({type:"info",title:m.Ru.get("web-player.pigeon.help-cards.bluetooth-degrades-lossless.title"),message:m.Ru.get("web-player.pigeon.help-cards.bluetooth-degrades-lossless.body")}),[he.Auto_Adjust_Disabled]:({navigateToSettings:e})=>({type:"error",title:m.Ru.get("web-player.pigeon.help-cards.opt-out-of-downgrade.title"),message:(0,N.jsx)(d.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("web-player.pigeon.help-cards.opt-out-of-downgrade.body",{settingsLink:(0,N.jsx)(ve.Y,{semanticColor:"textBase",as:"button",onClick:e,children:m.Ru.get("desktop.settings.settings")})})})}),[he.Poor_Bandwidth_Interferes]:()=>({type:"error",title:m.Ru.get("web-player.pigeon.help-cards.poor-bandwidth-interferes.title"),message:m.Ru.get("web-player.pigeon.help-cards.poor-bandwidth-interferes.body")}),[he.Default_To_Very_High]:()=>({type:"error",title:m.Ru.get("web-player.pigeon.help-cards.default-to-very-high.title"),message:m.Ru.get("web-player.pigeon.help-cards.default-to-very-high.body")}),[he.Need_To_Redownload]:()=>({type:"error",title:m.Ru.get("web-player.pigeon.help-cards.need-to-redownload.title"),message:m.Ru.get("web-player.pigeon.help-cards.need-to-redownload.body")}),[he.Lossless_Unavailable]:()=>({type:"error",title:m.Ru.get("web-player.pigeon.help-cards.lossless-unavailable.title"),message:m.Ru.get("web-player.pigeon.help-cards.lossless-unavailable.body")})},Fe="RB6CUSf21LK15_igP9ht",Pe=()=>{const e=(()=>{const{flags:e}=Ae(),t=Oe(),i=[];return e.forEach((e=>{if(Ue[e]){const{type:a,message:n,title:s}=Ue[e]({navigateToSettings:t});"info"===a?i.push({id:e,text:n,title:s,type:Be.INFO}):i.push({id:e,text:n,title:s??"",type:Be.ERROR})}})),i})();return(0,N.jsx)("div",{className:Fe,children:e.map((e=>(0,N.jsx)(pe,{card:e},e.id)))})};var Me=i(15828),He=i(84409);const Ve="hJ2UuUhdLid7OxDkPzK5",Ye="S54KbBEh90RF5pzJd8m2",ze="_mHoKKYy00yUQszf1BOy",qe=()=>{const e=(0,M.l)(),t=Oe(e?_e.a.AUDIO_QUALITY_STEAMING_REMOTE:_e.a.AUDIO_QUALITY_STEAMING),{spec:i,logger:n}=(0,He.r)(B.R,{}),s=(0,a.useCallback)((()=>{n.logInteraction(i.qualitySettingsButtonFactory().hitUiReveal()),t()}),[n,t,i]);return(0,N.jsx)(K.v,{className:ze,id:"changeSettings",size:"md",leading:(0,N.jsx)(Me.s,{semanticColor:"textSubdued",size:"small"}),title:m.Ru.get("web-player.pigeon.audio-quality.change-button"),onClick:s})},Ge=()=>(0,N.jsxs)(ae.a,{variant:"naked",padding:"tighter-2",className:Ve,children:[(0,N.jsx)(ce,{}),(0,N.jsx)(Pe,{}),(0,N.jsx)("div",{className:Ye}),(0,N.jsx)(qe,{})]});var Qe=i(92713);const Ze=()=>(0,Qe.x)("onboarding-dismissed:lossless",!1);var We=i(22992),Ke=i(68293);const Je=({spec:e})=>{const t=(0,Ke.s)(),{setCurrentView:i,viewTransitions:n}=(0,a.useContext)(I),s=n[R.Overview],r=(0,We.j)(),o=(0,Ee.n)(),[l]=Ze();return r?(0,N.jsxs)(N.Fragment,{children:[!l&&o&&(0,N.jsx)(ie,{title:m.Ru.get("web-player.pigeon.get-started.title"),subtitle:m.Ru.get("web-player.pigeon.get-started.subtitle"),buttonLabel:m.Ru.get("web-player.pigeon.get-started.button"),onClick:()=>{t.logInteraction(e.losslessOnboardingButtonFactory().hitUiReveal()),i(s.onboardLossless)}}),(0,N.jsx)(Ge,{})]}):null},Xe="TJAbLKl8aSWZqWk4EFkk",$e=Q.$S.DEVICE_PICKER_BUTTON_CLICK,et=()=>{const{panelSend:e}=(0,G.AI)(x.Z.DevicePicker,x.Z.DevicePickerOverlay),t=(0,W.P)(),i=(0,We.j)(),{spec:n,logger:s}=(0,He.r)(B.R,{}),r=(0,a.useCallback)((()=>{s.logInteraction(n.backButtonFactory().hitUiReveal()),e($e)}),[s,e,n]);return(0,N.jsx)(w,{onBack:r,onClose:()=>{s.logInteraction(n.closeButtonFactory().hitUiHide())},titleSlot:(0,N.jsx)(q,{}),children:(0,N.jsxs)("div",{className:Xe,children:[t&&(0,N.jsx)(a.Suspense,{fallback:null,children:(0,N.jsx)(Z,{})}),i&&(0,N.jsx)(Je,{spec:n})]})})};var tt=i(66293),it=i(75434),at=i(74902);const nt="GYa976HrK40QHF7ZZvwM",st="MHROZzo24FoePahYMEFJ",rt="qQ5CfbxUDYyLgy_O6Gah",ot=({nrSteps:e,currentStep:t,onClick:i})=>(0,N.jsx)("div",{className:nt,children:Array.from({length:e}).map(((e,a)=>(0,N.jsx)("button",{"aria-label":m.Ru.get("web-player.onboarding.progress-button-label",{step:a+1}),className:l()(st,{[rt]:t===a}),onClick:()=>i(a)},a)))});var lt=i(24818),ct=i(67240),dt=i(69091);const ut="Vpnd2l8y0SgEYWxGIRzB",mt="cUTxS9VrHd466oEAGs7_",gt="JvZLieWRZZQjIU2ElJ2Y",pt="RI8g7y5iNJU5LMni5kXE",vt="ub90kjJH_P8M2r1QL_jL",xt="mzhzGNpAUR_Rq927qsF_",ht="U3xgLhEWHrv2mb_ZSesP",bt="ZiS7XuaKSNH6O814jzTW",yt="W8RJgFmuCgvRsxpnXMWG",jt="pAYPkrJQFNaLczxADAGc",ft="nBOyGCpnbwg691MCewBj",Ct="hr6LueujvRuzxi6lBlVZ",St="zwfOn0Sx4qfhn2imHyQ9",kt="UcHPiDY6dLRbaeY65j16",Nt="KsS00iz9PKUXYN0PHhno",wt="h66wSXbM4f8lkj4EppJQ",Rt=({imageUrl:e,max:t,alt:i=""})=>{const a=(0,dt.dZ)();return(0,N.jsx)(ct._,{className:ht,src:a(e,t),loading:"eager",alt:i})};var Et=i(4926);const Lt=({path:e,loop:t=!0,withBottomGradient:i=!1})=>(0,N.jsx)(a.Suspense,{fallback:null,children:(0,N.jsx)(Et.o,{loop:t,autoplay:!0,path:e,className:l()(vt,{[xt]:i}),style:{width:"auto",height:"100%"}})});var It=i(41771);function At({children:e,variant:t}){const i=(0,a.useRef)(null);return(0,It.i)({ref:i}),(0,N.jsx)(d.E,{variant:t,semanticColor:"textBase",className:ft,tabIndex:-1,ref:i,children:e})}const Tt={[h.E.SMALL]:{titleVariant:"bodyMediumBold",subtitleVariant:"marginalBold",bodyVariant:"bodySmall",containerGap:0,headerGap:0,assetGap:8,subtitleGap:4,titleGap:4,buttonGap:12,assetMaxHeight:165},[h.E.MEDIUM]:{titleVariant:"titleSmall",subtitleVariant:"marginalBold",bodyVariant:"bodySmall",containerGap:16,headerGap:24,assetGap:24,subtitleGap:12,titleGap:8,buttonGap:24,assetMaxHeight:240},[h.E.LARGE]:{titleVariant:"titleMedium",subtitleVariant:"bodySmall",bodyVariant:"bodyMedium",containerGap:32,headerGap:32,assetGap:48,subtitleGap:16,titleGap:8,buttonGap:32,assetMaxHeight:320}},_t="AOGvMtDLQNbo94n8r8mu",Dt=({icon:e,text:t,condensed:i=!1,className:a})=>(0,N.jsxs)("div",{className:l()(_t,a),children:[(0,N.jsx)(e,{size:i?"xsmall":"small",semanticColor:"textBrightAccent"}),(0,N.jsx)(d.E,{variant:i?"marginalBold":"bodySmallBold",semanticColor:"textBrightAccent",children:t})]});var Ot=i(74810);const Bt=({onboardingContent:e,onNext:t,onTertiaryClick:i,layout:s="vertical",showLoader:r=!1})=>{const{bodyTitle:o,bodySubtitle:c,bodyText:m,imageUrl:p,lottiePath:v,loopAnimation:x=!0,subtitleIcon:y,buttonText:j,tertiaryButtonText:f,aspectRatio:C,withBottomGradient:S=!1}=e,k=(0,b.y)(),{titleVariant:w,subtitleVariant:R,bodyVariant:E,containerGap:L,headerGap:I,assetGap:A,subtitleGap:T,titleGap:_,buttonGap:D,assetMaxHeight:O}=(0,a.useMemo)((()=>{let e=h.E.MEDIUM;switch(k){case h.E.SMALL:e=h.E.SMALL;break;case h.E.MEDIUM:e=h.E.MEDIUM;break;case h.E.LARGE:e=h.E.LARGE}return Tt[e]}),[k]),B=(0,a.useRef)(null),U=(0,Ot.j)();return(0,N.jsx)(lt.A,{mode:"out-in",children:(0,N.jsx)(n.A,{timeout:U?0:800,classNames:{enter:St,enterActive:kt,exit:Nt,exitActive:wt},nodeRef:B,children:(0,N.jsx)("div",{className:ut,style:{"--onboarding-container-gap":`${L}px`,"--onboarding-asset-gap":`${A}px`,"--onboarding-subtitle-gap":`${T}px`,"--onboarding-title-gap":`${_}px`,"--onboarding-button-gap":`${D}px`,"--onboarding-asset-max-height":`${O}px`,"--onboarding-header-gap":`${I}px`,"--onboarding-aspect-ratio":`${C}`},ref:B,children:(0,N.jsxs)("div",{className:l()(mt,{[bt]:"horizontal"===s}),children:[(0,N.jsxs)("div",{className:l()(gt,{[pt]:void 0!==C}),children:[p?(0,N.jsx)(Rt,{imageUrl:p,max:O}):null,v?(0,N.jsx)(Lt,{path:v,loop:x,withBottomGradient:S}):null]}),(0,N.jsxs)("div",{className:yt,children:[(0,N.jsx)(Dt,{icon:y,text:c,condensed:k!==h.E.LARGE,className:jt,variant:R}),(0,N.jsx)(At,{variant:w,children:o}),(0,N.jsx)(d.E,{variant:E,children:m}),(0,N.jsx)("div",{className:Ct,children:r?(0,N.jsx)(g.m,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u.$,{colorSet:"invertedLight",size:k===h.E.LARGE?"medium":"small",onClick:t,children:j}),i&&f?(0,N.jsx)(J.H,{size:k===h.E.LARGE?"medium":"small",onClick:i,condensed:!0,children:e.tertiaryButtonText}):null]})})]})]})})},o)})};const Ut="qtB96lHxRfUA_rsnjEE5",Ft=({variant:e})=>(0,N.jsx)(d.E,{className:Ut,variant:e,semanticColor:"textBase",children:m.Ru.get("navbar.premium")}),Pt=125/123,Mt="quf0x2yKQGr2lSwVARwy",Ht=()=>[{bodyTitle:m.Ru.get("web-player.pigeon.introduction.step-1.title"),bodySubtitle:m.Ru.get("web-player.pigeon.audio-quality.lossless"),bodyText:m.Ru.get("web-player.pigeon.introduction.step-1.subtitle"),subtitleIcon:it.Q,buttonText:m.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc00009fbb521bc973e69a2c8690b57bf5",aspectRatio:Pt},{bodyTitle:m.Ru.get("web-player.pigeon.introduction.step-2.title"),bodySubtitle:m.Ru.get("web-player.pigeon.audio-quality.lossless"),bodyText:m.Ru.get("web-player.pigeon.introduction.step-2.subtitle"),subtitleIcon:it.Q,buttonText:m.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc00009fbb6afe2d7af65f3b90aaa81997",aspectRatio:Pt},{bodyTitle:m.Ru.get("web-player.pigeon.introduction.step-3.title"),bodySubtitle:m.Ru.get("web-player.pigeon.audio-quality.lossless"),bodyText:m.Ru.get("web-player.pigeon.introduction.step-3.subtitle"),subtitleIcon:it.Q,buttonText:m.Ru.get("web-player.pigeon.introduction.button.done"),imageUrl:"spotify:image:ab671fcc00009fbb4594c1dd65a11598f29254c8",aspectRatio:Pt}],Vt=()=>{const[e,t]=Ze(),{setCurrentView:i,viewTransitions:n}=(0,a.useContext)(I),{spec:s,logger:r}=(0,He.r)(at.m,{}),o=Oe(),c=n[R.DiscoverLossless],d=Ht().length,{onNext:u,onBack:m,currentStep:g,goTo:p}=function(e){const[t,i]=(0,a.useState)(0),[n,s]=(0,a.useState)(!1),r=(0,a.useCallback)((()=>{t!==e-1?i(t+1):s(!0)}),[t,e]),o=(0,a.useCallback)((()=>{0!==t&&i(t-1),n&&s(!1)}),[t,n]),l=(0,a.useCallback)((t=>{t>=0&&t<e&&i(t),t===e?s(!0):n&&s(!1)}),[e,n]);return{currentStep:t,onNext:r,onBack:o,reachedEnd:n,goTo:l}}(d),v=(0,a.useCallback)((()=>{r.logInteraction(s.closeButtonFactory().hitUiHide()),i(c.continue)}),[r,i,s,c.continue]),x=(0,a.useCallback)((()=>{r.logInteraction(s.backButtonFactory().hitUiHide()),m()}),[r,m,s]),h=g===d-1,b=g===d-2;return(0,N.jsxs)(w,{titleSlot:(0,N.jsx)(Ft,{variant:"bodySmallBold"}),className:l()({[Mt]:0===g}),onBack:g>0?x:void 0,onClose:v,preventDefaultClose:!0,children:[(0,N.jsx)(Bt,{onboardingContent:Ht()[g],onNext:()=>{b&&t(!0),h?(r.logInteraction(s.doneButtonFactory().hitUiHide()),i(c.continue),o()):u()}}),(0,N.jsx)(ot,{nrSteps:Ht().length,currentStep:g,onClick:p})]})};var Yt=i(1287);const zt=()=>{const{currentView:e}=(0,a.useContext)(I);switch(e){case R.Error:return(0,N.jsx)(D,{});case R.Overview:return(0,N.jsx)(et,{});case R.DiscoverLossless:return(0,N.jsx)(Vt,{});default:return(0,Yt.k)(e),null}},qt=()=>{const{currentView:e}=(0,a.useContext)(I),t=[R.DiscoverLossless].includes(e);return(0,N.jsx)("div",{className:l()(j,{[S]:t}),children:(0,N.jsx)(zt,{})})},Gt=()=>(0,N.jsx)(tt._,{label:"Birdhouse",focusTransferId:"BIRDHOUSE",children:(0,N.jsx)(r.s,{Fallback:O,children:(0,N.jsx)(A,{children:(0,N.jsx)(qt,{})})})});var Qt=i(51822),Zt=i(19507),Wt=i(28246);i(2557),i(87175);function Kt(e){return e.sort(((e,t)=>t.timestamp-e.timestamp))}function Jt(e,t){return t.some((t=>t.user.uri===e.user.uri))?t:Kt([...t,e])}function Xt(e,t){return t.filter((t=>t.user.uri!==e))}var $t=i(18831);var ei=i(96256),ti=i(86278);function ii(){const e=(0,Wt.C)(),t=(0,Qt.jE)(),i=["friend-activity"],n=e=>{t.setQueryData(i,((t=[])=>{const i=Array.isArray(e)?e.at(0):e;return i?function(e,t){return Kt(t.map((t=>t.user.uri===e.user.uri?e:t)))}(i,t):t}))},{subscribeToFriend:s,unSubscribeFromFriend:r,subscribeAndFetchFeed:o}=function(e){const t=(0,Wt.C)(),i=(0,a.useRef)({}),n=(0,a.useRef)(e);n.current=e;const s=(0,a.useCallback)((e=>{const a=(0,$t.o_h)(e)?.username,s=t.subscribeToBuddyActivity(a,(e=>{e&&n.current(e)}));return i.current[e]=s,s}),[t]),r=(0,a.useCallback)((e=>{i.current[e]?.cancel(),delete i.current[e]}),[]),o=(0,a.useCallback)(((e,i,a)=>t.fetchFriendActivityWithSubscriptions(e,i,a)),[t]);return(0,a.useEffect)((()=>{const e=i.current;return()=>{Object.values(e).forEach((e=>{e.cancel()}))}}),[t]),{subscribeToFriend:s,unSubscribeFromFriend:r,subscribeAndFetchFeed:o}}(n),l=(0,a.useRef)();(0,a.useEffect)((()=>()=>l.current?.cancel()),[]);const c=(0,Zt.I)({queryKey:i,queryFn:()=>new Promise(((e,t)=>{l.current=o(n,e,t)})).then((e=>Kt(e))),staleTime:6e5,gcTime:36e5,refetchInterval:864e5,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!0});return(0,ti.N)(ei.mc.OPERATION_COMPLETE,(async a=>{const n=a.data.uris;if(a.data.operation!==ei.JK.FOLLOW_USER){if(a.data.operation===ei.JK.UNFOLLOW_USER)for(const e of n)r(e),t.setQueryData(i,((t=[])=>Xt(e,t)))}else for(const a of n){const n=(await e.fetchFriendActivity([a])).at(0);n&&(t.setQueryData(i,((e=[])=>Jt(n,e))),s(a))}})),c}const ai=(0,a.lazy)((()=>i.e(7564).then(i.bind(i,82200))));function ni(){const{data:e,error:t,isLoading:i}=ii();return!(0,Ee.n)()||i||t?null:(0,N.jsx)(ai,{friends:e??[]})}var si=i(3669),ri=i(78993),oi=i(62411);i(66016);const li="device-picker-section-heading",ci="device-picker-troubleshooting-list";var di=i(33621);const ui="uqXaqvqZq1oSLhXLYRo9",mi="YuPZ1nUe5BAH7HJworb6",gi="aVWZBvlWjLJFYO_GE5qL",pi="wWalUsrOkGgHa0u8o86Q",vi="yNttGX9uUxTih93MKEWB",xi="kD25df_SN_uDB8lhZgQB",hi="szp7gPJjKd4T69SzCEpF",bi="E912cqRfb05FrRPFKDZ_",yi="D7sZlTAybIM02cRvh4sV",ji="xdAVCtEIoo_8z_Ubj7tU",fi=({foundDevices:e})=>{const t=(0,s.NC)(di.Q5);if(e&&t)return null;let i;return i=e?m.Ru.get("web-player.connect.device-picker.select-another-device"):m.Ru.get("web-player.connect.device-picker.no-devices-found"),(0,N.jsx)("span",{className:vi,id:li,"data-testid":li,children:(0,N.jsx)(d.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textBase",children:i})})};var Ci=i(98809),Si=i(17462),ki=i(48729),Ni=i(52427),wi=i(9018),Ri=i(87694),Ei=i(10622),Li=i(24884),Ii=i(35054),Ai=i(24792),Ti=i(89145),_i=i(65720),Di=i(10536),Oi=i(60170),Bi=i(60940),Ui=i(88170),Fi=i(28718),Pi=i(54542),Mi=i(86148),Hi=i(13414),Vi=i(15679);var Yi=i(61315);const zi="mFr6W9mwg0p_c7eJlhc_",qi="lpPBKkIGJcyWu59iOpsS",Gi=({deviceId:e,connectStateDeviceId:t,allowForgetDevice:i,incarnation:a})=>{const n=(0,Vi.N)(Hi.r),s=(0,Ke.s)(),{spec:r}=(0,He.r)(Ui.d,{}),o=(0,Yi.n)(r.getAbsoluteLocation(),r),l=r.forgetDeviceButtonFactory(),c=(0,Yi.n)(l.getAbsoluteLocation(),l),d=r.deviceIncarnationContainerFactory(),u=(0,Yi.n)(d.getAbsoluteLocation(),d);return i||a?(0,N.jsx)("span",{ref:o,className:qi,children:(0,N.jsxs)(Fi.W,{children:[i&&(0,N.jsx)(Mi.D,{role:"menuitem",leadingIcon:(0,N.jsx)(Oi.V,{size:"small"}),onClick:()=>{s.logInteraction(l.hitLogoutFromRemoteDevice({remoteDeviceId:t})),n.logout(e)},elementRef:c,children:m.Ru.get("web-player.connect.context-menu.log-out-of-device")}),a&&(0,N.jsxs)("div",{ref:u,children:[(0,N.jsx)(Pi.y,{children:m.Ru.get("web-player.connect.context-menu.incarnation-title")}),a.available.map((i=>{const{icon:r,text:o}=(e=>{switch(e){case"connect":return{icon:(0,N.jsx)(Ri.E,{size:"small"}),text:m.Ru.get("web-player.connect.context-menu.incarnation-connect")};case"cast":return{icon:(0,N.jsx)(Di.m,{size:"small"}),text:m.Ru.get("web-player.connect.context-menu.incarnation-cast")};default:return{}}})(i);return(0,N.jsx)(Mi.D,{role:"menuitemradio",leadingIcon:r,onClick:()=>{let r;switch(i){case"cast":r=d.googleCastButtonFactory();break;case"connect":r=d.spotifyConnectButtonFactory()}a.preferred!==i?(r&&s.logInteraction(r.hitChangeRemoteDeviceIncarnation({remoteDeviceId:t})),n.setPreferredIncarnation(e,i)):r&&s.logInteraction(r.hitNoAction())},"aria-checked":a.preferred===i,CheckedIcon:Bi.i,children:o},i)}))]})]})}):null};var Qi=i(23291);const Zi=({title:e,deviceId:t,connectStateDeviceId:i,allowForgetDevice:n,incarnation:s,className:r,onHide:o,onShow:c,spec:d})=>{const[u,g]=(0,a.useState)(!1),p=d.contextMenuButtonFactory({identifier:i}),v=(0,Ke.s)(),x=(0,Yi.n)(p.getAbsoluteLocation(),p);return(0,N.jsx)(_i.b,{renderInline:!0,menu:(0,N.jsx)(Qi.r,{spec:p,children:(0,N.jsx)(Gi,{deviceId:t,connectStateDeviceId:i,allowForgetDevice:n,incarnation:s})}),onShow:()=>{g(!0),c?.()},onHide:()=>{g(!1),o?.()},offset:[0,-8],children:(0,N.jsx)(Ti.e,{ref:x,size:Ti.M.xs,label:m.Ru.get("more.label.context",e),className:l()(zi,r),onClick:e=>{e.stopPropagation(),v.logInteraction(u?p.hitUiHide():p.hitUiReveal())}})})},Wi=(0,a.createContext)({rowWithMenuOpenIdentifier:null,setRowWithMenuOpenIdentifier:()=>{}}),Ki=({children:e})=>{const[t,i]=(0,a.useState)(null),n=(0,a.useMemo)((()=>({rowWithMenuOpenIdentifier:t,setRowWithMenuOpenIdentifier:i})),[t]);return(0,N.jsx)(Wi.Provider,{value:n,children:e})},Ji=e=>e instanceof Ci.B.ContainerViewEventFactory.DeviceListEventFactory.RemoteDeviceEventFactory||e instanceof Ci.B.ContainerViewEventFactory.DeviceListEventFactory.DisabledDeviceEventFactory||e instanceof Ci.B.ContainerViewEventFactory.OffNetworkDeviceListEventFactory.RemoteDeviceEventFactory||e instanceof Ci.B.ContainerViewEventFactory.OffNetworkDeviceListEventFactory.DisabledDeviceEventFactory||e instanceof Ci.B.ContainerViewEventFactory.OnNetworkDeviceListEventFactory.RemoteDeviceEventFactory,Xi=e=>e instanceof Ci.B.ContainerViewEventFactory.DeviceListEventFactory.RemoteDeviceEventFactory;var $i=i(28848),ea=i(82583);const ta="AWblt0YATqa_XQaPUDMc",ia="sX7AwqoSzMeT9qhlEViU",aa="jIlVu16bmijzUKG6u5VW",na="ZkuPLR9bss2N7f7thixx",sa="QSZFk1XCj76mVplNmiV1",ra="O0wmxPM0kfA59paiHqR9",oa=(0,a.forwardRef)((function({deviceId:e,connectStateDeviceId:t,Icon:i,TechIcon:n,title:s,subtitle:r,canLogout:o,isDisabled:c,incarnation:d,jamSession:u,onClick:g,spec:p},v){const x=(0,G._Y)(),h=(0,$i.HJ)(d),b=o||h,{rowWithMenuOpenIdentifier:y,setRowWithMenuOpenIdentifier:j}=(0,a.useContext)(Wi),f=Xi(p)&&u?.token?p.inPersonListeningSessionFactory({identifier:u.sessionId??u.token}):void 0,C=(0,Yi.n)(f?.getAbsoluteLocation(),f,!!u?.token),S=(0,Ni.YQ)((()=>{g(),x(Q.$S.PANEL_CLOSE_CLICK)}),1e3,{leading:!0,trailing:!1}),k=(0,a.useCallback)((e=>{"Enter"===e.key&&S()}),[S]),w=(0,N.jsx)(Gi,{deviceId:e,connectStateDeviceId:t,allowForgetDevice:o,incarnation:h?d:void 0}),R=u?.participants.find((e=>e.id===u.sessionOwnerId))?.displayName,E=u?.jamType===ea.H.NEARBY_JAM?(0,N.jsx)(wi.C,{"data-testid":"sub-nearby-jam-icon",semanticColor:"textBrightAccent",size:"small"}):(0,N.jsx)(Ri.E,{"data-testid":"sub-jam-icon",semanticColor:"textBrightAccent",size:"small"}),L=R&&!u.isSessionOwner?(0,N.jsxs)("div",{className:ia,ref:C,children:[E,(0,N.jsx)(Ei.j,{semanticColor:"textBrightAccent",lineClamp:1,children:m.Ru.get("web-player.social-connect.broadcasting.bradcasting-device-subtitle",{host:R})})]}):(0,N.jsxs)("div",{className:ia,children:[n&&(0,N.jsx)(n,{className:aa,semanticColor:"textSubdued","data-testid":"sub-icon",role:"presentation",size:"small"}),r&&(0,N.jsx)(Ei.j,{semanticColor:"textSubdued",lineClamp:1,children:r})]});return(0,N.jsx)(Ii.h,{menu:w,children:(0,N.jsx)(Li.c,{onKeyDown:k,onClick:S,className:l()(na,{[ra]:y===e}),children:(0,N.jsx)(K.v,{id:e,ref:v,"data-testid":"device-picker-row-sidepanel",media:(0,N.jsx)(i,{semanticColor:c?"textSubdued":"textBase","data-testid":"main-icon",role:"presentation"}),onClick:()=>{},onClickHint:m.Ru.get("web-player.connect.device-picker.connect-to-device"),title:(0,N.jsx)("span",{className:ta,children:(0,N.jsx)(Ai.Zp,{label:s,renderInline:!0,children:(0,N.jsx)(ne.d,{"data-testid":"list-row-title",lineClamp:1,semanticColor:c?"textSubdued":"textBase",dir:"auto",children:s})})}),subtitle:L,trailing:b&&Ji(p)&&(0,N.jsx)(Zi,{title:s,deviceId:e,connectStateDeviceId:t,allowForgetDevice:o,incarnation:h?d:void 0,spec:p,className:l()(sa),onShow:()=>{j(e)},onHide:()=>{j(null)}})})})})})),la=({position:e,deviceId:t,connectStateDeviceId:i,deviceName:a,deviceType:n,deviceModelName:s,isGroup:r,disabledReason:o,canLogout:l,spec:c})=>{const d=(0,$i.tf)(n,r),{helpText:u}=(0,$i.uY)(o,(0,$i.p2)(n,s)),m=c.disabledDeviceFactory({identifier:i,position:e,reason:o??"null"}),g=(0,Yi.n)(m.getAbsoluteLocation(),m),p=(0,oi.wA)();return(0,N.jsx)(oa,{deviceId:t,connectStateDeviceId:i,ref:g,isDisabled:!0,disabledReason:o,Icon:d,title:a,subtitle:u,canLogout:l,onClick:()=>{o===V.bU.RESTRICTED&&p((0,ki.yx)(t))},spec:m})};var ca=i(75965);const da=({isDisabled:e=!1,spec:t})=>{const i=(0,oi.wA)(),a=t.containerViewFactory().deviceListFactory().castPlaceholderFactory(),n=(0,Yi.n)(a.getAbsoluteLocation(),a),s=(0,$i.$A)(V.bq.CAST_AUDIO,"disconnected"),r=(0,Ke.s)();return(0,N.jsx)(oa,{deviceId:"cast-placeholder",connectStateDeviceId:"cast-placeholder",ref:n,Icon:s,title:m.Ru.get("web-player.connect.device-picker.google-cast-devices"),supportsHiFi:!1,onClick:()=>{r.logInteraction(a.hitUiReveal()),i((0,ca.Ym)())},isDisabled:e,spec:a})};var ua=i(65007);const ma=({deviceId:e,connectStateDeviceId:t,deviceName:i,supportsHiFi:a,spec:n})=>{const s=(0,Ke.s)(),r=n.localDeviceFactory(),o=(0,$i.tf)(V.bq.COMPUTER,!1),l=(0,ua.D)();return(0,N.jsx)(oa,{deviceId:e,connectStateDeviceId:t,Icon:o,title:i,supportsHiFi:a,onClick:()=>{const{interactionId:t,pageInstanceId:i}=s.logInteraction(r.hitPullPlaybackToLocalDevice());l.transferPlayback(e,{interactionId:t,pageInstanceId:i})},spec:r})},ga=()=>{const[e,t]=(0,Qe.x)("connect-picker-recent-transfers",{});return{registerTransferAttempt:(0,a.useCallback)((i=>{t({...e,[i]:(new Date).getTime()})}),[e,t]),recentTransfersMap:e}};var pa=i(46024),va=i(35021),xa=i(56334),ha=i(50862),ba=i(5665),ya=i(76622);const ja=({position:e,deviceId:t,connectStateDeviceId:i,deviceName:a,deviceType:n,isGroup:r,supportsHiFi:o,canLogout:l,incarnation:c,jamSession:d,spec:u})=>{const g=(0,Ke.s)(),p=u.remoteDeviceFactory({identifier:i,position:e}),v=(0,$i.tf)(n,r);let x,h;(0,$i.Mp)(n)&&(x=(0,$i.$A)(n,"disconnected"),h=m.Ru.get("web-player.connect.device-picker.google-cast"));const b=(0,oi.wA)(),{registerTransferAttempt:y}=ga(),j=(0,ua.D)(),f=(0,Yi.n)(p.getAbsoluteLocation(),p),C=(0,s.NC)(di.Yr),S=(0,va.Ad)((e=>{const t=(0,ba.d)(),i=(0,Qt.jE)(),a=(0,s.NC)(di.$4,{loadingValue:!1}),{data:n}=(0,Zt.I)({queryKey:["useResolveJamFromConnectDevice",e],queryFn:()=>t.getJoinTokenFromConnectDeviceId(e),enabled:a}),{data:r}=(0,Zt.I)({queryKey:["useResolveJamFromConnectDevice",n],queryFn:n?()=>t.getSessionInfo(n):xa.hT,enabled:!!n});return(0,ya.c)(ha.P.SCAN_UPDATE,(()=>{i.invalidateQueries({queryKey:["useResolveJamFromConnectDevice",e]})})),r??null})(i));let k;k=C?d??null:S;return(0,N.jsx)(oa,{deviceId:t,connectStateDeviceId:i,ref:f,Icon:v,TechIcon:x,title:a,subtitle:h,supportsHiFi:o,canLogout:l,incarnation:c,jamSession:k,onClick:()=>{if(k?.token&&!k.isSessionOwner){Xi(p)&&g.logInteraction(p.inPersonListeningSessionFactory({identifier:k.sessionId??k.token}).hitUiReveal());let e=pa.EL.JOIN_LISTENING_SESSION;k.jamType===ea.H.NEARBY_JAM&&(e=pa.EL.JOIN_NEARBY_JAM),b((0,ki.A9)(e,k.token,void 0,{id:t,name:a,type:n,isGroup:r}))}else{const{interactionId:e,pageInstanceId:a}=g.logInteraction(p.hitConnectToRemoteDevice({remoteDeviceId:i}));j.transferPlayback(t,{interactionId:e,pageInstanceId:a}),y(i)}},spec:p})},fa=()=>(0,Le.o)((e=>(e?.restrictions?.disallowTransferringPlaybackReasons?.length??0)>0)),Ca=({devices:e,areWebPlayerCastDevicesAvailable:t=!1,networkHeadingID:i="",spec:a})=>{const n=(0,s.NC)(di.Yr),r=(0,s.NC)(di.Q5),o=fa(),l=a.containerViewFactory().deviceListFactory(),c=(0,Yi.n)(l.getAbsoluteLocation(),l),d=(e,t)=>{const i=m.Ru.get("web-player.connect.device-picker.this-computer"),a=(r||!e.isLocalNetwork)&&e.supportsLogout;if(e.isDisabled)return(0,N.jsx)(la,{position:e.isLocal?0:t+1,deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:e.isLocal?i:e.name,deviceType:e.isLocal?V.bq.COMPUTER:e.type,deviceModelName:e.modelDisplayName,isGroup:e.isGroup,disabledReason:e.disabledReason,canLogout:a,spec:l},e.id);if(e.isLocal&&(e=>e instanceof Ci.B.ContainerViewEventFactory.DeviceListEventFactory||e instanceof Ci.B.ContainerViewEventFactory.OnNetworkDeviceListEventFactory)(l))return(0,N.jsx)(ma,{deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:i,supportsHiFi:e.supportsHiFi,spec:l},e.id);let s=null;return n&&(0,va.HV)(e)?s=e.nearbyJamSession:(0,va.C7)(e)&&(s=e.jamSession),(0,N.jsx)(ja,{position:t+1,deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:e.name,deviceType:e.type,isGroup:e.isGroup,supportsHiFi:e.supportsHiFi,canLogout:a,incarnation:e.incarnation,jamSession:s,spec:l},e.id)};return(0,N.jsxs)(Si.$,{circular:!1,ref:c,"aria-labelledby":`${li} ${i}`,"data-testid":`devices-list-${i}`,allowsMultipleInteractiveChildrenInItem:!0,children:[e.map(((e,t)=>d(e,t))),t&&(0,N.jsx)(da,{isDisabled:o,spec:a})]})},Sa="local-network-heading",ka="other-networks-heading",Na=({localNetworkDevices:e,otherNetworksDevices:t,spec:i})=>{const a=(0,s.NC)(di.Q5),n=e.length>0?m.Ru.get("web-player.connect.device-picker.on-this-network"):m.Ru.get("web-player.connect.device-picker.no-devices-local-network"),r=!a||a&&e.length<=0;return(0,N.jsxs)(N.Fragment,{children:[r&&(0,N.jsx)(d.E,{as:"h3",variant:a?"bodyMedium":"bodySmall",semanticColor:"textSubdued",className:xi,id:Sa,children:n}),e.length>0&&(0,N.jsx)(Ca,{devices:e,networkHeadingID:Sa,spec:i}),t.length>0&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.E,{as:"h3",variant:a?"bodyMedium":"bodySmall",semanticColor:"textSubdued",className:l()(xi,hi),id:ka,children:m.Ru.get("web-player.connect.device-picker.on-other-networks")}),(0,N.jsx)(Ca,{devices:t,networkHeadingID:ka,spec:i})]})]})};var wa=i(3483);const Ra=({url:e,linkText:t,handleClick:i,elementRef:a})=>(0,N.jsx)("a",{className:l()(na),href:e,target:"_blank",ref:a,onClick:i,children:(0,N.jsx)(K.v,{title:t,id:t,isRedundantOnClick:!0,onClick:()=>{},"data-testid":"list-row-external-link",trailing:(0,N.jsx)(wa.H,{size:"small","data-testid":"icon-external-link",semanticColor:"textSubdued",role:"presentation",autoMirror:!0,"aria-hidden":"true"})})}),Ea=({spec:e})=>{const t="https://www.spotify.com/connect?utm_campaign=connect&utm_medium=app&utm_source=desktop",i=e.containerViewFactory().externalConnectHubLinkFactory(),a=(0,Yi.n)(i.getAbsoluteLocation(),i),n=(0,Ke.s)();return(0,N.jsx)(Ra,{url:t,linkText:m.Ru.get("web-player.connect.device-picker.connect-hub-external-link"),elementRef:a,handleClick:()=>{n.logInteraction(i.hitNavigateToExternalUri({destination:t}))}})},La="https://support.spotify.com/article/spotify-connect/",Ia=({spec:e})=>{const t=e.containerViewFactory().externalHelpLinkFactory(),i=(0,Yi.n)(t.getAbsoluteLocation(),t),a=(0,Ke.s)();return(0,N.jsx)(Ra,{url:La,linkText:m.Ru.get("web-player.connect.device-picker.help-external-link"),elementRef:i,handleClick:()=>{a.logInteraction(t.hitNavigateToExternalUri({destination:La}))}})};var Aa=i(17774);const Ta=[Aa.h.en,Aa.h.enGB],_a=()=>{const e=m.Ru.getLocaleForTranslation();return Ta.includes(e)};const Da=({devices:e,areWebPlayerCastDevicesAvailable:t})=>{fa();const i=_a(),a=(0,s.NC)(di.Q5),n=e,{recentTransfersMap:r}=ga(),o=function(e,t){const i=[],a=e.find((e=>e.isLocal));a&&i.push(a);const n=e.filter((e=>!e.isLocal)),{usedDevices:s,unusedDevices:r}=function(e,t){const i=[],a=[];for(const n of e)t[n.sortingId]?i.push({device:n,timestamp:t[n.sortingId]}):a.push(n);return{usedDevices:i,unusedDevices:a}}(n,t);s.sort(((e,t)=>t.timestamp-e.timestamp));for(const e of s)i.push(e.device);const o=i.concat(function(e){return e.sort(((e,t)=>e.isLocal?-1:t.isLocal?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase())))}(r));return o}(n,r),{spec:c}=(0,He.r)(Ci.p,{}),d=o.filter((e=>e.isLocalNetwork)),u=o.filter((e=>!e.isLocalNetwork));return(0,N.jsxs)("div",{className:l()(ui,mi,{[gi]:a}),children:[(0,N.jsx)("div",{children:u.length>0?(0,N.jsx)(Na,{localNetworkDevices:d,otherNetworksDevices:u,spec:c}):(0,N.jsx)(Ca,{devices:o,areWebPlayerCastDevicesAvailable:t,spec:c})}),(0,N.jsxs)("div",{className:l()(bi),children:[(0,N.jsx)(Ia,{spec:c}),i&&(0,N.jsx)(Ea,{spec:c})]})]})};var Oa=i(35185),Ba=i(28084),Ua=i(48591),Fa=i(64398);const Pa=(0,a.forwardRef)((function({Icon:e,title:t,subtitle:i,onClick:a},n){return(0,N.jsx)(Li.c,{className:na,children:(0,N.jsx)(K.v,{id:t,ref:n,"data-testid":"device-picker-row-sidepanel",media:(0,N.jsx)(e,{semanticColor:"textSubdued"}),title:(0,N.jsx)("span",{className:ta,children:(0,N.jsx)(Ai.Zp,{label:t,renderInline:!0,children:(0,N.jsx)(ne.d,{"data-testid":"list-row-title",lineClamp:1,semanticColor:"textBase",dir:"auto",onClick:a,children:t})})}),subtitle:(0,N.jsx)("div",{className:ia,children:(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:i})}),onClick:a})})}));var Ma=i(74709);const Ha="Bjx5Gw7p3JoiF4qI6eMQ",Va=()=>{const e=(0,We.j)(),t=(0,le.A)(),i=t===re.Yn.LOSSLESS||t===re.Yn.LOSSLESS_24;return(0,N.jsx)("div",{className:Ha,children:(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textBrightAccent",children:e&&i&&m.Ru.get("web-player.pigeon.audio-quality.lossless")})})};var Ya=i(91281);const za="A3PPnVKE5LH9mT5URPB2",qa="cU0IpwDfJzDgQaY4MSXA",Ga="dlS4nc0WL68C7_8zwfiS",Qa="pdLJBD_CNQ_r5Ad4mZZk",Za="FpmhhFL8lCsiyh3X0fjK",Wa="scv87ulfUcibJW8QhCeH",Ka="oCa5Np4laJc3s5P2uUqw",Ja=({onClick:e})=>{const{deviceName:t,formattedDeviceName:i}=z();return(0,N.jsx)("div",{className:Ka,children:(0,N.jsx)(Ai.Zp,{label:i??t,children:(0,N.jsx)(Ei.j,{lineClamp:1,onClick:e,children:(0,N.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBase",children:i??t})})})})};var Xa=i(44900),$a=i(25669),en=i(33480);const tn=({size:e="medium",className:t})=>{const i=(0,Ot.j)(),a=(0,en.k)(e);return(0,N.jsx)(N.Fragment,{children:i?(0,N.jsx)(Xa.A,{size:e,semanticColor:"textBrightAccent",className:t,"data-testid":"now-playing-active"}):(0,N.jsx)("img",{className:t,width:a,height:a,alt:"","aria-hidden":"true",src:(0,$a.bj)("images/device-picker-equaliser-animation.webp"),"data-testid":"animated-now-playing"})})};var an=i(16821);const nn=({deviceType:e,isGroup:t,isLocalDevice:i,isPlaying:a})=>{const n=(0,an.g)();let s;if(a)s=(0,N.jsx)(tn,{});else{const a=(0,$i.tf)(e,t,i?n:null);s=(0,N.jsx)(a,{semanticColor:"textBrightAccent","data-testid":"device-icon",role:"presentation"})}return(0,N.jsxs)("div",{className:Qa,children:[(0,N.jsx)("div",{className:Za,children:s}),(0,N.jsx)(ne.d,{variant:"titleSmall",semanticColor:"textBase",lineClamp:1,children:m.Ru.get("web-player.connect.device-picker.current-device")})]})};var sn=i(27498),rn=i(21903),on=i(14006);const ln=()=>{const{currentDevice:e}=(0,oe.l)(),{id:t,connectStateId:i,isLocalNetwork:a,supportsLogout:n}=e,r=(0,on.W)(),o=(0,s.NC)(di.Q5),l=!a&&n,c=!o&&l,{spec:d}=(0,He.r)(Ci.p,{}),u=(0,We.j)(),{deviceName:g,formattedDeviceName:p}=z(),v=r?sn.g:rn.V,x=o?"textSubdued":"textBase";return(0,N.jsx)("div",{className:Wa,children:u?(0,N.jsx)(v,{"aria-label":m.Ru.get("more.label.context",p??g),size:"small",autoMirror:!1,semanticColor:x}):c&&(0,N.jsx)(Zi,{title:p??g,deviceId:t,connectStateDeviceId:i,allowForgetDevice:l,spec:d.containerViewFactory().headerFactory().activeDeviceFactory()})})};var cn=i(22693),dn=i(13995),un=i(30929),mn=i(16358);const gn=()=>{const e=(0,ba.d)(),{enqueueSnackbar:t}=(0,un.d)(),{spec:i,logger:n}=(0,He.r)(Ma.g,{}),[s,r]=(0,a.useState)(mn.ez.BROADCAST_STATUS_UNKNOWN),o=s===mn.ez.BROADCAST_STATUS_UNKNOWN||s===mn.ez.BROADCAST_UNAVAILABLE,l=s===mn.ez.BROADCAST_ON;(0,ya.c)(ha.P.BROADCAST_STATUS_UPDATE,(({data:e})=>{r(e??mn.ez.BROADCAST_STATUS_UNKNOWN)}));const c=(0,a.useCallback)((t=>e.setBroadcastStatus(t?mn.ez.BROADCAST_ON:mn.ez.BROADCAST_OFF)),[e]),d=(0,dn.n)({mutationFn:c,onMutate:async e=>{const t=s;return r(e?mn.ez.BROADCAST_ON:mn.ez.BROADCAST_OFF),{prevBroadcastingState:t,allowBroadcasting:e}},onError:(e,i,a)=>{r(a?.prevBroadcastingState??mn.ez.BROADCAST_STATUS_UNKNOWN),t(m.Ru.get("error.generic"))}});return{isHidden:o,toggleIsSwitchedOn:l,setToggleState:(0,a.useCallback)((e=>{const t=e?"device_discoverable_off":"device_discoverable_on",a=e?"device_discoverable_on":"device_discoverable_off";n.logInteraction(i.deviceDiscoverableToggleFactory().hitToggleState({stateBeforeToggle:t,stateAfterToggle:a})),d.mutate(e)}),[n,d,i])}},pn="k5CAXCZwazRLdTWi5mpN",vn="f2Wgf5OqTaBlTRRKZe9X",xn=()=>{const{isHidden:e,toggleIsSwitchedOn:t,setToggleState:i}=gn();return e?null:(0,N.jsxs)("div",{className:pn,children:[(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",as:"label",htmlFor:"jam.broadcasting",className:vn,children:m.Ru.get("web-player.social-connect.broadcasting.toggle-label")}),(0,N.jsx)(cn.l,{id:"jam.broadcasting",value:t,onSelected:i,condensed:!0})]})};var hn=i(25856),bn=i(27260),yn=i(73648),jn=i(25140),fn=i(6506);const Cn="device-picker-header",Sn=({isPlaying:e})=>{const{currentDevice:t}=(0,oe.l)(),{id:i,connectStateId:n,type:r,isLocal:o,isLocalNetwork:c,isGroup:d,incarnation:u,supportsLogout:g}=t,p=(0,We.j)(),{toggleBirdhouse:v}=(0,Ya.r)(),x=(0,fn.g)(),h=(0,yn.y)(),b=(0,s.NC)(di.$4),y=!x&&h,j=(0,$i.HJ)(u),f=!c&&g,C=f||j,{spec:S,logger:k}=(0,He.r)(Ma.g,{}),{uri:w}=(0,jn.f)(),R=()=>{v(),k.logInteraction(S.hitUiReveal())},E=(0,a.useCallback)((()=>{k.logInteraction(S.createJamButtonFactory().hitUiNavigate({destination:w??""}))}),[k,S,w]),L=(0,N.jsx)(Gi,{deviceId:i,connectStateDeviceId:n,allowForgetDevice:f,incarnation:j?u:void 0}),I=(0,N.jsx)(K.v,{className:l()(qa,{[Ga]:p}),id:Cn,variant:"naked",title:(0,N.jsx)(nn,{deviceType:r,isGroup:d,isLocalDevice:o,isPlaying:e}),subtitle:(0,N.jsxs)("div",{className:Ka,children:[(0,N.jsx)(Ja,{onClick:p?R:void 0}),p&&(0,N.jsx)(Va,{})]}),trailing:(0,N.jsx)(ln,{}),"aria-labelledby":Cn,onClick:p?R:void 0,onClickHint:m.Ru.get("web-player.connect.device-picker.current-device"),body:h&&(0,N.jsxs)(N.Fragment,{children:[b&&(0,N.jsx)(xn,{}),(0,N.jsx)("hr",{className:za})]}),footer:(0,N.jsxs)(N.Fragment,{children:[y&&(0,N.jsx)(bn.$,{onClick:E}),x&&b&&(0,N.jsx)(hn.K,{})]})});return C?(0,N.jsx)(Ii.h,{menu:L,children:I}):I},kn=({isDesktop:e})=>{const t=(0,De.g)(),i=_a(),{spec:a}=(0,He.r)(Ci.p,{}),n=a.containerViewFactory().noDevicesViewFactory(),s=(0,Yi.n)(n.getAbsoluteLocation(),n);return(0,N.jsxs)("div",{ref:s,className:l()(yi,mi,ui),"data-testid":ci,children:[(0,N.jsxs)("ul",{"aria-labelledby":`${Cn} ${li}`,className:ji,children:[(0,N.jsx)(Pa,{Icon:Oa.T,title:m.Ru.get("web-player.connect.device-picker.check-wifi"),subtitle:m.Ru.get("web-player.connect.device-picker.check-wifi-subtitle")}),(0,N.jsx)(Pa,{Icon:Ba.g,title:m.Ru.get("web-player.connect.device-picker.play-from-another"),subtitle:m.Ru.get("web-player.connect.device-picker.play-from-another-subtitle")}),e?(0,N.jsx)(Pa,{Icon:Ua.H,title:m.Ru.get("web-player.connect.device-picker.restart-speaker"),subtitle:m.Ru.get("web-player.connect.device-picker.restart-speaker-subtitle")}):(0,N.jsx)(Pa,{Icon:Fa.i,title:m.Ru.get("web-player.connect.device-picker.switch-to-app"),subtitle:m.Ru.get("web-player.connect.device-picker.switch-to-app-subtitle"),onClick:()=>t("/download")})]}),(0,N.jsxs)("div",{"aria-describedby":ci,children:[(0,N.jsx)(Ia,{spec:a}),i&&(0,N.jsx)(Ea,{spec:a})]})]})},Nn=({devices:e,areWebPlayerCastDevicesAvailable:t})=>{const i=Boolean(e.find((e=>!e.isLocal))),a=e.filter((e=>!e.isActive&&e.name.length>0)),n=i||t;return(0,N.jsxs)("div",{className:l()(pi,mi),children:[(0,N.jsx)(fi,{foundDevices:n}),n?(0,N.jsx)(Ki,{children:(0,N.jsx)(Da,{devices:a,areWebPlayerCastDevicesAvailable:t})}):(0,N.jsx)(kn,{isDesktop:!0})]})};var wn=i(90841);const Rn=()=>{const{currentDevice:e}=(0,oe.l)(),{formattedDeviceName:t}=z(),i=(0,wn.d)(),a=m.Ru.get("web-player.connect.device-picker.this-computer");let n;(0,$i.Mp)(e.type)&&(n=m.Ru.get("web-player.connect.device-picker.google-cast"));const s=[(t??null)&&a,n??null,i].filter(Boolean).join(" • ");return(0,N.jsx)(Ei.j,{semanticColor:"textSubdued",lineClamp:1,children:s})};var En=i(34664);const Ln="cuG1_yCuW2Mnw3H6IUYD",In=()=>{const{currentDevice:e}=(0,oe.l)(),{type:t,isLocal:i,isGroup:a}=e,n=(0,an.g)(),s=(0,We.j)(),{toggleBirdhouse:r}=(0,Ya.r)(),{deviceName:o}=z(),l=(0,En.tf)(t,a,i?n:null),{spec:c,logger:d}=(0,He.r)(Ma.g,{});return(0,N.jsx)(K.v,{id:"device-picker-header",variant:"naked",size:"md",className:Ln,title:o,"data-testid":"device-picker-row-sidepanel",media:(0,N.jsx)(l,{semanticColor:"textBrightAccent","data-testid":"device-icon",role:"presentation"}),onClick:s?()=>{r(),d.logInteraction(c.hitUiReveal())}:void 0,trailing:(0,N.jsx)(ln,{}),subtitle:(0,N.jsx)(Rn,{})})},An="G6For7gcz2GTgCkOeJKc",Tn=()=>{const{isHidden:e,toggleIsSwitchedOn:t,setToggleState:i}=gn();return e?null:(0,N.jsxs)("div",{className:An,children:[(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textBase",as:"label",htmlFor:"jam.broadcasting",children:m.Ru.get("web-player.connect.device-picker.auto-invite-jam-toggle")}),(0,N.jsx)(cn.l,{id:"jam.broadcasting",value:t,onSelected:i,condensed:!0})]})};var _n=i(62960),Dn=i(18089),On=i(7217);const Bn="fkBkl4cpmR6fFGNpsPZx",Un="Wv3hgdJTMsji4hS4an1O",Fn="uqNT_uoUuNHbne2OA1u0",Pn=({openQueue:e})=>{const t=(0,On.D)(),{uri:i}=(0,jn.f)(),{spec:n,logger:s}=(0,He.r)(Ma.g,{}),r=(0,a.useCallback)((()=>{s.logInteraction(n.createJamButtonFactory().hitUiNavigate({destination:i??""}))}),[s,n,i]);return(0,N.jsxs)("div",{className:Bn,children:[(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",as:"label",htmlFor:"jam.broadcasting",className:Un,children:m.Ru.get("web-player.connect.device-picker.start-jam-description")}),(0,N.jsx)(_n.n,{onClick:()=>{r(),t.createSession(),e()},iconLeading:Dn.V,size:"small",className:Fn,children:m.Ru.get("web-player.connect.device-picker.start-jam")})]})};var Mn=i(69466);const Hn="rk32VTG0b6NU0RicbiOH",Vn=()=>{const{openQueue:e}=(0,Mn.R)(),t=(0,fn.g)()?(0,N.jsx)(hn.K,{}):(0,N.jsx)(Pn,{openQueue:e});return(0,N.jsxs)("div",{className:l()(Hn),"aria-label":m.Ru.get("web-player.connect.device-picker.current-device"),role:"group",children:[(0,N.jsx)(In,{}),(0,N.jsx)(Tn,{}),t]})};var Yn=i(30920);const zn="Y5BWxTfO9OmenxMup_H7",qn="s0kxKAi2bTiuoEJhkYph",Gn="Cdlb8uLk1VIkwKmGBViF",Qn=({Icon:e,title:t,subtitle:i,buttonText:n,onClick:s,onDismiss:r})=>{const{spec:o}=(0,He.r)(Ci.p,{}),l=o.containerViewFactory().messageBoxViewFactory({identifier:t}),c=(0,Ke.s)(),u=(0,a.useCallback)((()=>{c.logInteraction(l.dismissMessageBoxFactory().hitUiHide()),r()}),[c,l,r]),g=(0,a.useCallback)((()=>{c.logInteraction(l.recommendedActionButtonFactory().hitUiHide()),s()}),[c,l,s]),p=(0,N.jsxs)("div",{className:Gn,children:[e&&(0,N.jsx)(e,{semanticColor:"textSubdued",size:"small"}),(0,N.jsx)(d.E,{variant:"bodyMediumBold",color:"baseText",children:t})]});return(0,N.jsx)(K.v,{id:"messageBox",variant:"elevated",size:"lg",className:zn,title:p,subtitle:i,paddingBlockStart:"16px",paddingBlockEnd:"16px",footer:(0,N.jsx)(_n.n,{size:"small",onClick:g,children:n}),trailing:(0,N.jsx)(J.H,{className:qn,semanticColor:"textBase",iconOnly:Yn.M,size:"small",onClick:u,condensedAll:!0,"aria-label":m.Ru.get("close")})})},Zn=e=>{if("object"==typeof e&&"custom"in e)return e.custom;switch(e){case"required":return 1e3;case"high":return 500;case"normal":return 300;case"low":return 100;default:return 0}},Wn=e=>{const t=e.filter((e=>e.shouldShow)).sort(((e,t)=>{return i=e.priority,a=t.priority,Zn(i)<Zn(a)?1:-1;var i,a}));return t[0]?t[0]:null};var Kn=i(56428),Jn=i(76754);const Xn=()=>{const{currentDevice:e}=(0,oe.l)(),t=Wn([]),[i,n]=(0,a.useState)(e.isLocal&&null!==t);if((0,Jn.W)(Kn.P.UPDATE,(()=>n(e.isLocal&&null!==t))),null===t||!i)return null;return(0,N.jsx)(Qn,{...t,onDismiss:()=>{t.onDismiss(),n(!1)}})};var $n=i(17198),es=i(39837),ts=i(70986),is=i(42099),as=i(84305);function ns(){return(0,Vi.N)(as.v)}const ss=()=>{const e=ns(),{devices:t,currentDevice:i}=(0,oe.l)(),n=(()=>{const e=ns(),[t,i]=(0,a.useState)([]),n=(0,a.useCallback)((()=>{e.getJamDevices().then((e=>i(e)))}),[e]);return(0,ya.c)(ha.P.SCAN_UPDATE,(()=>n())),(0,a.useEffect)((()=>n()),[n]),t})(),[s,r]=(0,a.useState)(t.map((e=>(0,va.gS)(e)))),o=(0,Ni.dh)((()=>{const a=e.combineJamsWithEntities(t,n,i.connectStateId);r(a)}),100,{leading:!1,trailing:!0});return(0,a.useEffect)((()=>o()),[t,n,i,o]),s},rs="h0XG5HZ9x0lYV7JNwhoA",os="JHlPg4iOkqbXmXjXwVdo",ls="jEsh5c0FZojBDcUF990w",cs=()=>{const e=(0,ts.O)(),t=(0,$n.C)(),i=(0,s.NC)(di.Yr),n=(0,s.NC)(di.Q5),{devices:r}=(0,oe.l)(),o=ss(),{isPlaying:c}=(0,is.GK)(),[d]=(0,G.sV)(),u=(0,a.useRef)(t),g=(0,a.useRef)(d.context.devicePicker?.interactionId);u.current=t,g.current=d.context.devicePicker?.interactionId;const h=(0,oi.d4)((e=>e.playback?.castState??window.cast?.framework.CastState.NO_DEVICES_AVAILABLE)),b=(0,es.Or)(h);return(0,a.useEffect)((()=>()=>{u.current(g.current)}),[g]),(0,a.useEffect)((()=>{e.startActiveDiscovery()}),[e]),(0,N.jsx)(tt._,{label:m.Ru.get("playback-control.connect-picker"),focusTransferId:"DEVICE-PICKER",children:(0,N.jsx)(p.w,{className:l()(rs,{[os]:n}),fixedHeader:(0,N.jsx)(v.a,{title:n?m.Ru.get("connect-picker.connect-brand-title"):m.Ru.get("playback-control.connect-picker"),panel:x.Z.DevicePicker}),children:(0,N.jsxs)("div",{role:"group",className:ls,children:[n?(0,N.jsx)(Vn,{}):(0,N.jsx)(Sn,{isPlaying:c}),n?(0,N.jsx)(Xn,{}):null,(0,N.jsx)(Nn,{devices:i?o:r.map((e=>(0,va.gS)(e))),areWebPlayerCastDevicesAvailable:b})]})})})},ds=()=>null,us=()=>null;var ms=i(53177),gs=i(41205),ps=i(35119),vs=i(69182),xs=i(15947),hs=i(42551);const bs=(0,hs.Mz)([e=>e.ads],(e=>e.embeddedAd)),ys=(0,hs.Mz)(bs,(e=>e?.ad)),js=(0,hs.Mz)(bs,(e=>e?.isOpen||!1)),fs=(0,hs.Mz)(bs,(e=>e?.canShowAd||!1)),Cs=(0,hs.Mz)(bs,(e=>e?.lastTimeInView));var Ss=i(25115),ks=i(46330),Ns=i(29425);const ws=e=>{const t=(0,ks.Z)(e);return!(!t||e&&!(0,Ns.v)(e))&&t?.uid!==e?.uid};var Rs=i(59161);const Es=()=>{const e=(0,oi.wA)(),t=(0,Ss.$)(),i=(0,oi.d4)((e=>e.ui.videoPlayer.uiFlags.npv)),n=(0,s.NC)(Rs.Ym5,{loadingValue:!1}),r=(0,s.NC)(Rs._TI),o=(0,Le.o)((e=>e?.item),((e,t)=>e?.uid===t?.uid)),l=(0,oi.d4)(fs),c=!!(0,oi.d4)(ys),d=(0,oi.d4)(Cs),u=(({canShowEmbeddedAd:e,nvpIsActive:t,trackChanged:i,featureEnabled:n,storeHasAd:s,isFocused:r,enoughTimePassedSinceLastRender:o})=>(0,a.useMemo)((()=>!!e&&t&&i&&n&&r&&!s&&o),[e,t,i,n,s,r,o]))({canShowEmbeddedAd:l,nvpIsActive:i,trackChanged:ws(o),featureEnabled:n,storeHasAd:c,isFocused:t,enoughTimePassedSinceLastRender:!d||Date.now()-d>1e3*r});return(0,a.useEffect)((()=>{u&&e((0,xs.PY)())}),[u,e,o]),null};var Ls=i(17108);const Is=({children:e})=>{const[t,i]=(0,a.useState)(null),n=(0,a.useCallback)((()=>{i(Ls.j.Errored)}),[]),s=(0,a.useMemo)((()=>({state:t,capturePlaybackError:n})),[t,n]);return(0,N.jsx)(Ls.O.Provider,{value:s,children:e})},As=(0,a.lazy)((()=>Promise.all([i.e(9675),i.e(6091),i.e(8557)]).then(i.bind(i,50976)))),Ts=e=>(0,N.jsx)(Is,{children:(0,N.jsx)(As,{...e})});var _s=i(95251),Ds=i(39327),Os=i(63181);const Bs=()=>(0,N.jsx)(N.Fragment,{});var Us=i(41209),Fs=i(43720),Ps=i(65459),Ms=i(30745),Hs=i(4310),Vs=i(31431),Ys=i(48417),zs=i(61516),qs=i(19906);const Gs="ykU0u_RLxGVmkHVI7if7",Qs="KpPP2M5NXZAY5NwqT1uf",Zs=({uri:e})=>{const{spec:t,logger:i}=(0,He.r)(Us.t,{}),a=(0,oi.wA)(),{data:n}=(0,Fs.S)(e),[s,r]=(0,qs.A)(e);if(!n)return null;const{description:o,name:l,images:c}=n,d=(0,zs.t)({avatarImages:c,preferFullBleed:!1});return(0,N.jsxs)(Ys.M,{name:l,openModal:()=>{const e=t.authorAboutModalButtonFactory().hitUiReveal();i.logInteraction(e),a((0,ki.Te)({bio:n.description,images:n.images.slice(0,1),name:n.name}))},children:[(0,N.jsx)(Hs.R,{cardVariant:d,avatarImageSources:c,header:m.Ru.get("web-player.now-playing-view.author-about.title"),name:l}),(0,N.jsxs)("div",{className:Gs,children:[(0,N.jsxs)("div",{className:Qs,children:[(0,N.jsx)(Vs.c,{name:l,uri:e,onLinkClick:()=>i.logInteraction(t.authorNameFactory().hitUiNavigate({destination:e}))}),(0,N.jsx)(Ms.T,{toggleFollow:a=>{a.preventDefault(),a.stopPropagation();const n=s?t.followButtonFactory().hitUnfollow({itemToBeUnfollowed:e}):t.followButtonFactory().hitFollow({itemToBeFollowed:e});i.logInteraction(n),r(!s)},isInLibrary:s})]}),(0,N.jsx)(Ps._,{text:o})]})]})},Ws=({item:e})=>{const t=e.book.authors.at(0)?.uri;return t?(0,N.jsx)(Zs,{uri:t}):null};var Ks=i(98338),Js=i(59275),Xs=i(72410),$s=i(87471),er=i(30544),tr=i(1609),ir=i(43157),ar=i(55908),nr=i(51736),sr=i(26852),rr=i(56863),or=i(19151);var lr=i(70635),cr=i(1520),dr=i(4116);const ur="_QEMUk5U16U3CQn0wvbD",mr="mbkl2P60JUhDqc9qGvp9",gr="Xh6dG3pzi2SS7v4cvZzG",pr="sOdoW26RUwggLToa7xDt",vr="B_TcBcc1BM2yLgvXbh66",xr="tRnhyUQiKOxA3z8mUD_U",hr="_shxqlkLuB52H1iCh_OQ",br="hAwePVlxumRNpdOSpwyV";const yr=a.forwardRef((function({className:e="",segment:t,onClickPlay:i,isPlaying:n},s){const{label:r,Icon:o}=(0,a.useMemo)((()=>function(e){if("TALK"===e.type)return{Icon:tr.L,label:m.Ru.get("playlist.a11y.play",e.title)};const t=e.track.artists?.map((e=>e.name)).join(m.Ru.getSeparator())||"";return{Icon:ir.v,label:m.Ru.get("tracklist.a11y.play",e.track.name,t)}}(t)),[t]),c=(0,a.useCallback)((()=>{i()}),[i]);return(0,N.jsxs)("div",{className:l()(hr,e),children:[n?(0,N.jsx)(cr.J,{className:xr,animated:!0}):(0,N.jsx)("span",{className:xr,children:(0,N.jsx)(o,{iconSize:16,"aria-hidden":"true"})}),(0,N.jsx)(sr.x,{className:vr,iconClassName:br,onClick:c,isPlaying:n,isLocked:!1,playAriaLabel:r,ref:s})]})})),jr=({children:e,onTriggerPlay:t,episodeUri:i,index:a})=>{const{spec:n,logger:s}=(0,He.r)(ar.f,{}),r=(0,Ni.YQ)((()=>{const e=s.logInteraction(n.segmentItemFactory({uri:i,position:a||0}).doubleHitPlay({itemToBePlayed:i}));t(e)}),dr.d,{leading:!0,trailing:!1});return(0,N.jsx)("div",{className:pr,onDoubleClick:r,children:e})},fr=({segment:e,episodeUri:t,index:i})=>{const{spec:n,logger:s}=(0,He.r)(ar.f,{}),{isActive:r,isPlaying:o,onClick:l}=(0,lr.L)({episodeUri:t,start:e.start,stop:e.stop}),c={uri:t},d=function(e){const t=[{url:e.track.album.image}];return{type:or.c.TRACK,uri:e.uri,uid:null,provider:null,images:t,name:e.track.name,mediaType:"audio",duration:{milliseconds:0},album:{type:or.c.ALBUM,uri:e.track.album.uri,name:e.track.album.name,images:t},artists:e.track.artists.map((e=>({type:or.c.ARTIST,name:e.name,uri:e.uri})))}}(e),u=n.segmentItemFactory({uri:t,position:i||0}).playbackButtonFactory(),m=(0,a.useCallback)((()=>{l({}),r&&o?s.logInteraction(u.hitPause({itemToBePaused:t})):r&&!o?s.logInteraction(u.hitResume({itemToBeResumed:t})):s.logInteraction(u.hitPlay({itemToBePlayed:t}))}),[t,r,o,s,l,u]);return(0,N.jsxs)(jr,{onTriggerPlay:l,episodeUri:t,children:[(0,N.jsx)(yr,{segment:e,isActive:r,isPlaying:o,onClickPlay:()=>{m()}}),(0,N.jsx)(rr.d,{context:c,item:d,titleTypeVariant:"bodyMedium",subtitleTypeVariant:"bodySmall",onTitleClick:e=>{s.logInteraction(n.segmentItemFactory({uri:t,position:i||0}).albumLinkFactory({uri:c.uri}).hitUiNavigate({destination:e||""}))},onSubtitleClick:e=>{s.logInteraction(n.segmentItemFactory({uri:t,position:i||0}).artistLinkFactory({uri:e||"",position:0}).hitUiNavigate({destination:e||""}))}})]})},Cr=({segment:e,episodeUri:t,index:i})=>{const{spec:n,logger:s}=(0,He.r)(ar.f,{}),{isActive:r,isPlaying:o,onClick:l}=(0,lr.L)({episodeUri:t,start:e.start,stop:e.stop}),c=function(e){const t=[];return{type:or.c.UNKNOWN,uri:e.uri,uid:null,provider:null,images:t,name:e.title,mediaType:"audio",duration:{milliseconds:0},album:{type:or.c.ALBUM,uri:e.show.uri,name:e.show.name,images:t},artists:[]}}(e),u=n.segmentItemFactory({uri:t,position:i||0}).playbackButtonFactory(),m=(0,a.useCallback)((()=>{l({}),r&&o?s.logInteraction(u.hitPause({itemToBePaused:t})):r&&!o?s.logInteraction(u.hitResume({itemToBeResumed:t})):s.logInteraction(u.hitPlay({itemToBePlayed:t}))}),[t,r,o,s,l,u]);return(0,N.jsxs)(jr,{onTriggerPlay:l,episodeUri:t,children:[(0,N.jsx)(yr,{segment:e,isActive:r,isPlaying:o,onClickPlay:()=>{m()}}),(0,N.jsx)(nr.r,{title:c.name,children:(0,N.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBase",children:c.name})},c.name)]})};var Sr=i(66900),kr=i(69990);function Nr(e){return!!(0,kr.o)().getCapabilities().isSupported&&function(e){const t=e.metadata?.["parent_episode.uri"];return!!t&&(0,$t.gHQ)(t)}(e)}var wr=i(43891);const Rr=(0,ms.mc)((({item:e})=>{const t=e.metadata?.["parent_episode.uri"],i=function(e){const t=(0,kr.o)();return(0,a.useCallback)((async(i,a)=>{if(!e)return[];try{return await t.getSegments(e,i,a)}catch(e){return[]}}),[e,t])}(t),[n,s]=(0,a.useState)([]),r=(0,a.useRef)(!1),o=(0,a.useRef)(0),l=(0,a.useCallback)((()=>{const e=o.current;null!==e&&(r.current||(r.current=!0,i(e,10).then((e=>{s((t=>{const i=t.concat(e);return o.current=i.length+1,i})),r.current=!1}))))}),[i]);return(0,a.useEffect)((()=>{s([])}),[e.uri]),t?(0,N.jsxs)(Sr.w,{className:ur,children:[(0,N.jsx)(Sr.X,{className:mr,children:m.Ru.get("music_and_talk.in_this_episode")}),(0,N.jsx)("div",{className:gr,children:(0,N.jsx)(wr._,{onReachBottom:l,triggerOnInitialLoad:!0,children:n.map(((e,i)=>"MUSIC"===e.type?(0,N.jsx)(fr,{segment:e,episodeUri:t},`${e.uri}-${i}`):(0,N.jsx)(Cr,{segment:e,episodeUri:t},`${e.uri}-${i}`)))})})]}):null}),{name:"NPVInThisEpisode"});var Er=i(31053),Lr=i(13702),Ir=i(35147),Ar=i(36105);const Tr="f6_Fu_ei4TIJWR0wzvTk",_r="TLmzadNIdvV8sYzTuXRg",Dr="MT9De6UrCVQ8Qo6o3ikA",Or=a.memo((()=>{const{cssStyles:e}=(0,Ar.Y)();return(0,N.jsx)("div",{"data-testid":"skeleton-section",className:Tr,style:{"--section-background-base":e?.["--section-background-base"]},"aria-hidden":!0,children:(0,N.jsxs)("div",{className:_r,children:[(0,N.jsx)(Ir.Y,{as:"div",variant:"bodyMediumBold",className:Dr,charCount:8,isLoading:!0}),[20,50,25].map(((e,t)=>(0,N.jsx)(Ir.Y,{as:"div",variant:"bodySmall",className:Dr,charCount:e,isLoading:!0},t)))]})})}));var Br=i(47478),Ur=i(38011),Fr=i(11021);const Pr=(0,a.lazy)((async()=>{const{GatedTopCommentsCard:e}=await Promise.resolve().then(i.bind(i,98463));return{default:e}}));var Mr=i(56308),Hr=i(70012);const Vr=({item:e,spec:t})=>{const i=(0,s.NC)(Rs.xEc),n=(0,Mr.d)(),r=(0,Hr.d)(e.uri)?.episodeOrChapter,o=Nr(e),l={uri:e.uri,numberOfChapters:er.Kp},{data:c,isLoading:d,error:u}=(0,Br.X)({queryKey:["queryNpvEpisode",l],staleTime:er.Ff,gcTime:er.CD,variables:l});if(d&&e.uri&&!u)return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Or,{}),(0,N.jsx)(Or,{})]});const m=(0,Js.SB)(c?.episodeUnionV2),g=(0,Js.lz)(c?.episodeUnionV2);if(!e.uri||!m||d||u)return null;const p=r&&r.type===or.c.EPISODE&&r.transcript&&r.transcript.length>0;return(0,N.jsxs)(Qi.r,{spec:t,children:[n&&(0,N.jsx)(a.Suspense,{fallback:null,children:(0,N.jsx)(Pr,{uri:m.uri})}),(0,N.jsx)($s.N,{episode:m}),!m.originalEpisode&&(0,N.jsx)(Xs.c,{episode:m}),(0,N.jsx)(Ur.F,{episode:m}),!o&&(0,N.jsx)(Ks.I,{episode:m}),i&&g&&(0,N.jsx)(Lr.m,{coverArt:g.coverArt||void 0,description:g.htmlDescription||"",name:g.name,publisher:g.publisher?.name,uri:g.uri}),p&&(0,N.jsx)(Fr.n,{episode:e}),o&&(0,N.jsx)(Rr,{item:e}),(0,N.jsx)(Er.A,{})]})},Yr=({item:e,spec:t})=>(0,Ee.n)()?(0,N.jsx)(Vr,{item:e,spec:t}):(0,N.jsx)(N.Fragment,{}),zr=()=>(0,N.jsx)(N.Fragment,{});var qr=i(21765);const Gr=({onRetry:e})=>(0,N.jsxs)(ae.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"},children:[(0,N.jsx)(d.E,{variant:"bodyMediumBold",semanticColor:"textBase",as:"h3",children:m.Ru.get("ad-formats.sponsored-playlist.scroll-card.error-title")}),(0,N.jsx)(d.E,{variant:"bodyMedium",as:"h4",paddingBottom:(0,qr.po)("base"),children:m.Ru.get("ad-formats.sponsored-playlist.scroll-card.error-subtitle")}),(0,N.jsx)(u.$,{colorSet:"invertedLight",size:"small","aria-label":m.Ru.get("ad-formats.sponsored-playlist.scroll-card.error-button"),onClick:e,children:m.Ru.get("ad-formats.sponsored-playlist.scroll-card.error-button")})]});var Qr=i(74291),Zr=i(93844);const Wr="HYGvtnakneXKb6aXqJxn",Kr="aRVhQtswDWrtCRAGARlQ",Jr="zJoFzjcjEUoPQi08Kon1",Xr="F1xZfSRSYM3onvaF0vJf",$r="QJ8nJ_emE81OXtMnUxmB",eo="XAZjOg9RP1Ee9SpmGKTK",to="ggYn9ejx1nF98py3bdHd",io=({ad:e,uri:t})=>{const i=(0,Zr.Ou)()?.scrollCardAdEventLogger;(0,a.useEffect)((()=>{const a={uri:t};i?.log("viewed",e,a)}),[i,e,t]);const n=(0,a.useCallback)((t=>{i?.log("clicked",e,{event_reason:t})}),[i,e]);return(0,N.jsx)(K.v,{className:Wr,id:"scroll-card-data",layout:"wide",size:"lg",horizontalGap:(0,qr.po)("base"),verticalGap:(0,qr.po)("base"),padding:"0px",media:(0,N.jsx)(Qr.C,{src:e.displayImage.src,size:"lg",placeholder:"blur",className:Kr,alt:`${e.advertiser} cover art`}),title:(0,N.jsx)(de.N,{to:e.clickthroughUrl,onClick:()=>n("title_clicked"),children:(0,N.jsx)(ne.d,{as:"h3",variant:"bodyMediumBold",lineClamp:1,children:e.advertiser})}),subtitle:(0,N.jsx)(Ei.j,{as:"div",lineClamp:2,semanticColor:"textSubdued",children:e.tagline}),body:(0,N.jsx)(de.N,{to:e.clickthroughUrl,onClick:()=>n("button_clicked"),children:(0,N.jsx)(u.$,{colorSet:"invertedLight",size:"small","aria-label":e.buttonMessage||m.Ru.get("ad-formats.learnMore"),as:"h3",children:e.buttonMessage||m.Ru.get("ad-formats.learnMore")})})})};var ao=i(77570),no=i(24040),so=i(33640);const ro=(0,a.memo)((()=>{const e=(0,ao.h)("shimmer");return(0,N.jsx)("div",{ref:e,className:l()(no.A.imageWrapper,so.A.isLoading,Kr)})})),oo=()=>(0,N.jsx)(K.v,{className:l()(Wr,Jr),id:"scroll-card-loading","data-testid":"scroll-card-loading",layout:"wide",size:"lg",horizontalGap:(0,qr.po)("base"),verticalGap:(0,qr.po)("base"),padding:"0px",media:(0,N.jsx)(ro,{}),title:(0,N.jsx)(Ir.Y,{as:"div",variant:"bodySmall",charCount:10,isLoading:!0,className:Xr}),subtitle:(0,N.jsxs)("div",{className:eo,children:[(0,N.jsx)(Ir.Y,{as:"div",variant:"marginal",isLoading:!0,className:$r}),(0,N.jsx)(Ir.Y,{as:"div",variant:"marginal",isLoading:!0,className:$r})]}),body:(0,N.jsx)(Ir.Y,{as:"div",variant:"titleMedium",isLoading:!0,className:to})}),lo=()=>(0,N.jsxs)(ae.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"109px",width:"100%"},children:[(0,N.jsx)(d.E,{variant:"bodyMediumBold",semanticColor:"textBase",as:"h3",children:m.Ru.get("ad-formats.sponsored-playlist.scroll-card.offline-title")}),(0,N.jsx)(d.E,{variant:"bodyMedium",as:"h4",semanticColor:"textSubdued",children:m.Ru.get("ad-formats.sponsored-playlist.scroll-card.offline-subtitle")})]}),co=(0,a.memo)((({ad:e,error:t,loading:i,offline:n,onRetry:s,uri:r})=>{const o=m.Ru.get("ad-formats.sponsored-playlist.scroll-card.title"),l=(0,a.useCallback)((()=>{s?.()}),[s]),c=(u={ad:e,error:t,loading:i,offline:n}).offline?"offline":u.error?"error":u.loading?"loading":u.ad?"ad":"none";var u;if("none"===c)return null;return(0,N.jsx)("section",{"aria-label":"Advertisement",children:(0,N.jsxs)(ae.a,{variant:"elevated",children:[(0,N.jsx)(nr.r,{title:o,children:(0,N.jsx)(d.E,{variant:"bodyMediumBold",semanticColor:"textBase",as:"h3",paddingBottom:(0,qr.po)("base"),children:o})},o),(()=>{switch(c){case"loading":return(0,N.jsx)(oo,{});case"ad":return r?(0,N.jsx)(io,{ad:e,uri:r}):null;case"offline":return(0,N.jsx)(lo,{});default:return(0,N.jsx)(Gr,{onRetry:l})}})()]})})}));co.displayName="ScrollCard";var uo=i(57642),mo=i(18611),go=i(90238),po=i(99129),vo=i(97232),xo=i(52793);const ho=3e5,bo=18e5;var yo=i(72024),jo=i(19239),fo=i(76972),Co=i(17026);function So(e){const t=(0,jo.vh)(),{data:i}=(0,vo.V)(),n=(s=e.uri,r=e.surface,["useGetScrollCardData",s,r]);var s,r;const o=(0,a.useMemo)((()=>((e,t)=>{if(!e)return ho;const i=t?.find((t=>t.spotifyUri===e));return i&&(0,xo.fi)(i)?bo:ho})(e.uri,i)),[e.uri,i]),l=(0,a.useCallback)((t=>{if(!t||0===t.leavebehindAds.length)return null;return(0,yo.iT)(t,e.uri)[0]??null}),[e.uri]),{data:c,isLoading:d,isError:u,error:m,refetch:g}=(0,Zt.I)({queryKey:n,queryFn:()=>(async(e,t)=>(await po.b6(fo.n.getInstance(),(0,uo.Fh)(t),e)).body)(e.uri,e.surface),select:l,enabled:!!e.uri,staleTime:o,retry:!1});if(u&&e.uri&&m){const i=m instanceof Co.O,a=i?m.name:"Error fetching scroll card data",n=i?m.status:void 0;t.send((0,go.G)({error_type:"fetchAdsFailure",error_message:a,http_error_code:n,surface:(0,uo.Fh)(e.surface),request_type:"leavebehindAds",ad_content_origin:(0,yo.Zl)(e.surface)})),(0,mo.Cp)(a)}return{data:c??null,isError:u,isLoading:d,getScrollCardData:(0,a.useCallback)((()=>{e.uri&&g()}),[e.uri,g])}}const ko=(0,a.memo)((()=>{const e=(0,Le.o)((e=>e?.context.uri??null),((e,t)=>e===t)),t=!(0,Ee.n)(),{getScrollCardData:i,data:a,isError:n,isLoading:s}=So({surface:uo.ui.MUSIC_NPV,uri:e??void 0});return e?(0,N.jsx)(co,{ad:a,error:n,onRetry:i,loading:s,offline:t,uri:e}):null}));ko.displayName="ScrollCardWrapper";const No=e=>{const t=(0,s.NC)(Rs.yai),i=(0,s.NC)(Rs.Lct),{data:a}=(0,vo.V)();if(!e)return!1;const n=!!a&&(0,xo.$P)(a,e);return t&&i&&n};var wo=i(99972),Ro=i(44049),Eo=i(67735),Lo=i(54347),Io=i(75742),Ao=i(3337),To=i(75500),_o=i(59216);const Do="BwWUH9yjgY_WvN25wDeP",Oo="cHBYwKeb2FSgzFWglPRH",Bo="HzNOPORl7WOGyK9UyEQ5",Uo="VfpX7TZbPNCABaui6xBp",Fo="_OhUGn8Plh3mRw4awIM5",Po="Sb2rC16jDkGc9eweOU8g",Mo="DMYN160EH08ptMceRIEz",Ho="BO5glvOfX032J6W28Dit",Vo="sTihEgSs3yBFALZdsa2V",Yo="main-nowPlayingView-lyricsGradient",zo="SjlTHRmuefFiB_RQTR9O",qo="KJK5nyHkgL2CCw1mKMt4",Go=({uri:e})=>{const{spec:t,logger:i}=(0,He.r)(_o.X,{}),{mode:a,setMode:n}=(0,To.r)();return(0,N.jsxs)("div",{className:Bo,children:[a===pa.YU.npv&&(0,N.jsx)(u.$,{label:m.Ru.get("web-player.now-playing-view.lyrics.show-less"),colorSet:"invertedLight",size:"small",onClick:()=>{i.logInteraction(t.lyricsModeExpandedFactory({uri:e}).showLessButtonFactory().hitUiHide()),n(pa.YU.static)},children:m.Ru.get("web-player.now-playing-view.lyrics.show-less")}),a===pa.YU.static&&(0,N.jsx)(u.$,{label:m.Ru.get("web-player.now-playing-view.lyrics.show-more"),colorSet:"invertedLight",size:"small",onClick:()=>{i.logInteraction(t.lyricsModePreviewFactory({uri:e}).showMoreButtonFactory().hitUiReveal()),n(pa.YU.npv)},children:m.Ru.get("web-player.now-playing-view.lyrics.show-more")})]})};var Qo=i(80903);const Zo="CYp94DZpsBBc8VTtyKtg",Wo="FmLR481pO58TJmXKoHjK",Ko="PbfyPbvSNDShjhPRRP7M",Jo=({uri:e})=>{const{spec:t,logger:i}=(0,He.r)(_o.X,{}),a=t.lyricsModePreviewFactory({uri:e}).cappedModalFactory(),n=(0,Yi.n)(a.getAbsoluteLocation(),a);return(0,N.jsx)("div",{className:Zo,children:(0,N.jsxs)("div",{className:Wo,ref:n,children:[(0,N.jsx)(d.E,{semanticColor:"textBase",className:Ko,as:"p",children:m.Ru.get("web-player.lyrics.capped.monthly-limit-reached")}),(0,N.jsx)(Qo.k,{onClick:e=>{i.logInteraction(a.cappedLearnMoreButtonFactory().hitNavigateToExternalUri({destination:e}))}})]})})};var Xo=i(96573),$o=i(27689),el=i(97648),tl=i(90153),il=i(58063),al=i(90235);const nl=({uri:e})=>{const{spec:t,logger:i}=(0,He.r)(_o.X,{}),{setMode:n}=(0,To.r)(),s=(0,a.useCallback)((()=>{i.logInteraction(t.lyricsModePreviewFactory({uri:e}).hideLyricsButtonFactory().hitUiHide()),n(pa.YU.none)}),[n,e,i,t]);return(0,N.jsx)(Mi.D,{role:"menuitem",onClick:s,children:m.Ru.get("web-player.now-playing-view.lyrics.hide-option")})},sl=({uri:e})=>(0,N.jsx)(Fi.W,{children:(0,N.jsx)(nl,{uri:e})});var rl=i(66921);const ol=({label:e,onClick:t,iconOnly:i,nodeRef:a})=>(0,N.jsx)(Ai.Zp,{label:e,children:(0,N.jsx)(J.H,{ref:a,className:Vo,iconOnly:i,size:"small",onClick:t,"aria-label":e})}),ll=({uri:e})=>{const{spec:t,logger:i}=(0,He.r)(_o.X,{}),n=t.lyricsModeExpandedFactory({uri:e}),s=(0,Yi.n)(n.getAbsoluteLocation(),n),r=(0,tl.l)(),o=(0,al.F)(),l=(0,a.useRef)(null);(0,X.X)("NPV_OPEN_CINEMA_LYRICS",l,3e3);const c=(0,il.l)(),{isFullScreenSupported:d,toggleFullScreen:u}=(0,rl.H)({refOrElement:document.body});return(0,N.jsxs)("div",{ref:s,className:Oo,children:[c&&d&&(0,N.jsx)(ol,{label:m.Ru.get("web-player.now-playing-view.lyrics.fullscreen"),onClick:async()=>{i.logInteraction(n.buttonFullscreenFactory().hitUiReveal());try{await u()}catch(e){}o("lyrics"),r(si.z.NOW_PLAYING_VIEW)},iconOnly:el.T,nodeRef:l}),(0,N.jsx)(ol,{label:m.Ru.get("web-player.now-playing-view.lyrics.cinema-mode"),onClick:()=>{r(si.z.NOW_PLAYING_VIEW),o("lyrics"),i.logInteraction(n.cinemaModeButtonFactory().hitUiReveal())},iconOnly:Xo.L,nodeRef:l})]})},cl=({uri:e})=>{const{spec:t}=(0,He.r)(_o.X,{}),i=(0,Yi.n)(t.lyricsModePreviewFactory({uri:e}).getAbsoluteLocation(),t.lyricsModePreviewFactory({uri:e}));return(0,N.jsx)("div",{ref:i,className:Oo,children:(0,N.jsx)(_i.b,{placement:"bottom-end",menu:(0,N.jsx)(sl,{uri:e}),children:(0,N.jsx)(Ti.e,{className:Vo,size:"small",condensed:!1,label:m.Ru.get("more")})})})},dl=({uri:e})=>{const{spec:t,logger:i}=(0,He.r)(_o.X,{}),a=(0,Yi.n)(t.lyricsModeHiddenFactory({uri:e}).getAbsoluteLocation(),t.lyricsModeHiddenFactory({uri:e})),{setMode:n}=(0,To.r)(),s=m.Ru.get("web-player.now-playing-view.show.lyrics");return(0,N.jsx)("div",{ref:a,className:l()(Oo,Ho),children:(0,N.jsx)(ol,{label:s,onClick:()=>{n(pa.YU.static),i.logInteraction(t.lyricsModeHiddenFactory({uri:e}).showLyricsButtonFactory().hitUiReveal())},iconOnly:$o.r})})};var ul=i(35473),ml=i(39159);const gl=(0,ms.mc)((({item:e})=>{const t=(0,s.NC)(Rs.L$q),i=(0,a.useRef)(null),{mode:n}=(0,To.r)(),r=(0,a.useRef)(null),o=(0,a.useRef)(null),c=(0,a.useRef)(0),u=n===pa.YU.static,g=t===Rs.vkU.REDUCED_VISIBILITY,{data:p}=(0,Ao.J)(),v=(0,Le.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri));(0,Io.I)(v?.uri,v?.images);const x=(0,a.useCallback)((()=>{c.current=Date.now()}),[]),h=(0,a.useCallback)((({lineRef:e,isActiveLine:t,shouldAnimateScroll:a,activeLineIndex:s,isFirstLine:l})=>{if(n!==pa.YU.npv)return;if(t&&(o.current=e.current??null),!i.current||!r.current)return;let d;if(e.current&&t?d=e.current?.offsetTop-r.current?.offsetTop-16:l&&s<0&&(d=0),void 0===d)return;const u=r.current?.scrollTop,m=Math.abs(u-d),g=i.current.clientHeight,p=Date.now()-c.current<2e3,v=c.current>0&&m>1*g;if(p||v)return;c.current=0;const x="visible"===document.visibilityState&&a?"smooth":"auto";r.current?.scrollTo({top:d,behavior:x})}),[n]);(0,a.useLayoutEffect)((()=>{c.current=0,r.current?.scrollTo({top:0,behavior:"auto"})}),[e.uri]);const b=p?.hasLyrics?p.dynamicColors?.higherContrast:null;if(!p?.hasLyrics)return null;const y=p?.hasLyrics&&!p.isTimeSynced,j={"--lyrics-color-active":b?.textBase.toCSS(ml.a.RGBA)??(y?Eo.ONy:p.colors.activeText),"--lyrics-color-inactive":b?.textSubdued.toCSS(ml.a.RGBA)??p.colors.text,"--lyrics-color-passed":b?.textBase.toCSS(ml.a.RGBA)??ul.Q.fromCSS(p.colors.activeText,.7).toCSS(ml.a.RGBA),"--lyrics-color-background":b?.backgroundBase.toCSS(ml.a.RGBA)??p.colors.background},f="CAPPED"===p?.capStatus;return(0,N.jsxs)(Sr.w,{className:l()(Do,Yo,{[Uo]:u&&!g,[Fo]:u&&g,[Po]:n===pa.YU.npv}),style:j,ref:i,testId:"lyrics-npv-section",children:[(0,N.jsx)(Sr.X,{action:(()=>{switch(n){case pa.YU.npv:return(0,N.jsx)(ll,{uri:e.uri});case pa.YU.static:return(0,N.jsx)(cl,{uri:e.uri});default:return(0,N.jsx)(dl,{uri:e.uri})}})(),className:l()({[Mo]:n===pa.YU.npv}),children:n===pa.YU.static?m.Ru.get("web-player.now-playing-view.lyrics.title-preview"):m.Ru.get("web-player.lyrics.title")}),(0,N.jsxs)("div",{className:l()(zo,{[qo]:n===pa.YU.npv}),ref:r,onWheel:x,onScroll:x,children:[y&&n===pa.YU.npv&&(0,N.jsx)(d.E,{as:"p",variant:"bodySmall",dir:"auto",style:{color:p.colors.text},children:m.Ru.get("web-player.lyrics.unsynced")}),(0,N.jsx)(Lo.x,{trackUri:e.uri,data:{...p,isTimeSynced:n!==pa.YU.static&&p.isTimeSynced},format:"card",onActiveLineChange:h,isSnippet:n===pa.YU.static})]}),f?(0,N.jsx)(Jo,{uri:e.uri}):(0,N.jsx)(Go,{uri:e.uri})]})}),{name:"NPVLyrics"});var pl=i(96428),vl=i(28617),xl=i(61011),hl=i(67640),bl=i(32765),yl=i(26427),jl=i(22730),fl=i(53169),Cl=i(52936),Sl=i(34886),kl=i(16774),Nl=i(39052),wl=i(70847);const Rl="Kz3HNT1PWTHOL6wjYXb8",El="Fip8h1J04RvF8_CRfdwc",Ll="WEz9K1UHOS2wrRWQmZBo",Il="AUxek3jYdcq9XPBwL7N0",Al=({images:e,breakpoint:t,type:i,name:a,isPlaying:n,onClick:s,...r})=>(0,N.jsxs)("div",{className:El,children:[(0,N.jsx)("div",{className:Ll,children:(0,N.jsx)(Nl.e,{images:e,breakpoint:t,type:i,name:a,...r})}),(0,N.jsx)("div",{className:l()(Rl,{[Il]:i===or.c.ARTIST||i===or.c.USER}),children:(0,N.jsx)(wl.R,{onClick:s,isPlaying:n,version:wl.H.transparent,size:"small"})})]});var Tl=i(84825),_l=i(99244),Dl=i(72432);function Ol({uri:e,spec:t,logger:i,images:n}){const{usePlayContextItem:s}=(0,Dl.P)({uri:e},{featureIdentifier:"track"}),{isPlaying:r,isActive:o,togglePlay:l}=s({uri:e}),c=(0,a.useCallback)((()=>{const a=(0,Tl.$I)({spec:t.playbackButtonFactory(),logger:i,uri:e,isActive:o,isPlaying:r});l({loggingParams:a})}),[t,i,e,o,r,l]);return(0,N.jsx)(Al,{type:or.c.TRACK,size:_l.Qe.SIZE_48,images:n??[],breakpoint:kl.e.SMALL,name:"",loadingMode:"lazy",isPlaying:r,onClick:c})}var Bl=i(38042),Ul=i(59375);const Fl="xwokxeEfMKnFFg0UPVC7",Pl="mNgLTx6k86JO7fS8CBx5",Ml="k1ZhEUZAYffOk3UxUsYF",Hl="toF4isn16zybsTjDktbg",Vl="pXKTpGpCyvyKgwx858dg",Yl="TGaA9GNwNHNqOI1puGsG",zl="WbAVELAe4MYolhkCc3Fi",ql="dbxGYAFrGj4AmrkUZUF_",Gl="R9vTZwai2jSPTWVMsiwJ",Ql="jgrHQqqua05ZPua5D9FG",Zl="RuZBN01h_ndf_5HWz8PD",Wl="A80fpjJSB0qHk0hL0C9x",Kl="koRjwkroF5WiR0X2mPtc",Jl="KLD8LzZlxKsRrqV4j2EP";function Xl({spec:e,logger:t,uri:i}){const n=(0,a.useCallback)((a=>{const n=e.heartButtonFactory().hitLike({itemToBeLiked:i}),s=e.heartButtonFactory().hitRemoveLike({itemNoLongerLiked:i});t.logInteraction(a?n:s)}),[e,i,t]);return(0,N.jsx)(Ul.b,{onClick:n,uri:i,size:Bl.t.sm,className:zl})}var $l=i(60749),ec=i(97),tc=i(99893),ic=i(94545),ac=i(2897),nc=i(85370);function sc({spec:e,logger:t,track:i}){const{badges:n,hasBadges:s}=(0,nc.b)({isExplicit:i.contentRating?.label===ac.x7.Explicit,isMOGEFRestricted:i.contentRating?.label===ac.x7.NineteenPlus}),r=(i,a)=>()=>{const n=e.artistLinkFactory({position:a,uri:i}).hitUiNavigate({destination:i});t.logInteraction(n)};return(0,N.jsx)(Ei.j,{dir:"auto",children:(0,N.jsxs)(d.E,{semanticColor:"textSubdued",variant:"bodySmall",className:Ql,children:[s&&(0,N.jsxs)("span",{className:ql,children:[n.explicit&&(0,N.jsx)(tc.U,{}),n.nineteen&&(0,N.jsx)(ic.q,{size:16,className:Gl})]}),(0,N.jsx)(d.E,{semanticColor:"textSubdued",variant:"bodySmall",children:m.Ru.get("song")}),(0,N.jsx)(d.E,{semanticColor:"textSubdued",variant:"bodySmall",children:(0,N.jsx)(N.Fragment,{children:"•"})}),(0,N.jsx)("span",{className:Zl,children:i.artists.items.map(((e,t,i)=>(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)(Ii.h,{menu:(0,N.jsx)(ec.t,{uri:e.uri}),children:(0,N.jsx)($l.N_,{to:e.uri,onClick:r(e.uri,t),children:(0,N.jsx)(d.E,{variant:"bodySmall",className:Kl,children:e.profile.name})})}),t<i.length-1&&m.Ru.getSeparator()]},`${e.uri}-${t}`)))})]})})}var rc=i(9735);const oc=(0,ms.mc)((({track:e,position:t})=>{const{spec:i,logger:a}=(0,rc.D)(jl.i,{data:{position:t,uri:e.uri,reason:""}}),{isActive:n}=(0,is.l_)(e.uri);return(0,N.jsx)("div",{className:Yl,children:(0,N.jsx)(Ii.h,{menu:(0,N.jsx)(fl.P,{uri:e.uri}),children:(0,N.jsx)(Cl.k,{isActive:n,id:e.uri,size:"lg",onClick:()=>{},isRedundantOnClick:!0,variant:"elevated",hoverBackgroundColor:"backgroundElevatedHighlight",activeBackgroundColor:"backgroundElevatedBase",className:Jl,breakpoint:kl.e.SMALL,media:(0,N.jsx)(Ol,{uri:e.uri,spec:i,logger:a,images:e.albumOfTrack?.coverArt?.sources??[]}),title:(0,N.jsx)(Sl.U,{lineClamp:1,children:e.name}),subtitle:(0,N.jsx)(sc,{spec:i,logger:a,track:e}),trailing:(0,N.jsx)(Xl,{spec:i,logger:a,uri:e.uri})})})})}),{name:"RelatedAudioTracksChild"}),lc=(0,ms.mc)((({data:e,item:t,position:i=0,fullBleedGap:a=0,carouselCardWidth:n=280})=>{const{spec:s,logger:r}=(0,rc.D)(hl.f,{data:{identifier:"related-audio-tracks",position:i,uri:t.uri}}),o=(0,Yi.n)(s.getAbsoluteLocation(),s),c=m.Ru.get("web-player.now-playing-view.related-audio-tracks-title");if(!t.uri||"Track"!==e?.trackUnion.__typename||0===e.trackUnion.associationsV3?.unmappedVideoTrackAssociations.items.length)return null;const d=e.trackUnion.associationsV3.unmappedVideoTrackAssociations.items;return(0,N.jsx)(Sr.w,{ref:o,className:Ml,style:{"--full-bleed-gap":`${a}px`,"--carousel-shelf-element-width":`${n}px`},children:(0,N.jsxs)(Qi.r,{spec:s,children:[(0,N.jsx)(Sr.X,{className:l()(Pl),children:c}),(0,N.jsx)(bl.FN,{noFocusManagement:!0,role:"presentation",chevronsClassName:Fl,scrollContentClassName:l()(Vl),scrollerClassName:l()(Hl),scrollingMethod:bl.Hv.SNAP,scrollSnapAlign:"start",wheelScrollEnabled:!1,dragToScrollOptions:{isDisabled:!1},showButtons:bl.C_.ON_HOVER,onNavigationClick:()=>r.logInteraction(s.shelfHeaderFactory().shelfCarouselControlsFactory().shelfCarouselControlsPreviousFactory().hitUiReveal()),edgeGradients:bl.TB.NONE,children:(0,N.jsx)(xl.FK,{className:Wl,"aria-label":c,items:d,layout:"stack",children:e=>{if("Track"!==e.associatedTrack?.data.__typename)return null;const t=e.associatedTrack.data;return(0,N.jsx)(xl.KP,{id:t.uri,"aria-label":t.name,children:(0,N.jsx)(yl.A,{children:(0,N.jsx)(oc,{track:t,position:d.indexOf(e)})})})}})})]})})}),{name:"RelatedAudioTracks"});var cc=i(62409),dc=i(60751);const uc=({item:e,spec:t})=>{const i=(0,s.NC)(Rs.LX5),a=(0,s.NC)(Rs.RsN),n=No(e?.metadata?.context_uri),{loading:r,error:o,data:l}=(0,dc.i)(e),c=(0,s.NC)(Rs.L$q),d=Nr(e);if(r&&e.uri&&!o)return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Or,{}),(0,N.jsx)(Or,{}),(0,N.jsx)(Or,{})]});if(!e.uri||"Artist"!==l?.artistUnion.__typename||"Track"!==l?.trackUnion.__typename||r||o)return null;const{profile:u,stats:m,visuals:g,profile:{externalLinks:p}}=l.artistUnion,{credits:v}=l.trackUnion,x=c!==Rs.vkU.CONTROL;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(Qi.r,{spec:t,children:[n&&(0,N.jsx)(ko,{}),x&&(0,N.jsx)(gl,{item:e}),i&&(0,N.jsx)(cc.a,{data:l,item:e}),a&&(0,N.jsx)(lc,{data:l,item:e,position:1+Number(x)+Number(i)}),(0,N.jsx)(wo.F,{artistUri:l.artistUnion.uri,artist:u,stats:m,visuals:g,externalLinks:p.items}),v&&(0,N.jsx)(Ro.V,{data:v,trackUri:e.uri}),(0,N.jsx)(vl.I,{artistId:l.artistUnion.id,data:l.artistUnion.goods.concerts}),(0,N.jsx)(pl.J,{artistId:l.artistUnion.id,artistUri:l.artistUnion.uri,merch:l.trackUnion.merch.items}),d&&(0,N.jsx)(Rr,{item:e})]})})},mc=({item:e,spec:t})=>(0,Ee.n)()&&e.artists[0]?.uri?(0,N.jsx)(uc,{item:e,spec:t}):(0,N.jsx)(N.Fragment,{});var gc=i(52613),pc=i(52887),vc=i(90471);const xc=({item:e,spec:t})=>(0,Ns.v)(e)&&!e.isLocal?(0,N.jsx)(mc,{item:e,spec:t}):(0,Ns.v)(e)&&e.isLocal?(0,N.jsx)(zr,{}):(0,vc.p)(e)?(0,N.jsx)(Yr,{item:e,spec:t}):(0,pc.d)(e)?(0,N.jsx)(Ws,{item:e}):(0,gc.N)(e)?(0,N.jsx)(Bs,{}):null;var hc=i(6559),bc=i(6268),yc=i(64050),jc=i(93553),fc=i(90833);const Cc="Ez4qKWmsDLh3iWdsnhKb",Sc="ekcURLG5sTWx5S7E_Ul_",kc="_ChTSMj9kopaozdg25FG",Nc=(0,a.forwardRef)((({spec:e,logger:t},i)=>{const n=(0,jo.mv)(),s=n.operatingSystem===fc.f.macOS?(0,$a.bj)("images/download-page-image-mac.png"):(0,$a.bj)("images/download-page-image.png");const{downloadUrl:r}=(0,jc.z)(),o=(0,a.useCallback)((()=>{t.logInteraction(e.buttonDownloadFactory().hitNavigateToExternalUri({destination:r})),window.open(r,"_blank")}),[r,t,e]);return(0,N.jsxs)("div",{className:Cc,ref:i,children:[(0,N.jsx)("div",{className:Sc,style:{"--background-image":`url(${s})`}}),(0,N.jsxs)("div",{className:kc,children:[(0,N.jsx)(d.E,{variant:"titleMedium",semanticColor:"textBase",children:m.Ru.get("web-player.now-playing-view.web2desktop-funnel.title",{device:(0,yc.e)(n.operatingSystem)})}),(0,N.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:m.Ru.get("web-player.now-playing-view.web2desktop-funnel.subtitle")}),(0,N.jsx)(u.$,{size:"medium",colorSet:"brightAccent",onClick:o,style:{alignSelf:"flex-start"},"aria-label":m.Ru.get("web-player.now-playing-view.web2desktop-funnel.button"),children:m.Ru.get("web-player.now-playing-view.web2desktop-funnel.button")})]})]})}));var wc=i(76791);const Rc="Yl2wNWzQgsRb49UB30No",Ec="Ko2eaQC7YRLTy1QsIY4Q";function Lc(){const e=(0,bc.K)(),{spec:t,logger:i}=(0,He.r)(hc.l,{}),n=(0,Yi.n)(t.getAbsoluteLocation(),t),s=(0,a.useCallback)((()=>{i.logInteraction(t.buttonSearchFactory().hitFocusInputField()),document.querySelector("[data-top-bar-search]")?.focus()}),[i,t]),r=(0,wc.S)((0,U.V)());return e&&r?(0,N.jsx)(Nc,{spec:t,ref:n,logger:i}):(0,N.jsxs)("div",{className:Rc,ref:n,children:[(0,N.jsx)(d.E,{variant:"titleSmall",semanticColor:"textBase",className:Ec,children:m.Ru.get("queue.fine-something")}),(0,N.jsx)(u.$,{size:"small",colorSet:"brightAccent",onClick:s,children:m.Ru.get("web-player.now-playing-view.empty-state-cta")})]})}var Ic=i(58230),Ac=i(8335),Tc=i(29552),_c=i(64027),Dc=i(44463),Oc=i(67814),Bc=i(64688),Uc=i(28054);const Fc="KHaAkbA62j5I7pcLsDAx",Pc="Zaorh8_jZ8Vlyn3v2N3B",Mc="jKvr1cqkZZXpH5z92z9b",Hc="peN_VMHSmvTVUx9rneyY",Vc=({context:e,item:t,index:i,isVisible:a})=>{const{spec:n,logger:s}=(0,rc.D)(vs.J,{}),{draggable:r,onDragStart:o}=(0,Uc.P)(),{ref:c,inView:d}=(0,Ac.Wx)({threshold:.5,initialInView:!0});return(0,N.jsx)("div",{className:l()(Fc,{[Pc]:a}),"data-testid":"minimized-track-visual-enhancement",children:(0,N.jsx)(Ii.h,{menu:(0,N.jsx)(Ds.W,{context:e,item:t}),children:(0,N.jsx)("div",{draggable:r&&(0,Ns.v)(t),onDragStart:e=>{o(e,{itemUris:[t.uri],dragLabelText:(0,Bc.r)(t)})},ref:c,children:(0,N.jsx)(Oc.R,{uri:e.uri,owner:e.metadata?.context_owner,children:(0,N.jsx)(Dc.e,{context:t.type===or.c.TRACK?t.album:e,item:t,index:i,isVisible:!0,onClick:()=>{s.logInteraction(n.coverArtFactory({uri:t.uri}).hitUiNavigate({destination:t.type===or.c.TRACK?t.album.uri:t.uri}))},adEventReason:Tc.c.COVER_ART,children:(0,N.jsx)(_c.b,{className:l()(Mc,{[Hc]:d}),images:t.images??[],type:t.type,maxSize:56,desiredLabel:"small"})})})})})})};var Yc=i(66590),zc=i(91119);const qc="TkDZFBZ0IPbGaHDxeCci",Gc="bBG9E6mmFFC74pSkqU0o",Qc=({ad:e,backgroundColor:t,onClick:i})=>{const n=(0,zc.H)(e.clickthroughUrl),s=e.metadata?.buttonMessage||m.Ru.get("ad-formats.learnMore");return(0,N.jsx)(de.N,{to:n,"data-testid":"ad-companion-card",onClick:i,className:qc,children:(0,N.jsx)(K.v,{style:{backgroundColor:t},className:Gc,onClickHint:m.Ru.get("ad-formats.learnMore"),variant:"tinted",horizontalGap:(0,qr.po)("looser"),id:e.adId,title:(0,N.jsx)(ne.d,{variant:"bodySmallBold",children:e.metadata.advertiser||m.Ru.get("ad-formats.learnMore")}),trailing:(0,N.jsx)(a.Suspense,{fallback:(0,N.jsx)(rn.V,{}),children:e.metadata?.advertiser?(0,N.jsx)(u.$,{colorSet:"invertedLight",size:"small",children:s}):(0,N.jsx)(rn.V,{"data-testid":"embedded-ad-cta-button-fallback",semanticColor:"textBase"})})})})};var Zc=i(87022);const Wc="wibNcSZSkSmE1N7F0QbG",Kc="xIrPThBgWj2hMwWDOcVq",Jc=({onDismiss:e})=>(0,N.jsxs)("div",{className:Kc,children:[(0,N.jsx)(Zc.v,{colorSet:"overMedia",className:Wc,children:(0,N.jsx)(d.E,{variant:"marginalBold",semanticColor:"textBase",children:m.Ru.get("ad-formats.advertisement")})}),(0,N.jsx)(u.$,{"aria-label":m.Ru.get("ad-formats.dismissAd"),colorSet:"overMedia",iconOnly:Yn.M,onClick:e,size:"small"})]});i(98273);var Xc=i(9131),$c=i(73848);const ed="YPTXM8u2OcJuJskm6uwv",td="QRqQ5S1T7WIBTZzJ6cAh",id=({ad:e,onClick:t,onLoad:i,onError:a})=>{const n=e.display.reduce(((e,t)=>(t.url&&e.push({url:t.url,width:t.width,height:t.height}),e)),[]),s=(0,Xc.h)(n??void 0,{desiredSize:384}),r=(0,$c.m)({imageUriOrUrl:s});return(0,N.jsx)(de.N,{to:e.clickthroughUrl,onClick:t,className:ed,"data-testid":"embedded-ad-creative-link",children:(0,N.jsx)(ct._,{loading:"eager",src:r,className:td,onLoad:i,onError:a})})};var ad=i(87105);var nd=i(34720);const sd="XOqwMsxI9nljlJz4i3za",rd=({ad:e})=>{const t=(0,oi.wA)(),i=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(0,s.NC)(Rs.vDv),{useVisibilityLogging:l,handleCreativeLoadedWithVisibility:c,handleCreativeLoaded:d,handleCreativeError:u,handleClickEvent:m,handleDismissEvent:g,handleEndEvent:p}=(({ad:e,creativeRef:t,entranceAnimationRef:i,exitAnimationRef:n})=>{const r=(0,s.NC)(Rs.qPh),o=(0,oi.wA)(),l=(0,a.useRef)(!1),c=(0,a.useRef)(!1),d=(0,a.useRef)(!1),u=(0,a.useRef)(!1),[m,g]=(0,a.useState)(void 0),{visibilityState:p}=(0,ad.x)({target:m}),[v,x]=(0,a.useState)(!1),{adEventLogger:h,embeddedNPVAdEventLogger:b,embeddedAdErrorLogger:y}=(0,Zr.CO)(),{context:j,item:f}=(0,Le.o)((e=>e),Os.F)||{context:null,item:null};(0,a.useEffect)((()=>{t.current&&g(t.current)}),[t]),(0,a.useEffect)((()=>{"visible_100"!==p&&"visible_50"!==p||!v||c.current||!r||i.current?.finished.then((()=>{h.log("viewed",e),c.current=!0})),r&&c.current&&"running"!==n.current?.playState&&"paused"!==n.current?.playState&&"finished"!==n.current?.playState&&h.log(p,e)}),[p,v,h,e,n,i,r]);const C=(0,a.useCallback)((()=>{x(!0),b.log("start",e,{context_uri:j?.uri,track_uri:f?.uri}),l.current=!0}),[e,j?.uri,b,f?.uri]),S=(0,a.useCallback)((()=>{l.current||c.current||(h.log("viewed",e),b.log("start",e,{context_uri:j?.uri,track_uri:f?.uri}),l.current=!0,c.current=!0)}),[e,h,j?.uri,b,f?.uri]),k=(0,a.useCallback)((()=>{d.current||(h.log("errored",e,{event_reason:"creative load error"}),y.log("error",e,{error_message:"creative load error"}),o((0,xs.Xo)()),d.current=!0)}),[e,h,o,y]),N=(0,a.useCallback)((()=>{h.log("clicked",e),b.log("click",e,{context_uri:j?.uri,track_uri:f?.uri}),o((0,xs.Xo)())}),[e,h,b,j?.uri,f?.uri,o]),w=(0,a.useCallback)((()=>{h.log("dismissed",e),o((0,xs.Xo)())}),[e,h,o]),R=(0,a.useCallback)((()=>{u.current||(h.log("ended",e),b.log("end",e,{context_uri:j?.uri,track_uri:f?.uri}),u.current=!0)}),[e,h,b,j?.uri,f?.uri]);return{useVisibilityLogging:r,handleCreativeLoadedWithVisibility:C,handleCreativeLoaded:S,handleCreativeError:k,handleClickEvent:N,handleDismissEvent:w,handleEndEvent:R}})({ad:e,creativeRef:i,entranceAnimationRef:n,exitAnimationRef:r});(0,a.useEffect)((()=>{i.current&&(n.current=i.current.animate([{opacity:0,transform:"translateY(-100%)"},{opacity:1,transform:"translateY(0)"}],{duration:350,fill:"forwards",easing:"ease-out"}))}),[i]),(0,a.useEffect)((()=>{const e=setTimeout((async()=>{i.current?(r.current=i.current.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(-100%)"}],{duration:350,fill:"forwards",easing:"ease-out"}),await r.current.finished,t((0,xs.Xo)())):t((0,xs.Xo)())}),1e3*o);return()=>{p(),t((0,xs.Xo)()),clearTimeout(e)}}),[t,o,p]);const v=(0,nd.z)(e.display[0]?.url,Yc.CpN,"colorDark");return(0,N.jsxs)("div",{ref:i,className:sd,"data-testid":"embedded-ad",children:[(0,N.jsx)(Jc,{onDismiss:g}),(0,N.jsx)(id,{ad:e,onClick:m,onLoad:l?c:d,onError:u}),(0,N.jsx)(Qc,{ad:e,backgroundColor:v,onClick:m})]})};var od=i(81952),ld=i(58239),cd=i(57094);const dd=(0,ms.mc)((()=>{const e=(0,a.useContext)(tt.s),t=(0,cd.a)({tryAvoidGraphQLFetching:!1});return t?.canvas&&e?(0,N.jsx)(ld.Gg,{fileId:t.canvas.fileId,canvasUrl:t.canvas.url,canvasType:t.canvas.type,canvasUri:t.canvas.uri,playerContainerClass:"canvasVideoContainerNPV",playbackType:ld.RT.LoopOnPlayback,allowAspectRatioFix:!0,mouseHoverRef:e,useContainerMouseOverEvents:!1}):null}),{name:"NPVCanvas"});var ud=i(43039),md=i(91546),gd=i(33799),pd=i(19672),vd=i(30254),xd=i(57551),hd=i(71990),bd=i(64589),yd=i(62138),jd=i(33361);const fd="main-nowPlayingView-nowPlayingWidget",Cd="T5_sYfKJ2efL3n3dFNuN",Sd="bLX5l9C_iEfonbMKiFD_",kd="sJHheSrjFUt_MAcNrUXQ",Nd="hhFdIYRyHsqlCHy7T_8A",wd="main-nowPlayingView-nowPlayingGrid",Rd="main-nowPlayingView-contextItemInfo",Ed="O5NOY8Xw4NH0IhBZu8tm",Ld="DFvRASpHOFAoziM4w7En",Id="main-nowPlayingView-coverArtContainer",Ad="ylBRlfNqGnzVa4kjUQGP",Td="E08D6ucrHuPJYzzGO7HG",_d="hjyiWzPtKHn_5kCe9vyg",Dd="pUIBQ9cykHKYx2A2ZIPA",Od="_q9LkNJJIpxoOkOFI2Nd",Bd="S6W0kreMgaIXYWSEYHya",Ud="hCImOEZCJwYaSy2r1Xgx",Fd="GY_emVGtuRR8FWeKK9je",Pd="main-nowPlayingView-trackInfo",Md="eEiwEPDfVRD0HKjYM_dq",Hd=({item:e,spec:t})=>{const i=(0,Ke.s)(),n=(0,a.useCallback)((a=>{const n=a?t.heartButtonFactory().hitLike({itemToBeLiked:e.uri}):t.heartButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});i.logInteraction(n)}),[e.uri,i,t]),s=(0,vd.v)(e),r=(0,b.y)();return s?(0,N.jsx)(pd.g,{uri:e.uri,size:r===h.E.MEDIUM?"medium":"small",className:Nd}):(0,Ns.v)(e)&&!e.isLocal?(0,N.jsx)(Ul.b,{uri:e.uri,size:r===h.E.MEDIUM?Bl.t.sm:Bl.t.xs,onClick:n,className:Nd}):(0,vc.p)(e)?(0,N.jsx)(md.b,{uri:e.uri,size:r===h.E.MEDIUM?Bl.t.sm:Bl.t.xs,onClick:n,className:Nd,condensed:!0}):null},Vd=({context:e,item:t})=>{const{spec:i,logger:a}=(0,rc.D)(vs.J,{}),{spec:n}=(0,He.r)(ud.p6,{data:{identifier:ud.gw.DESKTOP}}),s=(0,jd.X)(),r=(0,yd.C)(),o=(0,b.y)();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(gd.w,{className:l()(Ld,kd),uri:t.uri,sharingInfo:null,condensedAll:!0,onClick:()=>{a.logInteraction(i.shareButtonFactory({uri:t.uri}).hitCopyToClipboard())},ariaLabel:(0,$t.gHQ)(t.uri)?m.Ru.get("context-menu.copy-episode-link"):m.Ru.get("context-menu.copy-track-link"),size:o===h.E.MEDIUM?"medium":"small"}),(0,N.jsx)(xd.a,{context:e,item:t,className:l()(Ed,Cd),onClick:()=>{a.logInteraction(n.hideButtonFactory().hitRemoveRecommendation({recommendedItemUri:t.uri,contextUri:e.uri}))}}),s&&r&&(0,bd.N)(t)?(0,N.jsx)(Qi.r,{spec:i,children:(0,N.jsx)("div",{className:Ed,children:(0,N.jsx)(hd.o,{contextUri:t.metadata?.context_uri??e.uri,id:t.uid??void 0,uri:t.uri,isActive:!0})})}):(0,N.jsx)("div",{className:Ed,children:(0,N.jsx)(Hd,{item:t,spec:i})})]})};var Yd=i(76991),zd=i(79891),qd=i(38904),Gd=i(65614),Qd=i(81231),Zd=i(86541),Wd=i(52593);let Kd=function(e){return e[e.NONE=0]="NONE",e[e.COVER_ART=1]="COVER_ART",e[e.VIDEO_OVER_PIP_PLACEHOLDER=2]="VIDEO_OVER_PIP_PLACEHOLDER",e[e.VIDEO_OVER_CONNECT_PLACEHOLDER=3]="VIDEO_OVER_CONNECT_PLACEHOLDER",e[e.CANVAS=4]="CANVAS",e}({});const Jd=()=>{const e=(0,Os.L)(),t=(0,M.l)(),{videoPlayerMode:i}=(0,Zd.d)(),{isSongVideo:a,isSongVideoPlayingVideo:n}=(0,Qd.k)(),s=(0,oi.d4)((e=>e.ads?.vto)),{showCanvasInNPV:r}=(0,cd.a)({tryAvoidGraphQLFetching:!0});if(!e)return Kd.NONE;const{item:o}=e;return i===Wd.Kz.documentPip||i===Wd.Kz.pip?Kd.VIDEO_OVER_PIP_PLACEHOLDER:o?.type===or.c.AD&&s?.isMinimized&&"audio"!==o?.mediaType?Kd.NONE:o?.type!==or.c.EPISODE||"video"!==o?.mediaType&&"mixed"!==o?.mediaType?a&&n?t?Kd.VIDEO_OVER_CONNECT_PLACEHOLDER:Kd.NONE:r?Kd.CANVAS:Kd.COVER_ART:t?Kd.VIDEO_OVER_CONNECT_PLACEHOLDER:Kd.NONE};var Xd=i(63596);const $d=(0,ms.mc)((({hideContextItemInfo:e=!1})=>{const t=(0,Os.L)(),i=Jd(),{draggable:n,onDragStart:r}=(0,Uc.P)(),[o,c]=(0,a.useState)(!0),d=!(0,Ee.n)(),{spec:u,logger:m}=(0,rc.D)(vs.J,{}),{spec:g}=(0,He.r)(Ic.E,{data:{uri:t?.item.uri??"",identifier:Wd.Kz.npv}}),{isSongVideo:p}=(0,Qd.k)(),v=i===Kd.CANVAS,x=i===Kd.COVER_ART||d,h=(0,oi.d4)(ys),b=((e,t)=>{const[i,n]=(0,a.useState)(!1),r=(0,a.useRef)(),o=(0,s.NC)(Rs.Ym5,{loadingValue:!1}),l=(0,oi.d4)(js),c=(0,oi.d4)(ys),d=(0,Ss.$)(),u=ws(t),m=(0,a.useMemo)((()=>Boolean(l&&o&&e)),[e,o,l]),g=(0,a.useCallback)((()=>{r.current&&(clearTimeout(r.current),r.current=null)}),[]);return(0,a.useEffect)((()=>{u&&(g(),n(!1))}),[u,g]),(0,a.useEffect)((()=>m&&c?(r.current=setTimeout((()=>{n(!0)}),2e3),g):(n(!1),()=>{})),[m,g,c,u]),(0,a.useMemo)((()=>Boolean(m&&c&&l&&i&&d)),[m,c,l,i,d])})(x,t?.item),y=(0,a.useRef)(null),j=(0,a.useRef)(null),f=(0,a.useRef)(null),C=!(0,Ot.j)(),[S,k]=(0,a.useState)(null),w=(0,s.NC)(Rs.qes),R=(0,tl.l)();if(C&&v&&y.current&&f.current&&(k(f.current),setTimeout((()=>{k(null)}),600)),y.current=x,j.current=v,f.current=t,null===t)return null;const{context:E,item:L,index:I}=t;return(0,N.jsx)("div",{className:l()(fd),children:(0,N.jsxs)("div",{className:wd,children:[(0,N.jsxs)("div",{onClick:()=>v&&c(!o),className:l()(Id,{[_d]:v,[Ud]:x,[Dd]:o,[Fd]:b}),children:[b&&h&&(0,N.jsx)(rd,{ad:h}),(0,N.jsx)("div",{className:l()(Ad,{[Od]:v||b}),"aria-hidden":v||b,"data-testid":"track-visual-enhancement",children:(0,N.jsx)(Yd.h,{context:S?.context||E,item:S?.item||L,index:I,canSwitchVisuals:!0,isMinimized:b})}),i===Kd.VIDEO_OVER_PIP_PLACEHOLDER&&(0,N.jsx)(qd.k,{}),i===Kd.VIDEO_OVER_CONNECT_PLACEHOLDER&&(0,N.jsx)(Gd.V,{}),(0,N.jsx)("div",{className:l()(Td,{[Bd]:!v}),"aria-hidden":"true",children:(0,N.jsx)(Ii.h,{menu:(0,N.jsx)(Ds.W,{context:E,item:L,canSwitchVisuals:!0}),children:(0,N.jsx)("div",{draggable:n,onDragStart:e=>{r(e,{itemUris:[L.uri],dragLabelText:(0,Bc.r)(L)})},children:v&&(0,N.jsx)(dd,{uri:L.uri})})})}),(0,N.jsx)(zd.F,{})]}),p&&!d&&(0,N.jsx)(Xd.L,{className:v?Md:"",createImpressionSpec:e=>g.toggleAudioVideoButtonFactory({identifier:e?"switch_to_audio":"switch_to_video"}),onClick:e=>{"switch_to_video"===e&&w&&R(si.z.NOW_PLAYING_VIEW),m.logInteraction(g.toggleAudioVideoButtonFactory({identifier:e}).hitPlay({itemToBePlayed:L.uri}))}}),e?null:(0,N.jsxs)("div",{className:l()(Rd,{[Sd]:v}),children:[(0,N.jsx)(Vc,{isVisible:b,context:E,item:L,index:I}),(0,N.jsx)(rr.d,{className:l()(Pd),context:E,item:L,titleTypeVariant:"titleSmall",subtitleTypeVariant:"bodyMedium",onTitleClick:e=>{m.logInteraction(u.titleFactory({uri:L.uri}).hitUiNavigate({destination:e||""}))},onSubtitleClick:e=>{m.logInteraction(u.artistFactory({uri:L.uri}).hitUiNavigate({destination:e||""}))},referrer:od.G.NPV}),!(0,gc.N)(L)&&(0,N.jsx)(Vd,{context:E,item:L})]})]})})}),{name:"NPVHeader"}),eu="QGvolaiNAXViyDq8TAEd";function tu(){const e=(0,Le.o)((e=>e?.context.uri??null),((e,t)=>e===t)),t=No(e??void 0);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)($d,{}),t&&(0,N.jsx)("div",{className:eu,children:(0,N.jsx)(ko,{})})]})}const iu=({className:e})=>{const t=(0,a.useRef)(null);(0,X.X)("NPV_OPEN_CINEMA_MODE_BUTTON",t);const i=(0,tl.l)(),{spec:n,logger:s}=(0,rc.D)(vs.J,{}),r=(0,a.useCallback)((()=>{i(si.z.NOW_PLAYING_VIEW),s.logInteraction(n.expandNpvButtonFactory().hitUiReveal())}),[s,i,n]);return(0,N.jsx)(Ai.Zp,{label:m.Ru.get("web-player.now-playing-view.cinema-mode.expand"),children:(0,N.jsx)(J.H,{ref:t,iconOnly:Xo.L,size:"small",onClick:r,"aria-label":m.Ru.get("web-player.now-playing-view.cinema-mode.expand"),className:e})})};var au=i(15594),nu=i(7307),su=i(2776);const ru={context:null,item:null};var ou=i(69390),lu=i(86274),cu=i(28478),du=i(86247),uu=i(37311),mu=i(56627),gu=i(89457),pu=i(79150),vu=i(51697);const xu="yvZooOj0rpfRS__cAUCo",hu="k_ndsg7yz9ZAgEmei1n3",bu="vDev2BqBHloweL24GNHK",yu="IkRGajTjItEFQkRMeH6v",ju="f2UE9n5nZcbgZrGYTU3r",fu="nw2W4ZMdICuBo08Tzxg9",Cu="wPHL366l99aluPsMU8Bl",Su="UAg2mNxhAm_jv0zFjG8z";function ku(e){return(0,Ns.v)(e)||(0,gu.v)(e)||(0,vc.p)(e)||(0,pc.d)(e)?e.name:(0,gc.N)(e)?"":(0,Yt.d)(e)}const Nu=a.memo((({item:e,spec:t})=>{const{ref:i,breakpoint:a}=(0,y.x)({[h.E.XSMALL]:0,[h.E.SMALL]:280,[h.E.MEDIUM]:320});return(0,N.jsx)("div",{className:fu,"data-testid":"NPV_Panel_OpenDiv",ref:i,children:e&&(0,N.jsxs)(b.o.Provider,{value:a,children:[(0,N.jsx)($d,{}),(0,N.jsx)(xc,{item:e,spec:t}),!(0,vc.p)(e)&&(0,N.jsx)(Er.A,{})]})})})),wu=({context:e,item:t,spec:i})=>{const n=(0,du.SF)();return(0,a.useEffect)((()=>{n.current&&(n.current.scrollTop=0)}),[t?.uri,n]),(0,lu.bJ)(e,t)?(0,N.jsx)(ou.IT,{spec:i}):(0,N.jsx)(Nu,{context:e,item:t,spec:i})},Ru=({context:e,item:t,spec:i})=>{const a=(0,ri.S)();return Es(),a===si.z.NOW_PLAYING_VIEW?null:(0,N.jsx)(wu,{context:e,item:t,spec:i})},Eu=()=>Jd()===Kd.CANVAS,Lu=({item:e})=>{const t=(0,a.useRef)(null),i=(0,Os.L)(),{isExpanded:n}=(0,_s._)(),{title:s,link:r}=(0,cu.$)(),o=Eu(),{spec:c,logger:d}=(0,rc.D)(vs.J,{}),u=(0,a.useCallback)((()=>{const e=c.closeButtonFactory().hitUiHide();d.logInteraction(e)}),[c,d]);return(0,a.useEffect)((()=>{null!==t.current&&t.current.focus({preventScroll:!0})}),[]),(0,N.jsx)(v.a,{title:s,titleSlot:(0,N.jsx)(v.k,{title:s,panelLinkRef:t,item:e,link:r,variant:"bodyMediumBold",semanticColor:"textBase",className:hu,hasNPVCloseButton:n}),link:r,actions:i&&i.context&&(0,N.jsxs)("div",{className:Su,children:[(0,N.jsx)(_i.b,{menu:(0,N.jsx)(Ds.W,{context:i.context,item:e,canSwitchVisuals:!0}),children:(0,N.jsx)(Ti.e,{size:"small",condensed:!1,label:m.Ru.get("more.label.context",e?ku(e):""),onClick:()=>{d.logInteraction(c.contextMenuButtonFactory().hitUiReveal())},className:Cu})}),(0,N.jsx)(iu,{className:Cu})]}),panelLinkRef:t,panel:x.Z.NowPlayingView,onClose:u,item:e,className:l()({[xu]:o})})},Iu=({item:e})=>{const t=!!e&&(0,gc.N)(e);return(0,a.useMemo)((()=>t?null:(0,N.jsx)(Lu,{item:e})),[e,t])},Au=(0,ms.mc)((({nodeRef:e})=>{const t=!(0,Ee.n)(),{context:i,item:a,index:n}=(0,Le.o)((e=>e),Os.F)||{context:null,item:null,index:null},{spec:r,UBIFragment:o}=(0,vu.$)(ps.t,{data:{uri:a?a.uri:""}}),c=Eu(),d=!!a&&(0,gc.N)(a),u=(0,Yi.n)(r.getAbsoluteLocation(),r),g=(()=>{const{item:e,context:t}=(0,Os.L)()||ru,{isYourDJNarrator:i,hasYourDJMetadata:a}=(0,nu.C)(),n=(0,s.NC)(Rs.yon),r=(0,nd.z)(e?.images?.[0]?.url,Yc.l0o,"colorDark");return i&&a?(0,su.p)(t?.metadata?.["narration.background.color"],au.lZ):n?r:void 0})(),v={"--background-base":g};let x=null;x=(0,pu.O)(i)&&null!==a?t?(0,N.jsx)(tu,{}):d?(0,N.jsx)(Ts,{item:a,context:i,index:n}):(0,N.jsx)(Ru,{spec:r,context:i,item:a}):(0,N.jsx)(Lc,{});const h={cssStyles:{"--section-background-base":g?"var(--background-tinted-base)":"var(--background-elevated-base)","--section-padding":gs.spacer16,"--section-border-radius":gs.spacer8},headerVariant:"bodyMediumBold"};return(0,N.jsx)(mu.P,{surface:uu.u.NOW_PLAYING,children:(0,N.jsx)(du.ql.Provider,{value:"now_playing_panel",children:(0,N.jsx)(Ar.T,{...h,children:(0,N.jsx)(tt._,{nodeRef:e,label:m.Ru.get("web-player.now-playing-view.label"),style:{...v,...h.cssStyles},itemUri:a?.uri?a.uri:"","data-testid":"now-playing-view-container",className:"NowPlayingView",children:(0,N.jsx)(o,{spec:r,children:(0,N.jsx)(p.w,{className:l()(yu,{[ju]:void 0!==g}),fixedHeader:(0,N.jsx)(Iu,{item:a}),scrolledClassName:c?bu:void 0,ref:u,children:x})})})})})})}),{name:"NPV"}),Tu="vzeIlCPBQJUaqdMZHqHE",_u="iZgGvu9g2gDlQ1ofJ7rH",Du="FSZKuoSTDgGwCPXO_qel",Ou="cPpNQwPTiEn9Zegl5Dwz",Bu="p2Yw6bT_O5PW8yGv1R0X",Uu="pK7G3_mtRcuFjbhJzm1s",Fu="gVJxtuXo8lHAw8XLKHfQ",Pu="BR3H6wavkReGa2xeSeaV",Mu="vXYSi4u1nPutJ_ZkC6mq",Hu=e=>{const t=(0,a.useRef)(null);return(0,N.jsx)(n.A,{in:e.isActive,nodeRef:t,timeout:{enter:e.shouldPlayAnimation?200:0,exit:e.shouldPlayAnimation?300:0},classNames:{enter:e.shouldPlayAnimation?_u:Uu,enterActive:e.shouldPlayAnimation?Du:Fu,exit:e.shouldPlayAnimation?Ou:Pu,exitActive:e.shouldPlayAnimation?Bu:Fu},unmountOnExit:!0,mountOnEnter:!0,children:(0,N.jsx)("div",{className:Tu,children:(0,N.jsx)("div",{className:Mu,ref:t,children:e.children})})})};var Vu=i(49348),Yu=i(56813),zu=i(39236),qu=i(99944),Gu=i(97210),Qu=i(18662),Zu=i(24013),Wu=i(38274),Ku=i(28321),Ju=i(43873),Xu=i(34930);const $u="PddBvUOS0_6f9B21fVGF",em=({ariaLabel:e,onRemoveItems:t,nrItems:i,columnCount:n,children:s})=>{const r=(0,a.useRef)(null);(0,Ku.g)(r);const o=(0,Ju.d)(t);return(0,N.jsx)(Wu.R,{firstInteractiveIsWrapper:!0,"aria-label":e,"aria-rowcount":i,"aria-colcount":n,className:$u,ref:r,onKeyDown:o,children:s})},tm=({items:e,renderRow:t,...i})=>{const n=(0,a.useCallback)(((t,i)=>e.slice(t,i+1)),[e]);return(0,N.jsx)(Xu.k,{resolveItem:im,getItems:n,nrTracks:e.length,children:(0,N.jsx)(em,{nrItems:e.length,...i,children:e.map(t)})})};function im(e){return{uri:e.uri,uid:e.uid??void 0,type:e.type}}var am=i(72527),nm=i(53017),sm=i(99280),rm=i(89996),om=i(20651),lm=i(19910),cm=i(52285);const dm=({chapter:e,index:t,showTypeLabel:i,...a})=>{const{uid:n,uri:s,type:r,name:o,images:l,book:c}=e,d=(0,am.E)(e,t),u=(0,cm.Y)(a.section),g=(0,N.jsx)(rm.r,{uri:s,removeFromQueueData:{uid:n??void 0,contextUri:u}}),p=(0,N.jsx)(lm.n,{item:e,tooltipText:c.name,showTypeLabel:i,subtitle:(0,N.jsx)(Ii.h,{menu:(0,N.jsx)(sm.p,{uri:c.uri}),children:(0,N.jsx)(de.N,{to:c.uri,stopPropagation:!0,children:c.name})})});return(0,N.jsx)(om.b,{uid:n,uri:s,contextUri:u,id:d,index:t,type:r,title:o,subtitle:p,images:l,dragLabel:o,menu:g,moreButtonLabelName:o,ariaPauseLabel:m.Ru.get("playlist.a11y.pause",o),ariaPlayLabel:m.Ru.get("playlist.a11y.play",o),...a})};var um=i(1175),mm=i(96621),gm=i(72983),pm=i(36195),vm=i(4903),xm=i(27404),hm=i(75758),bm=i(11120),ym=i(92191);const jm=(0,a.createContext)(null),fm=({children:e})=>{const{uri:t}=(0,ym.H)(),{spec:i,UBIFragment:n}=(0,He.r)(hm.i,{data:{identifier:bm.$h.NOWPLAYING_QUEUE,uri:t??""}}),s=(0,a.useMemo)((()=>i.nowPlayingSectionFactory()),[i]),r=(0,a.useMemo)((()=>i.nextInQueueSectionFactory()),[i]),o=(0,a.useMemo)((()=>i.nextFromSectionFactory()),[i]),l=(0,a.useMemo)((()=>({queueSpec:i,nowPlayingSectionSpec:s,nextInQueueSectionSpec:r,nextFromSectionSpec:o})),[i,s,r,o]);return(0,N.jsx)(jm.Provider,{value:l,children:(0,N.jsx)(n,{spec:i,children:e})})};var Cm=i(86973);const Sm=()=>{const e=(0,a.useContext)(jm);if(!e)throw Error("useQueueUBI must be used within a QueuePanelUBIProvider!");const{queued:t}=(0,ym.H)(),i=(0,Ke.s)(),{queueSpec:n,nowPlayingSectionSpec:s,nextInQueueSectionSpec:r,nextFromSectionSpec:o}=e;return{logClearQueue:(0,a.useCallback)((()=>{const e=r.clearQueueButtonFactory().hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:t.length});return i.logInteraction(e)}),[i,r,t.length]),logAddToQueue:(0,a.useCallback)(((e,t)=>{let a;switch(e){case vm.$.NowPlaying:a=s;break;case vm.$.NextInQueue:a=r;break;case vm.$.NextUp:a=o;break;default:return}const n=1===t.length?a.dragAddItemToQueue({itemToAddToQueue:t[0]}):a.dragAddItemsToQueue({numberOfItemsToAddToQueue:t.length});return i.logInteraction(n)}),[i,o,r,s]),logSort:(0,a.useCallback)((e=>{let t;switch(e){case vm.$.NextInQueue:t=r;break;case vm.$.NextUp:t=o;break;case vm.$.NowPlaying:default:return}const a=t.dragSort();return i.logInteraction(a)}),[i,o,r]),logQueuePanelTabChange:(0,a.useCallback)((e=>{if(e!==Cm.p.PARTICIPANT_LIST){const t=n.queueHistoryTabFactory({identifier:e===Cm.p.QUEUE?"queue":"recently_played"}).hitUiReveal();return i.logInteraction(t)}}),[i,n]),logQueueContextLinkNavigate:(0,a.useCallback)((e=>{const t=o.queueContextLinkFactory().hitUiNavigate({destination:e??""});return i.logInteraction(t)}),[i,o])}};var km=i(86324),Nm=i(254),wm=i(4666);const Rm=(0,a.memo)((function({item:e,...t}){const i=function(e,t){const i=(0,wm.z)(),{request:n}=(0,a.useContext)(Nm.j),{logAddToQueue:s,logSort:r}=Sm();return(0,a.useCallback)((async(a,o,l)=>{const{contextUri:c,sectionId:d,itemIds:u}=l??{},m=t===vm.$.NowPlaying,g=xm.v===c&&!m,p=a[gm.fl.ALBUMS]?.at(0),v=Object.values(a).flat();let x=[];if(p){const{trackUris:e}=await(0,km.s)(p,0,n);x=e.map((e=>({uri:e,uid:null})))}else x=g&&u?.length?u.map((e=>({uri:"",uid:e}))):Object.values(a).flat().map((e=>({uri:e,uid:null})))??[];const h=g&&d===vm.$.NowPlaying;let b;if(b=o===pm.Nz.BEFORE?{before:{uri:e.uri,uid:e.uid??null}}:{after:{uri:e.uri,uid:e.uid??null}},g&&!h)t&&r(t),i.reorderQueue(x,b);else{let e;t&&(e=s(t,v)),m?i.addToQueue(x,{interactionId:e?.interactionId}):i.insertIntoQueue(x,b,{interactionId:e?.interactionId})}}),[e.uid,e.uri,s,r,i,n,t])}(e,t.section);switch(e.type){case or.c.TRACK:return(0,N.jsx)(mm.e,{track:e,onDrop:i,...t});case or.c.EPISODE:return(0,N.jsx)(um.I,{episode:e,onDrop:i,...t});case or.c.CHAPTER:return(0,N.jsx)(dm,{chapter:e,onDrop:i,...t});case or.c.AD:return(0,N.jsx)(nm.Y,{ad:e,onDrop:i,...t});case or.c.UNKNOWN:return null;default:return(0,Yt.k)(e),null}})),Em=(0,a.memo)((function({item:e,...t}){const{usePlayContextItem:i}=(0,Dl.P)({uri:e.uri,pages:[{items:[e]}]},{featureIdentifier:"history"});return(0,N.jsx)(Rm,{item:e,...t,usePlayContextItem:i})})),Lm=({items:e})=>{const t=(0,a.useCallback)(((e,t)=>(0,N.jsx)(Em,{item:e,index:t},(0,am.E)(e,t))),[]);return(0,N.jsx)(tm,{items:e,ariaLabel:m.Ru.get("view.recently-played"),renderRow:t,columnCount:xm.$})};var Im=i(77527);const Am="BP2Fv3OX_ZYbjdA4lovg",Tm="Mxz3x1XNHpH4SvqEVkt0",_m="Olk6uKV_CIIVtWRrdRJc",Dm="AIW16bVmugXaJ42KBNKQ",Om=()=>(0,N.jsxs)("div",{className:Am,children:[(0,N.jsx)(Im.q,{size:"xxlarge","aria-hidden":"true"}),(0,N.jsxs)("div",{className:_m,children:[(0,N.jsx)(d.E,{as:"h1",variant:"titleMedium",semanticColor:"textBase",children:m.Ru.get("history.empty-title")}),(0,N.jsx)("p",{children:m.Ru.get("history.empty-description")})]})]});var Bm=i(1163),Um=i(42649);const Fm=["play-history-contents"];function Pm(){const e=(0,Um.q)(),t=(0,Qt.jE)();return function(e,t){const i=(0,Um.q)();(0,a.useEffect)((()=>i.getEvents().addListener(e,t)),[e,t,i])}(Bm.X.UPDATE,(e=>t.setQueryData(Fm,e.data))),(0,Zt.I)({queryKey:Fm,queryFn:()=>e.getContents(),gcTime:3e5,staleTime:0})}const Mm=()=>{const{isLoading:e,data:t}=Pm();return e?null:t?.items.length?(0,N.jsx)(Lm,{items:t.items}):(0,N.jsx)(Om,{})};var Hm=i(62598),Vm=i(68832);const Ym=(e,t)=>!t?.didQueueChangeSignificantly,zm=(e,t,i)=>{Ym(0,i?.current)?(0,Vm.oz)({onUpdate:t=>{e.style.opacity=t.toString()}}):e.style.opacity="1"},qm=(e,t,i,a)=>{Ym(0,a?.current)?(0,Vm.oz)({onUpdate:t=>{e.style.opacity=(1-Number(t)).toString()},onComplete:i}):i()},Gm=({hideEnteringElements:e,animateEnteringElements:t,animateExitingElements:i,animateFlippedElements:a})=>{e(),i(),a(),t()};var Qm=i(8741);function Zm(e){const t=(0,a.useRef)(e);return(0,a.useMemo)((()=>{const i=new Map,a=Km(t.current,i),n=Km(e,i),s=(0,Qm.I)(a,n),r=s>16||s>=Math.max(Wm(e),Wm(t.current));return t.current=e,r}),[e])}function Wm(e){return Number(!!e?.current)+(e?.queued.length??0)+(e?.nextUp.length??0)}function Km({current:e,nextUp:t=[],queued:i=[]},a){let n="";return[[e],t,i].forEach((e=>{e.forEach((e=>{e?.uid&&(a.has(e.uid)||a.set(e.uid,String.fromCharCode(65+a.size)),n+=a.get(e.uid))})),e.length&&(n+=" ")})),n}var Jm=i(56859);const Xm=({current:e,queued:t,nextUp:i,children:n})=>{const s=(0,a.useMemo)((()=>[e,...t,...i].filter(Jm.P).map(am.E).join("")),[e,i,t]),r={didQueueChangeSignificantly:Zm({current:e,nextUp:i,queued:t})};return(0,N.jsx)(Vm.ZI,{flipKey:s,handleEnterUpdateDelete:Gm,decisionData:r,children:n})},$m=({children:e,...t})=>(0,Ot.j)()?(0,N.jsx)(N.Fragment,{children:e}):(0,N.jsx)(Xm,{...t,children:e}),eg=({children:e,...t})=>(0,Ot.j)()?(0,N.jsx)(N.Fragment,{children:e}):(0,N.jsx)(Vm.lf,{shouldFlip:Ym,...t,children:e});var tg=i(84637),ig=i(16417);const ag=[gm.fl.TRACKS,gm.fl.LOCAL_TRACKS,gm.fl.EPISODES,gm.fl.CHAPTERS,gm.fl.ALBUMS],ng=({uri:e,items:t,ariaLabel:i,section:n,showTypeLabel:s,decoratedQueuedByUsersByUsername:r})=>{const o=(0,wm.z)(),l=(0,a.useCallback)((e=>{o.removeFromQueue(e)}),[o]),{usePlayContextItem:c}=(0,tg.b)(e,n),d=(0,a.useCallback)(((e,t)=>{const i=(0,am.E)(e,t);return(0,N.jsx)(eg,{flipId:e.metadata?.original_uid??i,onAppear:zm,onExit:qm,translate:!0,children:(0,N.jsx)("div",{className:ig.A.listRowWrapper,children:(0,N.jsx)(Rm,{item:e,index:t,usePlayContextItem:c,section:n,allowedDropMimeTypes:ag,showTypeLabel:s,queuedBy:r?.[e.metadata?.queued_by??""]})})},i)}),[r,n,s,c]);return(0,N.jsx)(tm,{items:t,renderRow:d,columnCount:xm.$,ariaLabel:i,onRemoveItems:l})};var sg=i(81458),rg=i(57157);const og="jAjrv_00X1qyxaEHmJCb",lg="YVnLJCNcdaEeIGBQYqJS",cg="pxocyhWhrvAeBiSlfjbd",dg="aOt09fJWpST6CG8xfHuo",ug=a.memo((function({onClose:e,onConfirm:t,isOpen:i,itemCount:n}){const s=(0,a.useCallback)((i=>{t(),e(i)}),[t,e]),r=m.Ru.get("queue.confirm-title",n);return(0,N.jsx)(rg.A,{animated:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e,contentLabel:r,isOpen:i,children:(0,N.jsxs)("div",{className:og,children:[(0,N.jsx)(d.E,{as:"h2",variant:"bodyMediumBold",className:lg,children:r}),(0,N.jsx)(d.E,{as:"p",variant:"bodySmall",className:cg,paddingBottom:sg.lT,children:m.Ru.get("queue.confirm-message")}),(0,N.jsxs)("div",{className:l()("encore-light-theme",dg),children:[(0,N.jsx)(J.H,{onClick:e,children:m.Ru.get("queue.cancel-button")}),(0,N.jsx)(u.$,{onClick:s,children:m.Ru.get("queue.confirm-button")})]})]})})})),mg="u842BXnznGeq38O3DUTQ",gg="NWVZ_rxlezZ8xTHlMg4Y",pg="Oae51evvT5DrqTupCiZ2",vg="LFdMliaHVgrpBcqNKHU3",xg="IeeqYq0Ozrndd6STmrRk",hg="NljerwmGshDHsI7rIvWl",bg="ufYZbfDYBfU9pe7nPPef",yg=({nrQueuedItems:e})=>{const t=(0,wm.z)(),{logClearQueue:i}=Sm(),[n,s]=(0,a.useState)(!1),r=(0,a.useCallback)((()=>{s(!1)}),[]),o=(0,a.useCallback)((()=>{i(),t.clearQueue(),s(!1)}),[i,t]),l=(0,a.useCallback)((()=>{s(!0)}),[]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(J.H,{size:"small",onClick:l,className:xg,condensed:!0,children:m.Ru.get("queue.clear-queue")}),(0,N.jsx)(ug,{itemCount:e,isOpen:n,onClose:r,onConfirm:o})]})};var jg=i(28798);const fg=({queueSection:e,title:t,trailingButton:i})=>{const n=(0,a.useRef)(null),s=(0,jg.K)({ref:n});return(0,N.jsx)(eg,{flipId:`section-header-${e}`,onAppear:zm,onExit:qm,translate:!0,children:(0,N.jsxs)("div",{className:vg,children:[(0,N.jsx)(Ai.Zp,{label:t,disabled:!s,children:(0,N.jsx)(d.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textBase",className:hg,ref:n,children:t})}),i]})})};var Cg=i(42029);const Sg={[h.E.SMALL]:0,[h.E.MEDIUM]:480},kg=()=>{const e=(0,a.useRef)(null),{breakpoint:t}=(0,y.c)(Sg,e);return(0,N.jsxs)("div",{className:l()(Am,t!==h.E.SMALL&&Tm),ref:e,children:[(0,N.jsx)(Cg.j,{size:t===h.E.SMALL?"large":"xlarge","aria-hidden":"true",className:Dm}),(0,N.jsxs)("div",{className:_m,children:[(0,N.jsx)(d.E,{as:"h1",variant:t===h.E.SMALL?"bodyMediumBold":"titleSmall",semanticColor:"textBase",children:m.Ru.get("queue.empty-title")}),(0,N.jsx)(d.E,{as:"p",variant:t===h.E.SMALL?"bodySmall":"bodyMedium",children:m.Ru.get("queue.empty-description")})]}),(0,N.jsx)(de.N,{to:"/search",children:(0,N.jsx)(u.$,{colorSet:"invertedLight",size:t===h.E.SMALL?"small":"medium",children:m.Ru.get("queue.fine-something")})})]})};var Ng=i(63388),wg=i(39463);const Rg=Spicetify.GraphQL.Definitions["decorateQueuedByUsers"]=new Ng.l("decorateQueuedByUsers","query","1b71b9895bad207fdac0df7ebad17c790260519f853a069ee05f20e51c08636e",null);function Eg(e){const t=(0,fn.g)(),i=Array.from(new Set(e.map((e=>e?.metadata?.queued_by||null)).filter(Jm.P))).sort().map((e=>(0,$t.Qjr)(e).toURI())),{data:n}=(s={userUris:i},r={gcTime:36e5,staleTime:18e5,enabled:!!i.length,placeholderData:xa.rX},(0,wg.I)(Rg,s,r));var s,r;const o=(0,a.useMemo)((()=>Object.fromEntries(n?.users?.map((e=>{return"User"===e.__typename?[e.username,(t=e,{type:or.c.USER,...t,images:t.avatar?.sources??[]})]:null;var t})).filter(Jm.P)??[])),[n]);return t?o:{}}var Lg=i(68001),Ig=i(78328);const Ag="_GA0LJ6qjoKBsWLq34XF",Tg="s_iKX8Su0w1W5b9yObSm",_g="aQ5ntWUtU9bcqS9fS9aC",Dg="SxLR9RMcR2XyJCZuxYqv",Og="vtk1i3JMLWObMppMQ0gH",Bg="x8qh9EgeC3AdLO0C54Og",Ug="Dm9gGjGoA7yNxClwSV24",Fg="MPtthrsnd9PdsCTssJqk",Pg=({onClose:e,onCopyLink:t,inviteUrlQR:i})=>(0,N.jsxs)(ae.a,{className:Ag,padding:"0",children:[(0,N.jsxs)("div",{className:Tg,children:[(0,N.jsxs)("div",{className:Dg,children:[(0,N.jsx)(d.E,{variant:"bodySmallBold",children:m.Ru.get("web-player.social-connect.invitation.qr-code.title")}),(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("web-player.social-connect.invitation.qr-code.description")})]}),(0,N.jsx)(J.H,{semanticColor:"textSubdued",iconOnly:Yn.M,size:"small",onClick:e,condensedAll:!0,"aria-label":m.Ru.get("web-player.social-connect.invitation-modal.button-tertiary")})]}),(0,N.jsx)("div",{className:Og}),(0,N.jsxs)("div",{className:l()(Tg,_g,Bg),children:[(0,N.jsx)(u.$,{iconLeading:Ig._,colorSet:"invertedLight",size:"small",onClick:t,className:Ug,children:m.Ru.get("web-player.social-connect.invitation-modal.button-primary")}),(0,N.jsx)("div",{className:Fg,children:(0,N.jsx)(Lg.Ay,{value:i,size:100})})]})]}),Mg=({onClick:e})=>{const t=(0,oi.wA)(),i=(0,a.useCallback)((()=>{e(),t((0,ki.A9)(pa.EL.END_SESSION))}),[t,e]);return(0,N.jsx)(_n.n,{size:"small",onClick:i,children:m.Ru.get("web-player.social-connect.end-session.end-session-button")})},Hg=({onClick:e})=>(0,N.jsx)(_n.n,{size:"small",onClick:async t=>{e(t)},children:m.Ru.get("web-player.social-connect.invite-button")}),Vg=({onClick:e})=>{const t=(0,oi.wA)(),i=(0,a.useCallback)((()=>{e(),t((0,ki.A9)(pa.EL.LEAVE_SESSION))}),[t,e]);return(0,N.jsx)(_n.n,{size:"small",onClick:i,children:m.Ru.get("web-player.social-connect.leave-session.leave-session-button")})};var Yg=i(5248),zg=i(22140),qg=i(60961);const Gg="E6U6SyOECK4IENpzZw2R",Qg="rirXgOjB8QWiJWDk5hSD",Zg=({currentSession:e,username:t,onClick:i})=>{const{sessionMembers:n}=e,{setQueueView:s}=(0,Yg.m)(),r=n.length+2>3?n.length-3:0,o=(0,qg.t)(e,t,{userFirst:!0}),l=(0,a.useCallback)((()=>{i&&i(),s(Yg.p.PARTICIPANT_LIST)}),[i,s]);return(0,N.jsxs)(_n.n,{size:"small",className:Gg,onClick:l,"aria-label":m.Ru.get("web-player.social-connect.participant-list.title"),children:[(0,N.jsx)(zg.g,{users:o,maxSlots:3,withoutOverflowBadge:!0}),r>0&&(0,N.jsx)(d.E,{variant:"bodySmallBold",semanticColor:"textBase",className:Qg,children:`+${r}`})]})};var Wg=i(91135),Kg=i(49507),Jg=i(97926);const Xg="CyBimvsotsoxqwtiZeAn",$g="_GKa4bilkTYbQLgcLogI",ep="uXHR7rkHhuz9kVPNWwYW",tp="KFGFA5pPG0hgIB97pZfI",ip=({id:e,label:t,value:i,onChange:a})=>(0,N.jsxs)("label",{htmlFor:e,className:tp,children:[(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:t}),(0,N.jsx)(cn.l,{id:e,value:i,onSelected:a,condensed:!0})]}),ap=({className:e,emptyStateComponent:t})=>{const{currentSession:i,setQueueOnlyMode:n,setParticipantVolumeControl:s}=(0,On.D)(),r=(0,Jg.k)(),o=(0,oi.d4)((({session:e})=>e.user?.id)),l=r?.joinSessionShortLink,c=r?.joinSessionShortLinkQR,{logFacePileClick:u,logInviteClick:g,logEndClick:p,logLeaveClick:v,UBIFragmentWithSpec:x}=(0,Kg.O)(),h=(0,Wg.Z)(),[b,y]=(0,a.useState)(!0),j=(0,a.useCallback)((()=>{u()}),[u]),f=(0,a.useCallback)((async()=>{l&&await h(l),g(l?.spotifyUri??"",l?.shareId??"")}),[h,l,g]),C=(0,a.useCallback)((async()=>{y((e=>!e))}),[]),S=(0,a.useCallback)((()=>{p()}),[p]),k=(0,a.useCallback)((()=>{v()}),[v]);if(!i?.active)return t?(0,N.jsx)(N.Fragment,{children:t}):null;const w=i.sessionMembers.find((e=>e.id===i.sessionOwnerId));return(0,N.jsx)(x,{children:(0,N.jsxs)("div",{className:e,children:[(0,N.jsx)("div",{className:Xg,children:(0,N.jsx)(d.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("web-player.social-connect.session-info.title",{host:w?.displayName??""})})}),(0,N.jsxs)("div",{className:$g,children:[(0,N.jsxs)("div",{className:ep,children:[(0,N.jsx)(Zg,{currentSession:i,username:o,onClick:j}),(0,N.jsx)(Hg,{onClick:C}),i.isSessionOwner?(0,N.jsx)(Mg,{onClick:S}):(0,N.jsx)(Vg,{onClick:k})]}),b&&(0,N.jsx)(Pg,{onClose:()=>y(!1),onCopyLink:f,inviteUrlQR:c?.shareableUrl??""}),i.isSessionOwner&&(0,N.jsxs)("div",{children:[(0,N.jsx)(ip,{id:"queueOnlyMode",label:m.Ru.get("web-player.social-connect.controls.queue-only-mode"),value:!i.queueOnlyMode,onChange:e=>n(!e)}),"UNAVAILABLE"!==i.participantVolumeControl&&(0,N.jsx)(ip,{id:"participantVolumeControl",label:m.Ru.get("web-player.social-connect.controls.participant-volume-control"),value:"ENABLED"===i.participantVolumeControl,onChange:e=>s(e)})]})]})]})})};var np=i(42752);const sp=e=>(0,N.jsx)(r.s,{onError:e=>{(0,np.Jy)(e,"JamQueueHeader")},suspenseFallback:e.emptyStateComponent,children:(0,N.jsx)(ap,{...e})});var rp=i(9326);const op=()=>{const e=(0,ym.H)(),{uri:t,description:i,current:n,nextUp:r,queued:o,isEmpty:l,hasQueuedTracks:c,hasNextTracks:d}=e,{logQueueContextLinkNavigate:u}=Sm(),g=(0,s.NC)(Rs.V4n)&&"autoplay"===n?.provider,p=Eg([n,...r,...o]),v=(0,a.useMemo)((()=>new Set([n,...o,...r].filter(Jm.P).map((({type:e})=>e))).size>1),[n,r,o]),x=(0,fn.g)(),h=(0,yn.y)();return l?(0,N.jsx)(kg,{}):(0,N.jsxs)($m,{...e,children:[(0,N.jsx)(sp,{className:pg}),g&&(0,N.jsx)(Hm.k,{className:bg}),(0,N.jsxs)("div",{className:mg,children:[n&&(0,N.jsxs)("div",{className:gg,children:[(0,N.jsx)(fg,{queueSection:vm.$.NowPlaying,title:m.Ru.get("queue.now-playing")}),(0,N.jsx)(ng,{ariaLabel:m.Ru.get("queue.now-playing"),uri:t,items:n?[n]:[],section:vm.$.NowPlaying,showTypeLabel:v,decoratedQueuedByUsersByUsername:p})]}),!x&&h&&(0,N.jsx)(rp.p,{localStorageKey:"dismissStartJamButtonFromQueue"}),c&&(0,N.jsxs)("div",{className:gg,children:[(0,N.jsx)(fg,{queueSection:vm.$.NextInQueue,title:m.Ru.get("queue.next-in-queue"),trailingButton:(0,N.jsx)(yg,{nrQueuedItems:o.length})}),(0,N.jsx)(ng,{ariaLabel:m.Ru.get("queue.next-in-queue"),uri:t,items:o,section:vm.$.NextInQueue,showTypeLabel:v,decoratedQueuedByUsersByUsername:p})]}),d&&(0,N.jsxs)("div",{className:gg,children:[(0,N.jsx)(fg,{queueSection:vm.$.NextUp,title:i&&!(0,ym.K)(n)&&t?(0,N.jsxs)(N.Fragment,{children:[m.Ru.get("queue.next-from")," ",(0,N.jsx)(de.N,{to:t,onClick:()=>{u(t)},children:i})]}):m.Ru.get("queue.next-up")},i),(0,N.jsx)(ng,{ariaLabel:m.Ru.get("queue.next-up"),uri:t,items:r,section:vm.$.NextUp,showTypeLabel:v})]})]})]})};var lp=i(50375),cp=i(93624);const dp="AjjTyUrCO3pZ365KtTXW",up="pGtUoenc5OobLi8CscJ6",mp="cArVcLcQ85q_9QSLGYGX",gp="lDtXv1VCrs0PHHSuH5uO",pp="ukjUoaLSzKyRcwoOQw9V",vp="yQwBNeetmAr0a0OTR8t3",xp="fzB4RXxTp0rlpNQlSuu9",hp=({sessionMember:e,showRemoveButton:t,onClickMember:i,onClickRemove:a,index:n})=>{const{currentSession:s}=(0,On.D)(),{displayName:r,images:o,username:l,uri:c}=(0,qg.c)(e);return(0,N.jsx)(Ii.h,{menu:(0,N.jsx)(cp.B,{uri:c}),children:(0,N.jsx)(K.v,{id:`${n}`,variant:"naked",className:pp,title:(0,N.jsx)(ne.d,{lineClamp:1,children:r}),media:(0,N.jsx)("div",{role:"button",onClick:i,onKeyDown:i,tabIndex:-1,children:(0,N.jsx)(lp.e,{images:o,userIconSize:"medium",width:48,displayName:r,username:l,label:r})}),subtitle:s?.sessionOwnerId===e.id?m.Ru.get("web-player.social-connect.participant-list.host"):m.Ru.get("web-player.social-connect.participant-list.guest"),onClick:i,trailing:t&&(0,N.jsx)(_n.n,{size:"small",className:vp,onClick:a,"aria-label":m.Ru.get("web-player.social-connect.participant-list.remove-guest-accessible-label",{displayName:r}),children:m.Ru.get("web-player.social-connect.participant-list.remove-guest")})})})};var bp=i(29655);var yp=i(4042);const jp=()=>{const e=(0,ba.d)(),t=(0,oi.wA)(),i=(0,De.g)(),n=(0,Wg.Z)(),{currentSession:s,kickAllParticipants:r}=(0,On.D)(),{setQueueView:o}=(0,Yg.m)(),l=(0,Jg.k)(),{logUserClick:c,logRemoveClick:g}=(()=>{const{spec:e,logger:t,UBIFragment:i}=(0,He.r)(bp.I,{});return{logUserClick:(0,a.useCallback)(((i,a)=>{t.logInteraction(e.participantListFactory().participantListRowFactory({position:i}).userLinkFactory().hitUiNavigate({destination:a}))}),[t,e]),logRemoveClick:(0,a.useCallback)((i=>{t.logInteraction(e.participantListFactory().participantListRowFactory({position:i}).removeButtonFactory().hitUiReveal())}),[t,e]),UBIFragmentWithSpec:(0,a.useCallback)((t=>(0,N.jsx)(i,{spec:e,...t})),[i,e])}})(),p=(0,a.useCallback)((()=>{l?.joinSessionShortLink&&n(l.joinSessionShortLink)}),[n,l?.joinSessionShortLink]),v=(0,a.useCallback)(((e,i)=>{g(e),t((0,ki.A9)(pa.EL.REMOVE_PARTICIPANT,void 0,i))}),[t,g]),x=(0,a.useCallback)(((e,t)=>{const a=(0,$t.Qjr)(t.username);c(e,a.toURI()),i(a.toURLPath(!0))}),[c,i]),h=(0,a.useCallback)((()=>{r(s?.sessionId)}),[s?.sessionId,r]),b=(0,yp.T4)(e);return s&&b?(0,N.jsxs)("div",{className:dp,children:[(0,N.jsx)(d.E,{variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("web-player.social-connect.participant-list.title")}),(0,N.jsxs)("div",{className:up,children:[(0,N.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("web-player.social-connect.participant-list.subtitle")}),(0,N.jsx)(_n.n,{size:"small",onClick:p,className:mp,children:m.Ru.get("web-player.social-connect.invite-button")})]}),(0,N.jsx)("div",{className:gp,children:s.sessionMembers.map(((t,i)=>(0,N.jsx)(hp,{index:i,sessionMember:t,showRemoveButton:(0,yp.kt)(e,(0,$t.Qjr)(t.username).toURI()),onClickRemove:()=>v(i,t),onClickMember:()=>x(i,t)},i)))}),s.isSessionOwner&&s.sessionMembers.length>1&&(0,N.jsx)(u.$,{colorSet:"invertedLight",size:"small",onClick:h,children:m.Ru.get("web-player.social-connect.participant-list.remove-all-guests")}),(0,N.jsx)(d.E,{variant:"marginal",semanticColor:"textSubdued",className:xp,children:m.Ru.get("web-player.social-connect.participant-list.visibility-info")})]}):(o(Yg.p.QUEUE),null)};var fp=i(11467);const Cp="BZj_r1yzmmragvivUCrw",Sp="hpzTKCoO0rllEslIOMPo",kp="TeBVsFnI9PMHYL9ynJx9",Np="ZDR7q1cqU2yaYjemuy9Z",wp="OLB2ghxc09Kz8k_93eIu",Rp=()=>{const{currentQueueView:e,setQueueView:t}=(0,Cm.m)(),i=(0,fp.y)(),{logQueuePanelTabChange:n}=Sm(),s=(0,a.useMemo)((()=>i?{titleSlot:e!==Cm.p.PARTICIPANT_LIST?(0,N.jsx)(qu.t,{currentTab:e,onTabChange:e=>{e===(0,Qu.c)(Cm.p.HISTORY)?(n(Cm.p.HISTORY),t(Cm.p.HISTORY)):(n(Cm.p.QUEUE),t(Cm.p.QUEUE))},className:kp,children:(0,N.jsxs)(Gu.w,{"aria-label":"",className:Np,children:[(0,N.jsx)(Qu.V,{"aria-selected":e===Cm.p.QUEUE,label:m.Ru.get("playback-control.queue"),value:Cm.p.QUEUE}),(0,N.jsx)(Qu.V,{"aria-selected":e===Cm.p.HISTORY,label:m.Ru.get("view.recently-played"),value:Cm.p.HISTORY})]})}):(0,N.jsx)(J.H,{iconLeading:sn.g,onClick:()=>t(Cm.p.QUEUE),size:"small",condensed:!0,className:wp,children:m.Ru.get("web-player.social-connect.participant-list.back-to-queue")})}:{title:m.Ru.get("playback-control.queue")}),[i,n,t,e]);return(0,N.jsx)(tt._,{label:m.Ru.get("playback-control.queue"),focusTransferId:"QUEUE-HISTORY-PANEL",children:(0,N.jsx)(p.w,{fixedHeader:(0,N.jsx)(v.a,{className:Cp,panel:x.Z.Queue,...s}),children:(0,N.jsx)("div",{className:Sp,children:e!==Cm.p.PARTICIPANT_LIST?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Zu.K,{value:"queue",children:e===Cm.p.QUEUE&&(0,N.jsx)(op,{})}),(0,N.jsx)(Zu.K,{value:"history",children:e===Cm.p.HISTORY&&(0,N.jsx)(Mm,{})})]}):(0,N.jsx)(jp,{})})})})},Ep=(0,a.memo)((function(){return(0,N.jsx)(fm,{children:(0,N.jsx)(Rp,{})})}));var Lp=i(4272);const Ip=(0,a.memo)((()=>{const e=(0,s.NC)(Rs.ZDY),t=(0,Yu.X)(),i=(0,Vu._)(),o=function(){const e=(0,a.useRef)(x.Z.NowPlayingView),t=(0,G.XB)();return(0,a.useEffect)((()=>{e.current=t}),[t]),(0,a.useCallback)((i=>{const a=e.current===x.Z.NowPlayingView,n=t===x.Z.NowPlayingView;return i.some((i=>a&&t===i||n&&e.current===i))}),[t])}(),l=(0,Ot.j)(),c=(0,ri.S)()===si.z.NOW_PLAYING_VIEW,d=(0,a.useRef)(null),u=c||l,m=e&&t===x.Z.Disabled;return(0,N.jsxs)(r.s,{onError:e=>{(0,np.Jy)(e,"PanelSection"),i((0,zu.MQ)(x.Z.Disabled))},children:[(0,N.jsx)(n.A,{nodeRef:d,in:t===x.Z.NowPlayingView||m,exit:x.v.includes(t),timeout:{enter:0,exit:300},unmountOnExit:!0,mountOnEnter:!0,children:(0,N.jsx)(Lp.f,{enabled:!m,children:(0,N.jsx)(Au,{nodeRef:d})})}),t===x.Z.BuddyFeed?(0,N.jsx)(ni,{}):null,(0,N.jsx)(Hu,{isActive:t===x.Z.BuddyFeedOverlay,shouldPlayAnimation:!u&&o([x.Z.BuddyFeedOverlay]),children:(0,N.jsx)(ni,{})}),t===x.Z.Queue?(0,N.jsx)(Ep,{}):null,(0,N.jsx)(Hu,{isActive:t===x.Z.QueueOverlay,shouldPlayAnimation:!u&&o([x.Z.QueueOverlay]),children:(0,N.jsx)(Ep,{})}),t===x.Z.Birdhouse?(0,N.jsx)(Gt,{}):null,(0,N.jsx)(Hu,{isActive:t===x.Z.BirdhouseOverlay,shouldPlayAnimation:!u&&o([x.Z.BirdhouseOverlay]),children:(0,N.jsx)(Gt,{})}),t===x.Z.DevicePicker?(0,N.jsx)(cs,{}):null,(0,N.jsx)(Hu,{isActive:t===x.Z.DevicePickerOverlay,shouldPlayAnimation:!u&&o([x.Z.DevicePickerOverlay]),children:(0,N.jsx)(cs,{})}),ds?(0,N.jsxs)(N.Fragment,{children:[t===x.Z.Euterpe?(0,N.jsx)(ds,{}):null,(0,N.jsx)(Hu,{isActive:t===x.Z.Euterpe,shouldPlayAnimation:o([x.Z.Euterpe]),children:(0,N.jsx)(ds,{})})]}):null,us?(0,N.jsxs)(N.Fragment,{children:[t===x.Z.Magpie?(0,N.jsx)(us,{}):null,(0,N.jsx)(Hu,{isActive:t===x.Z.Magpie,shouldPlayAnimation:o([x.Z.Magpie]),children:(0,N.jsx)(us,{})})]}):null]})}))},22693:(e,t,i)=>{i.d(t,{l:()=>m});var a=i(30758),n=i(97500),s=i.n(n);const r="x-toggle-wrapper",o="x-toggle-indicator",l="JCFCfOY_6UEZZSOO2xrl",c="x-toggle-indicatorWrapper",d="x-toggle-input";var u=i(86070);const m=(0,a.forwardRef)((({value:e,disabled:t,onSelected:i,onClick:a,id:n,className:m,condensed:g=!1},p)=>(0,u.jsxs)("label",{className:s()(r,m),onClick:a,children:[(0,u.jsx)("input",{id:n,className:d,type:"checkbox",disabled:t,checked:e,onChange:e=>{const t=e.target.checked;i(t)},ref:p}),(0,u.jsx)("span",{className:s()(c,{[l]:g}),children:(0,u.jsx)("span",{className:s()(o,{[l]:g})})})]})))},25115:(e,t,i)=>{i.d(t,{$:()=>n});var a=i(30758);const n=()=>{const[e,t]=(0,a.useState)(document.hasFocus());return(0,a.useEffect)((()=>{function e(){t(!0)}function i(){t(!1)}return window.addEventListener("focus",e),window.addEventListener("blur",i),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",i)}}),[]),e}},26345:(e,t,i)=>{i.d(t,{w:()=>h});var a=i(30758),n=i(97500),s=i.n(n),r=i(49145),o=i(65397),l=i(42214),c=i(86247);const d="AAdBM1nhG73supMfnYX7",u="W3E0IT3_STcazjTeyOJa",m="mdMUqcSHFw1lZIcYEblu",g="cZCuJDjrGA2QMXja_Sua",p="zduvaX0Ioxqd5ypeWoAf";var v=i(86070);const x=({fixedHeader:e,scrollNodeRef:t,children:i,scrolledClassName:a})=>{const n=(0,l.y)(t);return(0,v.jsxs)("div",{className:s()(d),children:[(0,v.jsx)("div",{className:s()(u,{[a??m]:n}),children:e}),i]})},h=a.forwardRef((({children:e,className:t,fixedHeader:i,scrolledClassName:n},l)=>{const u=(0,a.useRef)(null);(0,o.g)(u);const m=(0,a.useMemo)((()=>({scrollNodeRef:u})),[u]),h=(0,v.jsx)(c.bi.Provider,{value:m,children:(0,v.jsx)(r.a,{className:g,scrollNodeRef:u,children:(0,v.jsx)("div",{ref:l,className:s()(d,p,t),children:e})})});return i?(0,v.jsx)(x,{fixedHeader:i,scrollNodeRef:u,scrolledClassName:n,children:h}):h}))},27260:(e,t,i)=>{i.d(t,{$:()=>m});var a=i(30758),n=i(62411),s=i(73136),r=i(18089),o=i(70397),l=i(48729),c=i(3072),d=i(46024),u=i(86070);const m=({onClick:e})=>{const t=(0,n.wA)(),i=(0,c.Y)(),m=(0,a.useCallback)((async()=>{try{e(),await i()}catch(e){t((0,l.A9)(d.EL.ERROR))}}),[i,t,e]);return(0,u.jsx)(s.$,{iconLeading:r.V,size:"small",onClick:m,children:o.Ru.get("web-player.social-connect.menu-action.title")})}},34720:(e,t,i)=>{i.d(t,{r:()=>c,z:()=>d});var a=i(30758),n=i(66590),s=i(39159),r=i(3424),o=i(254),l=i(19507);function c(e=null){const{request:t}=(0,a.useContext)(o.j),{data:i}=(0,l.I)({queryKey:["extracted-color",e],queryFn:()=>e?(0,r.j)(t,e).then((e=>{const t=e?.[0];return t?{colorDark:t.colorDark.toCSS(s.a.HEX),colorLight:t.colorLight.toCSS(s.a.HEX),colorRaw:t.colorRaw.toCSS(s.a.HEX)}:null})):null,gcTime:864e5,staleTime:216e5,enabled:!!e});return i??void 0}function d(e=null,t=n.l0o,i="colorRaw"){return c(e)?.[i]??t}},34886:(e,t,i)=>{i.d(t,{U:()=>r});var a=i(79898),n=i(92169),s=i(86070);const r=({children:e,lineClamp:t=2,...i})=>(0,s.jsx)(a.d,{lineClamp:t,as:"div",dir:"auto",className:n.A.title,...i,children:e})},36030:(e,t,i)=>{i.d(t,{P:()=>a});const a=()=>!1},37321:(e,t,i)=>{i.d(t,{$:()=>a.$});var a=i(77674)},38274:(e,t,i)=>{i.d(t,{R:()=>g});var a=i(30758),n=i(98165),s=i(93441);function r(e,t,i=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,s.fk)(e))return;const a=e.querySelector('[tabindex="0"]');t===n.O.UP&&(0,s.MS)(a,o(e,a,n.O.UP,i)),t===n.O.DOWN&&(0,s.MS)(a,o(e,a,n.O.DOWN,i)),t===n.O.RIGHT&&(0,s.MS)(a,l(a,n.O.RIGHT,i)),t===n.O.LEFT&&(0,s.MS)(a,l(a,n.O.LEFT,i)),t===n.O.HOME&&(0,s.MS)(a,c(n.O.HOME,i)??a),t===n.O.END&&(0,s.MS)(a,c(n.O.END,i)??a)}function o(e,t,i,a=!1){const r=t.closest('li[role="row"]');if(!r)return t;let o=r;const c=Array.from(e.querySelectorAll('li[role="row"]')),d=Array.from(r.querySelectorAll(s.nu)),u=c.indexOf(r);if(u<0)return t;const m=(a&&t!==d[0]||!a&&t!==r)&&!(t instanceof HTMLLIElement);if(i===n.O.UP){if(document.activeElement===e){o=c[c.length-1];return(a?o?.querySelector(s.nu):o)??t}if(m)return l(t,n.O.LEFT,a);let i=u-1;if(-1===i)return t;o=c[i],i-=1}else if(i===n.O.DOWN){if(document.activeElement===e){o=c[0];return(a?o?.querySelector(s.nu):o)??t}if(m)return l(t,n.O.RIGHT,a);let i=u+1;if(i===c.length)return t;o=c[i],i+=1}return(a?o?.querySelector(s.nu):o)??t}function l(e,t,i=!1){const a=e.closest('li[role="row"]');if(!a)return e;let r=e;const o=Array.from(a.querySelectorAll(s.nu)),l=o.indexOf(e);let c=0;if(t===n.O.RIGHT&&l-1!==o.length)c=l+1;else{if(t===n.O.LEFT&&-1===l)return a;if(t===n.O.LEFT&&0!==l)c=l-1;else if(t===n.O.LEFT&&0===l){return(i?a.querySelector(s.nu):a)??a}}return r=o.at(c),r??e}function c(e,t=!1){const{currentFocus:i,listEl:a}=function(){const e=document.activeElement,t=e?.closest("ul");return((0,n.I)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===i||null===a)return null;const r=i.closest('li[role="row"]');if(!r)return i;const o=Array.from(a.querySelectorAll('li[role="row"]')),l=Array.from(r.querySelectorAll(s.nu));if(o.indexOf(r)<0)return i;const c=t&&i===l[0]||!t&&i===r;if(e===n.O.HOME){if(c){return(t?o[0]?.querySelector(s.nu):o[0])??i}return(t?l[1]:l[0])??i}if(e===n.O.END){if(c){return(t?o[o.length-1]?.querySelector(s.nu):o[o.length-1])??i}return l[l.length-1]??i}return i}var d=i(94728),u=i(45978),m=i(86070);const g=(0,a.forwardRef)((({onKeyDown:e,children:t,firstInteractiveIsWrapper:i=!1,...o},l)=>{const c=(0,u.N)(l);(0,d.R)(c);const g=(0,a.useCallback)((t=>{c.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Home"!==t.key&&"End"!==t.key||t.preventDefault(),"ArrowUp"!==t.key&&"ArrowDown"!==t.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===t.key&&r(c.current,n.O.UP,i),"ArrowDown"===t.key&&r(c.current,n.O.DOWN,i),"ArrowRight"===t.key&&r(c.current,n.O.RIGHT,i),"ArrowLeft"===t.key&&r(c.current,n.O.LEFT,i),"Home"===t.key&&r(c.current,n.O.HOME,i),"End"===t.key&&r(c.current,n.O.END,i),e?.(t))}),[i,c,e]),p=(0,a.useCallback)((e=>{if(!c.current)return;const t=e.target,i=c.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==i&&(0,s.MS)(i,t,{preventScroll:!0})}),[c]);return(0,m.jsx)("ul",{role:"treegrid",ref:c,onKeyDown:g,onFocus:p,tabIndex:0,...o,children:t})}))},39052:(e,t,i)=>{i.d(t,{e:()=>c});var a=i(16774),n=i(73061),s=i(99244),r=i(69091),o=i(19151),l=i(86070);const c=({images:e,breakpoint:t,type:i,name:c,style:d,...u})=>{const m=(0,r._)(),g=i===o.c.ARTIST||i===o.c.USER?n.u.CIRCLE:n.u.ROUNDED_CORNERS,p=t===a.e.SMALL?s.Qe.SIZE_64:s.Qe.SIZE_112;return(0,l.jsx)(n.b,{fadeIn:!0,images:m(e,s.BZ[p]),shape:g,size:p,iconSize:t===a.e.SMALL?"medium":"xlarge",type:i,title:c,loadingMode:"eager",style:d,...u})}},42129:(e,t,i)=>{i.d(t,{a:()=>a});let a=function(e){return e.AUDIO_QUALITY_STEAMING="audio_quality_streaming",e.AUDIO_QUALITY_STEAMING_REMOTE="audio_quality_streaming_remote",e.DSA="dsa",e.PUBLISH_LISTENING_ACTIVITY="publish_listening_activity",e}({})},43720:(e,t,i)=>{i.d(t,{S:()=>l});i(2557),i(77369);var a=i(19507),n=i(53143),s=i(9302),r=i(63647),o=i(58679);function l(e){const t=(0,o.t)();return(0,a.I)({queryKey:["author",e],queryFn:async()=>t.fetch([e??""],[s.UH.IDENTITY_TRAIT,s.UH.VISUAL_IDENTITY_TRAIT,s.UH.AVAILABLE_RELEASES]).then((([e])=>e?function({uri:e,extensions:{[s.UH.IDENTITY_TRAIT]:t,[s.UH.VISUAL_IDENTITY_TRAIT]:i,[s.UH.AVAILABLE_RELEASES]:a}}){return t?{uri:e,name:t.name,description:t.description,images:(i?.sixteenByNineCoverImage?.instances??i?.squareCoverImage?.instances)?.map((({size:e,flatFile:t})=>({url:t?.cdnUrl??"",label:c[e]}))).filter((e=>!!e.url))??[],availableBooksUris:a?.availableReleases.map((e=>e.uri))??[],dynamicColors:(0,n.V)(i?.squareCoverImage?.extractedColorSet)}:null}(e):null)),staleTime:0,gcTime:36e5,enabled:!!e})}const c={[r.hJ.IMAGE_SIZE_UNSPECIFIED]:"standard",[r.hJ.IMAGE_SIZE_SMALL]:"small",[r.hJ.IMAGE_SIZE_DEFAULT]:"standard",[r.hJ.IMAGE_SIZE_LARGE]:"large",[r.hJ.IMAGE_SIZE_XLARGE]:"xlarge",[r.hJ.IMAGE_SIZE_XXLARGE]:"xlarge",[r.hJ.UNRECOGNIZED]:"standard"}},43931:(e,t,i)=>{i.d(t,{d:()=>a});const a=e=>{const t=e?.metadata?.["dislike-endpoint"]??null;return{dislikeEndpoint:t,shouldShowFeedbackControls:"1"===e?.metadata?.["dislike-feedback-available"]&&null!==t}}},46062:(e,t,i)=>{i.d(t,{X:()=>c,$:()=>u});var a=i(77674),n=i(68651),s=i(19906),r=i(29425),o=i(6506);const l=["artistsets","artist-mix-reader","blend","daily-mix","daylist","discover-weekly","descripto","inspiredby-mix","on-repeat","release-radar","repeat-rewind","topic-mix"],c=e=>!!e&&l.includes(e),d=(e,t)=>"autoplay"===e.provider||!("context"!==e.provider||!c(t.metadata?.format_list_type)),u=(e,t)=>{const i=(0,a.$)(),l=(0,n.i)(e.uri),[c]=(0,s.A)(l),u=(0,o.g)();return(0,r.v)(e)&&t&&i&&e.uri===l&&!u?c?{canDisplayButton:d(e,t),hideButton:!0}:{canDisplayButton:d(e,t),hideButton:!1}:{canDisplayButton:!1,hideButton:!0}}},49507:(e,t,i)=>{i.d(t,{O:()=>c});var a=i(30758),n=i(26238),s=i(63061),r=i(25140),o=i(84409),l=i(86070);const c=()=>{const{spec:e,logger:t,UBIFragment:i}=(0,o.r)(n.J,{}),{uri:c}=(0,r.f)(),d=(0,a.useCallback)(((i,a)=>{const n=e.inviteButtonFactory().hitShare({entityToBeShared:i,shareId:a});t.logInteraction(n)}),[t,e]),u=(0,a.useCallback)((()=>{const i=e.endButtonFactory().hitUiReveal();t.logInteraction(i)}),[t,e]),m=(0,a.useCallback)((()=>{const i=e.leaveButtonFactory().hitUiReveal();t.logInteraction(i)}),[t,e]),g=(0,a.useCallback)((()=>{const i=e.facepileButtonFactory().hitUiNavigate({destination:s.S.PARTICIPANTS_PAGE});t.logInteraction(i)}),[t,e]),p=(0,a.useCallback)((t=>(0,l.jsx)(i,{spec:e,...t})),[i,e]);return{logInviteClick:d,logEndClick:u,logLeaveClick:m,logFacePileClick:g,logStartJam:(0,a.useCallback)((()=>{const i=e.createJamButtonFactory().hitUiNavigate({destination:c??""});t.logInteraction(i)}),[t,e,c]),UBIFragmentWithSpec:p}}},50092:(e,t,i)=>{i.d(t,{a:()=>q,k:()=>Y});i(66016);var a=i(30758),n=i(97500),s=i.n(n),r=i(78717),o=i(27498),l=i(31673),c=i(30920),d=i(69182),u=i(18831),m=i(70397),g=i(97232),p=i(86732),v=i(8764),x=i(51736);const h="AmMf7dzmbZIFsIy8gUOE";var b=i(86070);const y=({advertiserName:e})=>(0,b.jsx)(x.r,{title:"npv-sponsorship-title",children:(0,b.jsxs)(r.E,{variant:"bodySmall",className:h,semanticColor:"textBase",children:[(0,b.jsx)(v.c,{size:"xsmall"}),m.Ru.get("ad-formats.sponsored-playlist.header.reward-title")," • ",m.Ru.get("ad-formats.sponsored-playlist.header.sponsored-by",e)]})},"npv-sponsorship-title");var j=i(3861),f=i(35054),C=i(98302),S=i(24792),k=i(96579),N=i(9779),w=i(720),R=i(56572),E=i(72664),L=i(28054),I=i(52613),A=i(9735);const T="eTT681T6oUKXsIMiP8pT",_="gwmgu53xszgwAXxqLT0h",D="fNXmHtlrj4UVWmhQrJ_5",O="XOSSUjLDKk9RRmiX_UWa",B="KILnOHUdx4pspVEoJ7kq",U="XNFZdOLgMlx491fEWdYJ",F="icNf66tgG3uxDMbCCIaN",P="NmIQ4hxBcXT8Bd7Abwdi",M="rkIl3GXeAGoK2gIX2zuj",H="j9Ey7DzF10wbxpBIVtcb",V=({title:e,variant:t,semanticColor:i})=>(0,b.jsx)(x.r,{title:e,children:(0,b.jsx)(r.E,{as:"h1",dir:"auto",variant:t,semanticColor:i,children:e||""})},e||""),Y=({link:e,title:t,item:i,panelLinkRef:a,variant:n,semanticColor:r,className:o,hasNPVCloseButton:l})=>{const{spec:c,logger:m}=(0,A.D)(d.J,{}),v=(0,u.o_h)(e),x=v?.toURI(),h=!(!x||!t),j=h?[x]:[],S=(0,C.H)(x),{draggable:N,onDragStart:w}=(0,L.P)({itemUris:j,dragLabelText:t??""}),{data:R}=(0,g.V)(),E=(0,p.E)(x??"",R??[]),I=R?.find((e=>e.spotifyUri===x));return(0,b.jsx)(f.h,{menu:S,children:(0,b.jsxs)("div",{className:s()(T,o,{[H]:l}),children:[e&&t?(0,b.jsx)(k.N,{ref:a,draggable:N&&h,onDragStart:h?w:void 0,to:e,search:i?`?uid=${i.uid}&uri=${i.uri}`:void 0,className:_,onClick:()=>{m.logInteraction(c.contextLinkFactory().hitUiNavigate({destination:e||""}))},children:(0,b.jsx)(V,{title:t,variant:n,semanticColor:r})}):(0,b.jsx)(V,{title:t,variant:n,semanticColor:r}),I?.advertiser&&E&&(0,b.jsx)(y,{advertiserName:I?.advertiser})]})})},z=R.$S.PANEL_CLOSE_CLICK,q=({link:e,title:t,titleSlot:i,actions:n,onClose:r,className:d,panelLinkRef:u,preventDefaultClose:g=!1,onBack:p,item:v,titleVariant:x="bodyMediumBold",titleSemanticColor:h="textBase"})=>{const y=(0,w._Y)(),f=(0,w.Ev)(z),C=(0,w.XB)()===E.Z.NowPlayingView,k=(0,N.h)(),R=(0,a.useDeferredValue)(C),L=(0,a.useCallback)((()=>{r?.(),g||y(z)}),[r,g,y]),A=null!==v&&(0,I.N)(v);return(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsxs)("div",{className:s()(D,d,{[B]:C}),children:[p&&(0,b.jsx)("span",{className:s()(F,P),children:(0,b.jsx)(S.Zp,{label:m.Ru.get("desktop.login.Back"),children:(0,b.jsx)(j.a,{ariaLabel:m.Ru.get("desktop.login.Back"),size:"sm",onClick:p,icon:o.g})})}),R&&(0,b.jsx)(j.a,{icon:l.t,size:"sm",onClick:L,ariaLabel:m.Ru.get("web-player.now-playing-view.hide"),className:M}),i||(0,b.jsx)(Y,{title:t,panelLinkRef:u,item:v,link:e,variant:x,semanticColor:h}),(0,b.jsxs)("span",{className:s()(F,O),children:[n,!A&&!C&&!k&&(0,b.jsx)("div",{"data-testid":"PanelHeader_CloseButton",children:(0,b.jsx)(S.Zp,{label:m.Ru.get("close"),children:(0,b.jsx)(j.a,{ariaLabel:m.Ru.get("close"),className:U,size:"sm",onClick:L,icon:c.M,disabled:!f})})})]})]})})}},52936:(e,t,i)=>{i.d(t,{k:()=>d});var a=i(30758),n=i(97500),s=i.n(n),r=i(70796),o=i(16774),l=i(92169),c=i(86070);const d=(0,a.memo)((function({breakpoint:e,className:t,showSeparator:i=!1,isActive:a,...n}){return(0,c.jsx)(r.v,{"data-entity-row":!0,className:s()(t,l.A.entityRow,{[l.A.separator]:i,[l.A.active]:a}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:e===o.e.SMALL?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:e===o.e.SMALL?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...n})}))},53369:(e,t,i)=>{i.d(t,{A:()=>a});const a={nowPlaying:"main-nowPlayingWidget-nowPlaying",controls:"ZbFkATBbLkWh2SHMXDt6",coverArtCollapsed:"main-coverSlotCollapsed-navAltContainer",coverArt:"main-nowPlayingWidget-coverArt",contextItemInfo:"main-nowPlayingWidget-trackInfo",coverArtButton:"HD9s7U5E1RLSWKpXmrqx",hidden:"Pw2N_vxQ21_h3HC4zu1y"}},57551:(e,t,i)=>{i.d(t,{a:()=>a.a});var a=i(85397)},58679:(e,t,i)=>{i.d(t,{t:()=>s});var a=i(15679),n=i(95758);function s(){return(0,a.N)(n.Z)}},62138:(e,t,i)=>{i.d(t,{C:()=>s});var a=i(65809),n=i(33621);const s=()=>(0,a.NC)(n.f9,{loadingValue:!0})},62598:(e,t,i)=>{i.d(t,{k:()=>m});var a=i(30758),n=i(97500),s=i.n(n),r=i(62411),o=i(78717),l=i(70397),c=i(68513);const d="UleDr3qwHmBK0Cz0OYBj";var u=i(86070);const m=({className:e})=>{const t=(0,r.wA)(),i=(0,a.useCallback)((()=>{t((0,c.$c)())}),[t]);return(0,u.jsx)("button",{className:s()(d,e),onClick:i,children:(0,u.jsx)(o.E,{variant:"bodySmall",children:l.Ru.get("header.about-recommendations-and-promotions")})})}},64688:(e,t,i)=>{i.d(t,{r:()=>a.r});var a=i(27847)},65007:(e,t,i)=>{i.d(t,{D:()=>s});var a=i(69596),n=i(15679);function s(){return(0,n.N)(a.x)}},66293:(e,t,i)=>{i.d(t,{_:()=>j,s:()=>y});var a=i(30758),n=i(97500),s=i.n(n),r=i(62411),o=i(39896),l=i(3669),c=i(9779),d=i(78993),u=i(720),m=i(72664);const g="ffFwfKcPDbmAPLXzxzKq",p="jD_TVjbjclUwewP7P9e8",v="nZaXB942idDuiFv4bKNk",x="Fwe5dGEAgs_VFp4SPrzv",h="gchSBzolAjaPDHD1q0rA";var b=i(86070);const y=(0,a.createContext)(null),j=({label:e,style:t,focusTransferId:i,children:n,className:j,nodeRef:f})=>{const C=(0,a.useRef)(null),S=f??C,k=(0,d.S)(),N=(0,c.h)(),w=(0,r.d4)((e=>e.ui?.fullscreenMode?.isOpen??!1)),R=(0,u.XB)(),E=k===l.z.NOW_PLAYING_VIEW;return(0,o.X)(i??null,S),(0,b.jsx)(y.Provider,{value:S,children:(0,b.jsx)("aside",{"aria-label":e,className:s()(g,j,{[v]:E,[h]:w,[x]:N,[p]:R!==m.Z.Disabled&&R!==m.Z.NowPlayingView}),style:t,id:"Desktop_PanelContainer_Id",ref:S,tabIndex:-1,children:n})})}},67814:(e,t,i)=>{i.d(t,{R:()=>a.R});var a=i(92019)},68452:(e,t,i)=>{i.d(t,{r:()=>a.rI,t:()=>a.tf});var a=i(28848)},69990:(e,t,i)=>{i.d(t,{o:()=>s});var a=i(82283),n=i(15679);function s(){return(0,n.N)(a.g)}},70635:(e,t,i)=>{i.d(t,{L:()=>o});var a=i(30758),n=i(72432),s=i(39737),r=i(68888);function o({episodeUri:e,start:t,stop:i}){const{togglePlay:o,triggerPlay:l,isPlaying:c,isActive:d}=(0,n.P)({uri:e},{featureIdentifier:"episode"}),u=(0,s.o)((e=>(0,r.s)(e)??0)),m=d&&function(e,t,i){return i>=e&&i<t}(t,i,u),g=c&&m;return{onClick:(0,a.useCallback)((e=>{m?o({seekTo:t,loggingParams:e}):l({seekTo:t,loggingParams:e})}),[m,t,o,l]),isPlaying:g,isActive:m}}},71990:(e,t,i)=>{i.d(t,{o:()=>N});var a=i(30758),n=i(97500),s=i.n(n),r=i(35394),o=i(93315),l=i(39125),c=i(18969),d=i(18831),u=i(70397),m=i(24792),g=i(42282),p=i(332),v=i(24886),x=i(25140),h=i(51393),b=i(68293),y=i(84409);const j="VcqCvLW71lZT4kqnCgt0";var f=i(86070);const C=({contextUri:e="",uri:t,id:i=t,className:n,canAdd:d})=>{const{description:h}=(0,x.f)(),C=(0,b.s)(),{spec:S}=(0,y.r)(c.A,{data:{uri:e}}),k=(0,a.useCallback)((()=>{C.logInteraction(S.undoButtonFactory({uri:t}).hitUiHide())}),[C,S,t]),N=(0,a.useCallback)((()=>{C.logInteraction(S.removeRecommendationButtonFactory({uri:t}).hitRemoveRecommendation({recommendedItemUri:t,contextUri:e}))}),[e,C,S,t]),w=(0,a.useCallback)((()=>{C.logInteraction(S.addRecommendationButtonFactory({uri:t}).hitAddToPlaylist({playlist:e,itemToBeAdded:t}))}),[e,C,S,t]),{removeRecommendation:R,addRecommendation:E,canRemoveRecommendation:L,canAddRecommendation:I}=(0,g.t)({uri:t,uid:i,contextUri:e,onUndo:k,onRemoveRecommendation:N,onAddRecommendation:w}),A=(0,a.useCallback)((()=>h?u.Ru.get("web-player.smart-shuffle.add-to-playlist-button",h):u.Ru.get("web-player.smart-shuffle.add-to-playlist-button-fallback")),[h]),T=(0,v.y)();return(0,f.jsxs)("div",{className:s()(j,n),children:[L&&(0,f.jsx)(m.Zp,{label:u.Ru.get("web-player.smart-shuffle.removed-from-recommendations-button"),children:(0,f.jsx)(r.H,{onClick:R,iconOnly:o.P,size:T===p.E.MEDIUM?"medium":"small","aria-label":u.Ru.get("web-player.smart-shuffle.removed-from-recommendations-button"),condensedAll:!0})}),d&&I&&(0,f.jsx)(m.Zp,{label:A(),children:(0,f.jsx)(r.H,{onClick:E,iconOnly:l.P,size:T===p.E.MEDIUM?"medium":"small","aria-label":A(),condensedAll:!0})})]})},S=e=>{const t=(0,h.J)(e.contextUri);return(0,f.jsx)(C,{...e,canAdd:t?.canAdd??!1})},k=e=>(0,f.jsx)(C,{...e,canAdd:!0}),N=e=>e.contextUri&&(0,d.tbX)(e.contextUri)?(0,f.jsx)(S,{...e,contextUri:e.contextUri}):e.contextUri&&(0,d.Z0m)(e.contextUri)?(0,f.jsx)(k,{...e,contextUri:e.contextUri}):(0,f.jsx)(C,{...e,canAdd:!1})},76622:(e,t,i)=>{i.d(t,{c:()=>o});var a=i(30758),n=i(85982),s=i(5665),r=i(33244);function o(e,t){const i=(0,s.d)(),o=(0,r.J)(t),l=(0,n.a)();(0,a.useEffect)((()=>i.getBroadcastingEvents().addListener(e,(e=>{l()&&o(e)}))),[i,o,e,l])}},76991:(e,t,i)=>{i.d(t,{h:()=>k});var a=i(97500),n=i.n(a),s=i(8335),r=i(69182),o=i(29552),l=i(35054),c=i(64027),d=i(39327),u=i(44463),m=i(67814),g=i(64688),p=i(28054),v=i(90471),x=i(29425),h=i(9735),b=i(19151);const y="URfgKDbFQpKuN8ZjGdui",j="e3hKZQOHyxgax_X0Rb1E",f="main-nowPlayingView-coverArt",C="SwS3WdCPfdr1uOOksVEB";var S=i(86070);const k=({context:e,item:t,index:i,canSwitchVisuals:a=!1,isMinimized:k=!1})=>{const{spec:N,logger:w}=(0,h.D)(r.J,{}),{draggable:R,onDragStart:E}=(0,p.P)(),{ref:L,inView:I}=(0,s.Wx)({threshold:.5,initialInView:!0});return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(l.h,{menu:(0,S.jsx)(d.W,{context:e,item:t,canSwitchVisuals:a}),children:(0,S.jsx)("div",{draggable:R&&((0,x.v)(t)||(0,v.p)(t)),onDragStart:e=>{E(e,{itemUris:[t.uri],dragLabelText:(0,g.r)(t)})},ref:L,className:n()(y,{[j]:k}),children:(0,S.jsx)(m.R,{uri:e.uri,owner:e.metadata?.context_owner,children:(0,S.jsx)(u.e,{context:t.type===b.c.TRACK?t.album:e,item:t,index:i,isVisible:!0,onClick:()=>{w.logInteraction(N.coverArtFactory({uri:t.uri}).hitUiNavigate({destination:t.type===b.c.TRACK?t.album.uri:t.uri}))},adEventReason:o.c.COVER_ART,children:(0,S.jsx)(c.b,{className:n()(f,{[C]:I}),images:t.images??[],type:t.type,maxSize:k?56:384,desiredLabel:k?"small":"xlarge"})})})})})})}},77674:(e,t,i)=>{i.d(t,{$:()=>r});var a=i(65809),n=i(56074),s=i(33621);const r=()=>{const e=(0,n.j)(),t=(0,a.NC)(s.en,{loadingValue:!1});return e.getCapabilities().canBan&&t}},79891:(e,t,i)=>{i.d(t,{F:()=>u});var a=i(30758),n=i(53177),s=i(720),r=i(72664),o=i(86541),l=i(52593);const c="KrBYgWLGb5aRHjoD_prX";var d=i(86070);const u=(0,n.mc)((()=>{const{setVideoPlayerUIFlag:e}=(0,o.d)(),t=(0,s.XB)();return(0,a.useEffect)((()=>(t===r.Z.NowPlayingView&&e(l.nP.npv,!0),()=>{e(l.nP.npv,!1)})),[t,e]),(0,d.jsx)("div",{id:"VideoPlayerNpv_ReactPortal",className:c})}),{name:"NPVVideoContainer"})},85397:(e,t,i)=>{i.d(t,{a:()=>b});var a=i(30758),n=i(97500),s=i.n(n),r=i(70397),o=i(7299),l=i(37321),c=i(78966),d=i(46062),u=i(43931),m=i(30929),g=i(68651),p=i(60292),v=i(57735),x=i(53369),h=i(86070);const b=({context:e,item:t,className:i,onClick:n=()=>{}})=>{const{dislikeEndpoint:b,shouldShowFeedbackControls:y}=(0,u.d)(e),j=(0,l.$)(),f=y&&!j,{canDisplayButton:C,hideButton:S}=(0,d.$)(t,e),k=(0,g.i)(t.uri),{ban:N}=(0,c.N)(k,e.uri,e.metadata?.[v.W.CONTEXT_DESCRIPTION],t.provider??void 0),{enqueueSnackbar:w}=(0,m.d)(),R=e.metadata?.[v.W.CONTEXT_DESCRIPTION]??"",{setDislikeFeedback:E}=(0,p.I)({uri:t.uri,setFeedbackPath:b,contextUri:e.uri}),L=(0,a.useCallback)((async()=>{E(),w(r.Ru.get("feedback.hide-song",R)),n?.()}),[w,R,n,E]),I=(0,a.useCallback)((async()=>{k&&(N(),n?.())}),[k,N,n]);return f||C?(0,h.jsx)(o.O,{className:s()(i,{[x.A.hidden]:S}),isDisliked:!1,onClick:j?I:L}):null}},86732:(e,t,i)=>{i.d(t,{E:()=>r});var a=i(65809),n=i(52793),s=i(59161);const r=(e,t)=>{const i=(0,a.NC)(s.Lct,{loadingValue:!1}),r=(0,n.Z_)(t,e,2);return i&&r}},87105:(e,t,i)=>{i.d(t,{x:()=>o});var a=i(30758);const n=1,s=.5,r={threshold:[0,s,n]};function o({target:e}){const[t,i]=(0,a.useState)("visible_unknown");return(0,a.useEffect)((()=>{if(e){const t=new IntersectionObserver((([e])=>i((()=>e?e.intersectionRatio>=n?"visible_100":e.intersectionRatio>=s?"visible_50":e.intersectionRatio<s?"visible_0":"visible_unknown":"visible_unknown"))),r);return t.observe(e),()=>t.disconnect()}i("visible_unknown")}),[e]),{visibilityState:t}}},92169:(e,t,i)=>{i.d(t,{A:()=>a});const a={entityRow:"ci11tAmTK1LnxThQkXPy",actions:"_2sJPwAAp1wY1Ftke6iFe",visibleAction:"yuNzasMLs7hvemHI4d8Q",active:"dNymWGRudMrTI6ot9FBg",title:"luWcW9hkbLdFxRQB0yGb",body:"abYR6tZoE7BdzThmWTb0",footer:"GOcKQxqNMhGzbGiAXBig",separator:"yFQjuDAhri_egM1pwn70",badges:"tykXaR_9v2wPQNrdPkK6",entityRowMedia:"CEQq_bU71Zd100gQdzku",largeImage:"uDQzuB2XvOEryRAL_Dre",stretchImage:"fCudaI7y0gpf7EBPMLIR",videoLabel:"O1aWtXaQPk9PaxLuKOzz"}},92191:(e,t,i)=>{i.d(t,{H:()=>r,K:()=>s});i(2557);var a=i(20757),n=i(25140);function s(e){return"autoplay"===e?.provider}function r(){const{uri:e,description:t}=(0,n.f)(),{current:i,nextUp:r,queued:o}=(0,a.w)(),l=r.filter((e=>s(e)?e:"autoplay"!==e.provider)),c=!!o?.length,d=!!l?.length;return{uri:e,description:t,current:i,nextUp:l,queued:o,isEmpty:!1===(i||c||d),hasQueuedTracks:c,hasNextTracks:d}}},97232:(e,t,i)=>{i.d(t,{V:()=>d});var a=i(19507),n=i(62411),s=i(65809),r=i(99129),o=i(59161),l=i(83953);const c=["useSponsorships"],d=()=>{const e=(0,n.d4)(l.Um),t=(0,s.NC)(o.Lct,{loadingValue:!1}),{data:i,isLoading:d,isError:u}=(0,a.I)({queryKey:c,queryFn:()=>(0,r.RW)(),gcTime:36e5,staleTime:6e5,enabled:t&&e});return{data:i?.sponsorships??null,isLoading:d,isError:u}}},97926:(e,t,i)=>{i.d(t,{k:()=>n});var a=i(5665);const n=()=>(0,a.d)().getJamJoinInfo()}}]);
//# sourceMappingURL=dwp-panel-section.js.map