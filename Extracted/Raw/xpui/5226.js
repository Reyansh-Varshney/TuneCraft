"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5226],{19672:(e,t,a)=>{a.d(t,{g:()=>r.g});var r=a(19043)},29324:(e,t,a)=>{a.r(t),a.d(t,{SKELETON_CARDS_COUNT:()=>R,SKELETON_SHELVES_COUNT:()=>w,default:()=>S,getRequestIdForImpressions:()=>N});var r=a(30758),n=a(53177),s=a(97500),i=a.n(s),o=a(83924),l=a(70397),c=a(19399),d=a(60141),u=a(3877),m=a(83708),p=a(84599),g=a(60656),h=a(10959),y=a(58565),v=a(71607),x=a(69878),f=a(99842),b=a(68734),C=a(42752),P=a(24516),j=a(23291),k=a(51697),I=a(45109),L=a(86070);const w=6,R=6,N=e=>{const t="object"==typeof e?.responseIds?e?.responseIds:void 0;return t?.["/home"]?.continuum},A=(0,r.memo)((({shelfCount:e,cardCount:t})=>(0,L.jsxs)("div",{className:i()(I.A.homepageContent,"contentSpacing"),"data-testid":"home-page-skeleton",children:[(0,L.jsx)(d.y,{withTitle:!1}),[...new Array(e).keys()].map(((e,a)=>(0,L.jsx)(g.f,{withTitle:!0,cardCount:t},a)))]}))),S=(0,n.mc)((()=>{(0,b.m)("home");const e=(0,x.W)({type:"locale",uri:"home"}),{data:t,error:a,loading:r,extensions:n,isNavigationPending:s}=(0,h.Y)(),d=!(0,f.p)(),g=(0,v.f)().replace("-chip",""),{spec:S}=(0,k.$)(o.Y,{data:{identifier:g?`home/${g}`:"home",uri:"spotify:home",reason:N(n)??""}});if(r||s)return(0,L.jsxs)("section",{className:i()(I.A.home,I.A.homepageWithCarousels),"data-testid":"home-page",children:[(0,L.jsx)(m.q,{}),(0,L.jsx)(A,{shelfCount:w,cardCount:R})]});if(null!==a)return(0,L.jsx)(u.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")});const T=t?.home;return"HomeResponsePayload"!==T?.__typename?(0,L.jsx)(u.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")}):0===T.sectionContainer.sections.totalCount||0===T.sectionContainer.sections.items.length?((0,C.Jy)(new Error("Empty response from pathfinder"),"Home"),(0,L.jsx)(u.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error.generic")})):(0,L.jsx)(j.r,{spec:S,children:(0,L.jsxs)(y.h,{extensionsData:n,children:[(0,L.jsx)(c.Q,{children:(0,P.pr)({i18n:l.Ru,shouldLocalize:e})}),(0,L.jsx)(p.g,{greeting:T.greeting?.transformedLabel??null,container:T.sectionContainer,showDsaMessage:d,enableFeedBaseline:!0})]})})}),{name:"Home"})},30254:(e,t,a)=>{a.d(t,{v:()=>r.v});var r=a(78658)},54387:(e,t,a)=>{a.d(t,{$F:()=>i,Dr:()=>l,KI:()=>u,V0:()=>d,YO:()=>m,nC:()=>g,t$:()=>p,uW:()=>c,ye:()=>h});var r=a(42551),n=a(64508);const s=[n.Gm.NATIVE,n.Gm.IMAGE,n.Gm.HTML],i=e=>e.ads.hpto?.template||null,o=e=>e.ads.root.isHptoHidden,l=e=>e.ads.hpto?.hptoIsStable||null,c=e=>e.ads.root.isPremium,d=e=>"1"===e.session.productState?.["has-audiobooks-subscription"],u=e=>e.ads.hpto?.creativeFetchingState||null,m=(0,r.Mz)((e=>e.ads.hpto?.creative||null),(e=>e.ads.hpto?.preview||null),((e,t)=>t||e)),p=(0,r.Mz)(m,c,o,((e,t,a)=>{if(!e)return!1;return!(!s.includes(e.bannerMode)||t&&a)})),g=(0,r.Mz)(c,o,((e,t)=>!e||!t)),h=(0,r.Mz)(m,(e=>!!e&&s.includes(e.bannerMode)))},56548:(e,t,a)=>{function r(e,t=1,a=0){if(a>t)return 1;let r=(e-a)/(t-a);return Number.isNaN(r)&&(r=1),Math.min(Math.max(r,0),1)}a.d(t,{i:()=>r})},58565:(e,t,a)=>{a.d(t,{h:()=>i,r:()=>o});var r=a(30758),n=a(86070);const s=(0,r.createContext)({}),i=({children:e,extensionsData:t={}})=>(0,n.jsx)(s.Provider,{value:t,children:e}),o=()=>(0,r.useContext)(s)},60141:(e,t,a)=>{a.d(t,{y:()=>g});a(77369);var r=a(30758),n=a(97500),s=a.n(n),i=a(35147),o=a(77570),l=a(48941);const c="zUf7jtv9GPOKC1jYO5TO",d="T8QLel3PoQTgJUpGYj7Q";var u=a(86070);const m=(0,r.memo)((({isLoading:e})=>{const t=(0,o.h)("shimmer");return(0,u.jsx)("div",{className:l.A.imageContainer,children:(0,u.jsx)("div",{ref:t,className:s()(l.A.imageWrapper,{[d]:e})})})})),p=(0,r.memo)((({isLoading:e})=>(0,u.jsx)("div",{className:s()(l.A.shortcut,c),"data-testid":"skeleton-shortcut",children:(0,u.jsxs)("div",{className:l.A.draggable,children:[(0,u.jsx)(m,{isLoading:e}),(0,u.jsx)("div",{className:s()(l.A.main,l.A.skeletonShortcut),children:(0,u.jsx)(i.Y,{as:"p",variant:"bodyMediumBold",className:l.A.name,isLoading:e})})]})}))),g=(0,r.memo)((({withTitle:e})=>(0,u.jsxs)("section",{className:l.A.shortcuts,children:[e&&(0,u.jsx)("div",{className:l.A.title,children:(0,u.jsx)(i.Y,{as:"h2",variant:"titleMedium",charCount:25,isLoading:!0})}),(0,u.jsx)("div",{className:s()(l.A.grid,{[l.A.gridOf4Columns]:true}),children:[...new Array(8).keys()].slice(0,8).map(((e,t)=>(0,u.jsx)(p,{isLoading:!0},t)))})]})))},60656:(e,t,a)=>{a.d(t,{f:()=>o});var r=a(30758),n=a(21211),s=a(20991),i=a(86070);const o=(0,r.memo)((({cardCount:e,showAll:t,withTitle:a})=>(0,i.jsx)(s._,{isLoading:!0,withTitle:a,showAll:t??!1,children:[...new Array(e).keys()].map(((e,t)=>(0,i.jsx)(n.u,{isLoading:!0},t)))})))},66405:(e,t,a)=>{a.d(t,{Nx:()=>i,lr:()=>s,q8:()=>o});var r=a(76146),n=a(56548);const s=()=>(0,r._)((e=>"/"===e.pathname)),i=()=>(0,r._)((e=>"/home"===e.pathname)),o=(e,t)=>{const a=t?350:80;return(0,n.i)(e,a,10)}},83708:(e,t,a)=>{a.d(t,{q:()=>o});var r=a(78717),n=a(98033),s=a(70397),i=a(86070);const o=()=>(0,i.jsx)(n.s,{children:(0,i.jsx)(r.E,{as:"h1",children:s.Ru.get("view.web-player-home")})})},84599:(e,t,a)=>{a.d(t,{g:()=>Qa});a(86328),a(77369),a(98273);var r=a(30758),n=a(97500),s=a.n(n),i=a(53402),o=a(14006),l=a(5544);var c=a(66405),d=a(83708),u=a(62411),m=a(78717),p=a(69365),g=a(35394),h=a(93359),y=a(70397),v=a(45518),x=a(68293),f=a(84409);const b="iC5KPBY1LYMrQkGPnG8m";var C=a(86070);const P=()=>{const e=(0,u.wA)(),t=(0,x.s)(),{spec:a}=(0,f.r)(h.V,{}),n=(0,r.useCallback)((()=>{e(v.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())}),[e,t,a]);return(0,C.jsxs)(m.E,{as:"p",semanticColor:"textBase",className:b,children:[(0,C.jsx)(p.p,{size:"small"}),y.Ru.get("home.dsa-message",(0,C.jsx)(g.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:n,children:y.Ru.get("home.dsa-message-link")}))]})};a(2557);var j=a(7333),k=a(92785),I=a(35184),L=a(61270),w=a(83787),R=a(24148),N=a(8413),A=a(99974),S=a(47701),T=a(93485),E=a(18868),_=a(2854),M=a(65809),U=a(48729),B=a(281),D=a(96405),F=a(18831);const O="desktop-home-1d-card";var H=a(25669);const V={screenLg:"1200px",homeRegularDensityMinWidth:"210px",homeRegularDensityMinWidthSmallScreens:"160px",homeFeedBaselineMinWidth:"380px",homeFeedBaselineMaxWidth:"480px",homeFeedBaselineHalfWidth:"430px",gridContainer:"DgRp3EC01YPhzdK9Imn5",withFiniteRowCount:"ihWXb2VdDvsS3bvPrpJF",uniformRowHeight:"frDxJ3jhWuIFWag59N0Q",card:"Q36ugVAb7krhThyRTmJ_",overlayForCenteredImage:"ky4dHMtg46D0NG1znEYF",overlayForCenteredImageGradient:"kI0KOHhAWcqJTU3NyxGg",overlayForCenteredImageDynamicColors:"qF9rZunA5zsqZCAJ8pKq",overlayTop:"QSkuUiKpZ4MHrdOB83XV",withFooterOverlay:"pobLn0CELRvb4TjnNApn",overlayBottom:"AqLt2Nk3rygv3mAt_6gi",hasFooter:"FuL5IvTt_AoeX2tB_U_Q",header:"XKQRNQAUOAjRwwjuUnRU",headerImage:"EHmWppnjgBNjT9yPUXpw",withHeaderImage:"KwklVh4oNn_BXeDMDHcS",headerContainer:"ZhCb7WHaVm5AdY29Cvaq",titleClamp:"auugTSHlDcy58VCqeLjc",titleLink:"YSflHyCWx4tGL7LrqtLE",audioPreviewContainerText:"lOuOe8nZaKHVgh38HPog",carousel:"t8hK7HwEUiIjAwheYDse",carouselScrollContent:"bXQccTSllyjV42080L0j",carouselScroller:"fTzLARQ0EPCvPmol3wtF",carouselChevrons:"VSAtCKDeRfQH7O1t2eff",fillSpaceAbsolute:"IriswrXFrjhQwRTmrgIf",backgroundInCarousel:"RWVDgIkhym_nHPfxrxEO",canvasInCarousel:"hpHKwaBDciLDmKsUx6A6",currentlyPlayingStatus:"uw7snqn4j_j7v0S1Fpmi",footerPlayContainer:"PHgLQg31p9qeCUcSicCg",audioPreviewContainer:"EBU7aYrd4J_LgPaKmyJA",footerPlayContainerLeft:"lGxecOZ8oBfh2DzjoP0p",footerPlayContainerRight:"Hf9Q0qSpT2RXgmYT6bNE",footer:"OGu88AVNWY3IM3QlZjG0",footerDescription:"bdiJ1G8TQ1rV0_rYDjws",footerDescriptionContent:"FUyKOZGo4cLlF8PSnINm",expandFooterButton:"ZZqy7vcJrfQy4lXxCTB6",playButtonContainer:"qWtIAYA_A_mOQIlxBb02",isListeningToPreview:"R6fpPFFvUR3y3foJIDHD",isPlayingContext:"BdPspy97AcLd4WhT_L2N",transcriptForAudio:"Z_ouIT4D_IDAEK9NFivF",transcriptForVideo:"Xl2pUStmWsam79qkFAe7",audioWave:"hDiIlhxofBNpk5iFSYik",isExpandedFooter:"Icn8TjyVe6vIEWpxmYhl",centeredContainer:"TLbWzWrBDxGsZRv8m6lg",artworkImage:"IpLgaK4Oik13ltWcX5FA",parentArtworkImage:"P0gaJ5S6AlrdulY7vERi",previewHasCompleted:"nlj9PLnUOp6p9CpfeJr3",videoPreview:"mEYwOgcSR3UWyvz0OSVE",videoLoaded:"W_nKYaO8fH_8YLcmEaBR",transcript:"gSDmqCUB7gyRLyDhNVfF",videoPreviewCompleted:"CWroJ7w75YEPvOQ63QIZ",pulsateText:"dPKkgM2ctEg7P_MAUwjA",playing:"je5WMu3WPFt5JRsMVZb_",loading:"fl8QTa21ubkcNPWPywc9",pulsateLoading:"yQiJ5xD8GjZPS_kJYdgf",transcriptText:"S1JkAKIjGrjk74I1YEyb",spoken:"CJoYZ3wN9vIyNxjiMs6q",unspoken:"LF44BrY9AtFsXZOTo2WQ",subtitle:"yb0K_tfQMa762cHBS2LJ",previewHasCompletedContainer:"kraOhQgefWTb4HdrEa2y"},W=e=>{const{isExpandedFooter:t,setIsExpandedFooter:a,children:n,expandFooterDescribedBy:s}=e,i=(0,r.useRef)(null),o=(0,r.useRef)(null),[l,c]=(0,r.useState)(!1),d=t?y.Ru.get("show_less"):y.Ru.get("show_more"),u=(0,r.useCallback)((e=>{e.stopPropagation(),a((e=>!e))}),[a]);(0,r.useEffect)((()=>{requestAnimationFrame((()=>{o.current&&i.current&&c(o.current.clientHeight>i.current.clientHeight)}))}),[]);const p={"--mask-image":`url(${(0,H.bj)("images/mask.png")})`,"--mask-image-rtl":`url(${(0,H.bj)("images/mask-rtl.png")})`};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{ref:i,className:V.footerDescription,style:p,children:(0,C.jsx)(m.E,{variant:"bodySmall",className:V.footerDescriptionContent,ref:o,children:n})}),(l||t)&&(0,C.jsx)(g.H,{onClick:u,className:V.expandFooterButton,size:"small",condensedAll:!0,semanticColor:"textBase",tabIndex:0,"aria-describedby":s,children:d})]})};var z=a(38042),G=a(19672),Y=a(30254),K=a(19906);const Q=({uri:e,size:t})=>{const[a,r]=(0,K.A)(e);return(0,C.jsx)(z.M,{size:t,isAdded:a,onClick:()=>{r(!a)},condensed:!0})},$=({uri:e,size:t})=>(0,Y.v)(e)?(0,C.jsx)(G.g,{uri:e,size:t}):(0,C.jsx)(Q,{uri:e,size:t});var Z=a(89145),q=a(49461),J=a(62960),X=a(4871),ee=a(46882),te=a(1520),ae=a(9131);const re=({uri:e,name:t,togglePreview:a,isListeningToPreview:n,userHasCompletedPreview:i,standalonePlayer:o,durationMs:l})=>{const c=(0,F.gHQ)(e),[d,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null);d&&n&&u(!1);const h=(0,r.useCallback)((a=>{if(c&&(n||d)){const e=l&&a?(0,ae.f)(l-a):(0,ae.f)(NaN);return y.Ru.get("preview.remaining-time",{time:e})}const r=t??y.Ru.get("playing"),s=n&&!d;return(0,F.gHQ)(e)?s?r:y.Ru.get("preview.episode"):(0,F._Tv)(e)?s?r:y.Ru.get("preview.album"):(0,F.nuB)(e)?s?r:y.Ru.get("preview.playlist"):s?r:y.Ru.get("preview")}),[c,n,l,d,t,e]),v=(0,r.useCallback)((()=>n?(0,C.jsx)(te.J,{animated:!0}):(0,C.jsx)(q.X,{size:"small"})),[n]);return(0,r.useEffect)((()=>{if(!c)return;if(!o)return;const e=e=>{g(e.data.position)};return o.addListener(ee.Pv.PROGRESS,e),()=>{o.removeListener(ee.Pv.PROGRESS,e)}}),[o,c]),i?(0,C.jsx)(J.n,{className:V.audioPreviewContainer,iconOnly:()=>(0,C.jsx)(X.r,{size:"small"}),onClick:e=>{e.stopPropagation(),a()},size:"small"}):(0,C.jsx)(J.n,{className:s()(V.audioPreviewContainer,d?V.loading:null,n?V.playing:null),disabled:d,iconLeading:v,onClick:e=>{e.stopPropagation(),n||u(!0),a()},size:"small",children:(0,C.jsx)(m.E,{variant:"bodySmall",className:V.audioPreviewContainerText,children:h(p)})})},ne=e=>{const{isPlayingContext:t}=e;return!t&&e.uri&&e.isPreviewAvailable?(0,C.jsx)(re,{...e}):t?(0,C.jsxs)("div",{className:V.currentlyPlayingStatus,children:[(0,C.jsx)(te.J,{animated:!0}),(0,C.jsx)(m.E,{variant:"bodySmall",semanticColor:"textPositive",children:y.Ru.get("playing")})]}):null};var se=a(65720),ie=a(70847);const oe=e=>{const{uri:t,standalonePlayer:a,isPlayingContext:r,isPreviewAvailable:n,isListeningToPreview:s,togglePreview:i,durationMs:o,currentPreviewItem:l,isAddable:c,isPlayable:d,ariaPlayLabel:u,ariaPauseLabel:m,menu:p,onMoreButtonClick:g,handlePlayButtonClick:h,userHasCompletedPreview:v}=e;return(0,C.jsxs)("div",{className:V.footerPlayContainer,children:[(0,C.jsx)("div",{className:V.footerPlayContainerLeft,children:(0,C.jsx)(ne,{isPreviewAvailable:n,isPlayingContext:r,isListeningToPreview:s,uri:l?.uri??null,name:l?.name??null,standalonePlayer:a,durationMs:o,togglePreview:i,userHasCompletedPreview:v})}),(0,C.jsxs)("div",{className:V.footerPlayContainerRight,onClick:e=>{e.stopPropagation()},children:[(0,C.jsx)(se.b,{menu:p,children:(0,C.jsx)(Z.e,{size:"large",label:y.Ru.get("more"),onClick:g})}),c&&(0,C.jsx)($,{size:"large",uri:t}),d&&(0,C.jsx)("div",{className:V.playButtonContainer,children:(0,C.jsx)(ie.R,{isPlaying:r,onClick:h,ariaPlayLabel:u,ariaPauseLabel:m,version:r?ie.H.primary:ie.H.secondary})})]})]})};var le=a(71259),ce=a(24792),de=a(96579),ue=a(28798),me=a(79955),pe=a(18199);const ge=Number(V.homeFeedBaselineHalfWidth.replace("px",""))||430,he=({uri:e,text:t,images:a,imageColor:n,renderSubtitle:i,cardRef:o})=>{const c=(0,r.useRef)(null),d=(0,ue.K)({ref:c}),[u,p]=(0,r.useState)(32),g=(0,r.useCallback)((()=>{const e=o.current?.clientWidth??pe.Pm,a=2*(c.current?.clientWidth??pe.Pm),r=e<ge?24:32,n=(0,me.L)(t,r,700);p(n>a?24:32)}),[o,t]);(0,r.useEffect)((()=>{g()}),[g]),(0,l.w)({refOrElement:o,onResize:g,observeOnly:"width",observeOnMount:!1});const h={"--title-line-clamp":2,"--title-font-size":`${u}px`,"--title-font-size-small":(32===u?24:20)+"px"};return(0,C.jsxs)("header",{className:V.header,style:h,children:[(0,C.jsx)("div",{className:V.headerImage,children:(0,C.jsx)(le.M,{images:a,color:n,is1DCardHeader:!0})}),(0,C.jsxs)("div",{className:V.headerContainer,children:[(0,C.jsx)(de.N,{to:e,className:V.titleLink,children:(0,C.jsx)(ce.Zp,{label:t,disabled:!d,children:(0,C.jsx)(m.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",ref:c,className:V.titleClamp,id:e,children:t})})}),i?(0,C.jsx)(m.E,{as:"span",variant:"bodySmall",semanticColor:"textSubdued",className:s()(V.subtitle),children:i()}):null]})]})};var ye=a(39159),ve=a(84925);const xe=e=>{const{carouselLayout:t,withFooterOverlay:a}=e,{dynamicColors:r}=(0,ve.q)(),n={"--background-base-high-contrast":r?.highContrast.backgroundBase.toCSS(ye.a.RGBA)||"","--higher-contrast-text-base-color":r?.higherContrast.textBase.toCSS(ye.a.RGBA)||""};return t?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{"aria-hidden":!0,className:V.overlayTop}),(0,C.jsx)("div",{"aria-hidden":!0,className:s()({[V.withFooterOverlay]:a,[V.overlayBottom]:!a})})]}):(0,C.jsx)("div",{"aria-hidden":!0,style:n,className:s()(V.overlayForCenteredImage,V.overlayForCenteredImageDynamicColors)})};a(82745),a(2857),a(63339),a(97819);var fe=a(8335),be=a(86247),Ce=a(42400);const Pe=1e3/60,je=({forceAlwaysInView:e,playing:t})=>{const a=(0,r.useRef)(null),n=(0,r.useRef)(null),s=(0,be.SF)(),{ref:i,inView:o}=(0,fe.Wx)({root:s.current,initialInView:!1}),[c]=(0,r.useState)((()=>function(e){const t=new Uint8Array(e),a=new Array(e).fill(80),r=Array.from({length:e},(()=>100*Math.random()+80));return()=>{for(let n=0;n<e;n++)a[n]=a[n]+.4*(r[n]-a[n]),t[n]=Math.round(a[n]),Math.abs(a[n]-r[n])<1&&(r[n]=100*Math.random()+80);return t}}(32))),[d,u]=(0,r.useState)(t);(0,r.useEffect)((()=>{if(!t){const e=setTimeout((()=>u(!1)),500);return()=>clearTimeout(e)}return u(!0),()=>{}}),[t]);const m=d&&(o||e),p=(0,r.useCallback)((()=>{if(!a.current)return;const e=a.current?.getContext("2d");if(!a.current||!e)return;const t=a.current.width/window.devicePixelRatio,r=a.current.height/window.devicePixelRatio;let n=null;n=c(),n&&function(e,t,a,r){const n=t/2,s=a/2;e.clearRect(0,0,t,a),e.fillStyle="rgba(255, 255, 255, 35%)";for(let t=0;t<32;t++){const a=Math.max(0,Math.min(255,r[t]??0))*(s/255),i=n+-192+12*t-1.5;e.beginPath(),e.roundRect(i,s-a,3,2*a,1.5),e.fill()}}(e,t,r,n)}),[c]),g=(0,r.useCallback)((()=>{if(!a.current?.parentElement)return;const{offsetWidth:e,offsetHeight:t}=a.current.parentElement,r=window.devicePixelRatio||1;a.current.width=e*r,a.current.height=t*r,a.current.style.width=`${e}px`,a.current.style.height=`${t}px`;const n=a.current.getContext("2d");n?.scale(r,r)}),[]);return(0,l.w)({onResize:(0,Ce.s)(g)(200),refOrElement:n}),(0,r.useEffect)((()=>{if(!m)return()=>{};let e,t=null;const a=r=>{(null===t||(t?r-t:0)>=Pe)&&(p(),t=r),e=requestAnimationFrame(a)};return e=requestAnimationFrame(a),()=>{e&&cancelAnimationFrame(e)}}),[p,m]),(0,C.jsx)("div",{"aria-hidden":!0,ref:n,style:{width:"100%",height:"100%"},children:(0,C.jsx)("canvas",{style:{width:"100%",height:"100%"},ref:e=>{i(e),a.current=e,g()}})})};var ke=a(73136);const Ie=({onClick:e})=>(0,C.jsx)("div",{className:V.previewHasCompletedContainer,children:(0,C.jsx)(ke.$,{size:"large",onClick:t=>{t.stopPropagation(),t.preventDefault(),e()},colorSet:"invertedLight",children:y.Ru.get("preview.continue-playing")})}),Le=1500,we=e=>1e3*parseFloat(e.replace("s","")),Re=({line:e,positionMs:t,playing:a})=>{const[n,s]=(0,r.useState)(0);(0,r.useEffect)((()=>{s(0)}),[t]);const i=a;(0,r.useEffect)((()=>{let e;return()=>{e&&cancelAnimationFrame(e)}}),[i]);const o=t+n;return(0,C.jsx)("div",{className:V.transcriptText,children:e.map((({word:e,start:t},a)=>(0,C.jsx)(m.E,{variant:"bodyMediumBold",className:o>=t?V.spoken:V.unspoken,children:e},a)))})},Ne=({data:e,url:t,standalonePlayer:a,shiftTranscriptByOffsetFromURL:n})=>{const[s,i]=(0,r.useState)(0),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=(0,r.useMemo)((()=>(e=>{const t=new URL(e).searchParams.get("offsets.start");return t?we(t):0})(t)),[t]);(0,r.useEffect)((()=>{if(!a)return;const e=e=>{const t=e.data.position+(n?u:0);i(t)},t=()=>{l(!0),c||d(!0)},r=()=>{l(!1)};return a.on(ee.Pv.PROGRESS,e),a.on(ee.Pv.PLAYING,t),a.on(ee.Pv.PAUSED,r),()=>{a.removeListener(ee.Pv.PROGRESS,e),a.removeListener(ee.Pv.PLAYING,t),a.removeListener(ee.Pv.PAUSED,r)}}),[n,u,a,c]);const m=((e,t)=>{const a=(0,r.useMemo)((()=>Math.floor(t/Le)*Le),[t]);return(0,r.useMemo)((()=>{const t=[];for(const r of e){const e=we(r.offsets.start);if(e>=a&&e<a+Le){const a=we(r.offsets.end);t.push({word:`${r.word} `,start:e,end:a})}if(e>=a+Le)break}return t}),[e,a])})(e.words,s);return c&&m.length?(0,C.jsx)(Re,{line:m,positionMs:s,playing:o}):null};var Ae=a(19507),Se=a(76972),Te=a(39463);const Ee=(e,t=!0)=>{const{data:a,error:r}=(0,Ae.I)({queryKey:["transcript",e],gcTime:15*Te.i,staleTime:15*Te.i,queryFn:async()=>{if(!e)return null;const t=await(async e=>Se.n.getInstance().build().fromURL(e).withoutMarket().withoutAuthorization().send())(e);return"words"in t.body?t.body:null},enabled:t});return{data:a??null,error:r}};var _e=a(59161);const Me=e=>{const{hasAudioWave:t,userHasCompletedPreview:a,handleContinuePlayingButtonClick:r,standalonePlayer:n,previewState:i,parentImages:o,images:l,imageColor:c,handleCardClick:d,entityUrl:u,transcriptUrl:m,shiftTranscriptByOffsetFromURL:p}=e,g=(0,M.NC)(_e.eSY),{data:h}=Ee(m,g),y=o&&o.length>0&&l?.[0]?.url!==o?.[0]?.url;return(0,C.jsxs)(de.N,{tabIndex:-1,onClick:d,to:u,className:V.centeredContainer,"aria-hidden":!0,children:[(0,C.jsxs)("div",{className:s()(V.artworkImage,{[V.previewHasCompleted]:a}),children:[t?(0,C.jsx)("div",{className:V.audioWave,children:(0,C.jsx)(je,{playing:i.playing})}):null,(0,C.jsx)(le.M,{images:l,color:c,desiredSize:180*window.devicePixelRatio}),y&&(0,C.jsx)("div",{className:V.parentArtworkImage,children:(0,C.jsx)(le.M,{images:o,color:c,desiredSize:80*window.devicePixelRatio})})]}),g&&h&&m&&(0,C.jsx)("div",{className:s()(V.transcript,V.transcriptForAudio),children:(0,C.jsx)(Ne,{url:m,data:h,standalonePlayer:n,shiftTranscriptByOffsetFromURL:p})}),a?(0,C.jsx)(Ie,{onClick:r}):null]})};var Ue=a(58239),Be=a(74810);const De=({item:e,cardRef:t,playerContainerClass:a,isListening:r,overridePlatformId:n})=>{const s=(0,Be.j)();return!e?.canvas?.fileId||s?(0,C.jsx)("div",{className:V.backgroundInCarousel,style:{backgroundColor:e.background?.color??"transparent"},children:e.background?.imageUrl&&(0,C.jsx)("img",{alt:"",src:e.background.imageUrl})}):(0,C.jsx)(Ue.Gg,{className:V.canvasInCarousel,fileId:e.canvas.fileId,canvasType:e.canvas.type,canvasUri:e.canvas.uri,canvasUrl:e.canvas.url,canvasThumbnailUrl:e.canvas.thumbnailUrl,playbackType:r?Ue.RT.Loop:Ue.RT.LoopOnHover,playerContainerClass:`${a}_${e.canvas.fileId}`,mouseHoverRef:t,overridePlatformId:n,loadingStrategy:"lazy"})};var Fe=a(32765),Oe=a(26427);const He=`${O}-canvas`,Ve=e=>{const{previewItems:t,currentPreviewItemIndex:a,setCurrentPreviewItemIndex:n,playPreview:i,isListeningToPreview:o,playerContainerClass:l,cardRef:c}=e,d=(0,r.useCallback)((e=>{if(!t)return;if(a===e)return;const r=t[e];r&&(n(e),o&&i(r))}),[a,o,i,t,n]);return(0,C.jsx)(Fe.FN,{wheelScrollEnabled:!1,scrollingMethod:Fe.Hv.SNAP,scrollSnapAlign:"center",className:s()(V.carousel,V.fillSpaceAbsolute),scrollContentClassName:V.carouselScrollContent,scrollerClassName:V.carouselScroller,chevronsClassName:V.carouselChevrons,showButtons:Fe.C_.ON_HOVER,edgeGradients:Fe.TB.NONE,onScroll:d,role:"presentation",children:t.map(((e,t)=>(0,C.jsx)(Oe.A,{children:(0,C.jsx)(De,{item:e,playerContainerClass:l,cardRef:c,isListening:o,overridePlatformId:He})},`${e.uri}_${t}`)))})};var We=a(79558),ze=a(72519),Ge=a(44348);const Ye=({uri:e,fileId:t,poster:a,overridePlatformId:n,playerContainerClass:i,className:o,startOffsetMs:l,endOffsetMs:c,reportPreview:d=!1,children:u})=>{const{registerURI:m,unregisterURI:p}=(0,We.B)(),g=(0,r.useMemo)((()=>({videoPlayerContainer:`.${i}`})),[i]),h=(0,ze.d)(g,void 0,void 0,void 0,n,d);(0,r.useEffect)((()=>(m(e,{uri:e,standalonePlayer:h}),()=>{p(e)})),[e,m,p,h]);const y=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!t)return;const r=()=>{y.current&&y.current.classList.add(V.videoLoaded)};return h.addListener(ee.Pv.FIRST_BYTES,r),h.playTracks([(0,ee.KT)({mediaType:"video",format:"MANIFEST_ID",fileId:t,uri:e,poster:a??"",options:{position:l},logData:{playbackId:(0,Ge.E)()}})],{paused:!0,loop:!1,muted:!0}),()=>{h.removeListener(ee.Pv.FIRST_BYTES,r)}}),[e,h,t,a,l,c]),(0,C.jsxs)("div",{ref:y,className:s()(i,o),children:[a&&(0,C.jsx)("img",{"data-poster":!0,src:a,alt:""}),u]})},Ke=`${O}-video`,Qe=e=>{const{userHasCompletedPreview:t,handleContinuePlayingButtonClick:a,standalonePlayer:r,transcriptUrl:n,uri:i,playerContainerClass:o,handleCardClick:l,entityUrl:c,startOffsetMs:d,endOffsetMs:u,fileId:m,poster:p,shiftTranscriptByOffsetFromURL:g}=e,h=(0,M.NC)(_e.eSY),y=(0,M.NC)(_e.nq0,{loadingValue:!1}),{data:v}=Ee(n,h);return(0,C.jsxs)(de.N,{tabIndex:-1,onClick:l,to:c,className:V.centeredContainer,"aria-hidden":!0,children:[(0,C.jsx)(Ye,{uri:i,fileId:m,startOffsetMs:d??0,endOffsetMs:u??0,className:s()(V.videoPreview,{[V.videoPreviewCompleted]:t}),playerContainerClass:`${o}_Video`,overridePlatformId:Ke,poster:p,reportPreview:y,children:h&&v&&n&&(0,C.jsx)("div",{className:s()(V.transcript,V.transcriptForVideo),children:(0,C.jsx)(Ne,{url:n,data:v,standalonePlayer:r,shiftTranscriptByOffsetFromURL:g})})}),t?(0,C.jsx)(Ie,{onClick:a}):null]})};var $e=a(71790),Ze=a(72432);const qe=`${O}-audio`,Je=({currentPreviewItem:e,uri:t,hasAudioWave:a,playerContainerClass:n,loop:s})=>{const[i,o]=(0,r.useState)({playing:!1,muted:!0,completed:!1,duration:0}),l={uri:t,currentPreviewItem:e,previewState:i,setPreviewState:o,hasAudioWave:a,playerContainerClass:n,loop:s,enabled:!0},c=(({uri:e,currentPreviewItem:t,setPreviewState:a,previewState:n,enabled:s})=>{const{isPlaying:i}=(0,Ze.P)({uri:e},{featureIdentifier:"home"}),o=(0,$e.G)(),l=(0,We.B)(),c=l.getStateForURI(e)?.standalonePlayer??null,d=t?.video,u=(0,M.NC)(_e.x8),m=Boolean(d?.fileId),p=s&&u&&m,[g,h]=(0,r.useState)(null),y=p&&null===g,v=d?.startOffsetMs??0,x=d?.endOffsetMs??0,f=d?.transcriptUrl??null,b=Boolean(n&&n.playing&&!n.muted),C=Boolean(n&&n.completed&&!i),P=(0,r.useCallback)((async()=>{c&&((await c.getState()).playbackState.playing?c.setMuted(!n.muted):(c.setVolume(o.currentPlayerVolume),c.setMuted(!1),c.resume()))}),[c,n.muted,o.currentPlayerVolume]),j=(0,r.useCallback)((()=>{}),[]),k=(0,r.useCallback)((()=>{c&&c.pause().catch((()=>{}))}),[c]),I=(0,r.useCallback)((async()=>{y&&c&&(b||C||(c.setMuted(!0),c.resume()))}),[y,c,b,C]),L=(0,r.useCallback)((()=>{y&&c&&(b||C||c.pause().catch((()=>{})))}),[y,c,b,C]);return(0,r.useEffect)((()=>{if(!p)return;if(!c)return;const e=e=>{h(e.data.error)};return c.addListener(ee.Pv.ERROR,e),()=>{c.removeListener(ee.Pv.ERROR,e)}})),(0,r.useEffect)((()=>{if(!y)return;if(!c)return;const e=e=>{e.data.position>=x&&(c.seek(v),c.pause(),a((e=>({...e,completed:!0}))))};return c.addListener(ee.Pv.PROGRESS,e),()=>{c.removeListener(ee.Pv.PROGRESS,e)}}),[y,c,a,x,v]),{durationMs:x,isListeningToPreview:b,isPreviewAvailable:y,togglePreview:P,pausePreview:k,userHasCompletedPreview:C,playPreview:j,standalonePlayer:c,transcriptUrl:f,shiftTranscriptByOffsetFromURL:!1,onPointerEnter:I,onPointerLeave:L,analyser:null}})(l),d=(({uri:e,currentPreviewItem:t,previewState:a,hasAudioWave:n,playerContainerClass:s,loop:i,enabled:o})=>{const{isPlaying:l}=(0,Ze.P)({uri:e},{featureIdentifier:"home"}),c=(0,$e.G)(),d=Boolean(t?.audio?.url),u=(0,M.NC)(_e.o5i),m=(0,M.NC)(_e.nq0,{loadingValue:!1}),p=o&&u&&d,g=t?.audio?.transcriptUrl??null,h=(0,r.useMemo)((()=>{if(!n)return null;const e=new AudioContext({latencyHint:"playback",sampleRate:44100}),t=e.createAnalyser();t.fftSize=256;const a=e.createGain();return{audioContext:e,analyser:t,gainNode:a}}),[n]);(0,r.useEffect)((()=>()=>{h&&h.audioContext.close()}),[h]);const y=(0,r.useMemo)((()=>({audioPlayerContainer:`.${s}_Audio`,audioProcessorOptions:{disable:!0},preinitMediaElement:!1,disallowProtectedTracks:!0,enableWithoutEME:!0,createPlayer:()=>{const e=document.createElement("audio");if(h){const{audioContext:t,analyser:a,gainNode:r}=h;e.crossOrigin="anonymous";const n=t.createMediaElementSource(e);n.connect(a),n.connect(r),r.connect(t.destination)}return e}})),[h,s]),[v,x]=(0,r.useState)(!1),f=Boolean(a&&a.playing&&v),b=Boolean(a&&a.completed&&!l),C=(0,r.useCallback)(((e,t)=>{h?(h.gainNode.gain.value=t*t*t,e.setVolume(1)):e.setVolume(t)}),[h]),P=(0,r.useCallback)(((e,t)=>t.playbackState.playing&&v),[v]),j=(0,r.useCallback)((e=>{x(!1),e.pause().catch((()=>{}))}),[x]),k=(0,ze.d)(y,j,P,C,qe,m),I=(0,r.useCallback)(((e,t)=>{x(t),C(k,e)}),[k,C]),L=(0,r.useCallback)((t=>{const a=t.audio?.url;a&&k.playTracks([(0,ee.KT)({noAuth:!0,format:"GENERIC_MEDIA",mediaType:"audio",uri:e,url:a,logData:{playbackId:(0,Ge.E)()}})],{loop:i,paused:!1,muted:!1})}),[k,e,i]),w=(0,r.useCallback)((async()=>{if(!p)return;if(!t)return;const e=await k.getCurrentState();e.track?.url===t.audio?.url?e.playbackState.playing?v?I(0,!1):I(c.currentPlayerVolume,!0):(I(c.currentPlayerVolume,!0),k.resume()):(I(c.currentPlayerVolume,!0),L(t))}),[p,t,k,I,c.currentPlayerVolume,v,L]),R=(0,r.useCallback)((()=>{j(k)}),[j,k]),N=(0,r.useCallback)((async()=>{if(!p)return;if(!t)return;if(!n)return;if(f||b||l)return;const e=await k.getCurrentState();I(0,!1),e.track?.url===t?.audio?.url?k.resume():L(t)}),[p,t,n,f,b,k,l,I,L]),A=(0,r.useCallback)((()=>{p&&n&&(f||b||(I(0,!1),k.pause().catch((()=>{}))))}),[p,n,f,b,I,k]);return{durationMs:a.duration??0,isPreviewAvailable:p,isListeningToPreview:f,togglePreview:w,playPreview:L,pausePreview:R,standalonePlayer:k,userHasCompletedPreview:b,transcriptUrl:g,shiftTranscriptByOffsetFromURL:!0,onPointerEnter:N,onPointerLeave:A,analyser:h?.analyser??null}})({...l,enabled:!c.isPreviewAvailable}),u=c.isPreviewAvailable?"video":"audio",m="video"===u?c:d,{isPreviewAvailable:p,standalonePlayer:g}=m;return(0,r.useEffect)((()=>{if(!p)return;if(!g)return;const e=e=>{o((t=>({...t,duration:e.data.duration})))},t=e=>{o((t=>({...t,muted:e.data.muted})))},a=()=>{o((e=>({...e,playing:!0,completed:!1})))},r=()=>{o((e=>({...e,playing:!1})))},n=()=>{o((e=>({...e,playing:!1,completed:!0})))};return g.on(ee.Pv.DURATION_CHANGED,e),g.on(ee.Pv.MUTED_CHANGED,t),g.on(ee.Pv.PLAYING,a),g.on(ee.Pv.PAUSED,r),g.on(ee.Pv.TRACK_ENDED,n),()=>{g.removeListener(ee.Pv.DURATION_CHANGED,e),g.removeListener(ee.Pv.MUTED_CHANGED,t),g.removeListener(ee.Pv.PLAYING,a),g.removeListener(ee.Pv.PAUSED,r),g.removeListener(ee.Pv.TRACK_ENDED,n)}}),[g,p]),{...m,type:u,previewState:i}};const Xe=new(a(63388).l)("feedBaselineLookup","query","a950fb7c4ecdcaf2aad2f3ca9ee9c3aa4b9c43c97e1d07d05148c4d355bea7fc",null),et=(e,t)=>(0,Te.I)(Xe,e,t);var tt=a(74232),at=a(85956),rt=a(77255),nt=a(60804);const st=(0,r.createContext)(new Map);function it(e,t){const a=new Map;for(const t of e)a.set(t,null);return t&&t.lookup.forEach((e=>{if("AlbumResponseWrapper"===e.__typename||"PlaylistResponseWrapper"===e.__typename||"EpisodeOrChapterResponseWrapper"===e.__typename)switch(e.data.__typename){case"Album":case"Playlist":{const t=(e.data.previewItems?.items||[]).reduce(((e,t)=>{if("TrackResponseWrapper"!==t.__typename)return e;if("Track"!==t.data.__typename)return e;const a=(0,nt.g)(t.data.albumOfTrack?.coverArt?.sources||[])?.url||null,r=t.data.albumOfTrack?.coverArt?.extractedColors?.colorDark?.hex||null,n=t.data.previews?.audioPreviews.items?.[0];return e.push({name:t.data.name,uri:t.data.uri,canvas:t.data.canvas?{uri:t.data.canvas.uri,type:t.data.canvas.type,fileId:t.data.canvas.fileId,url:t.data.canvas.url,thumbnailUrl:(0,nt.g)(t.data.canvas.thumbnail?.sources)?.url}:null,background:{color:r,imageUrl:a},audio:n?{url:n.url,startOffsetMs:0,endOffsetMs:0,transcriptUrl:null}:null,video:null}),e}),[]);a.set(e._uri,t);break}case"Episode":{const{audioPreview:t,videoPreview:r}=e.data.previewPlayback??{};a.set(e._uri,[{name:e.data.name,uri:e.data.uri,canvas:null,background:null,audio:t?.cdnUrl?{url:t.cdnUrl,startOffsetMs:t.offset?.startTime?.totalMilliseconds??0,endOffsetMs:t.offset?.endTime?.totalMilliseconds??0,transcriptUrl:t.transcriptUrl}:null,video:r?{fileId:r.fileId,thumbnailUrl:"ImageV2"===r.placeholderImage?.data.__typename?(0,nt.g)(r.placeholderImage?.data.sources)?.url??null:null,startOffsetMs:r.offset?.startTime?.totalMilliseconds??0,endOffsetMs:r.offset?.endTime?.totalMilliseconds??0,transcriptUrl:r.transcriptUrl}:null}]);break}}})),a}var ot=a(48773),lt=a(98756),ct=a(28054),dt=a(69878),ut=a(1210),mt=a(9735),pt=a(61315),gt=a(4015);let ht=function(e){return e.VideoEpisode="VideoEpisode",e.Carousel="Carousel",e.AudioEpisode="AudioEpisode",e}({});const yt=({layout:e,onClick:t=()=>{},onPlay:a=()=>{},onContextMenu:n=()=>{},uri:i,headerText:o,renderFooter:l,isPlayable:c,isAddable:d,renderSubtitle:u,className:m,testId:p,ariaPlayLabel:g,ariaPauseLabel:h,index:y,requestId:v,images:x,parentImages:f,color:b,dragMimeType:P,onMoreButtonClick:j,menu:k,audioPreviewInLoop:I,logCardImpressions:L})=>{const w=(0,r.useRef)(null),{previewItems:R,currentPreviewItemIndex:N,setCurrentPreviewItemIndex:A,currentPreviewItem:S}=(e=>{const t=(0,M.NC)(_e.o5i),[a,n]=(0,r.useState)(0),s=(0,r.useContext)(st),i=!s.has(e),{data:o}=et({uris:[e]},{enabled:i}),l=(0,r.useMemo)((()=>{let a=[];return a=s.has(e)?s.get(e)??[]:it([e],o).get(e)??[],t?a:a.slice(0,1)}),[o,t,s,e]);return{previewItems:l,currentPreviewItem:l[a]??null,currentPreviewItemIndex:a,setCurrentPreviewItemIndex:n}})(i),{dynamicColors:T}=(0,ve.q)(),E=T?.higherContrast.backgroundBase.toCSS(ye.a.RGBA)??b,_=`BigCard_${i.replace("spotify:","").replace(/:/g,"_")}`,{isPlaying:U,isActive:O,togglePlay:H}=(0,Ze.P)({uri:i},{featureIdentifier:"home"}),z=e===ht.AudioEpisode,{durationMs:G,isListeningToPreview:Y,togglePreview:K,pausePreview:Q,standalonePlayer:$,userHasCompletedPreview:Z,previewState:q,isPreviewAvailable:J,playPreview:X,transcriptUrl:ee,shiftTranscriptByOffsetFromURL:te,onPointerEnter:ae,onPointerLeave:re}=Je({uri:i,currentPreviewItem:S,hasAudioWave:z,loop:I,playerContainerClass:_}),ne=(0,lt.g)(),se=(0,dt.W)({type:"link",uri:i}),{spec:ie,logger:le,UBIFragment:ce}=(0,mt.D)(D.y,{data:{uri:i,position:y,reason:v??""}}),de=(0,pt.n)(ie.getAbsoluteLocation(),ie),{draggable:ue,onDragStart:me}=(0,ct.P)({itemUris:[i],itemMimeTypes:P?[P]:[],dragLabelText:o}),pe=(0,r.useCallback)((()=>{let e=ie.cardPlayButtonFactory().hitPause({itemToBePaused:i});U||(e=O?ie.cardPlayButtonFactory().hitResume({itemToBeResumed:i}):ie.cardPlayButtonFactory().hitPlay({itemToBePlayed:i}));const t=le.logInteraction(e);a(i,t)?.preventDefault||(H({loggingParams:t}),Q())}),[ie,i,U,le,a,H,O,Q]),ge=(0,r.useCallback)((()=>{let e=ie.cardPlayButtonFactory().hitPause({itemToBePaused:i});U||(e=O?ie.cardPlayButtonFactory().hitResume({itemToBeResumed:i}):ie.cardPlayButtonFactory().hitPlay({itemToBePlayed:i}));const t=le.logInteraction(e);a(i,t),H({loggingParams:t})}),[O,U,le,a,ie,H,i]),fe=(0,r.useCallback)((()=>{const e=ie.hitUiNavigate({destination:i});le.logInteraction(e)}),[le,ie,i]),be=(0,r.useCallback)((()=>{t(i),fe()}),[t,i,fe]),Ce=(0,F.o_h)(i)?.toURLPath(!0)??"",Pe=se?(0,gt.hF)(Ce):Ce,[je,ke]=(0,r.useState)(!1),Ie=e===ht.VideoEpisode||e===ht.Carousel,Le={...(0,ut.w)({contrast:"higherContrast"}),"--background-color":E||"","--background-base-high-contrast":T?.highContrast.backgroundBase.toCSS(ye.a.RGBA)||"","--higher-contrast-text-base-color":T?.higherContrast.textSubdued.toCSS(ye.a.RGBA)||""};return(0,C.jsx)(ce,{spec:ie,children:(0,C.jsx)(ot.E,{uri:i,trigger:ot.l.OnMouseDown,children:(0,C.jsxs)(B.a,{variant:"naked",onClick:()=>{be(),ne(Pe)},ref:w,className:s()(V.card,m,"encore-medium-devices-theme",{[V.isPlayingContext]:U,[V.isListeningToPreview]:Y,[V.isExpandedFooter]:je,[V.withHeaderImage]:Ie}),style:Le,"data-testid":p,draggable:ue,onDragStart:me,onContextMenu:n,onPointerEnter:ae,onPointerLeave:re,children:[(0,C.jsx)("div",{"aria-hidden":!0,"data-uri":i,className:V.fillSpaceAbsolute,ref:L?de:null}),e===ht.Carousel?(0,C.jsx)(Ve,{cardRef:w,isListeningToPreview:Y,playPreview:X,playerContainerClass:_,previewItems:R,setCurrentPreviewItemIndex:A,currentPreviewItemIndex:N}):null,(0,C.jsx)(xe,{carouselLayout:e===ht.Carousel,withFooterOverlay:Boolean(l)}),(0,C.jsx)(he,{uri:i,text:o,images:x,imageColor:E,renderSubtitle:u,cardRef:w}),e===ht.VideoEpisode&&S?.video?(0,C.jsx)(Qe,{userHasCompletedPreview:Z,handleContinuePlayingButtonClick:ge,standalonePlayer:$,transcriptUrl:ee,shiftTranscriptByOffsetFromURL:te,uri:i,playerContainerClass:_,handleCardClick:be,entityUrl:Pe,fileId:S.video.fileId,poster:S.video.thumbnailUrl,startOffsetMs:S.video.startOffsetMs,endOffsetMs:S.video.endOffsetMs}):null,e===ht.AudioEpisode?(0,C.jsx)(Me,{hasAudioWave:z,userHasCompletedPreview:Z,handleContinuePlayingButtonClick:ge,standalonePlayer:$,playerContainerClass:_,transcriptUrl:ee,shiftTranscriptByOffsetFromURL:te,uri:i,previewState:q,parentImages:f,images:x,imageColor:E,handleCardClick:be,entityUrl:Pe}):null,(0,C.jsxs)("footer",{className:V.footer,children:[(0,C.jsx)(W,{isExpandedFooter:je,setIsExpandedFooter:ke,expandFooterDescribedBy:i,children:l?.()}),(0,C.jsx)(oe,{uri:i,standalonePlayer:$,isPreviewAvailable:J,isPlayingContext:U,isListeningToPreview:Y,durationMs:G,togglePreview:K,userHasCompletedPreview:Z,currentPreviewItem:S,isAddable:d,isPlayable:c,ariaPlayLabel:g,ariaPauseLabel:h,onMoreButtonClick:j,handlePlayButtonClick:pe,menu:k})]})]})})})};var vt=a(82102),xt=a(35054),ft=a(31016),bt=a(99280),Ct=a(76020),Pt=a(41672),jt=a(92544),kt=a(57791),It=a(42394),Lt=a(72134),wt=a(99893),Rt=a(66893),Nt=a(21309),At=a(97471),St=a(53143),Tt=a(98374),Et=a(23291),_t=a(2897),Mt=a(84155),Ut=a(11611),Bt=a(3977),Dt=a(86069),Ft=a(13695),Ot=a(56859),Ht=a(1287),Vt=a(55797);const Wt="SsbbQFeJun2Ts_EIktpr",zt="c9BGAQRNNsdwX3UTMr6I",Gt="uywGjRMxNHg8g1bYlRCw",Yt="lx7nfGbsUkI_2pC6caw9",Kt="xrnpBm515hmJJbcxfudp",Qt="zEXW4c9SPtH2KBs6ziag",$t="bAtY2R6yehmYQinDdUo8",Zt="kKlHj6lIKU67CC1irRYP",qt="dwXI_X_KOCLVx2Ki1h9R",Jt="vK47ZfLVzR4LfUvpNy5z",Xt="CZnhsxKzhvTg17LEWR7Y";function ea({data:e,index:t,shelfIndex:a}){const r=t,n=(0,Lt.f0)(e),s=(0,Lt.o8)(e),i=(0,Lt.Uk)(e)??null,o=(0,u.wA)(),l=(0,M.NC)(_e.x8);let c;switch(e.__typename){case"Album":c=(0,C.jsx)(ft.h,{uri:e.uri});break;case"Audiobook":c=(0,C.jsx)(bt.p,{uri:e.uri});break;case"Episode":c=(0,C.jsx)(Ct.b,{uri:e.uri});break;case"Playlist":c=(0,C.jsx)(Pt.W,{uri:e.uri});break;default:return(0,Ht.k)(e),null}switch(e.__typename){case"Album":return(0,C.jsx)(xt.h,{menu:c,children:(0,C.jsx)(yt,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:n,color:i,isPlayable:!0,isAddable:!0,audioPreviewInLoop:!0,layout:ht.Carousel,renderFooter:()=>null,renderSubtitle:()=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(vt.t,{children:e.albumType===_t._m.Single?y.Ru.get("single"):y.Ru.get("card.tag.album")}),(0,C.jsx)("div",{className:Xt,children:(0,Mt.K)(e.artists).map(((e,t)=>[t>0&&y.Ru.getSeparator(),(0,C.jsx)(de.N,{to:e.uri,stopPropagation:!0,children:(0,C.jsx)(m.E,{variant:"bodySmall",className:Zt,children:e.name})},e.uri)]))})]}),menu:c,logCardImpressions:!0,ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",e.name,(0,Mt.K)(e.artists).map((e=>e.name)).join(y.Ru.getSeparator())),ariaPlayLabel:y.Ru.get("tracklist.a11y.play",e.name,(0,Mt.K)(e.artists).map((e=>e.name)).join(y.Ru.getSeparator()))})},r);case"Audiobook":{const s=!!(0,Ut.e)(e.accessInfo)?()=>(o((0,U._3)()),{preventDefault:!0}):void 0;return(0,C.jsx)(ve.d,{dynamicColors:(0,St.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),children:(0,C.jsx)(xt.h,{menu:c,children:(0,C.jsx)(yt,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:n,color:i,isAddable:!0,isPlayable:!0,audioPreviewInLoop:!1,layout:ht.AudioEpisode,onPlay:s,renderFooter:()=>{const t=e.rating?.averageRating,a=e.accessInfo?.signifier?.text,r=(e.description||"").replace(/<[^>]*>?/gm,""),n=(0,Dt.JO)(e.publishDate),s=n?new Date(n):void 0;return(0,C.jsxs)(C.Fragment,{children:[a&&(0,C.jsx)(m.E,{variant:"bodySmall",as:"div",semanticColor:"textBrightAccent",children:a}),s&&!isNaN(s.getTime())&&(0,C.jsx)(vt.t,{semanticColor:"textBase",className:Jt,children:(0,Vt.gD)(s)}),e.audiobookDuration&&!isNaN(e.audiobookDuration.totalMilliseconds)&&(0,C.jsx)(vt.t,{semanticColor:"textBase",className:Jt,children:(0,C.jsx)(At.d,{durationMs:e.audiobookDuration.totalMilliseconds})}),!0===t?.showAverage&&void 0!==t.average&&(0,C.jsxs)(vt.t,{semanticColor:"textBase",className:Jt,children:[(0,C.jsx)(j.j,{size:"xsmall"}),"Â ",y.Ru.formatNumber(t.average,{maximumFractionDigits:1})]}),(0,C.jsx)("span",{children:(0,C.jsx)(Nt.N,{source:r??"",LinkComponent:de.N})})]})},renderSubtitle:()=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(vt.t,{children:y.Ru.get("card.tag.audiobook")}),(0,C.jsx)("span",{children:e.authorsV2?.[0]?.name})]}),menu:c,logCardImpressions:!0,ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",e.name,e.authorsV2?.[0]?.name),ariaPlayLabel:y.Ru.get("tracklist.a11y.play",e.name,e.authorsV2?.[0]?.name)})},r)})}case"Episode":{const o=e.mediaTypes?.includes(Ft.C.Video),d=o&&l;return(0,C.jsx)(ve.d,{dynamicColors:(0,St.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),children:(0,C.jsx)(xt.h,{menu:c,children:(0,C.jsx)(yt,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:n,parentImages:s,color:i,isAddable:!0,isPlayable:!0,audioPreviewInLoop:!1,layout:d?ht.VideoEpisode:ht.AudioEpisode,renderSubtitle:()=>(0,C.jsxs)(C.Fragment,{children:[(0,Bt.V)(e.contentRating)&&(0,C.jsx)(wt.U,{}),o?(0,C.jsx)(It.T,{className:qt}):(0,C.jsx)(vt.t,{children:y.Ru.get("card.tag.episode")}),(0,C.jsx)("div",{className:Xt,children:"Podcast"===e.podcastV2.data.__typename?(0,C.jsx)(de.N,{to:e.podcastV2.data.uri,stopPropagation:!0,children:(0,C.jsx)(m.E,{variant:"bodySmall",className:$t,children:e.podcastV2.data.name})}):""})]}),renderFooter:()=>{const t=(0,Dt.JO)(e.releaseDate),a=t?new Date(t):void 0;return(0,C.jsxs)(C.Fragment,{children:[a&&!isNaN(a.getTime())&&(0,C.jsx)(vt.t,{semanticColor:"textBase",className:Jt,children:(0,Vt.gD)(a)}),!isNaN(e.duration.totalMilliseconds)&&(0,C.jsx)(vt.t,{semanticColor:"textBase",className:Jt,children:(0,C.jsx)(At.d,{durationMs:e.duration.totalMilliseconds})}),(0,C.jsx)("span",{children:(0,C.jsx)(Nt.N,{source:e.description??"",LinkComponent:de.N})})]})},menu:c,logCardImpressions:!0,ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",e.name,"Podcast"===e.podcastV2.data.__typename?e.podcastV2.data.name:""),ariaPlayLabel:y.Ru.get("tracklist.a11y.play",e.name,"Podcast"===e.podcastV2.data.__typename?e.podcastV2.data.name:"")})},r)})}case"Playlist":return(0,C.jsx)(xt.h,{menu:c,children:(0,C.jsx)(yt,{index:t,shelfIndex:a,headerText:e.name,uri:e.uri,images:n,color:i,isAddable:!0,audioPreviewInLoop:!0,layout:ht.Carousel,isPlayable:!(0,Tt.p)(e?.attributes),renderSubtitle:()=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(vt.t,{children:y.Ru.get("card.tag.playlist")}),"User"===e.ownerV2.data.__typename&&(0,C.jsx)("div",{className:Xt,children:e.ownerV2.data.name})]}),renderFooter:()=>(0,C.jsx)(Nt.N,{source:e.description??"",LinkComponent:de.N,onLinkClick:e=>{e.stopPropagation()}}),menu:c,logCardImpressions:!0,ariaPauseLabel:y.Ru.get("tracklist.a11y.pause",e.name,"User"===e.ownerV2.data.__typename?e.ownerV2.data.name:""),ariaPlayLabel:y.Ru.get("tracklist.a11y.play",e.name,"User"===e.ownerV2.data.__typename?e.ownerV2.data.name:"")})},r);default:return(0,Ht.k)(e),null}}const ta=({icon:e})=>{switch(e){case"trending":return(0,C.jsx)(k.L,{size:"small"});case"briefcase":return(0,C.jsx)(I.o,{size:"small"});case"enhance":return(0,C.jsx)(L.M,{size:"small"});case"headphones":return(0,C.jsx)(w.r,{size:"small"});case"add-to-playlist":return(0,C.jsx)(R.u,{size:"small"});case"album":return(0,C.jsx)(N.I,{size:"small"});case"edit":return(0,C.jsx)(A.G,{size:"small"});case"lab":return(0,C.jsx)(S.X,{size:"small"});case"light-bulb":return(0,C.jsx)(T.N,{size:"small"});case"preview":return(0,C.jsx)(E.W,{size:"small"});case"star":return(0,C.jsx)(_.a,{size:"small"});default:return null}},aa=({title:e,icon:t})=>(0,C.jsxs)("header",{className:Kt,children:[e&&t&&(0,C.jsx)(ta,{icon:t}),e&&(0,C.jsx)(m.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Qt,children:e})]});const ra=({item:e,index:t,shelfIndex:a})=>{const{sectionUri:r}=e,{spec:n}=(0,kt.w)({seeAllUri:"",index:t,id:r||""}),s=(0,pt.n)(n.getAbsoluteLocation(),n);return(0,rt.v)(e.content)&&function(e){switch(e.__typename){case"Album":case"Audiobook":case"Episode":case"Playlist":return!0;default:return!1}}(e.content.data)?(0,C.jsx)(Et.r,{spec:n,children:(0,C.jsx)("div",{className:zt,ref:s,children:(0,C.jsx)("div",{className:Gt,children:(0,C.jsxs)("div",{className:Yt,children:[(0,C.jsx)(aa,{icon:e.recsplanation?.iconName,title:e.recsplanation.title?.transformedLabel}),(0,C.jsx)(ea,{data:e.content.data,index:t,shelfIndex:a})]})})},t)}):null},na=({section:e,index:t})=>{const a=e.items.map(((e,a)=>(0,C.jsx)(ra,{item:e,index:a,shelfIndex:t},a))).filter(Ot.P);return 0===a.length?null:(0,C.jsx)(Rt.x,{config:(0,pe.s1)(pe.yV.HOME_FEED_BASELINE),children:(0,C.jsx)(jt.$,{className:Wt,total:a.length,rowTruncationMethod:"floor",children:a})})};var sa=a(88176),ia=a(41350),oa=a(8845),la=a(32121);var ca=a(37293);var da=a(72908),ua=a(12912),ma=a(21466);const pa=()=>{const e=(t=(0,da.J)(),!(0,ca.w2)(navigator.userAgent)&&(1===t.length||1===window.navigation?.entries().length));var t;const{isWeb:a}=(0,ua.V)(),n=a&&e,[s,i]=(0,r.useState)(n?(()=>{try{const e=window.innerHeight-oa.uC-oa.fO;return Math.ceil(e/jt.Y)}catch(e){return e instanceof Error&&(0,la.fE)({metric_type:ia.MetricTypes.COUNTER,tags:{message:e.message,source:"deriveLimit"},what:"dwp-lazy-shelves-error",value:1}),null}})():null),o=(e=>(0,r.useCallback)((()=>{try{e()}catch(e){e instanceof Error&&(0,la.fE)({metric_type:ia.MetricTypes.COUNTER,tags:{message:e.message,source:"useHandleTrigger"},what:"dwp-lazy-shelves-error",value:1})}}),[e]))((0,r.useCallback)((()=>{s&&i(null)}),[s,i]));return((e,t)=>{(0,ma.i)((()=>t("scroll")),{disabled:null===e})})(s,o),((e,t)=>{(0,r.useEffect)((()=>{if(null===e)return;const a=setTimeout((()=>t("timeout")),3e3);return()=>{clearTimeout(a)}}),[e,t])})(s,o),s};var ga=a(27498),ha=a(21903),ya=a(9575),va=a(45647),xa=a(10700),fa=a(50523);const ba="AtmjO1hLLak5F0dLMUd7",Ca="NmSXfgyU6f_NL9euwy4u",Pa="Qed37Vb05ufzZTHAYvVm",ja="fcBVsa8IOFt2tpzOWz0I",ka="H4zOgN_sVFzd2irIv9cj",Ia="ta4REtNQHHvCUb6EBIsm",La=()=>(0,C.jsxs)("div",{className:ba,children:[(0,C.jsx)("div",{className:Ca}),(0,C.jsxs)("div",{className:Pa,children:[(0,C.jsx)(xa.k,{size:"medium",className:ja}),(0,C.jsx)(fa._,{as:"p",className:ka,variant:"titleMedium",semanticColor:"textBase",fontWeight:"extra-bold",fontWidth:"narrow",style:{fontSize:"40px"},children:y.Ru.get("web-player.onboarding-checklist.complete-card.title")}),(0,C.jsx)(m.E,{variant:"bodyMedium",className:Ia,children:y.Ru.get("web-player.onboarding-checklist.complete-card.text")})]})]});var wa=a(44879),Ra=a(96174),Na=a(67240);const Aa="HSKymkkzQpWHDTXXLfF2",Sa="PQIdaHYqHjxvLzCDhUhU",Ta="RcS2Iv3_A8J74iRls6dQ",Ea="_AsHr9vGM_wpBByNLrFF",_a="ck22I_oyx1PbExc2wVcd",Ma="LyDzadK1WZJhOzF0BKcx",Ua="bQlGUer3b2kxTJv21cDN",Ba="aYopGHwdlhTTV9z1Yr7Q",Da="RO0M9d16Mnu204GnI8wx",Fa="X14Ok7UGv_XFzH7CMBKs",Oa=({task:e})=>{const{performTask:t}=(0,Ra.V)(),a=(0,wa.S)(),{spec:n,logger:i}=(0,f.r)(ya.Y,{});return(0,r.useEffect)((()=>{i.logImpression(n.shelfCarouselFactory().taskCardFactory({identifier:e.id}).impression())}),[i,n,e.id]),(0,C.jsxs)("div",{className:Aa,style:{"--onboarding-card-color-dark":`${e.backgroundDark}`,"--background-base":`${e.backgroundDark}`,"--text-subdued":`${e.textSubdued}`,"--essential-subdued":`${e.textSubdued}`},children:[(0,C.jsx)("div",{className:Sa,style:{"--onboarding-card-color-light":`${e.backgroundLight}`}}),(0,C.jsxs)("div",{className:Ta,children:[(0,C.jsxs)("div",{className:Ea,children:[(0,C.jsx)(fa._,{as:"p",className:Ba,variant:"titleMedium",semanticColor:"textBase",fontWeight:"extra-bold",fontWidth:"narrow",style:{fontSize:"40px"},children:e.title}),(0,C.jsx)(m.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:e.description})]}),(0,C.jsxs)("div",{className:Ua,children:[(0,C.jsx)(ke.$,{size:"small",onClick:()=>{t(e.id),(e=>{const t=n.shelfCarouselFactory().taskCardFactory({identifier:e}).actionButtonFactory();switch(e){case"start-playing":i.logInteraction(t.hitFocusInputField());break;case"save-playlist":case"watch-a-video":i.logInteraction(t.hitUiNavigate({destination:"/search"}));break;case"create-playlist":i.logInteraction(t.hitCreatePlaylist());break;default:i.logInteraction(t.hitUiReveal())}})(e.id)},className:Fa,children:e.action}),(0,C.jsx)(g.H,{size:"small",onClick:()=>{a("openChecklist",{}),i.logInteraction(n.shelfCarouselFactory().taskCardFactory({identifier:e.id}).openChecklistButtonFactory().hitUiReveal())},className:s()(Da,Fa),children:y.Ru.get("web-player.onboarding-checklist.card.open-checklist-button")})]}),(0,C.jsx)("div",{className:_a,children:(0,C.jsx)(Na._,{src:(0,H.bj)(`images/${e.imageKey}`),className:Ma,loading:"lazy"})})]})]})},Ha="EuMit9oeqgOC19SB3Qnw",Va="cGiB6exxRHfvZMZdXpF0",Wa="eVD7tmFHn2swni7x2NKW",za=()=>{const{spec:e,logger:t}=(0,f.r)(ya.Y,{}),{tasks:a}=(0,Ra.V)(),n=(0,r.useMemo)((()=>a.filter((e=>!e.completed)).map(((e,t)=>(0,C.jsx)(Oa,{title:e.title,description:e.description,task:e},`onboarding-spotlight-card-${t}`)))),[a]),[i,o]=(0,r.useState)(n[0]),[l,c]=(0,r.useState)(0),d=(0,r.useCallback)((()=>{t.logInteraction(e.shelfHeaderFactory().nextButtonFactory().hitUiReveal()),c(l+1),o(n[l+1])}),[l,t,e,n]),u=(0,r.useCallback)((()=>{t.logInteraction(e.shelfHeaderFactory().prevButtonFactory().hitUiReveal()),c(l-1),o(n[l-1])}),[l,t,e,n]);(0,r.useEffect)((()=>{n.length<=l?(o(n[n.length-1]),c(n.length-1)):o(n[l])}),[l,n]);const m=(0,C.jsxs)("div",{className:Wa,children:[(0,C.jsx)(ce.Zp,{label:y.Ru.get("carousel.left"),children:(0,C.jsx)(g.H,{size:"small",iconOnly:ga.g,"aria-label":y.Ru.get("carousel.left"),disabled:0===l,onClick:u})}),(0,C.jsx)(ce.Zp,{label:y.Ru.get("carousel.right"),children:(0,C.jsx)(g.H,{size:"small",iconOnly:ha.V,"aria-label":y.Ru.get("carousel.right"),disabled:l===n.length-1,onClick:d})})]}),p=n.length<1;return(0,C.jsxs)("section",{className:s()(Va,Ha),"data-shelf-collapsable":!0,children:[(0,C.jsx)(va.k,{title:y.Ru.get("web-player.onboarding-checklist.shelf.title"),trailing:p?void 0:m}),p?(0,C.jsx)(La,{}):i]})};var Ga=a(32695),Ya=a(91464),Ka=a(45109);const Qa=({greeting:e,container:t,showDsaMessage:a,enableFeedBaseline:n})=>{const u=(0,c.lr)(),m=(0,Ga.q)(),p=(0,Ya.w)(),g=u&&!m&&[_e.Vt9.NavAndHome,_e.Vt9.NavHomeAndSpotlight].includes(p.variant),h=u&&!m&&p.variant===_e.Vt9.NavAndHome,y=(0,r.useMemo)((()=>((e,t,a=!1)=>{const r=[];a&&r.push({localOverrideTypename:"DesktopOnboardingHomeShelf"});let n=[],s=null;const i=e.sections.items.reduce(((e,a)=>{switch(a.data?.__typename){case"HomeFeedBaselineSectionData":if(!t)break;null===s&&(s={uri:`spotify:home:feed-baseline-unified-shelf:${e.length}`,items:[]},e.push({localOverrideTypename:"HomeFeedBaselineUnifiedShelf",localItem:s})),a.sectionItems.items.forEach((e=>{s&&s.items.push({uri:e.uri,sectionUri:a.uri,content:e.content,recsplanation:a.data})}));break;default:s=null,e.push({localOverrideTypename:!1,item:a})}return e}),[]);return n=function(e){const t=e.sections.items;return"HomeShortsSectionData"===t[0]?.data?.__typename}(e)?[i[0],...r,...i.slice(1)]:[...r,...i],n})(t,n,g)),[t,n,g]),v=pa(),x=v?y.slice(0,v):y,f=function(e,t){const a=(0,r.useMemo)((()=>t?e.sections.items.reduce(((e,t)=>("HomeFeedBaselineSectionData"===t.data?.__typename&&(0,tt.M)(t,t.data).sectionItems.items.forEach((t=>{const{content:a}=t;if((0,rt.v)(a)){const{data:t}=a;"GenericError"!==t.__typename&&"NotFound"!==t.__typename&&"RestrictedContent"!==t.__typename&&"DiscoveryFeed"!==t.__typename&&e.push(t.uri)}})),e)),[]):[]),[e,t]),{data:n}=et({uris:a},{enabled:a.length>0,gcTime:at.gO,staleTime:at.jl});return(0,r.useMemo)((()=>it(a,n)),[n,a])}(t,n),b=(0,r.useRef)(null);return(e=>{const t=(0,o.W)();(0,l.w)({refOrElement:e,observeOnly:"width",observeOnMount:!0,onResize:()=>{const a=e.current?.querySelectorAll(":scope > [data-shelf='carousel']");if(a?.length)for(const e of a)e instanceof HTMLElement&&((0,i.X)(e,t)?e.removeAttribute("data-shelf-notatedge"):e.setAttribute("data-shelf-notatedge","true"))}})})(b),(0,C.jsxs)("section",{className:s()(Ka.A.home,Ka.A.homepageWithCarousels),"data-testid":"home-page",children:[(0,C.jsx)(d.q,{}),(0,C.jsxs)("div",{className:s()(Ka.A.homepageContent,"contentSpacing"),ref:b,children:[a&&(0,C.jsx)(P,{}),(0,C.jsx)(st.Provider,{value:f,children:x.map(((t,a)=>{switch(t.localOverrideTypename){case"HomeFeedBaselineUnifiedShelf":return(0,C.jsx)(na,{section:t.localItem,index:a},`${a}-${t.localItem.uri}`);case"DesktopOnboardingHomeShelf":return(0,C.jsx)(za,{},`${a}-onboarding-spotlight`);default:return(0,C.jsx)(sa.Q,{greeting:e,section:t.item,index:a,hideFixedShelves:h},`${a}-${t.item.uri}`)}}))})]})]})}},88176:(e,t,a)=>{a.d(t,{Q:()=>ma});var r=a(30758),n=a(65809),s=a(74232),i=(a(66016),a(53177)),o=a(97500),l=a.n(o),c=a(55701),d=(a(77369),a(8335)),u=a(8413),m=a(3874),p=(a(66175),a(70397)),g=a(62411),h=a(15273),y=a(54387),v=a(89145),x=a(65720),f=a(28718),b=a(86148),C=a(38320),P=a(58565),j=a(19239);let k=function(e){return e.Clicked="event_clicked",e.Viewed="event_viewed",e}({}),I=function(e){return e.Card="card",e.Heart="heart",e.Play="play",e.ThreeDots="three_dots",e}({});const L=e=>{const t=(0,j.vh)(),{homePromotionsTrackingMetadata:a}=(0,P.r)(),{id:n,creativeId:s,lineitemId:i,playbackId:o,productName:l}=a?.[e]??{};return(0,r.useCallback)((({reason:e,type:a=k.Clicked})=>{const r=(0,C.A)({ad_id:n,creative_id:s,event:a,event_reason:e,lineitem_id:i,product_name:l,slot:l}),c={...r,data:{...r.data,playback_id:o}};t.send(c)}),[t,n,s,i,o,l])};var w=a(26387);const R="zY64dUtDiPaHVSF0rgiv",N="D95gFpWgTnJhJVmom2RM",A="DRLBRcFh2FWiD2_nQXlj",S="j0pfmbp4ZDuTXzZaMzPR",T="jD__bD8Dee3zEgB0Axjc",E="J1NxTZftpbEbhXwcZjZO",_="U84UYjEwZ6o7ybM8SVMB",M="nxaFA6BFTr4Hur8Z6mtl",U="jRGACFaRvB65046UBzXk",B="tLetM3x5c63716GFboHy",D="jtBk8q42AJ5GJ5ClauR3",F="ylVLkB04w9P8BDrgBP16",O="LNHo_9MkGUjZQgSxo4Ty",H="iu2bkL76Q_XGDNgj0oK9";var V=a(86070);const W=({onNotInterested:e,target:t})=>{const[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),o=L(t),c=(0,g.d4)(y.uW)||!!{}.STORYBOOK,d=(0,r.useMemo)((()=>l()(E,{[A]:a,[S]:s})),[a,s]);return c&&(0,V.jsx)(x.b,{menu:(0,V.jsx)(f.W,{children:(0,V.jsx)(b.D,{className:l()(T,w.A.menuItemButton),leadingIcon:(0,V.jsx)(h.P,{semanticColor:"textSubdued",size:"small"}),onClick:e,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),role:"menuitem",children:p.Ru.get("promotions.context-menu.not-interested")})}),onHide:()=>i(!1),onShow:()=>i(!0),children:(0,V.jsx)(v.e,{size:v.M.xs,label:p.Ru.get("show_more"),className:d,onClick:()=>o({reason:I.ThreeDots}),placement:"bottom"})})};var z=a(59116);a(86328),a(98273);const G=e=>{(new Image).src=e},Y=e=>{const{trackingMetadata:t}=(e=>{const{homePromotionsTrackingMetadata:t,responseIds:a}=(0,P.r)(),n=(0,r.useMemo)((()=>{if(void 0!==t&&e in t){const a=t[e];return(a?.events??[]).reduce(((e,t)=>(e[t.event]=t.urls,e)),{})}}),[t,e]);return{responseId:a?.["/home"]?.continuum,trackingMetadata:n}})(e);return{triggerClickedEvent:(0,r.useCallback)(((e=!1)=>{e||t?.clicked?.forEach((e=>{G(e)}))}),[t]),triggerImpressionEvent:(0,r.useCallback)((()=>{t?.viewed?.forEach((e=>G(e)))}),[t])}};var K=a(57359),Q=a(19906);var $=a(85387),Z=a(18831);var q=a(18611),J=a(19803),X=a(55827),ee=a(47394);const te=()=>{const e=(0,ee.A)(),t=(0,J.l)();return(0,r.useCallback)((async({uri:a,reason:r="local"})=>Promise.all([e.build().withHost(X.L1).withMethod("POST").withPath(`feedback/v1/feedback/home-promotion/dislike?uri=${encodeURIComponent(a)}&reason=${r}`).withEndpointIdentifier("feedback/v1/feedback/home-promotion/dislike").withoutMarket().send(),t.add("notinterested",[a])])),[e,t])};var ae=a(92713);const re=e=>(0,ae.x)(`home-native-ads-not-interested:${e}`,!1);var ne=a(72432);var se=a(68293),ie=a(92015),oe=a(60804);const le=["PLAY","ADD_TO_LIBRARY","NOT_INTERESTED"],ce=({nativeAd:e,spec:t})=>{const{albumType:a,artists:n,coverArt:s,name:i,uri:o}=e.content.data,l=L(o),{triggerImpressionEvent:c}=Y(o),g=(0,se.s)(),h=(0,r.useMemo)((()=>({logger:g,spec:t.nativeAdsItemFactory(),target:o})),[g,t,o]),{AddToLibraryIcon:y,handleAddToLibrary:v,isAddedToLibrary:x}=(({logger:e,spec:t,target:a})=>{const n=L(a),{triggerClickedEvent:s}=Y(a),[i,o]=(0,Q.A)(a),{Icon:l,setState:c}=(0,K.Q)(i?z.t.CURATED:z.t.UNCURATED,z.A);return{AddToLibraryIcon:l,handleAddToLibrary:(0,r.useCallback)((()=>{const r=t.saveButtonFactory();a&&(s(i),e.logInteraction(i?r.hitRemoveLike({itemNoLongerLiked:a}):r.hitLike({itemToBeLiked:a})),c(i?z.t.UNCURATED:z.t.CURATED),n({reason:I.Heart}),o(!i))}),[i,n,e,c,o,t,a,s]),isAddedToLibrary:i}})(h),{destination:f,handleNavigation:b}=(({logger:e,spec:t,target:a})=>{const n=L(a),{triggerClickedEvent:s}=Y(a),i=(0,$.Zp)(),o=(0,r.useMemo)((()=>(0,Z.o_h)(a)?.toURLPath()??""),[a]),l=(0,r.useCallback)(((a,r)=>{r?.preventDefault(),s(),e.logInteraction(t.hitUiNavigate({destination:o})),n({reason:I.Card}),i(o)}),[o,n,e,i,t,s]);return{destination:o,handleNavigation:l}})(h),{handleNotInterested:C}=(({logger:e,spec:t,target:a})=>{const[n,s]=re(a),i=te(),o=(0,r.useCallback)((()=>{e.logInteraction(t.notInterestedButtonFactory().hitDislike({itemToBeDisliked:a})),a&&s(!0);try{i({uri:a})}catch(e){(0,q.Cp)(e,{level:"warning"})}}),[e,i,s,t,a]);return{isNotInterested:!!a&&n,handleNotInterested:o}})(h),{handlePlay:P,isPlaying:j}=(({logger:e,spec:t,target:a})=>{const n=L(a),{triggerClickedEvent:s}=Y(a),{isActive:i,isPlaying:o,togglePlay:l}=(0,ne.P)({uri:a},{featureIdentifier:"home_native_ad"});return{handlePlay:(0,r.useCallback)((()=>{const r=t.playButtonFactory();s(o),o?e.logInteraction(r.hitPause({itemToBePaused:a})):i?e.logInteraction(r.hitResume({itemToBeResumed:a})):e.logInteraction(r.hitPlay({itemToBePlayed:a})),n({reason:I.Play}),l()}),[i,o,n,e,t,a,l,s]),isPlaying:o}})(h),w=(0,r.useMemo)((()=>le.map((e=>({target:o,type:e})))),[o]),R=(0,r.useMemo)((()=>(0,oe.g)(s?.sources)?.url),[s]),A=(0,r.useMemo)((()=>s?.sources.map((({url:e,width:t})=>`${e} ${t}w`)).join(", ")),[s]),S=(0,r.useMemo)((()=>`${(0,ie.C)(a)} â¢ ${n.items.map((({profile:e})=>e.name)).join(p.Ru.getSeparator())}`),[a,n]),{ref:T}=(0,d.Wx)({onChange:e=>{e&&(c(),g.logImpression(t.impression()),l({type:k.Viewed}))},triggerOnce:!0});return(0,V.jsx)(m.M,{actions:w,addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),addToLibraryIcon:y,body:S,cardRef:T,className:N,contextMenu:(0,V.jsx)(W,{onNotInterested:C,target:o}),href:f,isExternalLinkTargetFn:()=>!1,isInLibrary:x,isPlaying:j,mediaSlotImageFallbackIcon:u.I,mediaSlotImageSrc:R,mediaSlotImageSrcSet:A,onAddToLibrary:v,onNavigate:b,onPlay:P,onShare:()=>{},pauseButtonLabel:p.Ru.get("playlist.a11y.pause",i),playButtonLabel:p.Ru.get("playlist.a11y.play",i),removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:"",title:i})};var de=a(35394),ue=a(59039),me=a(45647),pe=a(30920),ge=a(57157);const he="sponsored-recommendation-frame",ye=({isOpen:e,onClose:t})=>(0,V.jsxs)(ge.A,{animated:!0,animation:{modal:{base:U,afterOpen:B,beforeClose:D}},className:F,isOpen:e,onRequestClose:t,children:[(0,V.jsx)("iframe",{className:O,"data-testid":he,id:he,name:he,sandbox:"allow-scripts allow-same-origin",src:"https://sponsored-recommendations.spotify.com/desktop",title:p.Ru.get("context-menu.about-recommendations")}),(0,V.jsx)(de.H,{"aria-label":p.Ru.get("close_button_action"),className:H,iconOnly:pe.M,onClick:t,semanticColor:"textBase",size:"medium"})]}),ve=({spec:e,subtitle:t,title:a})=>{const n=(0,se.s)(),[s,i]=(0,r.useState)(!1),o=(0,g.d4)(y.uW)||!!{}.STORYBOOK,l=(0,r.useCallback)((()=>{n.logInteraction(e.nativeAdsShelfHeaderFactory().sponsoredRecommendationToolTipFactory().hitShowTooltip()),i(!0)}),[n,i,e]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(me.k,{title:a?.transformedLabel??"",subtitle:(0,V.jsxs)("span",{className:_,children:[t?.transformedLabel??"",o&&(0,V.jsx)(de.H,{"aria-label":p.Ru.get("context-menu.about-recommendations"),className:M,"data-testid":"sponsored-recommendation-modal-trigger",iconOnly:ue.N,onClick:l,semanticColor:"textSubdued",size:"small"})]})}),(0,V.jsx)(ye,{isOpen:s,onClose:()=>i(!1)})]})};var xe=a(84409),fe=a(45109);const be=({nativeAd:e,section:t,spec:a})=>{const[r]=re(e.content.data.uri);return!r&&(0,V.jsxs)("section",{className:l()(R,fe.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,V.jsx)(ve,{spec:a,...t.data}),(0,V.jsx)(ce,{nativeAd:e,spec:a})]})},Ce=(0,i.mc)((({index:e,section:t})=>{const a=(0,r.useMemo)((()=>t.sectionItems.items.find((e=>"AlbumResponseWrapper"===e.content?.__typename&&"Album"===e.content.data?.__typename))),[t]),{spec:n}=(0,xe.r)(c.U,{data:{uri:a?.content.data.uri??"",position:e,reason:t.data.title?.transformedLabel??"",identifier:t.uri}});return a&&(0,V.jsx)(be,{nativeAd:a,section:t,spec:n})}),{name:"HomeNativeAdsShelf"});var Pe=a(4049),je=a(72134),ke=a(35054),Ie=a(76855),Le=a(96436),we=a(43157),Re=a(13057),Ne=a(82571),Ae=a(2897);const Se=e=>{let t,a,r,n;const s=[];return e.forEach((e=>{e.type!==Ae.j3.Navigate&&e.target&&e.type&&(e.type===Ae.j3.Play&&(t=e.target),e.type===Ae.j3.AddToLibrary&&(a=e.target),e.type===Ae.j3.Share&&(r=e.target),e.type===Ae.j3.NotInterested&&(n=e.target),s.push({target:e.target,type:e.type}))})),{iconActions:s,notInterestedUri:n,copyUri:r,libraryUri:a,playUri:t}},Te=e=>{switch(e){case Ae.r7.Album:return u.I;case Ae.r7.Artist:return Ie.r;case Ae.r7.Playlist:return Le.e;case Ae.r7.Track:return we.v;case Ae.r7.Video:return Re.B;default:return Ne.d}},Ee=e=>{switch(e){case Ae.cf.TextAnnouncement:return"textAnnouncement";case Ae.cf.TextBrightAccent:return"textBrightAccent";case Ae.cf.TextNegative:return"textNegative";case Ae.cf.TextPositive:return"textPositive";case Ae.cf.TextSubdued:return"textSubdued";case Ae.cf.TextWarning:return"textWarning";default:return"textBase"}},_e=e=>{if(!e||!("__typename"in e)||"ImageV2"!==e.__typename)return;const t=[];return e.sources.forEach((e=>{t.push(`${e.url} ${e.maxWidth}w`)})),{src:e.imageId,srcSet:t.length>0?t.join(", "):void 0}},Me=({adEventLogger:e,libraryUri:t,triggerClickedEvent:a,spec:n})=>{const s=(0,se.s)(),[i,o]=(0,Q.A)(t??""),{setState:l,Icon:c}=(0,K.Q)(i?z.t.CURATED:z.t.UNCURATED,z.A);return{MaybeAnimatedIcon:c,isInLibrary:i,handleAddToLibrary:(0,r.useCallback)((()=>{t&&(l(i?z.t.UNCURATED:z.t.CURATED),a(i),e({type:k.Clicked,reason:I.Card}),i?s.logInteraction(n.saveButtonFactory({uri:t}).hitRemoveLike({itemNoLongerLiked:t})):s.logInteraction(n.saveButtonFactory({uri:t}).hitLike({itemToBeLiked:t})),o(!i))}),[e,i,t,l,o,n,a,s])}},Ue=({adEventLogger:e,triggerImpressionEvent:t,spec:a})=>{const n=(0,se.s)(),{responseIds:s}=(0,P.r)(),i=s?.["/home"]?.continuum,[o,l]=(0,r.useState)(void 0),{ref:c,inView:u}=(0,d.Wx)({threshold:[1]});return(0,r.useEffect)((()=>{u&&i!==o&&(t(),n.logImpression(a.impression()),e({type:k.Viewed}),l(i))}),[u,e,n,a,t,i,o]),{promotionRef:c}};var Be=a(98756);const De=({adEventLogger:e,target:t,triggerClickedEvent:a,spec:n})=>{const s=(0,Be.g)(),{href:i,isExternalTarget:o}=(e=>{const t=(0,Z.o_h)(e);return t?{href:t.toURLPath(),isExternalTarget:!1}:URL.canParse(e)&&!new URL(e).host.includes("open.spotify.com")?{href:e,isExternalTarget:!0}:{href:e,isExternalTarget:!1}})(t),l=(0,se.s)();return{href:i,isExternalTarget:o,handleNavigation:(0,r.useCallback)(((t,r)=>{a(),e({type:k.Clicked,reason:I.Card}),l.logInteraction(n.hitUiNavigate({destination:i})),o||(r.preventDefault(),s(i))}),[e,i,o,s,n,a,l])}},Fe=(0,r.createContext)({onSetDisliked:()=>{},isDislikedInLocalStorage:!1}),Oe=({children:e,promotionUri:t})=>{const[a,n]=(0,ae.x)(`home-promotion-disliked:${t}`,!1),s=(0,r.useMemo)((()=>({onSetDisliked:()=>n(!0),isDislikedInLocalStorage:a})),[a,n]);return a?null:(0,V.jsx)(Fe.Provider,{value:s,children:e})},He=({notInterestedUri:e,spec:t})=>{const a=(0,se.s)(),{onNotInterested:n}=(e=>{const{onSetDisliked:t,isDislikedInLocalStorage:a}=(0,r.useContext)(Fe),n=te(),[s,i]=(0,r.useState)(a?"INIT":"SUCCESS");return{isMarkedNotInterested:a||"SUCCESS"===s,onNotInterested:(0,r.useCallback)((async()=>{if(i("PENDING"),e)try{await n({uri:e}),t(!0)}catch(e){i("ERROR")}}),[e,n,t])}})(e);return(0,r.useCallback)((()=>{e&&a.logInteraction(t.notInterestedButtonFactory({uri:e}).hitDislike({itemToBeDisliked:e})),n()}),[e,n,a,t])};var Ve=a(84825);const We=({adEventLogger:e,playUri:t,triggerClickedEvent:a,spec:n})=>{const s=(0,se.s)(),{isPlaying:i,togglePlay:o,isActive:l}=(0,ne.P)({uri:t??""},{featureIdentifier:"home_promotion"}),c=(0,r.useCallback)((()=>{if(t){const r=(0,Ve.$I)({isPlaying:i,isActive:l,spec:n.playButtonFactory({uri:t}),logger:s,uri:t});a(i),e({type:k.Clicked,reason:I.Card}),o({loggingParams:r})}}),[e,l,i,t,n,o,a,s]);return{isPlaying:i,isActive:l,handlePlay:c}};var ze=a(22105);const Ge=({adEventLogger:e,copyUri:t,triggerClickedEvent:a,spec:n})=>{const s=(0,se.s)(),{onCopyLink:i}=(0,ze.L)({sharingInfo:null,uri:t??""});return(0,r.useCallback)((()=>{t&&(a(),e({type:k.Clicked,reason:I.Card}),s.logInteraction(n.shareButtonFactory({uri:t}).hitCopyToClipboard()),i())}),[t,a,e,s,n,i])};var Ye=a(67659);const Ke="vM8M5NM7DIyeDgnEvDwt",Qe="nMEsN3cKwfOWwnhr6ORE",$e="vvyeNsGyrEOq4WPTy_7i",Ze=({handleNotInterested:e})=>(0,V.jsx)(x.b,{menu:(0,V.jsx)(f.W,{children:(0,V.jsx)(b.D,{role:"menuitem",leadingIcon:(0,V.jsx)(Ye.r,{semanticColor:"textSubdued",size:"small"}),onClick:e,children:p.Ru.get("promotions.context-menu.not-interested")})}),children:(0,V.jsx)(v.e,{size:v.M.xs,label:p.Ru.get("show_more"),className:$e})});var qe=a(31016),Je=a(76020),Xe=a(41672),et=a(57399),tt=a(53169);const at=({target:e})=>(0,r.useMemo)((()=>(e=>{switch(((0,Z.o_h)(e)||{}).type){case Z.NQG.ALBUM:return(0,V.jsx)(qe.h,{uri:e});case Z.NQG.EPISODE:return(0,V.jsx)(Je.b,{uri:e});case Z.NQG.PLAYLIST:case Z.NQG.PLAYLIST_V2:return(0,V.jsx)(Xe.W,{uri:e});case Z.NQG.SHOW:return(0,V.jsx)(et.H,{uri:e});case Z.NQG.TRACK:return(0,V.jsx)(tt.P,{uri:e});default:return null}})(e)),[e]),rt=({promotion:e,spec:t})=>{const a=L(e.uri),{triggerClickedEvent:n,triggerImpressionEvent:s}=Y(e.uri),{copyUri:i,iconActions:o,libraryUri:l,playUri:c,notInterestedUri:d}=(0,r.useMemo)((()=>Se(e.actions)),[e.actions]),{promotionRef:u}=Ue({adEventLogger:a,triggerImpressionEvent:s,spec:t}),{handlePlay:g,isPlaying:h}=We({playUri:c,adEventLogger:a,triggerClickedEvent:n,spec:t}),{handleAddToLibrary:y,MaybeAnimatedIcon:v,isInLibrary:x}=Me({libraryUri:l,adEventLogger:a,triggerClickedEvent:n,spec:t}),{handleNavigation:f,href:b,isExternalTarget:C}=De({target:e.target,adEventLogger:a,triggerClickedEvent:n,spec:t}),P=Ge({copyUri:i,adEventLogger:a,triggerClickedEvent:n,spec:t}),j=He({notInterestedUri:d,spec:t}),k=at({target:e.target});return(0,V.jsx)(ke.h,{menu:k,children:(0,V.jsx)(m.M,{cardRef:u,actions:o,addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),addToLibraryIcon:v,body:e.bodyTranslation?.transformedLabel,href:b,isExternalLinkTargetFn:()=>C,className:Qe,contextMenu:d?(0,V.jsx)(Ze,{handleNotInterested:j}):null,isInLibrary:x,isPlaying:h,mediaSlotImageFallbackIcon:Te(e.mediaSlot?.fallbackIcon),mediaSlotImageSrc:_e(e.mediaSlot?.image?.data)?.src,onAddToLibrary:y,onNavigate:f,onPlay:g,onShare:P,pauseButtonLabel:p.Ru.get("playlist.a11y.pause",e.titleTranslation?.transformedLabel||""),playButtonLabel:p.Ru.get("playlist.a11y.play",e.titleTranslation?.transformedLabel||""),pretitle:e.pretitleTranslation?.transformedLabel,pretitleSemanticColor:Ee(e.pretitleSemanticColor),removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:p.Ru.get("context-menu.copy-generic-link"),subtitle:e.subtitleTranslation?.transformedLabel,title:e.titleTranslation?.transformedLabel})})},nt=({promotion:e,spec:t})=>{const a=at({target:e.target}),n=L(e.uri),{triggerClickedEvent:s,triggerImpressionEvent:i}=Y(e.uri),{copyUri:o,iconActions:l,libraryUri:c,playUri:d,notInterestedUri:u}=(0,r.useMemo)((()=>Se(e.actions)),[e.actions]),{promotionRef:g}=Ue({adEventLogger:n,triggerImpressionEvent:i,spec:t}),{handlePlay:h,isPlaying:y}=We({playUri:d,adEventLogger:n,triggerClickedEvent:s,spec:t}),{handleAddToLibrary:v,MaybeAnimatedIcon:x,isInLibrary:f}=Me({libraryUri:c,adEventLogger:n,triggerClickedEvent:s,spec:t}),{handleNavigation:b,href:C,isExternalTarget:P}=De({target:e.target,adEventLogger:n,triggerClickedEvent:s,spec:t}),j=Ge({copyUri:o,adEventLogger:n,triggerClickedEvent:s,spec:t}),k=He({notInterestedUri:u,spec:t});return(0,V.jsx)(ke.h,{menu:a,children:(0,V.jsx)(m._,{foregroundColor:e.accentColor?.hex||void 0,cardRef:g,actions:l,addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),addToLibraryIcon:x,body:e.bodyTranslation?.transformedLabel,href:C,isExternalLinkTargetFn:()=>P,hideBackgroundGradient:!!e.gradientOverlayDisabled,contextMenu:u?(0,V.jsx)(Ze,{handleNotInterested:k}):null,isInLibrary:f,isPlaying:y,onAddToLibrary:v,onNavigate:b,onPlay:h,onShare:j,pauseButtonLabel:p.Ru.get("playlist.a11y.pause",e.titleTranslation?.transformedLabel||""),playButtonLabel:p.Ru.get("playlist.a11y.play",e.titleTranslation?.transformedLabel||""),pretitle:e.pretitleTranslation?.transformedLabel,removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:p.Ru.get("mwp.list.item.share"),title:e.titleTranslation?.transformedLabel,backgroundImageSrc:_e(e.background?.image?.data)?.src,titleImageSrc:_e(e.logo?.image?.data)?.src})})};var st=a(23291);const it=e=>"PromotionResponseWrapper"===e.content?.__typename&&("PromotionDefaultNative"===e.content.data.__typename||"PromotionDefaultPoster"===e.content.data.__typename),ot=(0,i.mc)((({section:e,index:t})=>{const a=e.sectionItems.items.find(it),{spec:r}=(0,xe.r)(Pe.b,{data:{uri:a?.uri,position:t,reason:"",identifier:e.uri}}),n=a?.content?.data;if(!n)return null;const s=((e,t)=>{const a=(0,Z.o_h)(t.target)?t.target:t.uri;switch(t.__typename){case"PromotionDefaultNative":{const r=e.promotionItemFactory({identifier:"default_native",position:0,uri:a});return(0,V.jsx)(rt,{promotion:t,spec:r})}case"PromotionDefaultPoster":{const r=e.promotionItemFactory({identifier:"default_poster",position:0,uri:a});return(0,V.jsx)(nt,{promotion:t,spec:r})}default:return null}})(r,n);if(null===s)return null;const i=(0,je.wA)(e.data.headerEntity,e.data.title??{transformedLabel:p.Ru.get("promotions.default-section-title")},null);return(0,V.jsx)(Oe,{promotionUri:n.uri,children:(0,V.jsx)(st.r,{spec:r,children:(0,V.jsxs)("section",{className:l()(Ke,fe.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,V.jsx)(me.k,{...i}),s]})})})}),{name:"HomePromotionShelf"});a(2557);var lt=a(27498),ct=a(21903),dt=a(8807),ut=a(24792),mt=a(77255),pt=a(61315);const gt="JYoTSXH6KEr_MIwisdZi",ht="e9iXRrRXf6MAlkmd8J0s",yt=({title:e,pretitle:t,body:a,uri:n,saveTrackUri:s,images:i,spec:o,contextMenu:l,onContextMenu:c,onTouchStart:d,onTouchEnd:u,useVideoLayout:g=!1})=>{const h=(0,se.s)(),y=(0,Be.g)(),v=s??n,[x,f]=(0,Q.A)(v||""),{isPlaying:b,togglePlay:C,isActive:P}=(0,ne.P)({uri:n},{featureIdentifier:"album"}),{onCopyLink:j}=(0,ze.L)({sharingInfo:null,uri:n}),k=(0,r.useCallback)((()=>{const e=(0,Ve.$I)({isPlaying:b,isActive:P,spec:o.playButtonFactory(),logger:h,uri:n});C({loggingParams:e})}),[o,P,b,h,C,n]),{href:I,isExternalTarget:L}=(e=>{const t=(0,Z.o_h)(e);return t?{href:t.toURLPath(),isExternalTarget:!1}:URL.canParse(e)&&new URL(e).host.includes("open.spotify.com")?{href:e,isExternalTarget:!0}:{href:e,isExternalTarget:!1}})(n),w=(0,r.useCallback)(((e,t)=>{h.logInteraction(o.hitUiNavigate({destination:n})),L||(t.preventDefault(),y(I))}),[h,o,n,L,y,I]),{setState:R,Icon:N}=(0,K.Q)(x?z.t.CURATED:z.t.UNCURATED,z.A),A=(0,r.useCallback)((()=>{R(x?z.t.UNCURATED:z.t.CURATED),h.logInteraction(x?o.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:v}):o.saveButtonFactory().hitLike({itemToBeLiked:v})),f(!x)}),[R,x,h,o,v,f]),S=(0,r.useCallback)((()=>{h.logInteraction(o.shareButtonFactory().hitCopyToClipboard()),j()}),[o,h,j]),T=(0,pt.n)(o.getAbsoluteLocation(),o);return g?(0,V.jsx)(m._,{cardRef:T,title:e,href:I,pretitle:t,body:a,isExternalLinkTargetFn:()=>!1,actions:[{target:n,type:"PLAY"},{target:v,type:"ADD_TO_LIBRARY"}],onPlay:k,onAddToLibrary:A,onShare:S,isPlaying:b,isInLibrary:x,onNavigate:w,backgroundImageSrc:i[0]?.url,playButtonLabel:p.Ru.get("playlist.a11y.play",e),pauseButtonLabel:p.Ru.get("playlist.a11y.pause",e),addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:p.Ru.get("mwp.list.item.share"),addToLibraryIcon:N,className:ht,onContextMenu:c,onTouchStart:d,onTouchEnd:u,contextMenu:l,isVideoLayout:!0}):(0,V.jsx)(m.M,{cardRef:T,title:e,href:I,pretitle:t,body:a,isExternalLinkTargetFn:()=>!1,actions:[{target:n,type:"PLAY"},{target:v,type:"ADD_TO_LIBRARY"},{target:n,type:"SHARE"}],onPlay:k,onAddToLibrary:A,onShare:S,isPlaying:b,isInLibrary:x,onNavigate:w,mediaSlotImageSrc:i[0]?.url,playButtonLabel:p.Ru.get("playlist.a11y.play",e),pauseButtonLabel:p.Ru.get("playlist.a11y.pause",e),addToLibraryButtonLabel:p.Ru.get("save_to_your_library"),removeFromLibraryButtonLabel:p.Ru.get("remove_from_your_library"),shareButtonLabel:p.Ru.get("mwp.list.item.share"),className:gt,addToLibraryIcon:N,onContextMenu:c,onTouchStart:d,onTouchEnd:u})},vt=({name:e,uri:t,images:a,artists:r,spec:n,type:s})=>(0,V.jsx)(ke.h,{menu:(0,V.jsx)(qe.h,{uri:t,artistUri:r?.[0]?.uri}),children:(0,V.jsx)(yt,{title:e,pretitle:`${(0,ie.C)(s)} â¢ ${r.map((e=>e.name)).join(p.Ru.getSeparator())}`,uri:t,images:a,spec:n})}),xt=({name:e,uri:t,images:a,description:r,podcastName:n,videoThumbnailImages:s,spec:i})=>{const o=(0,V.jsx)(Je.b,{uri:t});return(0,V.jsx)(ke.h,{menu:o,children:(0,V.jsx)(yt,{title:e,pretitle:[p.Ru.get("card.tag.episode"),n].join(" â¢ "),body:r,uri:t,images:s.length>0?s:a,spec:i,useVideoLayout:s.length>0,contextMenu:(0,V.jsx)(x.b,{menu:o,children:(0,V.jsx)(v.e,{size:v.M.sm,label:p.Ru.get("more.label.context",e)})})})})},ft=({name:e,uri:t,images:a,description:r,spec:n})=>(0,V.jsx)(ke.h,{menu:(0,V.jsx)(Xe.W,{uri:t}),children:(0,V.jsx)(yt,{title:e,pretitle:p.Ru.get("playlist"),body:r,uri:t,images:a,spec:n})});var bt=a(91508);const Ct=({name:e,uri:t,associatedAudioUri:a,images:r,artists:n,spec:s})=>{const i=a?(0,V.jsx)(bt.o,{uri:t,saveTrackUri:a}):(0,V.jsx)(tt.P,{uri:t});return(0,V.jsx)(ke.h,{menu:i,children:(0,V.jsx)(yt,{title:e,pretitle:`${p.Ru.get("card.tag.track")} â¢ ${n.map((e=>e.name)).join(p.Ru.getSeparator())}`,saveTrackUri:a,uri:t,images:r,spec:s,useVideoLayout:!!a,contextMenu:(0,V.jsx)(x.b,{menu:i,children:(0,V.jsx)(v.e,{size:v.M.sm,label:p.Ru.get("more.label.context",e)})})})})};var Pt=a(84155),jt=a(1287);const kt=e=>({url:e.url,width:e.maxWidth,height:e.maxHeight});var It=a(59161);const Lt="ixncPYxvXKu9liUB7s4j",wt="Qhy0EgG4oltMwIF_10L6",Rt=(0,i.mc)((({section:e,shelfIndex:t})=>{const a=(0,n.NC)(It.xKy),{spec:s,logger:i}=(0,xe.r)(dt.j,{data:{identifier:e.uri,uri:e.uri,position:t}}),o=(0,je.wA)(e.data.headerEntity,e.data.title,e.data.subtitle),c=e.sectionItems.items.map(((e,t)=>((e,t,a=!1)=>{if((0,mt.v)(e.content)){const r=e.content.data,n=(0,je.f0)(r);switch(r.__typename){case"Album":return(0,V.jsx)(vt,{uri:r.uri,name:r.name,images:n,artists:(0,Pt.K)(r.artists),type:r.albumType,spec:t});case"Playlist":return(0,V.jsx)(ft,{uri:r.uri,name:r.name,description:r.description??void 0,images:n,spec:t});case"Episode":return a?(0,V.jsx)(xt,{uri:r.uri,name:r.name,podcastName:"Podcast"===r.podcastV2.data.__typename?r.podcastV2.data.name:"",videoThumbnailImages:"ImageV2"===r.videoPreviewThumbnail?.imagePreview?.data.__typename?r.videoPreviewThumbnail.imagePreview.data.sources.map(kt):[],description:r.description??void 0,images:n,spec:t}):null;case"Track":return a?(0,V.jsx)(Ct,{uri:r.uri,name:r.name,associatedAudioUri:r.associationsV3?.audioAssociations.items[0]?.trackAudio?r.associationsV3.audioAssociations.items[0].trackAudio._uri:void 0,images:n,spec:t,artists:(0,Pt.K)(r.artists)}):null;case"GenericError":case"NotFound":case"Artist":case"DiscoveryFeed":case"RestrictedContent":case"Audiobook":case"Chapter":case"Podcast":case"User":return null;default:return(0,jt.k)(r),null}}return null})(e,s.spotlightCardFactory({position:t,uri:e.uri}),a))).filter((e=>!!e)),[d,u]=(0,r.useState)(0),m=c[d],g=(0,r.useMemo)((()=>e.sectionItems.items.map((e=>e.uri)).join("|")),[e]);(0,r.useLayoutEffect)((()=>{u(0)}),[g]);const h=(0,r.useCallback)((()=>{u(d+1),i.logInteraction(s.nextButtonFactory({position:d+1}).hitUiReveal())}),[d,i,s]),y=(0,r.useCallback)((()=>{u(d-1),i.logInteraction(s.previousButtonFactory({position:d-1}).hitUiReveal())}),[d,i,s]),v=c.length>1?(0,V.jsxs)("div",{className:wt,children:[(0,V.jsx)(ut.Zp,{label:p.Ru.get("carousel.left"),children:(0,V.jsx)(de.H,{size:"small",iconOnly:lt.g,"aria-label":p.Ru.get("carousel.left"),disabled:0===d,onClick:y})}),(0,V.jsx)(ut.Zp,{label:p.Ru.get("carousel.right"),children:(0,V.jsx)(de.H,{size:"small",iconOnly:ct.V,"aria-label":p.Ru.get("carousel.right"),disabled:d===c.length-1,onClick:h})})]}):null,x=1===e.sectionItems.items.length?e.sectionItems.items.at(0):void 0,f=!!(b=x)&&"TrackResponseWrapper"===b.content.__typename&&"Track"===b.content.data.__typename&&b.content.data.associationsV3.audioAssociations.items.length>0||(e=>!!e&&"EpisodeOrChapterResponseWrapper"===e.content.__typename&&"Episode"===e.content.data.__typename&&"ImageV2"===e.content.data?.videoPreviewThumbnail?.imagePreview?.data?.__typename&&e.content.data.videoPreviewThumbnail.imagePreview.data.sources.length>0)(x);var b;const C=f?(e=>e&&"TrackResponseWrapper"===e.content.__typename?"Track"===e.content.data.__typename?e.content.data.name:void 0:e&&"EpisodeOrChapterResponseWrapper"===e.content.__typename&&"Episode"===e.content.data.__typename?e.content.data.name:void 0)(x):void 0;return c.length<1?null:(0,V.jsx)(st.r,{spec:s,children:(0,V.jsxs)("section",{className:l()(Lt,fe.A.fixedShelf,{[fe.A.sixteenByNineShelf]:f}),"data-shelf-collapsable":!0,children:[(0,V.jsx)(me.k,{...o,trailing:v,onClickTitle:()=>{o.titleUri&&i.logInteraction(s.shelfHeaderFactory({position:d}).hitUiNavigate({destination:o.titleUri}))},entity:f&&C?{entityTitle:C,entityUri:x?.uri,onClickEntityTitle:()=>{f&&x?.uri&&i.logInteraction(s.shelfHeaderFactory({position:d}).hitUiNavigate({destination:x.uri}))}}:void 0}),m]})})}),{name:"HomeV2SpotlightShelf"});var Nt=a(45601);const At=(0,i.mc)((({section:e,index:t})=>{const a=(0,je.wA)(e.data.headerEntity,e.data.title,"HomeGenericSectionData"===e.data.__typename?e.data.subtitle:null),n="GenreResponseWrapper"===e.data.headerEntity?.__typename&&"Genre"===e.data.headerEntity?.data?.__typename?e.data.headerEntity.data.uri:e.uri,s=(0,r.useMemo)((()=>e.sectionItems.items.map(mt.G).filter((e=>null!==e))),[e.sectionItems.items]);return s.length?(0,V.jsx)(Nt.R,{seeAllUri:n,id:e.uri,className:fe.A.homeRegularDensityCarouselShelf,index:t,...a,children:s}):null}),{name:"HomeV2GenericShelf"});var St=a(18172),Tt=a(92587),Et=a(89090);const _t=(0,i.mc)((e=>{const{section:t,index:a}=e,n=(0,r.useMemo)((()=>e.section.sectionItems.items.map(((e,t)=>{if("TrackResponseWrapper"!==e.content.__typename||"Track"!==e.content.data.__typename)return null;const a=e.content.data;return(0,V.jsx)(Tt.O,{title:a.name,trackUri:a.uri,audioAssociationUris:(0,Et.$)(a.associationsV3),artists:a.artists.items,album:a.albumOfTrack,contentRating:a.contentRating,referrerIdentifier:"home",index:t},a.uri)})).filter((e=>null!==e))),[e.section.sectionItems.items]);return(0,V.jsx)(Nt.R,{index:a,title:t.data.title?.transformedLabel??"",seeAllUri:t.uri,id:t.uri,className:fe.A.homeMusicVideosCarouselShelf,children:n})}),{name:"HomeV2MusicVideosShelf"});var Mt=a(94258);const Ut=(0,i.mc)((({section:e,index:t})=>{const a=e.data.title?.transformedLabel??p.Ru.get("view.recently-played");return(0,V.jsx)(Mt.RecentlyPlayedHomeCarouselShelf,{title:a,index:t,id:e.uri,className:fe.A.homeRegularDensityCarouselShelf})}),{name:"HomeV2RecentlyPlayedShelf"});var Bt=a(43523),Dt=a(31162),Ft=a(77424),Ot=a(33424),Ht=a(58239),Vt=a(8397),Wt=a(94253),zt=a(67240),Gt=a(74810);const Yt="mwc_1Zp_E6v9sr0fTnL1",Kt="sbehppetBlPlPp7TSib7",Qt="Zg_jTjYYhVRuKwqeO4s3",$t="X3QSU3mxBfBtfhpubU5I",Zt="vMptgdkEGfu4daB_6D7U",qt="ZMRUy3XCzjoj3U3v8zNb",Jt="CA3jSSFaq_a0kpsSL69X",Xt="Fj9nUGnQyCPsnhDKLx7n",ea="knJzYlLp6ylpADL42ohP";function ta(e){return!!(e&&e.fileId&&e.uri)}const aa=({canvas:e,canvasContainerClass:t,onCardLoaded:a})=>ta(e)?(0,V.jsx)(Ht.Gg,{className:Xt,fileId:e.fileId,canvasUrl:e.url,overridePlatformId:Wt.Z,playerContainerClass:t,canvasUri:e.uri,playbackType:Ht.RT.LoopOnHover,useContainerMouseOverEvents:!0,onLoaded:a}):null,ra=({canvas:e,onCardLoaded:t,className:a})=>{const r=(0,oe.g)(e?.thumbnail?.sources,{desiredSize:300,desiredLabel:"standard"});return(0,V.jsx)(zt._,{className:l()(qt,a),src:r?.url,loading:"lazy",testid:"card-image",fadeIn:!0,onLoad:t,children:(0,V.jsx)(Le.e,{size:"xxlarge",className:Jt})})};var na=function(e){return e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(na||{});const sa=({uri:e,index:t,canvas:a,discoveryFeedUri:n,uri:s,canvasContainerClass:i,title:o})=>{const{open:c}=(0,Vt.P)(),{spec:d,logger:u}=(0,xe.r)(Ot.y,{data:{position:t,uri:e}}),m=(0,pt.n)(d.getAbsoluteLocation(),d),p=(0,Gt.j)(),[g,h]=(0,r.useState)(!1),[y,v]=(0,r.useState)(na.NOT_LOADED),x=()=>{const e=d.hitUiReveal();u.logInteraction(e),c(n,"discovery",s)},f=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=f.current;if(p)return;if(!ta(a))return;const t=()=>{v(na.LOADING)};return e?.addEventListener("pointerenter",t,{once:!0}),()=>{e?.removeEventListener("pointerenter",t)}}),[a,p]);const b=(0,r.useCallback)((()=>{h(!0)}),[]),C=(0,r.useCallback)((()=>{v(na.LOADED)}),[]),P=!g,j=y!==na.LOADED,k=y===na.LOADING||y===na.LOADED;return(0,V.jsxs)("div",{className:Yt,tabIndex:0,role:"button",onClick:x,ref:f,onKeyDown:e=>{"Enter"===e.key&&x()},children:[(0,V.jsxs)("div",{className:l()($t,{[Zt]:y===na.LOADING}),ref:m,children:[P&&(0,V.jsx)("div",{className:Qt}),k&&(0,V.jsx)(aa,{canvas:a,canvasContainerClass:i,onCardLoaded:C}),j&&(0,V.jsx)(ra,{canvas:a,onCardLoaded:b})]}),(0,V.jsx)("div",{className:ea,children:(0,V.jsx)(Dt.Z,{variant:"ballad",lineClamp:2,title:o,dir:"auto",children:o})}),(0,V.jsx)(Ft.A,{semanticColor:"textBase",size:"medium",className:Kt})]})},ia=({children:e,index:t,section:a})=>(0,V.jsx)(Nt.R,{id:a.uri,title:a.data.title?.transformedLabel??"",className:fe.A.homeWatchFeedCarouselShelf,index:t,withEncoreCards:!0,showSeeAll:!1,children:e}),oa=(0,i.mc)((e=>{const t=(0,r.useMemo)((()=>e.section.sectionItems.items.map(((t,a)=>{if("DiscoveryFeedResponseWrapper"===t.content.__typename&&"DiscoveryFeed"===t.content.data.__typename){const r=((e,t,a,r)=>{if("TrackResponseWrapper"!==e.firstItem?.__typename||"Track"!==e.firstItem.data.__typename)return null;const n=e.firstItem.data;return(0,V.jsx)(sa,{index:a,uri:n.uri,discoveryFeedUri:t,canvas:n.canvas,title:e.title??"",canvasContainerClass:`Home_WatchFeed_Canvas_${r}_${a}`},`${n.uri}-${a}`)})(t.content.data,t.uri,a,e.index);if(r)return r}return null})).filter((e=>null!==e))),[e.section.sectionItems.items,e.index]);return t.length?(0,V.jsx)(ia,{...e,children:t}):null}),{name:"HomeV2WatchFeedShelf"});var la=a(42586);const ca="DbwXO2cO6bYBhrHpU__Q",da=(0,i.mc)((({uri:e,shelfTitle:t,title:a,description:r})=>(0,V.jsxs)("section",{className:l()(ca,fe.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,V.jsx)(me.k,{title:t}),(0,V.jsx)(la.n,{uri:e,title:a,description:r})]})),{name:"HomeYourDJShelf"});function ua(){const e=(0,n.NC)(It.p5T,{loadingValue:!1});return function(t,a){if(!e)return!1;const r=(0,s.M)(t,a).sectionItems.items[0];return"PlaylistResponseWrapper"===r?.content.__typename&&"Playlist"===r.content.data.__typename}}const ma=(0,r.memo)((({greeting:e,section:t,index:a,hideFixedShelves:r=!1})=>{const i=ua(),o=(0,n.NC)(It.BYw),l=(0,n.NC)(It.hWV);switch(t.data?.__typename){case"HomeGenericSectionData":return(0,V.jsx)(At,{section:(0,s.M)(t,t.data),index:a});case"HomeShortsSectionData":return(0,V.jsx)(Bt.$,{greeting:e,section:(0,s.M)(t,t.data),index:a});case"HomeRecentlyPlayedSectionData":return(0,V.jsx)(Ut,{section:(0,s.M)(t,t.data),index:a});case"HomeGridSectionData":return l?(0,V.jsx)(St.A,{index:a,section:(0,s.M)(t,t.data)}):(0,V.jsx)(At,{section:(0,s.M)(t,t.data),index:a});case"HomePromotionSectionData":return r?null:(0,V.jsx)(ot,{section:(0,s.M)(t,t.data),index:a});case"HomeSpotlightSectionData":return r?null:(0,V.jsx)(Rt,{section:(0,s.M)(t,t.data),shelfIndex:a});case"HomeNativeAdsSectionData":return r?null:(0,V.jsx)(Ce,{section:(0,s.M)(t,t.data),index:a});case"HomeOnboardingSectionData":case"HomeOnboardingSectionDataV2":return null;case"HomeYourDJSectionData":{const e=(0,s.M)(t,t.data),{data:a,sectionItems:n}=e,o=n.items[0];if(i(t,t.data)&&"PlaylistResponseWrapper"===o?.content.__typename&&"Playlist"===o.content.data.__typename&&!r){const{data:e}=o.content;return(0,V.jsx)(da,{uri:e.uri,shelfTitle:a.title?.transformedLabel??"",title:e.name,description:e.description??""})}return null}case"HomeWatchFeedSectionData":if(o){const e=(0,s.M)(t,t.data);return(0,V.jsx)(oa,{index:a,section:e})}return null;case"HomeMusicVideosSectionData":return(0,V.jsx)(_t,{section:(0,s.M)(t,t.data),index:a});case"HomeFeedBaselineSectionData":case"HomeFeatureActivationSectionData":case"HomeFeatureActivationSectionDataV2":case null:case void 0:case"HomeContentEvaluationListSectionData":case"HomePodcastVideosCarouselSectionData":return null;default:return(0,jt.k)(t.data),null}}))},94253:(e,t,a)=>{a.d(t,{R:()=>n,Z:()=>r});const r="desktop-home-watch-feed",n="desktop-watch-feed"}}]);
//# sourceMappingURL=5226.js.map