"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6541],{63450:(e,a,r)=>{r.d(a,{B:()=>i});var s=r(78717),t=r(84195),l=r(86070);const i=({children:e})=>(0,l.jsx)(s.E,{variant:"bodySmall",className:t.A.pretitle,children:e})},82758:(e,a,r)=>{r.d(a,{W:()=>t});var s=r(30758);const t=()=>{const[e,a]=(0,s.useState)(!1);return{isOpen:e,openModal:(0,s.useCallback)((()=>a(!0)),[]),closeModal:(0,s.useCallback)((()=>a(!1)),[])}}},84983:(e,a,r)=>{r.r(a),r.d(a,{default:()=>G});r(77369);var s=r(85387),t=r(92544),l=r(16569),i=r(86070);const n=({artists:e,title:a,seeAllUri:r})=>{const s=e.slice(0,8);return(0,i.jsx)(t.$,{title:a,seeAllUri:r,children:s.map(((e,a)=>(0,i.jsx)(l.y,{artist:e,index:a},e.artistUri)))})};var o=r(49740),c=r(13335),m=r(19667),u=r(63450),d=r(24448),g=r(98630),x=r(82758),h=(r(86328),r(30758));function b(e,a=300){const[r,s]=(0,h.useState)(null);return(0,h.useEffect)((()=>{e.length?function(e,a=300){const r=e.slice(0,4),s=[...r,...Array(4-r.length).fill("")],t=a/2,l=document.createElement("canvas");l.width=a,l.height=a;const i=l.getContext("2d");if(!i)throw new Error("Could not get canvas context");return Promise.all(s.map((e=>e?new Promise((a=>{const r=new window.Image;r.crossOrigin="anonymous",r.onload=()=>a(r),r.onerror=()=>a(null),r.src=e})):Promise.resolve(null)))).then((e=>(e.forEach(((e,a)=>{e&&i.drawImage(e,a%2*t,Math.floor(a/2)*t,t,t)})),l.toDataURL("image/png"))))}(e,a).then((e=>s(e))).catch((()=>s(null))):s(null)}),[e,a]),r}const p=({uri:e,name:a,images:r})=>{const s=b(r.map((e=>e.url)),300),{isOpen:t,openModal:l,closeModal:n}=(0,x.W)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.z,{children:[(0,i.jsx)(c.K,{dragUri:e,images:s?[{url:s}]:[],name:a,placeholderType:"album",onClick:l,ariaLabel:a}),(0,i.jsxs)(m.Y,{children:[(0,i.jsx)(u.B,{children:"Record Label"}),(0,i.jsx)(d.mm,{scaleAtMinWidth:d.tw,children:a})]})]}),(0,i.jsx)(g.K,{title:a,isOpen:t,onClose:n,images:s?[{url:s}]:[]})]})};var j=r(22119);const U=({albums:e,title:a,seeAllUri:r})=>{const s=e.slice(0,8);return(0,i.jsx)(t.$,{title:a,seeAllUri:r,children:s.map(((e,a)=>(0,i.jsx)(j.a,{index:a,name:e.albumName,uri:e.albumUri,images:[{url:`https://i.scdn.co/image/${e.largestCoverArtImageId}`}],artists:e.mainArtists.map((e=>({uri:e.artistUri,name:e.artistName}))),sharingInfo:null},e.albumUri)))})};var A=r(78717),v=r(30831),C=r(71600),y=r(77486),f=r(70397),I=r(35054),P=r(53169),k=r(29611),w=r(68229),N=r(60331),L=r(28831),R=r(80797),M=r(20755),T=r(42511),$=r(16379),O=r(58955),S=r(43327),B=r(2835),E=r(27403),K=r(97935),_=r(28521),F=r(42200),D=r(43159);const Y=(0,h.memo)((function({uri:e,name:a,artists:r,album:s,contextUri:t,index:l,imgUrl:n,usePlayContextItem:o}){const{isActive:c,isPlaying:m,triggerPlay:u,togglePlay:d}=o({uri:e,index:l}),g=(0,h.useMemo)((()=>r?.map((e=>e.name)).join(f.Ru.getSeparator())||""),[r]),x=(0,h.useMemo)((()=>Math.floor(1e6*Math.random())),[]);return(0,i.jsx)(I.h,{menu:(0,i.jsx)(P.P,{uri:e,albumUri:s.uri,artists:r,contextUri:t}),children:(0,i.jsxs)(F.w,{uri:e,contextUri:t,onTriggerPlay:(e,a)=>{u({loggingParams:a})},isActive:c,index:l,ariaRowIndex:l+1,isPlayable:!0,dragMetadata:{name:a,createdBy:g},children:[(0,i.jsx)(S.y,{ariaColIndex:0,children:(0,i.jsx)(M.$,{uri:e,playAriaLabel:f.Ru.get("tracklist.a11y.play",a,g),isPlaying:m,isActive:c,onClick:(e,a)=>{d({loggingParams:a})},children:(0,i.jsx)($.a,{children:l+1})})}),(0,i.jsxs)(B.U,{ariaColIndex:1,children:[(0,i.jsx)(L.e,{src:n}),(0,i.jsxs)(R.l,{children:[(0,i.jsx)(_.p,{titleText:a,children:a}),(0,i.jsx)(K.p,{children:(0,i.jsx)(w.l,{artists:r})})]})]}),(0,i.jsx)(E.o,{ariaColIndex:2,children:(0,i.jsx)(k.g,{uri:s.uri,name:s.name,creatorUri:r?.[0]?.uri,children:s.name})}),(0,i.jsxs)(O.l,{ariaColIndex:3,children:[(0,i.jsx)(D.d,{uri:e}),(0,i.jsx)(N.P,{duration:x}),(0,i.jsx)(T.Y,{menu:(0,i.jsx)(P.P,{uri:e,albumUri:s.uri,artists:r,contextUri:t}),label:f.Ru.get("more.label.track",a,g)})]})]})})}),((e,a)=>e.uri===a.uri));var J=r(4799),z=r(72432),W=r(19151);const Z="pNebFnbBAghRNzJ1pLRw",q=()=>{const{labelId:e}=(0,s.g)(),{data:a,isLoading:r,error:t}=(0,J.y)(e??""),l=a?.labelUri,n=a?.topTracks,{usePlayContextItem:o}=(0,z.P)({uri:l??"",pages:[{items:(n??[]).map((e=>({type:W.c.TRACK,uri:e.trackUri,uid:null,provider:null})))}]},{featureIdentifier:"label_page"}),c=(0,h.useCallback)(((e,a)=>{const r=`https://i.scdn.co/image/${e.largestCoverArtImageId}`;return(0,i.jsx)(Y,{index:a,uri:e.trackUri,name:e.trackName,artists:e.mainArtists.map((e=>({uri:e.artistUri,name:e.artistName}))),album:{uri:e.albumUri,name:e.albumName},imgUrl:r,contextUri:l??"",usePlayContextItem:o},a+e.trackUri)}),[l,o]),m=(0,h.useMemo)((()=>[y.$C.INDEX,y.$C.TITLE_AND_ARTIST,y.$C.ALBUM,y.$C.DURATION]),[]),u=(0,h.useCallback)((e=>({uri:e.trackUri})),[]);return r||!a||t||!n?null:(0,i.jsxs)("div",{className:Z,children:[(0,i.jsx)(A.E,{variant:"titleSmall",semanticColor:"textBase",children:(0,v.v)("Top tracks")}),(0,i.jsx)(C.S4,{ariaLabel:(0,v.v)("Label top tracks"),renderRow:c,nrTracks:n.length,tracks:n,resolveItem:u,headerTop:0,hasHeaderRow:!0,columns:m,columnPersistenceKey:y.SZ.LABEL_TOP_TRACKS})]})};var H=r(66082);const V="pqlPYiu2j40zg6woSIJg",X="BrgO7KbPrCEcnxlk9_dn",Q=({data:e})=>{const a=e.labelUri.split(":").pop(),r=(0,H.F)(e.topTracks.map((e=>e.mainArtists.map((e=>e.artistUri)))).flat().slice(0,4));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p,{images:r.map((e=>({url:e,width:null,height:null}))),uri:e.labelUri,name:e.labelName}),(0,i.jsxs)("div",{className:X,children:[(0,i.jsx)(q,{}),(0,i.jsx)(n,{artists:e.topArtists,title:"Popular artists",seeAllUri:`/label/${a}/artists`}),(0,i.jsx)(U,{albums:e.newAlbums,title:"Latest releases",seeAllUri:`/label/${a}/albums/latest`}),(0,i.jsx)(U,{albums:e.topAlbums,title:"Popular releases",seeAllUri:`/label/${a}/albums/top`})]})]})},G=()=>{const{labelId:e}=(0,s.g)(),{data:a,isLoading:r,error:t}=(0,J.y)(e??"");return r||!a||t?null:(0,i.jsx)("div",{className:V,children:(0,i.jsx)(Q,{data:a})})}},98630:(e,a,r)=>{r.d(a,{K:()=>b});var s=r(30758),t=r(35394),l=r(70397),i=r(57157),n=r(67240),o=r(60804);const c="bhvAemcPYUmxOdBe1mVi",m="hmgHdasWrZaA9tiXVw_u",u="RmbxUFLb4j9KmgftJyk1",d="boNCdFnbh9y0PBweIDUt",g="LfQtKa295FPgk8VuZRfD",x="Oytey9nANMtSDKSmZpJ6";var h=r(86070);const b=s.memo((function(e){const{images:a,title:r,isOpen:b,onClose:p}=e,j=(0,s.useMemo)((()=>(0,o.g)(a,{desiredSize:1e4})),[a]);return j?(0,h.jsx)(i.A,{className:c,isOpen:b,onRequestClose:p,animation:{modal:{base:d,afterOpen:g,beforeClose:x}},animated:!0,children:(0,h.jsxs)("div",{style:{"--image-width":`${j.width}px`,"--image-height":`${j.height}px`},className:m,children:[(0,h.jsx)(n._,{loading:"eager",alt:r,src:j.url,className:u}),(0,h.jsx)(t.H,{onClick:p,semanticColor:"textBase",children:l.Ru.get("web-player.cover-art-modal.close")})]})}):null}))},99196:(e,a,r)=>{r.r(a),r.d(a,{default:()=>m});r(77369);var s=r(85387),t=r(78717),l=r(30831),i=r(22119),n=r(4799);const o={albumsPage:"PKNAdOJUybYnd7nnM5F4",grid:"Cp53bU9YgY69UqJc1It7"};var c=r(86070);const m=()=>{const{labelId:e}=(0,s.g)(),a=(0,s.zy)(),{data:r,isLoading:m,error:u}=(0,n.y)(e??"");if(m||!r||u)return null;const d=a.pathname.endsWith("/top"),g=d?r.topAlbums:r.newAlbums,x=d?"Top albums":"Latest albums";return(0,c.jsxs)("div",{className:o.albumsPage,children:[(0,c.jsx)(t.E,{variant:"titleMedium",semanticColor:"textBase",className:o.title,children:(0,l.v)(x)}),(0,c.jsx)("div",{className:o.grid,children:g.map(((e,a)=>(0,c.jsx)(i.a,{index:a,uri:e.albumUri,name:e.albumName,images:[{url:`https://i.scdn.co/image/${e.largestCoverArtImageId}`}],artists:e.mainArtists.map((e=>({uri:e.artistUri,name:e.artistName}))),sharingInfo:null},e.albumUri)))})]})}}}]);
//# sourceMappingURL=xpui-routes-label.js.map