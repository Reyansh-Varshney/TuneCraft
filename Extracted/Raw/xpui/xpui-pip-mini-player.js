"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3667],{15327:(e,t,i)=>{i.d(t,{x:()=>s.x});var s=i(72293)},34720:(e,t,i)=>{i.d(t,{r:()=>c,z:()=>d});var s=i(30758),n=i(66590),a=i(39159),l=i(3424),r=i(254),o=i(19507);function c(e=null){const{request:t}=(0,s.useContext)(r.j),{data:i}=(0,o.I)({queryKey:["extracted-color",e],queryFn:()=>e?(0,l.j)(t,e).then((e=>{const t=e?.[0];return t?{colorDark:t.colorDark.toCSS(a.a.HEX),colorLight:t.colorLight.toCSS(a.a.HEX),colorRaw:t.colorRaw.toCSS(a.a.HEX)}:null})):null,gcTime:864e5,staleTime:216e5,enabled:!!e});return i??void 0}function d(e=null,t=n.l0o,i="colorRaw"){return c(e)?.[i]??t}},42307:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>Ds});var s=i(30758),n=i(97500),a=i.n(n),l=i(65809),r=i(97764),o=i(70397),c=i(63181),d=i(78717),u=i(53627),m=i(38772),g=i(51818),x=i(51736),h=i(36666),v=i(42805),p=i(1974),k=i(34664),N=i(77335),C=i(9856),j=i.n(C);const y=()=>!0===j().getParser(window.navigator.userAgent).satisfies({chrome:">=123",edge:">=127"}),b=()=>{y()&&window.focus()};var f=i(68745),w=i(69937),S=i(6506),B=i(84409),E=i(86246);const L="ZTvigd5RaqxtTdBzGide",P="jxNXLdUZfNhmCuYDbAKP",D="BBABURh2CZ6if4dMvq3j";var R=i(86070);const I=()=>{const{isPlayingRemotely:e,connectionStatus:t,remoteDeviceName:i,remoteDeviceType:s}=(0,w.v)((e=>{const t=(0,f.V)(e);return{isPlayingRemotely:t.isPlayingRemotely,connectionStatus:t.connectionStatus,remoteDeviceName:t.remoteDevice?.name,remoteDeviceType:t.remoteDevice?.type}}),E.a),{spec:n,logger:a}=(0,B.r)(p.s,{}),{triggerRef:l,toggleDevicePicker:r,isPickerOpen:o}=(0,N.z)(),c=(0,S.g)();if(!(e&&i&&s)&&!c)return(0,R.jsx)(R.Fragment,{});const u=(0,k.$A)(s||"unknown",t);return(0,R.jsxs)("div",{className:L,children:[(0,R.jsx)(u,{size:"xsmall",className:P,role:"presentation",semanticColor:"textPositive"}),(0,R.jsx)(x.r,{title:i,children:(0,R.jsx)(v.Y,{component:"button",onClick:()=>{const e=n.activeDeviceButtonFactory(),{interactionId:t}=a.logInteraction(o?e.hitUiHide():e.hitUiReveal());r(t),b()},ref:l,className:D,semanticColor:"textPositive",children:(0,R.jsx)(d.E,{variant:"bodySmall","aria-live":"polite",semanticColor:"textPositive",children:i})})},i??"context-item-connection-status")]})};var M=i(57551),T=i(29425);const A=({item:e,className:t})=>{const i=(0,c.L)(),s=i?.context;return(0,T.v)(e)&&s?(0,R.jsx)(M.a,{context:s,item:e,className:t}):null};var O=i(91546),z=i(59375),F=i(37321),W=i(46062),H=i(43931),V=i(4666),U=i(42681),_=i(68888),q=i(1287);const Z=({uri:e,spec:t,logger:i})=>{const n=(0,s.useRef)(e);n.current=e;const a=(0,V.z)(),l=(0,s.useMemo)((()=>t.playerControlsFactory()),[t]),r=(0,s.useCallback)((e=>{let t=null;"pause"===e?t=l.playPauseButtonFactory().hitPause({itemToBePaused:n.current}):"resume"===e&&(t=l.playPauseButtonFactory().hitResume({itemToBeResumed:n.current})),t&&i.logInteraction(t)}),[i,l]),o=(0,s.useCallback)((e=>{const t=l.likeButtonFactory(),s=e?t.hitLike({itemToBeLiked:n.current}):t.hitRemoveLike({itemNoLongerLiked:n.current});i.logInteraction(s)}),[i,l]),c=(0,s.useCallback)((()=>{const e=a.getState();if(!e)return;const t=l.previousButtonFactory().hitSkipToPrevious(K(e));i.logInteraction(t)}),[i,a,l]),d=(0,s.useCallback)((()=>{const e=a.getState();if(!e)return;const t=l.nextButtonFactory().hitSkipToNext(K(e));i.logInteraction(t)}),[i,a,l]),u=(0,s.useCallback)((e=>{const t=l.repeatButtonFactory();let s=null;switch(e){case U.p.REPEAT_TRACK:s=t.hitRepeatOneEnable();break;case U.p.REPEAT_CONTEXT:s=t.hitRepeatEnable();break;case U.p.REPEAT_NONE:s=t.hitRepeatDisable();break;default:(0,q.k)(e)}s&&i.logInteraction(s)}),[i,l]),m=(0,s.useCallback)((e=>{const t=e?"shuffle":"linear",s=e?"linear":"shuffle",a=l.shuffleButtonFactory({uri:n.current}).hitSelectShuffleMode({previousMode:s,selectedMode:t});i.logInteraction(a)}),[i,l]),g=(0,s.useCallback)((e=>{const t=l.volumeMuteButtonFactory();i.logInteraction("muted"===e?t.hitMutePlayback():t.hitUnmutePlayback())}),[i,l]),x=(0,s.useCallback)((e=>{const t=l.volumeBarFactory();i.logInteraction(t.hitSetVolume({newVolumePercentage:Y(e)}))}),[i,l]),h=(0,s.useCallback)((e=>{const t=l.volumeBarFactory();i.logInteraction(t.dragSetVolume({newVolumePercentage:Y(e)}))}),[i,l]),v=(0,s.useCallback)((e=>{const t=l.seekBackwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,l]);return{onClickSeekForward:(0,s.useCallback)((e=>{const t=l.seekForwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,l]),onClickSeekBack:v,onClickPlayPause:r,onClickLike:o,onClickSkipPrevious:c,onClickSkipNext:d,onClickRepeat:u,onClickShuffle:m,onClickVolumeButton:g,onClickVolumeBar:x,onDragVolumeBar:h,onClickShare:(0,s.useCallback)((()=>{const e=l.shareButtonFactory({uri:n.current});i.logInteraction(e.hitCopyToClipboard())}),[i,l]),onClickProgressBar:(0,s.useCallback)((e=>{const t=l.progressBarFactory();i.logInteraction(t.hitSeekToTime({msToSeekTo:e}))}),[i,l]),onDragProgressBar:(0,s.useCallback)((e=>{const t=l.progressBarFactory();i.logInteraction(t.dragSeekToTime({msToSeekTo:e}))}),[i,l])}};function K(e){return{itemToBeSkipped:e.item?.uri||"",positionMs:(0,_.s)(e)??-1,totalContentMs:e.duration??-1}}function Y(e){return Math.floor(100*e)}var Q=i(71990),J=i(64589),X=i(62138),G=i(33361),$=i(90471);const ee="d_srhjvwD_GUA3bcCWe4",te="Y1sIRIE9_S2jPP9L89qs",ie="_qTFf4L4feIZxZ9RCcca",se="xLVzUYXestVWzpfiOPxA",ne="alofN0D4rOdnu0Y6xfcw",ae="iKzG3nPAIAbL5CZAbKJU",le="b6HgoPaw7SCowvemSx0g",re="qFpig0a2GKNJnWJFd1db",oe="PuRqtCWIESfTs0d2dULt",ce="fEVqL0T4qWVkozlVqGcy",de="k0jYoqpvauOgpfaLzuHo",ue="lcyebQsHz0j8IkDXTAlB",me="enGtDaA6WTTvIFhZz1wz",ge="Kj0qWPCL3_VrCWRyNrMD",xe="Jo4RE0VhDecfPElNZucO";let he=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const ve=({item:e,spec:t,logger:i,size:s=he.xs,className:n})=>{const l=e.uri,r=(0,G.X)(),o=(0,X.C)(),d=(0,c.L)(),u=d?.context,{canDisplayButton:m}=(0,W.$)(e,u),{shouldShowFeedbackControls:g}=(0,H.d)(u),x=(0,F.$)(),h=g&&!x||m,{onClickLike:v}=Z({uri:l,spec:t,logger:i});return(0,T.v)(e)&&u?r&&o&&(0,J.N)(e)?(0,R.jsx)("div",{className:xe,children:(0,R.jsx)(Q.o,{contextUri:e.metadata?.context_uri,id:e.uid??void 0,uri:e.uri,isActive:!0})}):(0,R.jsx)("div",{className:ge,children:(0,R.jsx)(z.b,{size:h?he.xs:s,uri:l,onClick:v,className:a()(ue,n),showDelayOnHover:1e3,isMiniPlayer:!0})}):(0,$.p)(e)?(0,R.jsx)(O.b,{size:s,uri:l,onClick:v,className:a()(ue,n),condensed:!0}):null};var pe=i(61100),ke=i(57230),Ne=i(52613);const Ce="yb0n1ZOvcsGEP6MtzpHw",je="wigNir143xMt4ihKMqrK",ye="xQRYbYtCJkqg3RGwwCEu",be="jbCLA5mslXPNLClPNh8h",fe="srBfv7LB0I9QnzxBpeTV",we="V2fqnNTxbJBIOeX14ZFW",Se="N5WQok6ioU_Dmf0F0O31",Be="NZlJ5gYuUaWvALQ2gGfg",Ee="r5_6Dsophi0MbO6WWawA",Le="kWWqvihyBXMNH5W5rCwb",Pe="CsqhW5xDG4TO3VV20IZJ";const De=({item:e,onClick:t,className:i,isSmallWidth:s,ambientMode:n})=>{const{spec:l,logger:o}=(0,B.r)(r.w,{}),c=(0,Ne.N)(e)?u.Q.getAdTitle(e)??e.name:e.name,v=(0,Ne.N)(e)?u.Q.getAdSubtitle():e.name,p=(0,pe.K)(),k=function(e){switch(e){case"SMALL":return{title:"bodySmall",subtitle:"marginal"};case"MEDIUM":return{title:"bodyMedium",subtitle:"bodySmall"};default:return{title:"titleSmall",subtitle:"bodySmall"}}}(p.vertical),N="SMALL"===p.vertical,{connectionStatus:C}=(0,w.v)((e=>({connectionStatus:(0,f.V)(e).connectionStatus})),E.a);return(0,R.jsxs)("div",{className:a()(Ce,i,{[ye]:n}),children:[(0,R.jsx)("div",{className:we,children:(0,R.jsxs)(x.r,{title:c,children:[(0,R.jsx)(d.E,{"data-testid":"context-item-info-title",as:"div",variant:k.title,className:Se,dir:"auto",children:(0,R.jsx)(g.R,{item:e,onClick:t,adUrl:(0,Ne.N)(e)?e.url:void 0,children:c})}),C===ke.zP.CONNECTED&&(0,R.jsxs)(d.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:k.title,className:a()(N?Be:fe,Se),semanticColor:"textSubdued",children:[(0,R.jsx)("span",{className:a()(Ee,{[Le]:!N}),children:"â€¢"}),(0,R.jsx)(m.n,{item:e,onClick:t})]})]},`${e.uri}-context-item-info-title`)}),(0,R.jsx)(h.l,{className:Pe,item:e,size:N?"xsmall":"small",variant:N?"marginal":"bodySmall",enableVideoButton:!0,isSmallWidth:s}),(0,R.jsx)("div",{className:Be,children:C===ke.zP.CONNECTED?(0,R.jsx)(I,{}):(0,R.jsx)(x.r,{title:v,children:(0,R.jsx)(d.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:k.subtitle,className:Be,semanticColor:"textSubdued",children:(0,R.jsx)(m.n,{item:e,onClick:t})})},`${e.uri}-context-item-info-subtitles`)}),!N&&!(0,Ne.N)(e)&&(0,R.jsx)("div",{className:je,children:(0,R.jsxs)("div",{className:be,children:[(0,R.jsx)(A,{item:e,className:de}),(0,R.jsx)(ve,{item:e,spec:l,logger:o,size:he.sm})]})})]})};var Re=i(73136),Ie=i(35394),Me=i(98756),Te=i(45426),Ae=i(99420),Oe=i(30261);const ze="U7qJ1UbUI0C76xXqYVQY",Fe="wSLUJtAztEeB6cSHzEjf",We="ivh1pWB_obHbkRTZRwlA",He="giy3mj7QBOoIdj6wwTpe",Ve="FZZUfZ2ShpHjnzy_P6Kb",Ue="CppZQsRDE7tQVl_Uo22Y";i(83874),i(57152);const _e=s.memo((({spec:e,logger:t})=>{const{openURLWithSessionTransfer:i}=(0,Oe.L)(),n=(0,Ae.D)("loggedin_upgrade_button"),a=(0,Me.g)(),l=(0,Te.k)(),{url:r,isExternal:c}=l,u=(0,s.useCallback)((()=>{let s;!1===c?(a(r),s=e.upsellComponentFactory().upsellButtonFactory().hitUiNavigate({destination:r})):(i(n(r),"_blank"),s=e.upsellComponentFactory().upsellButtonFactory().hitNavigateToExternalUri({destination:r})),t.logInteraction(s)}),[c,t,a,e,i,n,r]);return(0,R.jsx)("div",{className:ze,children:(0,R.jsxs)("div",{className:Fe,children:[(0,R.jsx)(d.E,{variant:"titleSmall",dir:"auto",className:We,children:o.Ru.get("web-player.pip-mini-player.upsell.title")}),(0,R.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",className:He,children:o.Ru.get("web-player.pip-mini-player.upsell.subtitle")}),(0,R.jsxs)("div",{className:Ue,children:[(0,R.jsx)(Re.$,{onClick:u,size:"small",children:o.Ru.get("web-player.pip-mini-player.upsell.cta-button")}),(0,R.jsx)(Ie.H,{size:"small",onClick:()=>{const e=window.documentPictureInPicture?.window;e&&e.resizeTo(e.outerWidth-e.innerWidth+300,e.outerHeight-e.innerHeight+300)},className:Ve,children:o.Ru.get("action-trigger.button.not-now")})]})]})})}));var qe=i(12e3),Ze=i(96579);const Ke="document-pip-hover-element",Ye="document-pip-cover-art",Qe="document-pip-cover-art-placeholder";var Je=i(69390),Xe=i(7307),Ge=i(59161),$e=i(73048),et=i(67240),tt=i(39737),it=i(36849),st=i(9131);const nt="wF7I8x6BNoB5TCxuQM6p",at="L7k5x0ljUA9aqPWIBQrg",lt="mTVLkxm92ETj9KUKj6We",rt="_ZzrZWfp7kDAE2lh9_Wc",ot="lMgtxFlYdJbfEQ0tvAqK",ct="Pvgy7FmdedDiDBpWdtwf",dt="Z7EJBI5IBlrJ1ze7IeeW",ut="MLFYXVPnkBwOpOZLueMc",mt="epJYJCLWx6ZpJWaB2u9T",gt="v5BmE36Bbgt7MSjmR6Xc",xt="CAQW4b5xnSED1cuM6jcp",ht="GSgApqjTNqV1hBpu3zeT",vt="cRGZivJEkNn8_Q7kaHpT",pt="jOhwShRZLQkG51TckxOL",kt="Jgem6BNDvKfWTBl3cX4W",Nt="ePoosDhdXDFF4p3vqKLd",Ct="QGE_nRKg4bMbNKF_e7PM",jt="ddMrU_P5vADrfZCD5KQP",yt="x591ODwZ11KBAWKS6SiE",bt="yyE7Kg8ClZLrYU03bSoA",ft="GJYNq4mAAnZScLzJPrZb",wt="mBYWBXnQ_1G3IS2q0zUM",St="F7RVFhPYBKleXl4ulrwe",Bt="Q4qOSqJZ_dfNRxOBhsGE",Et="hix4I_WU5iQPehn_m5h2",Lt="gOpH1qSy5WZp_dGqBjSO",Pt="fqkOkQBnl4O_EtiYYNZn",Dt="fA1WZxus_awyLrI_ILQo",Rt="MeT6fcLf2zwCIEDI3OKk",It="Yufi1AKpt87U66n3Wcgc",Mt="JWR17pOvN2l0NGHVAi9Q",Tt="ZeSR2WPUGMRnwFnGoYp3",At="NEKBj5FX847wFAhR57Bm",Ot="dahc71cxY4Nzk6ebA2ZW",zt="vYL9B3OtXRb7_BrVMqPs",Ft="dJY9K_yl2SIFh2sQav8J",Wt="B62SqNdB5yicbOhkDWDy",Ht="ixLnBGpFXBDXJBwJAFN2",Vt="xG6CoSo4Qt0PDw74JLdM",Ut="COvUYZFLWyAYMoZxYBWV",_t="GrueVX2aNdOBYUmVxO1g",qt="gDC7KBL5Cbad2gkb2ECA",Zt="YjoaIyvleWu6L_m3iqwr",Kt="Z7MRt3IpXA2HKQSwTZ3p",Yt="UqNXNAlAlrI35gbbTIlL",Qt="RwUrgB_h_amNMENcAmKM",Jt="UuWUqZ0KXYAc2I1R_tdl",Xt=({item:e,imageUrl:t})=>{const i=(0,qe.b)(e),s=(0,R.jsx)(et._,{className:yt,src:t,loading:"eager",testid:Ye,children:(0,R.jsx)("div",{className:bt,children:(0,R.jsx)($e.s,{size:"xlarge",type:e.type,"data-testid":Qe})})});return i.url?(0,R.jsx)(Ze.N,{className:jt,to:i.url,children:s}):s},Gt=()=>{const{isPlayingVideo:e}=(0,tt.o)((e=>({isPlayingVideo:(0,it.A3)(e)}))),{item:t,context:i}=(0,c.L)()??{},n=(0,s.useMemo)((()=>(0,st.h)(t?.images??void 0,{desiredSize:640,desiredLabel:"large"})),[t?.images,640]),r=(0,f.l)(),o=(0,l.NC)(Ge.a4n),{isYourDJNarrator:d}=(0,Xe.C)(),u=(0,Ne.N)(t);let m=!e;!e||!r&&o||(m=!0);const g=(0,s.useMemo)((()=>m&&!u&&y()),[u,m]);let x;x=d?(0,R.jsx)(Je.aU,{}):u?(0,R.jsx)(Xt,{item:t,imageUrl:n}):(0,R.jsx)(et._,{className:yt,src:n,loading:"eager",testid:Ye,children:(0,R.jsx)("div",{className:bt,children:(0,R.jsx)($e.s,{size:"xlarge",type:t?.type,"data-testid":Qe})})});const h=(0,s.useCallback)((()=>{g&&b()}),[g]),v=(0,s.useCallback)((e=>{"Enter"===e.key&&h()}),[h]);return t&&i&&m?(0,R.jsx)("div",{className:a()(Nt,{[Ct]:g}),role:"button",tabIndex:g?0:-1,onClick:h,onKeyDown:v,children:x}):null},$t="mini-player-dynamic-colors",ei="mini-player-queue";var ti=i(92713);const ii=()=>{const[e]=(0,ti.x)($t,!1);return e};var si=i(1210);const ni="rFAL3oCwNWt8hwKtPBtv",ai="FvrxUai9k0vi672k0ZX6",li="K3rM46MBSbUfaqwFVdH3",ri="beJ5feP63DJ9Mlan76C6",oi=({children:e,hideBackground:t,ambientMode:i})=>{const s=ii(),n=(0,si.w)({contrast:"highContrast"}),l=(0,si.w)({contrast:"minContrast"});return(0,R.jsx)("div",{className:a()(ni,{[ai]:!t&&n&&l,[li]:!s,[ri]:i}),"data-testid":"pip-hover-element",style:{"--background-base":n?.["--background-base"],"--background-base-min-contrast":l?.["--background-base"]},children:e})};var ci=i(6634),di=i(60492),ui=i(30920),mi=i(50692),gi=i(19239),xi=i(86541),hi=i(52593),vi=i(97002),pi=i(11284);const ki=()=>(0,R.jsx)("svg",{width:"7",height:"8",viewBox:"0 0 7 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:gt,children:(0,R.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.37397 1.94965C6.60829 1.71534 6.60829 1.33544 6.37397 1.10113C6.13966 0.866812 5.75976 0.866812 5.52544 1.10113L3.47461 3.15196L1.42422 1.10157C1.18991 0.86726 0.81001 0.86726 0.575695 1.10158C0.341381 1.33589 0.341381 1.71579 0.575695 1.9501L2.62608 4.00049L0.575696 6.05087C0.341381 6.28519 0.341381 6.66509 0.575696 6.8994C0.81001 7.13372 1.18991 7.13372 1.42422 6.8994L3.47461 4.84902L5.52544 6.89985C5.75976 7.13416 6.13966 7.13416 6.37397 6.89985C6.60829 6.66554 6.60829 6.28564 6.37397 6.05132L4.32314 4.00049L6.37397 1.94965Z",fill:"#912616"})}),Ni=s.memo((({className:e})=>"SMALL"!==(0,pe.K)().vertical?(0,R.jsx)(ci.U,{className:e}):(0,R.jsx)(di.M,{className:e}))),Ci=({ambientMode:e,className:t,showSettings:i,setShowSettings:n})=>{const{setVideoPlayerUIFlag:r}=(0,xi.d)(),{onClick:c}=(0,vi.D)({}),d=(0,l.NC)(Ge.gf),u=(0,s.useCallback)((()=>{r(hi.nP.documentPip,!1),c()}),[r,c]),m=(0,s.useCallback)((()=>{n(!i)}),[n,i]),g=(0,gi.mv)();return(0,R.jsxs)("div",{style:{display:"var(--mini-player-drag-display)"},className:a()(t,rt,{[ot]:e}),children:[(0,R.jsx)("button",{className:dt,onClick:u,children:g.operatingSystem===pi.f.macOS?(0,R.jsx)(ki,{}):(0,R.jsx)(ui.M,{size:"xsmall",className:gt})}),(0,R.jsx)(Ni,{className:ct}),d?(0,R.jsx)("button",{"aria-label":o.Ru.get("desktop.settings.settings"),onClick:m,className:a()(ut,{[mt]:i}),children:(0,R.jsx)(mi.u,{size:"xsmall"})}):(0,R.jsx)("div",{className:xt})]})};var ji=i(3512),yi=i(52427),bi=i(48671),fi=i(16722),wi=i(23009),Si=i(21771),Bi=i(88127),Ei=i(98859),Li=i(8800),Pi=(i(49019),i(4405)),Di=i(18831),Ri=i(33799),Ii=i(24792);const Mi=({onClick:e,item:t,className:i,showDelayOnHover:s})=>(0,R.jsx)(Ii.Zp,{label:(0,Di.gHQ)(t.uri)?o.Ru.get("context-menu.copy-episode-link"):o.Ru.get("context-menu.copy-track-link"),showDelay:s,children:(0,R.jsx)("div",{className:a()(i),children:(0,R.jsx)(Ri.w,{sharingInfo:null,uri:t.uri,onClick:e,size:"small",disableTooltip:!0,ariaLabel:(0,Di.gHQ)(t.uri)?o.Ru.get("context-menu.copy-episode-link"):o.Ru.get("context-menu.copy-track-link"),className:ae})})});var Ti=i(8578),Ai=i(82719),Oi=i(52887);const zi=s.memo((({pipWindowSize:e,item:t,spec:i,logger:s,direction:n,volumeIconRef:l})=>{const{onClickPlayPause:r,onClickVolumeButton:o,onClickVolumeBar:c,onDragVolumeBar:d,onClickSeekBack:u,onClickSeekForward:m}=Z({uri:t.uri,spec:i,logger:s}),g=(0,yi.YQ)(d,500,{leading:!1,trailing:!0});return"DEFAULT"===e.vertical?(0,R.jsx)(Si.v,{onClick:m,className:ee}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:Ft,children:(0,R.jsx)(Pi.M,{mode:Pi.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:n,onToggleMuteClick:o,onVolumeBarClick:c,onVolumeBarDrag:g,className:ee,volumeIconRef:l,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:zt,children:(0,R.jsx)(wi.h,{onClick:u,className:ee,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:At,children:(0,R.jsx)(bi.x,{onClick:r,className:a()(ee,me),showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:Ot,children:(0,R.jsx)(Si.v,{onClick:m,className:ee,showDelayOnHover:1e3})})]})})),Fi=s.memo((({item:e,spec:t,logger:i,pipWindowSize:s,direction:n,volumeIconRef:l})=>{const{onClickPlayPause:r,onClickSkipPrevious:o,onClickSkipNext:c,onClickVolumeButton:d,onClickVolumeBar:u,onDragVolumeBar:m,onClickSeekBack:g,onClickSeekForward:x,onClickShare:h}=Z({uri:e.uri,spec:t,logger:i}),v=(0,yi.YQ)(m,500,{leading:!1,trailing:!0}),p="SMALL"===s.vertical,k="DEFAULT"===s.vertical,N="SMALL"===s.horizontal,C=k&&!N;return(0,R.jsxs)(R.Fragment,{children:[p&&(0,R.jsx)("div",{className:_t,children:(0,R.jsx)(A,{item:e})}),p&&(0,R.jsx)("div",{className:zt,children:(0,R.jsx)("div",{className:te,children:(0,R.jsx)(ve,{item:e,spec:t,logger:i,className:a()(ee,ue,"encore-base-set")})})}),(0,R.jsx)("div",{className:Wt,children:(0,R.jsx)(Pi.M,{mode:Pi.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:p?"horizontal":n,onToggleMuteClick:d,onVolumeBarClick:u,onVolumeBarDrag:v,className:ee,volumeIconRef:l,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:Ft,children:(0,R.jsx)(wi.h,{onClick:g,className:oe,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:Vt,children:(0,R.jsx)(Ei.d,{onClick:o,className:le,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:At,children:(0,R.jsx)(bi.x,{iconSize:C?"medium":"small",onClick:r,className:a()(ee,me),showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:Ht,children:(0,R.jsx)(Li.$,{onClick:c,className:re,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:Ot,children:(0,R.jsx)(Si.v,{onClick:x,className:ce,showDelayOnHover:1e3})}),!p&&(0,R.jsx)(Mi,{item:e,onClick:h,className:ee,showDelayOnHover:1e3}),p&&(0,R.jsx)("div",{className:Ut,children:(0,R.jsx)(Mi,{item:e,onClick:h,className:ee,showDelayOnHover:1e3})})]})})),Wi=s.memo((({item:e,spec:t,logger:i,pipWindowSize:s,direction:n,volumeIconRef:l})=>{const{onClickPlayPause:r,onClickSkipPrevious:o,onClickSkipNext:c,onClickVolumeButton:d,onClickVolumeBar:u,onDragVolumeBar:m,onClickShuffle:g,onClickRepeat:x,onClickShare:h}=Z({uri:e.uri,spec:t,logger:i}),v=(0,yi.YQ)(m,500,{leading:!1,trailing:!0}),p="SMALL"===s.vertical,k="DEFAULT"===s.vertical,N="SMALL"===s.horizontal,C=k&&!N;return(0,R.jsxs)(R.Fragment,{children:[p&&(0,R.jsx)("div",{className:_t,children:(0,R.jsx)(A,{item:e,className:ee})}),p&&(0,R.jsx)("div",{className:zt,children:(0,R.jsx)("div",{className:te,children:(0,R.jsx)(ve,{item:e,spec:t,logger:i,className:a()(ee,ue,"encore-base-set")})})}),!p&&(0,R.jsx)("div",{className:Wt,children:(0,R.jsx)(Pi.M,{mode:Pi.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:n,onToggleMuteClick:d,onVolumeBarClick:u,onVolumeBarDrag:v,className:ee,volumeIconRef:l,isMiniPlayer:!0,showDelayOnHover:1e3})}),p&&(0,R.jsx)("div",{className:Wt,children:(0,R.jsx)(Pi.M,{mode:Pi.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"horizontal",onToggleMuteClick:d,onVolumeBarClick:u,onVolumeBarDrag:v,className:ee,volumeIconRef:l,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:a()(Vt,ee),children:(0,R.jsx)(Ai.w,{renderEnabled:()=>(0,R.jsx)(Ti.a,{size:"small",withSnackbar:!1,className:se,showDelayOnHover:1e3}),renderDisabled:()=>(0,R.jsx)(Bi.u,{onClick:g,className:se,showDelayOnHover:1e3})})}),(0,R.jsx)("div",{className:Ft,children:(0,R.jsx)(Ei.d,{onClick:o,className:ie,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:At,children:(0,R.jsx)(bi.x,{iconSize:C?"medium":"small",onClick:r,className:a()(ee,me),showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:Ot,children:(0,R.jsx)(Li.$,{onClick:c,className:ie,showDelayOnHover:1e3})}),(0,R.jsx)("div",{className:Ht,children:(0,R.jsx)(fi.s,{onClick:x,className:ne,showDelayOnHover:1e3})}),!p&&(0,R.jsx)(Mi,{item:e,onClick:h,className:ee,showDelayOnHover:1e3}),p&&(0,R.jsx)("div",{className:Ut,children:(0,R.jsx)(Mi,{item:e,onClick:h,className:ee,showDelayOnHover:1e3})})]})})),Hi=s.memo((({item:e,spec:t,logger:i})=>{const n=e.uri,[a,l]=s.useState("vertical"),r=s.useRef(null),o=(0,pe.K)();if(s.useEffect((()=>{if(r.current){const e=r.current.getBoundingClientRect().top;l(e-26<80?"horizontal":"vertical")}}),[o.height]),!n)return null;if((0,Ne.N)(e))return(0,R.jsx)(zi,{item:e,spec:t,logger:i,pipWindowSize:o,direction:a,volumeIconRef:r});const c=function(e){if((0,$.p)(e)||(0,Oi.d)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(e);return c?(0,R.jsx)(Fi,{item:e,spec:t,logger:i,pipWindowSize:o,direction:a,volumeIconRef:r}):(0,R.jsx)(Wi,{item:e,spec:t,logger:i,pipWindowSize:o,direction:a,volumeIconRef:r})}));var Vi=i(15327);const Ui=s.memo((({item:e,spec:t,logger:i,onDragEnd:n,onDragStart:a})=>{const l=e.uri,{onClickProgressBar:r,onDragProgressBar:o}=Z({uri:l,spec:t,logger:i}),c=(0,s.useCallback)(((e,t)=>{switch(t){case"drag":return o(e);case"hit":return r(e);default:return(0,q.k)(t)}}),[r,o]);return(0,R.jsx)(Vi.x,{isPreview:!1,onChange:c,onDragStart:a,onDragEnd:n,timerPlacement:"above"})}));i(77369);var _i=i(68832),qi=i(77424),Zi=i(61002),Ki=i(42480),Yi=i(92191),Qi=i(19151),Ji=i(56859);const Xi="hIhk3MQTpgB84lACIjM6",Gi="DnU9bzuup86gxcEp1mF8",$i="q5NCP0Ov_O_r5ttN4Cvx",es="fk2hg3x5NtdySZwf9etI",ts="qYEtpfTbHGJflJS6Tia0",is="MB1JAJ3epPm2fATILHP6",ss="n_Fzcd2Qsznd98xHF0PH",ns="FlybydLclZFeCsTMLmMp",as=(e,t)=>e.uid??`${e.uri}:${t}`,ls="ease-in-out",rs=e=>{e.animate?e.animate({opacity:[0,1]},{duration:250,easing:ls,fill:"forwards"}):e.style.opacity="1"},os=(e,t,i)=>{if(!e.animate)return void i();e.animate({opacity:[1,0]},{duration:250,easing:ls}).addEventListener("finish",i,{once:!0})},cs=s.memo((function({item:e,section:t,flipId:i}){const{usePlayContextItem:n}=(0,Ki.b)(e.uri,t),{triggerPlay:a}=n({uri:e.uri}),l=(0,s.useCallback)((()=>{a()}),[a]),r=(0,s.useCallback)((e=>{"Enter"===e.key&&l()}),[l]);return e.name&&e.type!==Qi.c.AD?(0,R.jsx)(_i.lf,{flipId:i,onAppear:rs,onExit:os,children:(0,R.jsxs)("div",{className:Gi,role:"button",onDoubleClick:l,onKeyDown:r,tabIndex:0,children:[(0,R.jsxs)(d.E,{variant:"bodySmall",className:ts,children:[(0,R.jsx)("span",{className:is,children:e.name}),e.artists&&(0,R.jsx)("span",{className:ss,children:e.artists?.map((e=>e.name)).join(o.Ru.getSeparator())})]}),(0,R.jsxs)(d.E,{variant:"bodySmall",children:[(0,R.jsx)("span",{className:$i,children:(0,st.f)(e.duration.milliseconds)}),(0,R.jsx)(qi.A,{size:"small",className:es,role:"button",onClick:l})]})]})},i):null})),ds=()=>{const{queued:e,nextUp:t}=(0,Yi.H)(),i=e.slice(0,33),n=t.slice(0,33-i.length),a=(0,s.useMemo)((()=>[...i,...n].filter(Ji.P).map(as).join("")),[i,n]);return(0,R.jsx)(_i.ZI,{flipKey:a,className:ns,children:(0,R.jsxs)("div",{className:Xi,role:"list",children:[i.map(((e,t)=>{const i=as(e,t);return(0,R.jsx)(cs,{section:Zi.$.NextInQueue,item:e,flipId:i},i)})),n.map(((e,t)=>{const i=as(e,t);return(0,R.jsx)(cs,{section:Zi.$.NextUp,item:e,flipId:i},i)}))]})})};var us=i(40765),ms=i(77075),gs=i(30831);const xs="yyIuSvak95xuofDMzlAn",hs=()=>{const e=(0,l.NC)(Ge.aoy),[t,i]=(0,ti.x)($t,!1),[s,n]=(0,ti.x)(ei,!1);return(0,R.jsx)("div",{className:xs,children:(0,R.jsxs)(us.g,{children:[(0,R.jsx)(ms.X,{defaultChecked:t,onChange:()=>i(!t),children:(0,gs.v)("Enable dynamic colors")}),e&&(0,R.jsx)(ms.X,{defaultChecked:s,onChange:()=>n(!s),children:(0,gs.v)("Enable queue")})]})})};var vs=i(8143),ps=i(97020);const ks=(e,t)=>{const i=(0,ps.j)(),[n,a]=(0,s.useState)(!1),[r,o]=(0,s.useState)(!1),c=(0,s.useRef)(r),d=(0,l.NC)(Ge.ikI),u=(0,s.useRef)(null),[m,g]=(0,s.useState)(!0),x=(0,s.useCallback)((()=>{u.current&&clearTimeout(u.current),e&&m&&(u.current=setTimeout((()=>{a(!0)}),1e3*d))}),[d,e,m]);(0,s.useEffect)((()=>{const e=()=>{g(!0)},i=()=>{g(!1),a(!1),u.current&&clearTimeout(u.current)};return t?.addEventListener("mouseenter",i),t?.addEventListener("mouseleave",e),()=>{t?.removeEventListener("mouseenter",i),t?.removeEventListener("mouseleave",e)}}),[t]),(0,s.useEffect)((()=>{e||a(!1)}),[e]);const h=(0,s.useCallback)((()=>{a(!1),x()}),[x]),v=(0,yi.YQ)(h,100,{leading:!0,trailing:!1,maxWait:1e3*(d-1)});return(0,s.useEffect)((()=>{const t=window.documentPictureInPicture?.window;return e&&t?.addEventListener("pointermove",v),()=>{t?.removeEventListener("pointermove",v),u.current&&clearTimeout(u.current)}}),[v,e]),(0,s.useEffect)((()=>{c.current!==n&&(e=>{const t=window.documentPictureInPicture?.window?.document;t&&"startViewTransition"in t&&(t.documentElement.setAttribute("data-transition","pip-mini-player"),t.startViewTransition((()=>{(0,vs.flushSync)(e)})).finished.finally((()=>{t.documentElement.removeAttribute("data-transition")})))})((()=>{o(n)})),c.current=n}),[n]),(0,s.useEffect)((()=>{e&&a(!i)}),[i,e]),r};var Ns=i(75986);function Cs(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}var js=i(60986);var ys=i(6512),bs=i(30929),fs=i(87346),ws=i(39159),Ss=i(34720),Bs=i(84925),Es=i(40185);var Ls=i(61315);const Ps=()=>(0,R.jsxs)("svg",{className:Jt,width:"9",height:"9",viewBox:"0 0 9 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,R.jsx)("line",{x1:"0.823223",y1:"8.82322",x2:"8.82322",y2:"0.823223",strokeWidth:"0.5"}),(0,R.jsx)("line",{x1:"4.82322",y1:"8.82322",x2:"8.82322",y2:"4.82322",strokeWidth:"0.5"})]}),Ds=(0,s.memo)((()=>{const e=(0,s.useRef)(null),[t,i]=(0,s.useState)(!1),n=(0,l.NC)(Ge.gf),d=(0,l.NC)(Ge.aoy),[u,m]=(0,s.useState)(!1),g=(0,pe.K)(),x="SMALL"===g.vertical,h="SMALL"===g.horizontal,[v,p]=(0,s.useState)(null),[k,N]=(0,s.useState)(null),C=(0,s.useRef)(null),[j,f]=(0,s.useState)(!1),w=(0,gi.mv)().operatingSystem===pi.f.Windows,{isPlayingVideo:S}=(0,tt.o)((e=>({isPlayingVideo:(0,it.A3)(e)}))),{item:E,context:L}=(0,c.L)()??{},P=640,D="xlarge",I=(0,l.NC)(Ge.Ln9),[M]=(0,ti.x)(ei,!1),T=M&&d,A=(0,s.useRef)(null),O=ks(!u,A.current),z=(0,s.useMemo)((()=>(0,st.h)(E?.images??void 0,{desiredSize:P,desiredLabel:D})),[E?.images,P]),F=function(){const e=(0,tt.o)((e=>e?.item),((e,t)=>e?.uri===t?.uri)),t=(0,st.h)(e?.images||void 0,{desiredLabel:"large",desiredSize:600})??e?.images?.[0]?.url??"",{data:i}=(0,Es.g)([t]);return i??null}(),W=F?.higherContrast,H=(0,Ss.z)(z,"transparent"),V=(0,l.NC)(Ge.a4n);(0,fs.M)({desiredSize:P,desiredLabel:D});const{spec:U,logger:_}=(0,B.r)(r.w,{});(({spec:e,logger:t})=>{const i=(0,Ns.ox)(),n=(0,s.useRef)(null);null===n.current&&(n.current=Cs(i)),(0,js.s)((()=>{const s=Cs(i);null!==s&&null!==n.current&&(t.logInteraction(e.dragUiResize2d({startWidthPx:n.current.width,startHeightPx:n.current.height,endWidthPx:s.width,endHeightPx:s.height})),n.current=s)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:_,spec:U}),(({spec:e,logger:t,pipWindow:i})=>{(0,s.useEffect)((()=>{if(!i)return;const s=s=>{if(s.currentTarget===i){const i=e.windowControlsFactory().closeButtonFactory().hitUiHide();t.logInteraction(i)}};return i.addEventListener("pagehide",s),()=>{i.removeEventListener("pagehide",s)}}),[t,i,e])})({logger:_,spec:U,pipWindow:window.documentPictureInPicture?.window??null});const{setVideoPlayerUIFlag:q}=(0,xi.d)(),[Z,K]=(0,s.useState)("");(0,s.useLayoutEffect)((()=>{K(lt);const e=window.documentPictureInPicture?.window,t=e=>{"?"===e.key&&m((e=>!e)),"Escape"===e.key&&m(!1)};return e?.addEventListener("keydown",t),()=>{e?.removeEventListener("keydown",t)}}),[]),(0,s.useEffect)((()=>{V&&q(hi.nP.documentPip,!0)}),[V,q]);const{enqueueSnackbar:Y}=(0,bs.d)(),Q=(0,s.useCallback)((e=>{var t;(t=e.target)&&"object"==typeof t&&"nodeName"in t&&"A"===t.nodeName&&"_blank"!==e.target.target&&(y()?b():Y(o.Ru.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")))}),[Y]);((e,t)=>{const i=(0,Ns.ox)(),n=t??i;(0,s.useEffect)((()=>{e&&n&&(n.document.title=e)}),[e,n])})(o.Ru.get("web-player.pip-mini-player.window-title"));const J=(0,l.NC)(Ge.HYy),X=ii(),G=(0,Ls.n)(U?.getAbsoluteLocation(),U,J),[$,ee]=(0,s.useState)(!1),te=(0,s.useCallback)((()=>{ee(!0)}),[]),ie=(0,s.useCallback)((()=>{ee(!1)}),[]),se=(0,s.useCallback)((()=>{i(!0)}),[]),ne=(0,s.useCallback)((()=>{i(!1)}),[]),ae=(0,s.useCallback)((()=>{f(!0)}),[]),le=(0,s.useCallback)((()=>{f(!1),ne()}),[ne]),re=(0,s.useCallback)((()=>{if(C.current){const e=C.current.getBoundingClientRect(),t=.5,i=.5,s=e.width*t-2.5,n=e.width*i-2.5;p(s),N(n)}}),[]);(0,s.useEffect)((()=>{re()}),[g.width,g.height,re]),(0,s.useEffect)((()=>{const e=()=>{re()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[re]),(0,s.useEffect)((()=>{const e=new ResizeObserver(re),t=C.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}}),[re]);const oe=(0,s.useCallback)((e=>{if(!t)return;const i=C.current;if(i){const t=i.getBoundingClientRect(),s=("rtl"===document.documentElement.dir?t.right-e.clientX:e.clientX-t.left)/t.width,n=1-s,a=t.width*s-2.5,l=t.width*n-2.5;a>40&&l>80&&(p(a),N(l))}}),[t]);if(!E||!L)return null;const ce=(0,Ne.N)(E),de=!I&&!ce,ue={"--mini-player-display":"none","--mini-player-drag-display":"none"};X&&W&&(ue["--extracted-background-color"]=W?.backgroundBase.toCSS(ws.a.RGBA)??H,ue["--extracted-text-subdued"]=W?.textSubdued.toCSS(ws.a.RGBA));const me={"--background-image-url":`url(${z})`,"--background-image-width":"640px","--background-image-height":"640px","--player-controls-max-width":ce?"140px":"260px","--cinema-mode-border-radius":w?"4px":"6px","--cinema-mode-top-offset":w?"-25px":"-26px",display:"var(--mini-player-display)",cursor:t?"grabbing":"default"};return(0,R.jsx)(ys.SnackbarProvider,{domRootRef:e,children:(0,R.jsxs)("div",{ref:A,className:a()("encore-dark-theme","encore-small-devices-theme",nt,{[at]:X}),style:ue,children:[(0,R.jsx)(Ci,{ambientMode:O,showSettings:u,setShowSettings:m}),(0,R.jsxs)("div",{className:a()(vt,pt,{[ot]:O,[Dt]:T,[It]:!0}),style:me,ref:G,onMouseLeave:le,onMouseEnter:ae,children:[T&&(0,R.jsx)("div",{className:Pt,children:(0,R.jsx)(ds,{})}),de&&(0,R.jsx)(_e,{spec:U,logger:_}),(0,R.jsx)(Bs.d,{dynamicColors:F,children:(0,R.jsx)(oi,{hideBackground:S,ambientMode:O,children:(0,R.jsx)("div",{className:kt,id:"document-pip-main-container",children:(0,R.jsx)(Gt,{})})})}),!x&&(0,R.jsx)(De,{item:E,className:Lt,onClick:Q,isSmallWidth:h}),x?(0,R.jsxs)("div",{ref:C,className:Tt,style:{display:"grid",gridTemplateColumns:`${v}px 5px ${k}px`,gridTemplateAreas:"'contextinfo divider playercontrols'"},role:"button",tabIndex:0,onMouseMove:oe,onMouseUp:ne,onMouseLeave:ne,children:[(0,R.jsx)("div",{className:Mt,children:(0,R.jsx)(De,{item:E,className:Lt,onClick:Q,isSmallWidth:h,ambientMode:O})}),j&&!h&&(0,R.jsx)("div",{className:qt,dir:"ltr",children:(0,R.jsx)("div",{className:a()(Kt,{[Yt]:t}),onMouseDown:se,tabIndex:-1,role:"button",children:(0,R.jsx)("div",{className:Zt})})}),(0,R.jsxs)("div",{className:a()("encore-over-media-set",ft,{[Et]:$,[Bt]:(0,Ne.N)(E)}),dir:"ltr","data-testid":Ke,children:[(0,R.jsx)("div",{className:a()(wt,Qt),dir:"ltr",children:(0,R.jsx)(Hi,{item:E,spec:U,logger:_})}),(0,R.jsx)("div",{className:a()(St),dir:"ltr",children:(0,R.jsx)(Ui,{item:E,spec:U,logger:_,onDragEnd:ie,onDragStart:te})})]})]}):(0,R.jsxs)("div",{className:a()("encore-over-media-set",ft,{[Et]:$,[Bt]:(0,Ne.N)(E),[at]:X}),dir:"ltr","data-testid":Ke,children:[(0,R.jsx)("div",{className:a()(wt,{[Rt]:!0}),dir:"ltr",children:(0,R.jsx)(Hi,{item:E,spec:U,logger:_})}),(0,R.jsx)("div",{className:a()(St),dir:"ltr",children:(0,R.jsx)(Ui,{item:E,spec:U,logger:_,onDragEnd:ie,onDragStart:te})})]})]}),(0,R.jsx)("div",{className:Z,children:(0,R.jsx)(ji.B,{fadeIn:!1})}),(0,R.jsx)("div",{ref:e,className:ht}),u&&n&&(0,R.jsx)(hs,{}),(0,R.jsx)(Ps,{})]})})}))},57551:(e,t,i)=>{i.d(t,{a:()=>s.a});var s=i(85397)},83874:(e,t,i)=>{i.d(t,{A:()=>s});const s={videoPlayerContainer:"ngkFeIGFyNUaxRspbs5H"}},92191:(e,t,i)=>{i.d(t,{H:()=>l,K:()=>a});i(2557);var s=i(20757),n=i(25140);function a(e){return"autoplay"===e?.provider}function l(){const{uri:e,description:t}=(0,n.f)(),{current:i,nextUp:l,queued:r}=(0,s.w)(),o=l.filter((e=>a(e)?e:"autoplay"!==e.provider)),c=!!r?.length,d=!!o?.length;return{uri:e,description:t,current:i,nextUp:o,queued:r,isEmpty:!1===(i||c||d),hasQueuedTracks:c,hasNextTracks:d}}}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map