"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6051,9319],{12286:(e,t,a)=>{a.d(t,{X:()=>s});var i=a(1231);function s(e){return[i.kw.YES,i.kw.DOWNLOADING,i.kw.WAITING].includes(e)}},20449:(e,t,a)=>{a.d(t,{W:()=>z});a(77369);var i=a(97500),s=a.n(i),n=a(18831),r=a(70397),o=a(95638),l=a(63388),c=a(39463);const d=Spicetify.GraphQL.Definitions["internalLinkRecommenderEpisode"]=new l.l("internalLinkRecommenderEpisode","query","9b2aff11e012b072f475dc24956f22925558047b6f6a0e81b088f19b4bbc7bed",null);var u=a(78428),p=a(30758),m=a(62411),y=a(26405),h=a(71716),g=a(35054),v=a(76020),f=a(74515),x=a(4880),b=a(40100),I=a(28054),_=a(80464),P=a(49133),S=a(99893),w=a(52567),A=a(94545),N=a(24886),C=a(72432),E=a(10167),k=a(2897),R=a(85370),j=a(86070);const T=e=>`activation-trigger-mme-${e}`,U=p.memo((function({index:e=-1,audio:t,contentInformation:a,coverArt:i,contentRatingLabel:s,description:r,mediaTypes:o,releaseDate:l,name:c,playable:d,playedState:u,podcastSubscription:U,sharingInfo:M,showName:D,showTrailer:W,showTypes:O,showUri:B,totalMilliseconds:V,type:G,uri:$,sixteenByNineCoverImages:q,dynamicColors:L}){const z=u.playPositionMilliseconds,F=(0,p.useRef)(null),[Y,X]=(0,p.useState)(u.state===k._w.Completed),{draggable:H,onDragStart:Z}=(0,I.P)(),Q=(0,_.V)(),J=(0,N.y)(),K=(0,m.wA)(),{isActive:ee,isPlaying:te,togglePlay:ae}=(0,C.P)({uri:$},{featureIdentifier:"episode"}),[ie]=(0,E.S)(1e4,(e=>e?.item?.uri===$));(0,p.useEffect)((()=>{te&&(F.current=ie)}),[te,ie]),(0,p.useEffect)((()=>{!te&&F.current&&V<=F.current&&X(!0)}),[te,V]);const se=(0,p.useCallback)((e=>{e||(F.current=0),X(e)}),[]),ne={uri:B,name:D,trailer:W,showTypes:O},re=(0,P.C)({audio:t,name:c,uri:$,mediaTypes:o,coverArt:{sources:i}},ne),oe=(0,p.useCallback)((()=>{G!==k.I_.Episode?Q?re():ae():x.h.set((()=>({triggerId:T($),triggerAction:null})))}),[G,Q,$,re,ae]),le=U?.isPaywalled??!1,ce=U?.isUserSubscribed??!1,de=le&&!ce,ue=le&&Q,{badges:pe}=(0,R.b)({contentRating:s,isPaywalled:le}),me=(0,p.useCallback)((()=>K((0,y.Tf)(B))),[B,K]),ye=(0,p.useCallback)((e=>{let t=e;return(de||ue)&&(t=(0,j.jsx)(b.N,{enabled:!0,showUri:B,children:t})),!d&&pe.nineteen&&(t=(0,j.jsx)("div",{onClick:e=>{e.stopPropagation(),me()},children:e})),t=(0,j.jsx)(h.k,{id:T($),targetURI:(0,n.o_h)($),children:t}),t}),[de,ue,d,pe.nineteen,$,B,me]);return(0,j.jsx)(g.h,{menu:(0,j.jsx)(v.b,{uri:$,showUri:B,sharingInfo:M,isPlayed:Y,onMarkAsPlayed:se}),children:(0,j.jsx)(f.k,{requestId:void 0,index:e,uri:$,size:J,images:i||[],name:c,showName:D,description:r,isPlayable:d||de,fullyPlayed:Y,durationMs:V,releaseDate:l,resumePositionMs:F.current??z,draggable:H,handleDragStart:e=>{if(e.target!==e.currentTarget)return;Z(e,{itemUris:[$],dragLabelText:`${c} â€¢ ${D}`,contextUri:B})},handlePlaybackClick:oe,isCurrentlyPlaying:ee,isPaywalled:le,isUserSubscribed:ce,isPlaying:te,position:te?ie:void 0,episodeSharingInfo:M,onMarkAsPlayed:se,contentInformation:a,showUri:B,mediaTypes:o??void 0,badges:(0,j.jsxs)(j.Fragment,{children:[pe.explicit&&(0,j.jsx)(S.U,{}),pe.paid&&(0,j.jsx)(w.y,{}),pe.nineteen&&(0,j.jsx)(A.q,{size:16})]}),playButtonWrapper:ye,dynamicColors:L,sixteenByNineCoverImages:q})})}));a(2557);var M=a(97011),D=a(19151);var W=a(45647),O=a(53143),B=a(62659);const V="GgMHVmfXNzteIydSWMIA",G="GcupflQsYyy0IMOsCeD1",$="A4FqrLbXeENogU0IRaPn",q="YCYs0Gv5B5ctDN0f5Zby",L=({uri:e,isFullPage:t=!1})=>{const{data:a}=(i={uri:e},(0,c.I)(d,i,o));var i,o;const l=a?.seoRecommendedEpisode.totalCount,u=a?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(u),m=t?p:p.slice(0,5);if(0===l)return null;const y=(0,n.o_h)(e)?.id,h=`spotify:app:episode:${y}:more-like-this`;return(0,j.jsxs)("section",{className:s()(V,{[G]:!t}),"data-testid":"episode-list",children:[(0,j.jsx)(W.k,{title:r.Ru.get("internal-link-recommender.more-episodes-like-this"),showSeeAll:!t,seeAllUri:h}),m.map((({data:e},t)=>{const a=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;if(!a)return null;const i=(0,O.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet)??void 0,s="ImageV2"===e.visualIdentity?.sixteenByNineCoverImage?.image?.data?.__typename?e.visualIdentity.sixteenByNineCoverImage.image.data.sources?.map((e=>({url:e.url,width:e.maxWidth,height:e.maxHeight}))):void 0;return e&&(0,j.jsxs)("div",{className:q,children:[(0,j.jsx)("hr",{className:$,"aria-hidden":!0}),(0,j.jsx)(U,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,releaseDate:e.releaseDate,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,B.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(n=a.trailerV2?.data,n&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(n)?{type:D.c.EPISODE,uri:n.uri,name:n.name,coverArt:n.coverArt?.sources||[],audio:n.audio,audioPreview:(0,M.xh)(n),sharingInfo:n.sharingInfo,duration:{milliseconds:n.duration.totalMilliseconds},contentRating:n.contentRating,mediaTypes:n.mediaTypes}:null),showName:a.name,showTypes:a.showTypes,showUri:a.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri,sixteenByNineCoverImages:s,dynamicColors:i},`${e.uri}/${t}`)]},`${t}${e.uri}`);var n}))]})},z=e=>{const t=(0,u.D)({entityType:D.c.EPISODE,componentType:"list",uri:e.uri});return(0,j.jsx)(o.s,{onError:t,children:(0,j.jsx)(L,{...e})})}},85518:(e,t,a)=>{a.d(t,{j:()=>A});var i=a(55797),s=a(70397);const n="wIA_5Ypq0rltNPeZQpM4",r="Swi6YtNEFCCVz8l4y75v",o="pklLPOhfigdytL9bPoth",l="sb24Y8kdMZInJ8aI8dXT";var c=a(18298),d=a(2401),u=a(86070);function p({ariaValueText:e,max:t,current:a}){const i={transform:`translateX(-${100-(t&&a?100*Math.min(1,a/t):0)}%)`},p=Math.ceil(Math.max(t-a,0)),{hours:m,minutes:y,seconds:h}=(0,d.S)(t),g=(0,c.j)({h:m,m:y,s:h}),{hours:v,minutes:f,seconds:x}=(0,d.S)(p),b=(0,c.j)({h:v,m:f,s:x}),I=e||s.Ru.get("time.left-of",b,g);return(0,u.jsxs)("div",{className:n,role:"progressbar",tabIndex:0,"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":I,children:[(0,u.jsx)("div",{className:r}),(0,u.jsx)("div",{className:o,children:(0,u.jsx)("div",{"data-testid":"progressBarFg",className:l,style:i})})]})}const m="qfYkuLpETFW3axnfMntO",y="_q93agegdE655O5zPz6l",h="z7Yl7CIT1AB0y91f_moh",g="iLIlkUcfIq56KncGtX7u",v="nV50yZ6BR_TIuWP3l7b1",f="qLjIx_SzBEpDRA_q7kxQ";var x=a(78717),b=a(60940),I=a(97500),_=a.n(I),P=a(97471);const S="xWm_uA0Co4SXVxaO7wlB",w=({durationMs:e,className:t,displaySeconds:a})=>{const{hours:i,minutes:n,seconds:r}=(0,d.S)(e);a=!1!==a&&!i&&r;const o=(0,c.j)({h:i,m:n,s:a?r:0});return o?(0,u.jsx)("span",{className:_()(S,t),children:s.Ru.get("time.left",o)}):null},A=e=>{const{resumePositionMs:t=0,releaseDate:a,isPlaying:n,fullyPlayed:r,durationMs:o,position:l=t,compactVariant:c=!1,className:d,progressBarClassName:I,progressStateClassName:S,releaseDateClassName:A}=e,N=a&&a.isoString?(0,u.jsx)(x.E,{as:"p",variant:"bodySmall",className:y,children:(0,i.V2)((0,i.ad)(a.isoString),a.precision)}):null,C=(()=>{if(0===o)return null;if(r&&!n)return(0,u.jsxs)("div",{className:_()(g,S),children:[(0,u.jsx)(x.E,{as:"p",variant:"bodySmall",className:h,children:s.Ru.get("episode.audiobook.chapter.finished")}),(0,u.jsx)(b.i,{size:"small",className:f,"aria-hidden":"true"})]});if(l>0||n){const e=Math.ceil(Math.max(o-l,0));return(0,u.jsx)("div",{className:_()(g,S),children:(0,u.jsx)(x.E,{as:"p",variant:"bodySmall",className:h,children:(0,u.jsx)(w,{durationMs:e,displaySeconds:!c&&void 0})})})}return(0,u.jsx)(x.E,{as:"p",variant:"bodySmall",className:_()(y,A),"data-testid":"episode-progress-not-played",children:(0,u.jsx)(P.d,{durationMs:o,displaySeconds:!c&&void 0})})})(),E=0===o?null:!r&&l>0||n?(0,u.jsx)("div",{className:_()(v,I),children:(0,u.jsx)(p,{current:l,max:o})}):null;return N||C||E?(0,u.jsxs)("div",{className:_()(m,d),children:[N,C,E]}):null}},97011:(e,t,a)=>{a.d(t,{xh:()=>y,Gv:()=>I,S:()=>h,_v:()=>v,e$:()=>f});a(2557),a(86328),a(77369),a(70397);var i=a(2897),s=a(19151),n=a(99875),r=a(53143);const o="recent";var l=a(71572),c=a(62659),d=a(56859),u=a(22762);function p(e){switch(e){case i.$c.AgeRestricted:return n.Uk.AgeRestricted;case i.$c.CatalogueRestricted:return n.Uk.CatalogueRestricted;case i.$c.CountryRestricted:return n.Uk.CountryRestricted;case i.$c.Explicit:return n.Uk.Explicit;case i.$c.PaymentRequired:return n.Uk.PaymentRequired;case i.$c.Playable:return n.Uk.Playable;case i.$c.Unavailable:default:return n.Uk.Unavailable}}function m(e,t=!1){return{playable:!t&&e.playable,reason:t?n.Uk.Anonymous:p(e.reason)}}function y(e){return e.previewPlayback?.audioPreview?.cdnUrl?{url:e.previewPlayback.audioPreview.cdnUrl}:null}function h(e){const t="Podcast"!==(a=e.podcastV2).data.__typename?null:{uri:a.data.uri,name:a.data.name,coverArt:a.data.coverArt?.sources||[],trailer:(i=a.data.trailerV2,("Episode"===i?.data.__typename?{uri:i.data.uri}:null)||null),showTypes:(a.data.showTypes||[]).filter(g)};var a,i;const n=(0,c.Wx)(e?.restrictions,e.playability),o=(0,u.p)(e.gatedEntityRelations)?.accessInfo,l=(0,u.v)(o);return{type:s.c.EPISODE,uri:e.uri,name:e.name,description:e.description||"",htmlDescription:e.htmlDescription||"",podcast:t,episodeType:e.type,mediaTypes:e.mediaTypes,coverArt:e.coverArt?.sources||[],audio:e.audio,releaseDate:(d=e.releaseDate,d?{isoString:d.isoString,precision:d.precision}:null),playedState:e.playedState,playability:m(e.playability),audioPreview:y(e),sharingInfo:e.sharingInfo,duration:{milliseconds:e.duration.totalMilliseconds},contentRating:e.contentRating,segmentsCount:0,podcastSubscription:n,contentInformation:e.contentInformation,transcript:e.transcripts?.items||null,upsellExplanation:l?b(l):null,gatedEntityRelations:I(e.gatedEntityRelations),hasGatedEntityRelationAccess:Boolean(o?.isUserMemberOfAtLeastOneGroup),dynamicColors:(0,r.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),sixteenByNineCoverImages:"ImageV2"===e.visualIdentity?.sixteenByNineCoverImage?.image?.data?.__typename?e.visualIdentity.sixteenByNineCoverImage.image.data.sources?.map((e=>({url:e.url,width:e.maxWidth,height:e.maxHeight}))):null};var d}function g(e){return!!e}function v(e){const t="Episode"===e.trailerV2?.data.__typename?(a=e.trailerV2.data,{type:s.c.EPISODE,uri:a.uri,name:a.name,coverArt:a.coverArt?.sources||[],audio:a.audio,audioPreview:y(a),sharingInfo:a.sharingInfo,duration:{milliseconds:a.duration.totalMilliseconds},contentRating:a.contentRating,mediaTypes:a.mediaTypes}):null;var a;const i=(0,l.q)(e?.accessInfo?.unlockedBy),n=(0,u.p)(e.gatedEntityRelations),r=(0,u.v)(n?.accessInfo);return{type:s.c.SHOW,uri:e.uri,name:e.name,description:e.description||"",htmlDescription:e.htmlDescription||"",coverArt:e.coverArt?.sources||[],trailer:t,topics:e.topics.items,podcastType:e.musicAndTalk?"SHOW":"PODCAST",showTypes:(e.showTypes||[]).filter(g),publisherName:e.publisher?.name||"",consumptionOrder:o,gatedContentAccessReason:i,isLocked:null===i,rating:e.rating,isSaved:e.saved,gatedEntityRelations:I(e.gatedEntityRelations),hasGatedEntityRelationAccess:Boolean(!!n&&n?.accessInfo?.isUserMemberOfAtLeastOneGroup),upsellExplanation:r?b(r):null,gatedEntityCoverArt:n?.coverArt?.sources||null}}function f(e){const t=!1===e?.isUserMemberOfAtLeastOneGroup,a=e?.unlockedBy?.includes(i.UG.Abp);return t&&!a}function x(e){return null!==e.displayText}function b({title:e,body:t,actionText:a,url:i}){return e&&t&&a&&i?{title:e,body:t,cta:a,url:i}:null}function I(e){return{entitiesWithValueProps:e.map((({badges:e,relatedEntity:t,summary:a,fallbackGatedEntity:i})=>"EpisodeResponseWrapper"===t?.__typename||"PodcastResponseWrapper"===t?.__typename?{uri:t._uri,summary:a?.forUserWithoutAccess?{forUserWithoutAccess:a.forUserWithoutAccess,forUserWithAccess:a.forUserWithAccess??void 0}:void 0,valueProps:e.filter(x),fallbackNavigation:i?.description?{uri:i.uri,description:i?.description}:void 0}:null)).filter(d.P)}}},97471:(e,t,a)=>{a.d(t,{d:()=>c});var i=a(97500),s=a.n(i),n=a(2401),r=a(18298);const o="UyzJidwrGk3awngSGIwv";var l=a(86070);const c=({durationMs:e,className:t,displaySeconds:a})=>{const{hours:i,minutes:c,seconds:d}=(0,n.S)(e);return a=!1!==a&&!i&&d,(0,l.jsx)("span",{className:s()(o,t),children:(0,r.j)({h:i,m:c,s:a?d:0})})}}}]);
//# sourceMappingURL=6051.js.map